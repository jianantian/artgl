{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/conf/folder.vue?a89a","webpack:///./src/views/example/example-page.vue?b48c","webpack:///./src/views/scene-panel/geometry-view.vue?5228","webpack:///./src/views/shader-editor.vue?57d3","webpack:///./src/components/conf/editors.vue?e8e8","webpack:///./src/assets/artgl.svg","webpack:///./src/components/conf/number.vue?4243","webpack:///./src/components/graph/dag-node.vue?da78","webpack:///./src/components/conf/config.vue?ec2c","webpack:///./src/views/scene-panel/scene-node-view.vue?af62","webpack:///./src/App.vue?926f","webpack:///./src/views/home.vue?4bfa","webpack:///./src/views/object-panel/object-panel.vue?dc13","webpack:///./src/components/graph/graph-viewer.vue?3415","webpack:///./src/views/scene-panel/scene-panel.vue?d008","webpack:///./src/views/config-panel.vue?e015","webpack:///./src/views/viewer-canvas.vue?228c","webpack:///./src/views/viewer.vue?4b5d","webpack:///./src/assets/art.svg","webpack:///./src/App.vue?1a35","webpack:///./src/components/nav/top-nav.vue?9d5b","webpack:///./src/components/nav/top-nav.vue?655d","webpack:///./src/components/nav/top-nav.vue?6e15","webpack:///./src/components/nav/top-nav.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?bfbe","webpack:///./src/App.vue","webpack:///./src/views/home.vue?9cc9","webpack:///./src/views/home.vue","webpack:///./src/views/viewer.vue?1807","webpack:///./src/views/config-panel.vue?bca2","webpack:///./src/components/conf/config.vue?e19c","webpack:///./src/components/conf/folder.vue?39f9","webpack:///./src/components/conf/item.vue?aefc","webpack:///./src/components/conf/editors.vue?076f","webpack:///./src/components/conf/number-slider.vue?ecf5","webpack:///./src/components/conf/number-slider.vue?793d","webpack:///./src/components/conf/number-slider.vue?3c5a","webpack:///./src/components/conf/number-slider.vue","webpack:///./src/components/conf/editors.vue?a671","webpack:///./src/components/conf/editors.vue?1ad0","webpack:///./src/components/conf/editors.vue","webpack:///./src/components/conf/number.vue?ee58","webpack:///./src/components/conf/number.vue?a266","webpack:///./src/components/conf/number.vue?18ee","webpack:///./src/components/conf/number.vue","webpack:///./src/components/conf/boolean.vue?a0f0","webpack:///./src/components/conf/boolean.vue?7b72","webpack:///./src/components/conf/boolean.vue?e141","webpack:///./src/components/conf/boolean.vue","webpack:///./src/components/conf/item.vue?e0f7","webpack:///./src/components/conf/item.vue?f29a","webpack:///./src/components/conf/item.vue","webpack:///./src/components/conf/folder.vue?0a40","webpack:///./src/components/conf/folder.vue?0004","webpack:///./src/components/conf/folder.vue","webpack:///./src/components/conf/config.vue?0145","webpack:///./src/components/conf/config.vue?ec76","webpack:///./src/components/conf/config.vue","webpack:///../src/webgl/gl-info.ts","webpack:///../src/webgl/shader.ts","webpack:///../src/math/uuid.ts","webpack:///../src/math/vector3.ts","webpack:///../src/math/vector4.ts","webpack:///../src/math/matrix4.ts","webpack:///../src/math/util.ts","webpack:///../src/math/euler.ts","webpack:///../src/math/quaternion.ts","webpack:///../src/math/vector2.ts","webpack:///../src/webgl/shader-util.ts","webpack:///../src/webgl/uniform/uniform-util.ts","webpack:///../src/webgl/uniform/uniform.ts","webpack:///../src/webgl/attribute.ts","webpack:///../src/webgl/uniform/uniform-texture.ts","webpack:///../src/webgl/const.ts","webpack:///../src/webgl/program.ts","webpack:///../src/webgl/program-manager.ts","webpack:///../src/webgl/attribute-buffer-manager.ts","webpack:///../src/webgl/states/gl-color-buffer.ts","webpack:///../src/webgl/states/gl-depth-buffer.ts","webpack:///../src/webgl/states/gl-texture-slot.ts","webpack:///../src/webgl/states/gl-state.ts","webpack:///../src/webgl/texture-manager.ts","webpack:///../src/core/texture.ts","webpack:///../src/webgl/gl-framebuffer.ts","webpack:///../src/webgl/framebuffer-manager.ts","webpack:///../src/webgl/gl-stat.ts","webpack:///../src/webgl/vao.ts","webpack:///../src/webgl/gl-renderer.ts","webpack:///../src/math/observable/vector3-observable.ts","webpack:///../src/scene/transformation.ts","webpack:///../src/scene/scene-node.ts","webpack:///../src/core/camera.ts","webpack:///../src/camera/perspective-camera.ts","webpack:///../src/engine/uniform-proxy.ts","webpack:///../src/core/observable.ts","webpack:///../src/core/draw-state.ts","webpack:///../src/core/render-object.ts","webpack:///../src/object/mesh.ts","webpack:///../src/math/entity/box3.ts","webpack:///../src/math/entity/sphere.ts","webpack:///../src/core/geometry.ts","webpack:///../src/math/entity/face3.ts","webpack:///../src/math/entity/line3.ts","webpack:///../src/core/buffer-data.ts","webpack:///../src/geometry/standard-geometry.ts","webpack:///../src/geometry/geo-lib/plane-geometry.ts","webpack:///../src/render-graph/quad-source.ts","webpack:///../src/util/file-io.ts","webpack:///../src/util/array.ts","webpack:///../src/shader-graph/util/indent.ts","webpack:///../src/shader-graph/util/code-builder.ts","webpack:///../src/core/dag-node.ts","webpack:///../src/shader-graph/shader-node.ts","webpack:///../src/shader-graph/code-gen.ts","webpack:///../src/shader-graph/parser/shader-function-meta.ts","webpack:///../src/shader-graph/shader-function.ts","webpack:///../src/shader-graph/built-in/transform.ts","webpack:///../src/shader-graph/node-maker.ts","webpack:///../src/shader-graph/shader-graph.ts","webpack:///../src/core/shading.ts","webpack:///../src/shading/pass-lib/copy.ts","webpack:///../src/interact/interactor.ts","webpack:///../src/engine/render-engine.ts","webpack:///../src/util/accumulator.ts","webpack:///../src/engine/framer.ts","webpack:///../src/object/line.ts","webpack:///../src/object/points.ts","webpack:///../src/core/material.ts","webpack:///../src/render-graph/interface.ts","webpack:///../src/engine/render-list.ts","webpack:///../src/scene/scene.ts","webpack:///../src/render-graph/pass.ts","webpack:///../src/render-graph/render-graph.ts","webpack:///../src/render-graph/node/render-target-node.ts","webpack:///../src/render-graph/node/pass-graph-node.ts","webpack:///../src/shading/basic-lib/normal.ts","webpack:///../src/shader-graph/built-in/depth-pack.ts","webpack:///../src/shader-graph/built-in/rand.ts","webpack:///../src/shading/pass-lib/tssao.ts","webpack:///../src/shading/pass-lib/tssao-blend.ts","webpack:///../src/shading/basic-lib/depth.ts","webpack:///../src/shading/pass-lib/taa.ts","webpack:///../src/geometry/geo-lib/sphere-geometry.ts","webpack:///../src/geometry/geo-lib/cube-geometry.ts","webpack:///../src/interact/controller.ts","webpack:///../src/math/spherical.ts","webpack:///../src/interact/orbit-controller.ts","webpack:///../src/util/normal-generation.ts","webpack:///../src/core/loader.ts","webpack:///../src/loader/obj-loader.ts","webpack:///../src/core/light.ts","webpack:///./src/scene/hierarchy-balls.ts","webpack:///./src/conf.ts","webpack:///./src/RenderPipeline.ts","webpack:///./src/application.ts","webpack:///./src/views/config-panel.vue?b46a","webpack:///./src/views/config-panel.vue?0f1f","webpack:///./src/views/config-panel.vue","webpack:///./src/views/scene-panel/scene-panel.vue?c451","webpack:///./src/model/scene-view.ts","webpack:///./src/model/render-view.ts","webpack:///./src/views/scene-panel/geometry-view.vue?968b","webpack:///./src/views/scene-panel/geometry-view.vue?b347","webpack:///./src/views/scene-panel/geometry-view.vue?9d76","webpack:///./src/views/scene-panel/geometry-view.vue","webpack:///./src/views/scene-panel/material-view.vue?4d91","webpack:///./src/views/scene-panel/channel-editor.vue?c808","webpack:///./src/views/scene-panel/channel-editor.vue?fdcd","webpack:///./src/views/scene-panel/channel-editor.vue?dff2","webpack:///./src/views/scene-panel/channel-editor.vue","webpack:///./src/views/scene-panel/material-view.vue?b52e","webpack:///./src/views/scene-panel/material-view.vue?11b7","webpack:///./src/views/scene-panel/material-view.vue","webpack:///./src/views/object-panel/object-panel.vue?310b","webpack:///./src/views/object-panel/object-panel.vue?e283","webpack:///./src/views/object-panel/object-panel.vue?5887","webpack:///./src/views/object-panel/object-panel.vue","webpack:///./src/views/scene-panel/scene-node-view.vue?f414","webpack:///./src/views/scene-panel/scene-node-view.vue?a675","webpack:///./src/views/scene-panel/scene-node-view.vue?a9f2","webpack:///./src/views/scene-panel/scene-node-view.vue","webpack:///./src/views/scene-panel/scene-panel.vue?9e66","webpack:///./src/views/scene-panel/scene-panel.vue?6400","webpack:///./src/views/scene-panel/scene-panel.vue","webpack:///./src/views/viewer-canvas.vue?657b","webpack:///./src/components/graph/graph-viewer.vue?5852","webpack:///./src/components/graph/graph-viewer.vue?eca9","webpack:///./src/components/graph/graph-viewer.vue?8cac","webpack:///./src/components/graph/graph-viewer.vue","webpack:///./src/components/graph/dag-node.vue?5136","webpack:///./src/model/graph-view.ts","webpack:///./src/components/graph/dag-node.vue?67ce","webpack:///./src/components/graph/dag-node.vue?02cd","webpack:///./src/components/graph/dag-node.vue","webpack:///./src/views/line-hud-canvas.vue?284d","webpack:///./src/views/line-hud-canvas.vue?3ab1","webpack:///./src/views/line-hud-canvas.vue?3432","webpack:///./src/views/line-hud-canvas.vue","webpack:///./src/components/graph/nodes/render-target-node.vue?d2eb","webpack:///./src/components/graph/nodes/render-target-node.vue?65b0","webpack:///./src/components/graph/nodes/render-target-node.vue?01a6","webpack:///./src/components/graph/nodes/render-target-node.vue","webpack:///./src/views/viewer-canvas.vue?96ac","webpack:///./src/views/viewer-canvas.vue?bd6a","webpack:///./src/views/viewer-canvas.vue","webpack:///./src/views/viewer.vue?bd8b","webpack:///./src/views/viewer.vue?dac9","webpack:///./src/views/viewer.vue","webpack:///./src/views/shader-editor.vue?c16f","webpack:///./src/shader-application.ts","webpack:///./src/views/shader-editor.vue?8b7a","webpack:///./src/views/shader-editor.vue?89f8","webpack:///./src/views/shader-editor.vue","webpack:///./src/views/debug.vue?b5fc","webpack:///./src/views/debug.vue?3397","webpack:///./src/views/debug.vue?da2a","webpack:///./src/views/debug.vue","webpack:///./src/views/example/example-page.vue?9699","webpack:///./src/views/example/example-page.vue?c633","webpack:///./src/views/example/example-page.vue?7734","webpack:///./src/views/example/example-page.vue","webpack:///./src/views/example/example-item-page.vue?282d","webpack:///../example/contents/test-bridge.ts","webpack:///./src/views/example/example-item-page.vue?4142","webpack:///./src/views/example/example-item-page.vue?6367","webpack:///./src/views/example/example-item-page.vue","webpack:///./src/router.ts","webpack:///../example/contents/scene.ts","webpack:///../example/contents/draw-primitives.ts","webpack:///../example/contents/exports.ts","webpack:///./src/store.ts","webpack:///./src/main.ts","webpack:///./src/views/example/example-item-page.vue?b83c","webpack:///./src/components/nav/top-nav.vue?6d33","webpack:///./src/views/line-hud-canvas.vue?c3f2","webpack:///./src/components/conf/item.vue?97a5"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","jsonpScriptSrc","p","about","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","head","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_folder_vue_vue_type_style_index_0_id_b2989a74_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_folder_vue_vue_type_style_index_0_id_b2989a74_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_example_page_vue_vue_type_style_index_0_id_063d4f2b_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_example_page_vue_vue_type_style_index_0_id_063d4f2b_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_geometry_view_vue_vue_type_style_index_0_id_16a04246_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_geometry_view_vue_vue_type_style_index_0_id_16a04246_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shader_editor_vue_vue_type_style_index_0_id_31be39e7_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_shader_editor_vue_vue_type_style_index_0_id_31be39e7_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_editors_vue_vue_type_style_index_0_id_5d23d6f4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_editors_vue_vue_type_style_index_0_id_5d23d6f4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_number_vue_vue_type_style_index_0_id_41fd1826_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_number_vue_vue_type_style_index_0_id_41fd1826_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_dag_node_vue_vue_type_style_index_0_id_186cb780_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_dag_node_vue_vue_type_style_index_0_id_186cb780_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_config_vue_vue_type_style_index_0_id_5bb907a0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_config_vue_vue_type_style_index_0_id_5bb907a0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_scene_node_view_vue_vue_type_style_index_0_id_95da2114_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_scene_node_view_vue_vue_type_style_index_0_id_95da2114_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_home_vue_vue_type_style_index_0_id_4ae3c20a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_home_vue_vue_type_style_index_0_id_4ae3c20a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_object_panel_vue_vue_type_style_index_0_id_4a932871_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_object_panel_vue_vue_type_style_index_0_id_4a932871_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_graph_viewer_vue_vue_type_style_index_0_id_4b63007a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_graph_viewer_vue_vue_type_style_index_0_id_4b63007a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_scene_panel_vue_vue_type_style_index_0_id_cd90fe88_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_scene_panel_vue_vue_type_style_index_0_id_cd90fe88_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_config_panel_vue_vue_type_style_index_0_id_134ba5ce_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_config_panel_vue_vue_type_style_index_0_id_134ba5ce_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_viewer_canvas_vue_vue_type_style_index_0_id_5da8d6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_viewer_canvas_vue_vue_type_style_index_0_id_5da8d6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_viewer_vue_vue_type_style_index_0_id_36c0e409_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_viewer_vue_vue_type_style_index_0_id_36c0e409_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","attrs","id","_e","staticRenderFns","top_navvue_type_template_id_f17af42a_scoped_true_render","staticClass","alt","on","click","gotoHome","active-class","to","_v","top_navvue_type_template_id_f17af42a_scoped_true_staticRenderFns","top_navvue_type_script_lang_ts_TopNav","vue_property_decorator","[object Object]","$router","tslib_es6","top_navvue_type_script_lang_ts_","nav_top_navvue_type_script_lang_ts_","component","componentNormalizer","options","__file","top_nav","Appvue_type_script_lang_ts_ViewerApp","showTopNav","$route","components","TopNav","Appvue_type_script_lang_ts_","src_Appvue_type_script_lang_ts_","App_component","App","homevue_type_template_id_4ae3c20a_scoped_true_render","_m","homevue_type_template_id_4ae3c20a_scoped_true_staticRenderFns","home_component","home","viewervue_type_template_id_36c0e409_scoped_true_render","$store","state","appConfig","appConf","viewervue_type_template_id_36c0e409_scoped_true_staticRenderFns","config_panelvue_type_template_id_134ba5ce_scoped_true_render","hide","config","config_panelvue_type_template_id_134ba5ce_scoped_true_staticRenderFns","configvue_type_template_id_5bb907a0_scoped_true_render","configvue_type_template_id_5bb907a0_scoped_true_staticRenderFns","foldervue_type_template_id_b2989a74_scoped_true_render","toggle","expand","_s","_l","subConfig","Array","isArray","model","callback","$$v","$set","expression","foldervue_type_template_id_b2989a74_scoped_true_staticRenderFns","itemvue_type_template_id_1e529480_scoped_true_render","configValue","$event","expandEditor","shouldHaveCustomEditor","editorConfig","editors","itemvue_type_template_id_1e529480_scoped_true_staticRenderFns","editorsvue_type_template_id_5d23d6f4_scoped_true_render","index","class","active-editor-nav","currentEditor","useEditor","editor","_value","editorsvue_type_template_id_5d23d6f4_scoped_true_staticRenderFns","number_slidervue_type_template_id_724fbe74_render","directives","rawName","max","min","step","domProps","__r","number_slidervue_type_template_id_724fbe74_staticRenderFns","number_slidervue_type_script_lang_ts_NumberSliderEditor","$emit","number_slidervue_type_script_lang_ts_","conf_number_slidervue_type_script_lang_ts_","number_slider_component","number_slider","editorsvue_type_script_lang_ts_Editors","isMultiEditor","NumberSliderEditor","editorsvue_type_script_lang_ts_","conf_editorsvue_type_script_lang_ts_","editors_component","numbervue_type_template_id_41fd1826_scoped_true_render","input","composing","numbervue_type_template_id_41fd1826_scoped_true_staticRenderFns","numbervue_type_script_lang_ts_NumberEditor","numbervue_type_script_lang_ts_","conf_numbervue_type_script_lang_ts_","number_component","number","booleanvue_type_template_id_6d8834d4_render","checked","_i","change","$$a","$$el","$$c","$$i","concat","booleanvue_type_template_id_6d8834d4_staticRenderFns","booleanvue_type_script_lang_ts_BooleanEditor","booleanvue_type_script_lang_ts_","conf_booleanvue_type_script_lang_ts_","boolean_component","conf_boolean","itemvue_type_script_lang_ts_ConfigItem","newValue","onChange","Editors","NumberEditor","BooleanEditor","itemvue_type_script_lang_ts_","conf_itemvue_type_script_lang_ts_","item_component","item","foldervue_type_script_lang_ts_Folder","isEmptyList","ConfigItem","foldervue_type_script_lang_ts_","conf_foldervue_type_script_lang_ts_","folder_component","folder","configvue_type_script_lang_ts_ConfigPanel","Folder","configvue_type_script_lang_ts_","conf_configvue_type_script_lang_ts_","config_component","GLExtList","GLParamList","conf_config","EXTENSION_LIST","keys","PARAMETER_NAMES","GLInfo","gl","extensions","parameters","createAllExtension","getAllParams","ext","getExtension","createExtension","extName","getParameter","ShaderType","GLShader","renderer","shader","createShader","vertex","VERTEX_SHADER","FRAGMENT_SHADER","source","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","logDebugShaderSource","deleteShader","warn","addLineNumbers","str","lines","split","join","chars","uuid","rnd","generateUUID","Math","random","Vector3","x","y","z","buffer","Float32Array","v","sqrt","mag","scalar","inv_length","multiplyScalar","abs","a","b","ax","ay","az","bx","by","bz","crossVectors","q","qx","qy","qz","qw","w","ix","iy","iz","iw","sinRadius","sin","polar","radius","azim","cos","elements","distanceToSquared","dx","dy","dz","array","offset","toArray","Vector4","isVector4","acos","minVal","maxVal","tempMin","set","tempMax","clamp","divideScalar","floor","ceil","round","normalize","alpha","v1","v2","subVectors","add","angle","epsilon","epsilon2","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","PI","xx","yy","zz","xy","xz","yz","tempx","tempy","tempz","Matrix4","me","fromArray","matrix","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","position","quaternion","scale","makeRotationFromQuaternion","setPostion","left","right","top","bottom","near","far","h","ae","be","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","throwOnDegenerate","t11","t12","t13","t14","det","msg","identity","detInv","origin","up","copy","sub","x2","y2","z2","wx","wy","wz","theta","MathUtil","DEG2RAD","RAD2DEG","euclideanModulo","mapLinear","a1","a2","b1","b2","lerp","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","nearestPowerOfTwo","pow","LN2","nextPowerOfTwo","EulerOrder","tempMatrix","euler_Euler","order","_order","defaultOrder","onChangeCallback","_x","_y","_z","euler","update","XYZ","asin","atan2","YXZ","ZXY","ZYX","YZX","XZY","setFromRotationMatrix","optionalTarget","quaternion_r","EPS","Quaternion","axis","halfAngle","vFrom","vTo","dot","trace","Vector2","width","height","vector2_tempMin","vector2_tempMax","anchor","center","GLDataType","shaderStringMap","float","vec2","floatVec2","vec3","floatVec3","vec4","floatVec4","mat2","Mat2","mat3","Mat3","mat4","Mat4","reverseShaderStringMap","forEach","shaderAttributeStringInfo","stride","default","reverseShaderAttributeStringInfo","getShaderTypeStringFromGLDataType","getGLDataTypeStride","AttributeGLDataType2ShaderString","injectVertexShaderHeaders","shaderText","injectText","generateAttributeString","generateUniformString","generateVaryingString","injectFragmentShaderHeaders","generateTextureString","text","textures","texture","attributes","att","uniforms","uni","varyings","vary","findUniformSetter","setValue1f","setValue2fv","setValue3fv","setValue4fv","setValue2m","setValue3m","setValue4m","int","boolean","setValue1i","location","uniform1f","uniform2fv","uniform3fv","uniform4fv","uniform1i","uniformMatrix4fv","differNumber","newVal","oldVal","differArray","copyNumber","_target","copyArray","targetReal","findUniformDiffer","findUniformCopier","findUniformFlattener","flatten","InnerSupportUniform","InnerUniformMap","Map","getInnerUniformDescriptor","des","tempDescriptor","mapInner","descriptor","_innerGlobalUniform","MMatrix","VPMatrix","LastVPMatrix","uniform_GLUniform","program","programChangeId","glProgram","getProgram","getUniformLocation","isActive","flattener","setter","differ","copier","innerGlobal","receiveData","lastReceiveData","stat","uniformUpload","programSwitched","_programChangeId","enableUniformDiff","AttributeUsage","GLTextureType","DrawMode","CullSide","DepthFunction","BlendingMode","GLTextureTypeRaw","TextureFilter","TextureWrap","attribute_GLAttribute","count","getAttribLocation","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","enableVertexAttribArray","GLTextureUniform","webglTexture","slotManager","textureSlot","channel","channelType","currentActiveSlot","updateSlotTexture","fulfillProgramConfig","useIndex","uniformsIncludes","_hasUniformIncludesExpand","ui","program_GLProgram","attributeUsageMap","globalUniforms","framebufferTextureMap","drawFrom","drawCount","useIndexDraw","indexUINT","vertexShader","fragmentShader","fragment","compileShaders","createProgram","createGLResource","programManager","addNewProgram","usage","framebufferName","uniformName","cb","conf","vertexShaderString","fragmentShaderString","autoInjectHeader","attachShader","linkProgram","getProgramParameter","LINK_STATUS","info","getProgramInfoLog","tex","attribute","useBuffer","useTexture","start","engine","getGlobalUniform","ELEMENT_ARRAY_BUFFER","dispose","deleteProgram","GLProgramManager","programs","storeId","compiledProgramsCount","size","GLAttributeBufferDataManager","buffers","WeakMap","arraybuffer","useForIndex","createBuffer","bufferData","STATIC_DRAW","has","deleteBuffer","delete","disposeBuffer","BlendEquation","BlendMode","PixelFormat","PixelDataType","SrcAlphaFactor","OneMinusSrcAlphaFactor","gl_color_buffer_GLColorBuffer","redMaskEnabled","greenMaskEnabled","blueMaskEnabled","alphaMaskEnabled","currentClearColor","resetDefaultClearColor","redMask","greenMask","blueMask","alphaMask","colorMask","newColor","premultipliedAlpha","equals","clearColor","setClearColor","defaultClearColor","clear","COLOR_BUFFER_BIT","gl_depth_buffer_GLDepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","_enableTest","resetDefault","enableTest","enable","DEPTH_TEST","disable","DEPTH_BUFFER_BIT","depthMask","depthFunc","NeverDepth","NEVER","AlwaysDepth","ALWAYS","LessDepth","LESS","LessEqualDepth","LEQUAL","EqualDepth","EQUAL","GreaterEqualDepth","GEQUAL","GreaterDepth","GREATER","NotEqualDepth","NOTEQUAL","gl_texture_slot_GLTextureSlot","currentTextureSlot","currentBindTextures","slotIndex","maxSupport","glInfo","MAX_TEXTURE_SIZE","generateTextureSlotMap","slot","activeTexture","webglType","TEXTURE0","boundTexture","bindTexture","textureSlotToUpdate","findSlot","textureSlotGLToUpdate","textureSlotMap","texture2D","maxTextureSlotSupport","gl_state_GLState","currentViewport","newViewport","currentScissor","newScissor","currentCullFace","CullFaceNone","currentPolygonOffsetFactor","currentPolygonOffsetUnits","colorbuffer","depthbuffer","viewport","setViewport","cullFace","CULL_FACE","CullFaceBack","BACK","CullFaceFront","FRONT","FRONT_AND_BACK","polygonOffsetEnable","factor","units","POLYGON_OFFSET_FILL","polygonOffset","DefaultTextureDescriptor","minFilter","nearest","maxFilter","sWrap","clampToEdge","tWrap","defaultRenderTargetTextureDescriptor","GLTextureManager","POTResizeCanvas","pixelStorei","UNPACK_FLIP_Y_WEBGL","glTexture","getGLTexture","deleteTexture","createWebGLTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","image","internalFormat","border","format","createTexture","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texture_PixelFormat","texture_PixelDataType","Texture","needUpdate","RGBAFormat","dataType","textureManger","upload","releaseGraphics","deleteGLTexture","gl_framebuffer_FramebufferAttachTexture","createTextureForRenderTarget","framebuffer","attachPoint","setRenderTarget","attachmentPoint","GLAttachmentPoints","framebufferTexture2D","FRAMEBUFFER","loadGLAttachmentPoints","gl_framebuffer_GLFramebuffer","enableDepth","webglDepthBuffer","textureAttachedSlot","webglFrameBuffer","createGLFramebuffer","createFramebuffer","createRenderbuffer","deleteFramebuffer","attach","disposeAttachedDepthBuffer","createAttachDepthBuffer","attachTexture","depthBuffer","createGLRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","deleteRenderbuffer","readBuffer","readPixels","framebuffer_manager_GLFrameBufferManager","framebuffers","createAttachTexture","GLStat","drawcall","programSwitch","framebufferSwitch","vao_GLVAOManager","vaos","vaoExt","OES_vertex_array_object","isSupported","geometry","vao","createVertexArrayOES","bindVertexArrayOES","unbind","gl_renderer_GLRenderer","el","enableRenderErrorCatch","_width","_height","devicePixelRatio","activeProgram","attributeBufferManager","currentFramebuffer","assign","antialias","ctx","getContext","framebufferManager","vaoManager","init","setSize","offsetWidth","offsetHeight","setRawRenderSize","isChanged","useProgram","drawElements","UNSIGNED_INT","UNSIGNED_SHORT","drawArrays","errorCode","getError","NO_ERROR","resetSlotIndex","bindFramebuffer","releaseGL","vector3_observable_Vector3Observable","super","val","tempVector3","transformation_tempMatrix","transformation_Transformation","transformFrameChanged","_matrix","matrixIsDirty","_position","positionIsDirty","_scale","scaleIsDirty","_rotation","eulerIsDirty","_quaternion","quaternionIsDirty","compose","rotation","setFromQuaternion","scene_node_SceneNode","scene","sceneNodeListIndex","parent","children","transform","_worldMatrix","_worldMatrixUpdateFrameId","_visible","_visibleNet","_visibleUpdateFrameId","worldMatrix","visible","isFrameVisibleChange","node","isFrameStructureChange","addNode","removeChild","removeNode","indexOf","fn","visit","nodeParent","nodes","rootNode","traversePair","mapNode","mapParentNode","traverse","force","multiplyMatrices","updateWorldMatrix","camera_Camera","projectionMatrix","projectionMatrixNeedUpdate","renderSizeObserver","newSize","resizeObservable","remove","onRenderResize","perspective_camera_tempMatrix","perspective_camera_PerspectiveCamera","fov","aspect","zoom","_fov","_zoom","_near","_far","_aspect","updateProjectionMatrix","tan","makePerspective","targetPosition","lookAt","UniformProxy","_needUpdate","Observer","_willBeUnregistered","unregisterOnNextCall","Observable","onObserverAdded","_observers","_onObserverAdded","unregisterOnFirstCall","observer","_deferUnregister","_remove","eventData","obs","draw_state_DrawState","cullSide","blending","NormalBlending","blendSrc","blendDst","blendEquation","FUNC_ADD","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthTest","depthWrite","colorWriteR","colorWriteG","colorWriteB","colorWriteA","polygonOffsetFactor","polygonOffsetUnits","alphaTest","setCullFace","setFunc","setMask","colorBuffer","setColorMask","setPolygonOffset","PrimitiveType","render_object_RenderObject","drawMode","TRIANGLES","primitiveType","triangle","_visitor","material","shading","mesh_Mesh","raycasterable","visitor","foreachFace","raycaster","results","box3_Box3","box","Infinity","isEmpty","addVectors","point","Sphere","sphere","geometry_Geometry","bufferDatum","_AABBBox","_boundingSphere","shouldUpdate","AABBBox","updateAABBBox","boundingSphere","updateBoundingSphere","Face3","line3_Line3","p1","p2","distanceTo","applyMatrix4","line","BufferData","Uint16Array","end","getGLAttributeBuffer","byteLength","tempFace3","tempLine3","standard_geometry_tempVector3","standard_geometry_StandardGeometry","indices","vertices","normals","uvs","positionBuffer","f3","normalBuffer","normal","uvBuffer","f2","uv","indexBuffer","u16Index","getCenter","maxRadiusSq","foreachVertex","makeEmpty","expandByPoint","p1Index","p2Index","p3Index","getIndex","p3","plane_geometry_PlaneGeometry","widthSegments","heightSegments","populate","width_half","height_half","gridX","gridY","gridX1","gridY1","segment_width","segment_height","quadMesh","quad_source_geometry","QuadSource","hasRendered","downloadCanvasPNGImage","canvas","link","toDataURL","replace","getStringContentFromFile","file","reader","FileReader","_","readAsText","openFile","func","files","addEventListener","loadStringFromFile","findFirst","indentSpaceSize","indentUnit","indentStringCache","getIndent","indentCount","code_builder_CodeBuilder","currentIndent","writeLine","trimmed","trim","reset","dag_node_DAGNode","toNodes","Set","fromNodes","fulfillList","_addFromRef","_removeFromRef","_removeToRef","allDepNodes","generateAllDependencyList","preventEndlessCounter","resolveNext","filter","visited","traverseDFS","shader_node_ShaderNode","swizzleType","ShaderSwizzleNode","ShaderFunctionNode","factory","define","returnType","inputMap","meaningfulName","inputs","connectTo","ShaderInputNode","ShaderCommonUniformInputNode","defaultValue","ShaderVaryInputNode","shader_node_ShaderInnerUniformInputNode","ShaderAttributeInputNode","attributeUsage","svf","shader_node_ShaderConstNode","shaderString","ShaderTexture","ShaderTextureFetchNode","fromGLTextureType2GLDataType","fetchByNode","getValueCount","ShaderCombineNode","combines","combineCount","length2Type","swizzledSourceCount","parts","from","genFragShader","graph","builder","addIndent","evaluatedNode","nodeDependList","fragmentRoot","generateDependencyOrderList","fragResult","codeGenGraph","writeBlock","code","pushListToMap","varList","reduceIndent","mainCode","output","includedCode","genShaderFunctionDepend","genVertexShader","vertexRoot","vertexResult","emptyLine","varyNode","varyDependList","varyResult","map","list","refedNode","functionsStr","dependFunctions","_record","genShaderFunctionIncludeCode","genTempVarExpFromShaderNode","preEvaluatedList","findRecordFromEvaluatedNode","record","varRc","genRecordVar","varKey","getParamKeyFromVarList","functionDefine","functionInputs","nodeDepend","combineResult","rootOutputName","nodeToGen","varName","varType","selfRecord","parseShaderFunctionMetaInfo","body","splitStrUntilChar","funcHead","funcParam","getFuncHead","getParamList","getFuncBody","description","char","substr","getDataType","getOneParam","para","unbrace","substring","shader_function_ShaderFunction","paramType","paramStr","writeCommentBlock","DivW","MTransform","VPTransform","getWorldPosition","NDCxyToUV","UVDepthToNDC","getLastPixelNDC","dir3D","node_maker_texture","uniform","uniformFromValue","innerUniform","args","constValue","MVPWorld","make","screenQuad","UvFragVary","NormalFragVary","NDCPositionFragVary","WorldPositionFragVary","shader_graph_ShaderGraph","root","next","setVary","swizzling","ret","collectInputs","compileVertexSource","compileFragSource","nodeList","inputNodes","textureSet","st","shading_Shading","programConfigCache","needRebuildShader","uniformProvider","afterShaderCompiled","deco","provider","decorate","build","compile","notifyObservers","disposeProgram","MapUniform","remapName","propertyUniformNameMap","hasAnyUniformChanged","configurable","shading_BaseEffectShading","copy_CopyShading","setVertexRoot","declareFragUV","setFragmentRoot","fetch","getVary","prev","mousePosition","interactor_v1","Interactor","inputElement","enabled","mouseButton","controllers","onMouseMove","clientX","clientY","groupEmit","leftMouseMoveCallBacks","rightMouseMoveCallBacks","onMouseDown","button","preventDefault","onMouseUp","mouseUpCallBacks","onMouseWheel","delta","wheelDelta","deltaY","mouseWheelCallBacks","mouseDownCallBacks","preventContentMenu","removeEventListener","stopPropagation","callBackList","param","controller","removeController","foreachRenderableInSource","updateSource","resetSource","nextSource","nextRenderable","copyShading","quad","render_engine_RenderEngine","ctxOptions","_preferVAO","_vaoEnabled","overrideShading","defaultTechnique","normal_NormalShading","_camera","isCameraChanged","cameraMatrixReverse","ProjectionMatrix","jitterPMatrix","jitterVPMatrix","lastUploadedShaderUniformProvider","programShadingMap","camera","interactor","preferVAO","vaoEnabled","setValue","needUpdateVP","getInverse","obj","renderObject","objects","connectShading","connectMaterial","connectGeometry","connectRange","syncGL","debugViewPort","setRenderTargetScreen","defineFrameBufferTextureDep","lastProgramRendered","updateInnerGlobalUniforms","setUniform","forTextures","getChannelTexture","getFramebufferTexture","geometryIndexBuffer","Uint32Array","vaoUnbindCallback","webglVAO","getVAO","useVAO","deleteVAO","createVAO","forAttributes","glBuffer","createOrUpdateAttributeBuffer","useIndexBuffer","getProgramConfig","getGLBuffer","updateOrCreateBuffer","Accumulator","records","average","last","current","framer_Framer","avgRenderFrameTimeLast120Frame","userRenderFrame","renderFrame","time","frameStart","frameEnd","performance","now","active","tickId","requestAnimationFrame","frameStartTime","frame","cancelAnimationFrame","frameEndTime","line_Line","LINES","points_Points","POINTS","ChannelType","DimensionType","stateType","RenderList","realLength","renderListCursor","scene_Scene","objectList","isFrameTransformChange","onRemoveList","onAddList","isFrameChange","updateObjectList","resetCursor","addRenderItem","loader","pass_RenderPass","enableDepthClear","enableColorClear","inputTarget","isOutputScreen","beforePassExecute","afterPassExecute","inputKey","mapTo","renderTargetNode","render_graph_RenderGraph","screenRoot","outputTarget","getOrCreateFrameBuffer","debugOutputViewport","renderTargetNodes","renderFrameBuffer","inputFramebufferName","_uniformName","getFramebuffer","debugInputViewport","enableDebuggingView","screenNode","setFullScreenViewPort","renderDebugResult","render_graph_EffectComposer","passes","nodeMap","pass","execute","passNodes","composer","graphDefine","allocateRenderTargetNodes","renderTargets","constructPassGraph","updateDependNode","nodeQueue","render_target_node_RenderTargetNode","updateSize","pass_graph_node_PassGraphNode","getPass","updatePass","addPass","passesDefine","registerNode","isScreenNode","textsDefine","quadSource","autoWidthRatio","autoHeightRatio","widthAbs","heightAbs","fromGetter","pixelFormat","dimensionType","bindRenderSize","disableDepthBuffer","f","createFrameBuffer","fixed","resize","clearAllFrom","passNode","getRenderPassDependence","inputsGetter","inputUniformKey","getRenderTargetDependence","activeNodes","updateInputTargets","foundedNode","setOutPutTarget","checkIsValid","normalShading","declareFragNormal","depthPack","unPackDepth","rand","rand2DT","newSamplePosition","NDCFromWorldPositionAndVPMatrix","sampleAO","tssaoMix","tssao_TSSAOShading","sampleCount","VPMatrixInverse","aoRadius","getPropertyUniform","depthTex","vUV","depth","worldPosition","Random2D1","Random2D2","randDir","newPositionRand","newDepth","tslib_tslib_es6","tssaoBlend","tssao_blend_TSSAOBlendShading","tssaoComposeRate","tssaoShowThreshold","tssaoComposeThreshold","depthV","depth_DepthShading","TAAMix","taa_TAAShading","colorOld","sphere_geometry_SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","thetaEnd","grid","verticesRow","u","cube_geometry_CubeGeometry","depthSegments","numberOfVertices","buildPlane","udir","vdir","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","vector","vertexCounter","Controller","spherical_Spherical","tempVec","orbit_controller_OrbitController","spherical","rotateAngleFactor","panFactor","maxPolarAngle","minPolarAngle","sphericalDelta","zoomingFactor","panOffset","enableDamping","dampingFactor","panDampingFactor","rotate","viewWidth","viewHeight","move","setFromVector","unbindControllerAllListener","bindLeftMouseMove","bindRightMouseMove","bindMouseWheel","setFromSpherical","normal_generation_v1","v3","v12","v13","normal_generation_n","generateNormalFromPosition","vertices_length","Loader","GeometryLoader","obj_loader_OBJLoader","vertexPattern","normalPattern","uvPattern","facePattern1","facePattern2","facePattern3","facePattern4","positions","indicesForArtgl","wrappedPositionForArtgl","wrappedUvsForArtgl","wrappedNormalsForArtgl","tuplePosNorm","curPositionInIndices","setDataForCurrentFaceWithPattern4","face","triangleStrs","collectTriangle","k","indicePositionFromObj","parseInt","indiceNormalFromObj","setData","faces","triangles","getTriangles","triangleList","idx","indiceUvsFromObj","positionVectorFromOBJ","textureVectorFromOBJ","normalsVectorFromOBJ","objStr","fileName","charAt","exec","parseFloat","setDataForCurrentFaceWithPattern3","setDataForCurrentFaceWithPattern2","setDataForCurrentFaceWithPattern1","po","useGeneratedNormal","light_Light","_graph","pointLightShading","AddCompose","light_PointLight","color","decorated","getFragRoot","hierarchy_balls","sphereGeo","planeGeo","cubeGeo","light","planeMesh","g","addChild","boxMesh","node2","testMesh","createConf","pipeline","setActualSize","enableTAA","enableTSSAO","composeShading","tssaoShading","RenderPipeline_RenderPipeline","taaShading","taaShader","tssaoShader","composeShader","depthShader","tickNum","isEvenTick","connectCamera","jitterProjectionMatrix","defineGraph","sceneResult","depthResult","TAAHistoryOld","unJit","VP","AOAcc","basic","tssao","STATIC_SERVER","application_Application","framer","hasInitialized","onContainerResize","beforeRender","afterRender","orbitController","registerInteractor","createScene","setFrame","stop","Uint8Array","run","objLoader","response","geo","parse","mesh","GLApp","config_panelvue_type_script_lang_ts_ConfigPanel","showConfigPanel","$nextTick","notifyResize","Config","config_panelvue_type_script_lang_ts_","views_config_panelvue_type_script_lang_ts_","config_panel_component","config_panel","scene_panelvue_type_template_id_cd90fe88_scoped_true_render","sync","navitem","current-nav","currentNav","view","sceneView","nodeChange","catchChange","renderView","compiledPrograms","programSwitchCount","scene_panelvue_type_template_id_cd90fe88_scoped_true_staticRenderFns","scene_view_objLoader","GeometryView","bufferdata","dataByteSize","getDataSizeByte","MaterialView","scene_view_SceneView","geometries","materials","collectEntity","scene_view_SceneNodeView","findSubNode","setRootNode","objstr","nodeview","RenderView","updateFrameInfo","geometry_viewvue_type_template_id_16a04246_scoped_true_render","bufferinfo","geometry_viewvue_type_template_id_16a04246_scoped_true_staticRenderFns","geometry_viewvue_type_script_lang_ts_GeometryViewPanel","expandDetail","geometrylist","geometry_viewvue_type_script_lang_ts_","scene_panel_geometry_viewvue_type_script_lang_ts_","geometry_view_component","geometry_view","material_viewvue_type_template_id_0becaf20_scoped_true_render","materiallist","material_viewvue_type_template_id_0becaf20_scoped_true_staticRenderFns","channel_editorvue_type_template_id_6398d63e_render","channel_editorvue_type_template_id_6398d63e_staticRenderFns","channel_editorvue_type_script_lang_ts_ChannelEditor","channel_editorvue_type_script_lang_ts_","channel_editor_component","channel_editor","material_viewvue_type_script_lang_ts_materialViewPanel","mat","ChannelEditor","material_viewvue_type_script_lang_ts_","scene_panel_material_viewvue_type_script_lang_ts_","material_view_component","material_view","object_panelvue_type_template_id_4a932871_scoped_true_render","object_panelvue_type_template_id_4a932871_scoped_true_staticRenderFns","object_panelvue_type_script_lang_ts_ObjectPanel","object_panelvue_type_script_lang_ts_","object_panel_object_panelvue_type_script_lang_ts_","object_panel_component","object_panel","scene_node_viewvue_type_template_id_95da2114_scoped_true_render","expandable","hasChildren","isExpand","clampId","showMenu","emitDelete","emitLoadObj","child","emitChange","scene_node_viewvue_type_template_id_95da2114_scoped_true_staticRenderFns","scene_node_viewvue_type_script_lang_ts_BooleanEditor","scene_node_viewvue_type_script_lang_ts_","scene_panel_scene_node_viewvue_type_script_lang_ts_","scene_node_view_component","scene_node_view","scene_panelvue_type_script_lang_ts_ScenePanel","nav","afterObs","showScenePanel","deleteNode","loadObj","NodeView","ObjectPanel","GeometryViewPanel","MaterialViewPanel","scene_panelvue_type_script_lang_ts_","scene_panel_scene_panelvue_type_script_lang_ts_","scene_panel_component","scene_panel","viewer_canvasvue_type_template_id_5da8d6ca_scoped_true_render","pick","isRunning","staticStyle","pointer-events","layout","board","updateAllViewport","nodeView","ref","refInFor","boardInfo","updateViewport","updateLine","isRenderTargetNode","disabled","screenshot","showGraphViewer","inspectGraph","closeGraphInspector","viewer_canvasvue_type_template_id_5da8d6ca_scoped_true_staticRenderFns","graph_viewervue_type_template_id_4b63007a_scoped_true_render","tabindex","style","_t","mousedown","startDrag","showMove","graph_viewervue_type_template_id_4b63007a_scoped_true_staticRenderFns","graph_viewervue_type_script_lang_ts_GraphViewer","isDragging","transformX","transformY","screenOriginX","screenX","screenOriginY","screenY","originTransformX","originTransformY","dragging","updateBoard","$el","clientWidth","clientHeight","required","graph_viewervue_type_script_lang_ts_","graph_graph_viewervue_type_script_lang_ts_","graph_viewer_component","graph_viewer","dag_nodevue_type_template_id_186cb780_scoped_true_render","viewPositionX","viewPositionY","cursor","constructor","dag_nodevue_type_template_id_186cb780_scoped_true_staticRenderFns","getRightEnd","absX","absY","layoutGraph","layoutNodeMap","gridSize","horizonArray","removeItem","row","horizonPosition","arr","reverse","indexRow","indexY","ConnectionLine","startX","startY","endX","endY","hud","beginPath","moveTo","lineTo","stroke","LinesHUD","clearRect","draw","dag_nodevue_type_script_lang_ts_DAGNodeView","selfLines","originX","originY","vn","inputNode","rightCenter","getNodesLayout","getLines","dag_nodevue_type_script_lang_ts_","graph_dag_nodevue_type_script_lang_ts_","dag_node_component","dag_node","line_hud_canvasvue_type_template_id_3fa939d0_scoped_true_render","line_hud_canvasvue_type_template_id_3fa939d0_scoped_true_staticRenderFns","line_hud_canvasvue_type_script_lang_ts_LineHUDCanvas","HUD","line_hud_canvasvue_type_script_lang_ts_","views_line_hud_canvasvue_type_script_lang_ts_","line_hud_canvas_component","line_hud_canvas","render_target_nodevue_type_template_id_3e54fb51_scoped_true_render","actualSize","defaultSize","render_target_nodevue_type_template_id_3e54fb51_scoped_true_staticRenderFns","render_target_nodevue_type_script_lang_ts_RenderTargetNodeView","render_target_nodevue_type_script_lang_ts_","nodes_render_target_nodevue_type_script_lang_ts_","render_target_node_component","render_target_node","viewer_canvasvue_type_script_lang_ts_ViewerCanvas","querySelector","pickColor","offsetX","offsetY","notifyNodeNeedUpdateLine","no","$refs","vueNodes","downloadCurrentRender","GraphView","DAGNodeView","RenderTargetNodeView","LineHUDCanvas","viewer_canvasvue_type_script_lang_ts_","views_viewer_canvasvue_type_script_lang_ts_","viewer_canvas_component","viewer_canvas","viewervue_type_script_lang_ts_Viewer","initialize","unintialize","ConfigPanel","ScenePanel","ViewerCanvas","viewervue_type_script_lang_ts_","views_viewervue_type_script_lang_ts_","viewer_component","viewer","shader_editorvue_type_template_id_31be39e7_scoped_true_render","addUniform","showCode","codeGen","updateTechnique","codeGenResult","mouseenter","mouseleave","shader_editorvue_type_template_id_31be39e7_scoped_true_staticRenderFns","shader_application_ShaderApplication","canvasRun","tick","loadScene","testGeo","ShaderApp","shader_editorvue_type_script_lang_ts_ShaderEditor","updateShader","shader_editorvue_type_script_lang_ts_","views_shader_editorvue_type_script_lang_ts_","shader_editor_component","shader_editor","debugvue_type_template_id_97a004c4_render","debugvue_type_template_id_97a004c4_staticRenderFns","debugvue_type_script_lang_ts_Debug","debugvue_type_script_lang_ts_","views_debugvue_type_script_lang_ts_","debug_component","debug","example_pagevue_type_template_id_063d4f2b_scoped_true_render","example","gotoExample","example_pagevue_type_template_id_063d4f2b_scoped_true_staticRenderFns","example_pagevue_type_script_lang_ts_ConfigPanel","examples","viewExample","params","example_pagevue_type_script_lang_ts_","example_example_pagevue_type_script_lang_ts_","example_page_component","example_page","example_item_pagevue_type_template_id_7335b2bb_scoped_true_render","example_item_pagevue_type_template_id_7335b2bb_scoped_true_staticRenderFns","test_bridge_ViewerTestBridge","element","goldenPath","test_bridge_HeadlessTestBridge","screenShotCompareElement","HeadlessTestBridge","bridge","example_item_pagevue_type_script_lang_ts_ConfigPanel","exampleHasBuild","example_item_pagevue_type_script_lang_ts_","example_example_item_pagevue_type_script_lang_ts_","example_item_page_component","example_item_page","vue_runtime_esm","use","vue_router_esm","router","routes","path","then","contents_scene","draw_primitives_test","testBridge","points","artglExamples","vuex_esm","store","Store","mutations","actions","productionTip","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_example_item_page_vue_vue_type_style_index_0_id_7335b2bb_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_example_item_page_vue_vue_type_style_index_0_id_7335b2bb_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_top_nav_vue_vue_type_style_index_0_id_f17af42a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_top_nav_vue_vue_type_style_index_0_id_f17af42a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_line_hud_canvas_vue_vue_type_style_index_0_id_3fa939d0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_line_hud_canvas_vue_vue_type_style_index_0_id_3fa939d0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_item_vue_vue_type_style_index_0_id_1e529480_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_item_vue_vue_type_style_index_0_id_1e529480_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"aACA,SAAAA,EAAAC,GAQA,IAPA,IAMAC,EAAAC,EANAC,EAAAH,EAAA,GACAI,EAAAJ,EAAA,GACAK,EAAAL,EAAA,GAIAM,EAAA,EAAAC,EAAA,GACQD,EAAAH,EAAAK,OAAoBF,IAC5BJ,EAAAC,EAAAG,GACAG,EAAAP,IACAK,EAAAG,KAAAD,EAAAP,GAAA,IAEAO,EAAAP,GAAA,EAEA,IAAAD,KAAAG,EACAO,OAAAC,UAAAC,eAAAC,KAAAV,EAAAH,KACAc,EAAAd,GAAAG,EAAAH,IAGAe,KAAAhB,GAEA,MAAAO,EAAAC,OACAD,EAAAU,OAAAV,GAOA,OAHAW,EAAAR,KAAAS,MAAAD,EAAAb,GAAA,IAGAe,IAEA,SAAAA,IAEA,IADA,IAAAC,EACAf,EAAA,EAAiBA,EAAAY,EAAAV,OAA4BF,IAAA,CAG7C,IAFA,IAAAgB,EAAAJ,EAAAZ,GACAiB,GAAA,EACAC,EAAA,EAAkBA,EAAAF,EAAAd,OAA2BgB,IAAA,CAC7C,IAAAC,EAAAH,EAAAE,GACA,IAAAf,EAAAgB,KAAAF,GAAA,GAEAA,IACAL,EAAAQ,OAAApB,IAAA,GACAe,EAAAM,IAAAC,EAAAN,EAAA,KAGA,OAAAD,EAIA,IAAAQ,EAAA,GAKApB,EAAA,CACAqB,IAAA,GAGAZ,EAAA,GAGA,SAAAa,EAAA7B,GACA,OAAAyB,EAAAK,EAAA,QAA4CC,MAAA,SAAgB/B,OAAA,KAA6B+B,MAAA,YAAmB/B,GAAA,MAI5G,SAAAyB,EAAA1B,GAGA,GAAA4B,EAAA5B,GACA,OAAA4B,EAAA5B,GAAAiC,QAGA,IAAAC,EAAAN,EAAA5B,GAAA,CACAK,EAAAL,EACAmC,GAAA,EACAF,QAAA,IAUA,OANAnB,EAAAd,GAAAa,KAAAqB,EAAAD,QAAAC,IAAAD,QAAAP,GAGAQ,EAAAC,GAAA,EAGAD,EAAAD,QAKAP,EAAAU,EAAA,SAAAnC,GACA,IAAAoC,EAAA,GAKAC,EAAA9B,EAAAP,GACA,OAAAqC,EAGA,GAAAA,EACAD,EAAA5B,KAAA6B,EAAA,QACK,CAEL,IAAAC,EAAA,IAAAC,QAAA,SAAAC,EAAAC,GACAJ,EAAA9B,EAAAP,GAAA,CAAAwC,EAAAC,KAEAL,EAAA5B,KAAA6B,EAAA,GAAAC,GAGA,IACAI,EADAC,EAAAC,SAAAC,cAAA,UAGAF,EAAAG,QAAA,QACAH,EAAAI,QAAA,IACAtB,EAAAuB,IACAL,EAAAM,aAAA,QAAAxB,EAAAuB,IAEAL,EAAAO,IAAArB,EAAA7B,GAEA0C,EAAA,SAAAS,GAEAR,EAAAS,QAAAT,EAAAU,OAAA,KACAC,aAAAP,GACA,IAAAQ,EAAAhD,EAAAP,GACA,OAAAuD,EAAA,CACA,GAAAA,EAAA,CACA,IAAAC,EAAAL,IAAA,SAAAA,EAAAM,KAAA,UAAAN,EAAAM,MACAC,EAAAP,KAAAQ,QAAAR,EAAAQ,OAAAT,IACAU,EAAA,IAAAC,MAAA,iBAAA7D,EAAA,cAAAwD,EAAA,KAAAE,EAAA,KACAE,EAAAH,KAAAD,EACAI,EAAAE,QAAAJ,EACAH,EAAA,GAAAK,GAEArD,EAAAP,QAAA+D,IAGA,IAAAhB,EAAAiB,WAAA,WACAtB,EAAA,CAAwBe,KAAA,UAAAE,OAAAhB,KAClB,MACNA,EAAAS,QAAAT,EAAAU,OAAAX,EACAE,SAAAqB,KAAAC,YAAAvB,GAGA,OAAAJ,QAAA4B,IAAA/B,IAIAX,EAAA2C,EAAAvD,EAGAY,EAAA4C,EAAA1C,EAGAF,EAAA6C,EAAA,SAAAtC,EAAAuC,EAAAC,GACA/C,EAAAgD,EAAAzC,EAAAuC,IACA9D,OAAAiE,eAAA1C,EAAAuC,EAAA,CAA0CI,YAAA,EAAAC,IAAAJ,KAK1C/C,EAAAoD,EAAA,SAAA7C,GACA,qBAAA8C,eAAAC,aACAtE,OAAAiE,eAAA1C,EAAA8C,OAAAC,YAAA,CAAwDC,MAAA,WAExDvE,OAAAiE,eAAA1C,EAAA,cAAiDgD,OAAA,KAQjDvD,EAAAwD,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAvD,EAAAuD,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,kBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAA3E,OAAA4E,OAAA,MAGA,GAFA5D,EAAAoD,EAAAO,GACA3E,OAAAiE,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAvD,EAAA6C,EAAAc,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIA3D,EAAA+D,EAAA,SAAAvD,GACA,IAAAuC,EAAAvC,KAAAkD,WACA,WAA2B,OAAAlD,EAAA,YAC3B,WAAiC,OAAAA,GAEjC,OADAR,EAAA6C,EAAAE,EAAA,IAAAA,GACAA,GAIA/C,EAAAgD,EAAA,SAAAgB,EAAAC,GAAsD,OAAAjF,OAAAC,UAAAC,eAAAC,KAAA6E,EAAAC,IAGtDjE,EAAAK,EAAA,GAGAL,EAAAkE,GAAA,SAAAC,GAA8D,MAApBC,QAAAjC,MAAAgC,GAAoBA,GAE9D,IAAAE,EAAAC,OAAA,gBAAAA,OAAA,oBACAC,EAAAF,EAAAtF,KAAA+E,KAAAO,GACAA,EAAAtF,KAAAX,EACAiG,IAAAG,QACA,QAAA7F,EAAA,EAAgBA,EAAA0F,EAAAxF,OAAuBF,IAAAP,EAAAiG,EAAA1F,IACvC,IAAAU,EAAAkF,EAIAhF,EAAAR,KAAA,qBAEAU,2GCxNA,IAAAgF,EAAAzE,EAAA,QAAA0E,EAAA1E,EAAA+D,EAAAU,GAAujBC,EAAG,uCCA1jB,IAAAC,EAAA3E,EAAA,QAAA4E,EAAA5E,EAAA+D,EAAAY,GAA6jBC,EAAG,8DCAhkB,IAAAC,EAAA7E,EAAA,QAAA8E,EAAA9E,EAAA+D,EAAAc,GAA8jBC,EAAG,8DCAjkB,IAAAC,EAAA/E,EAAA,QAAAgF,EAAAhF,EAAA+D,EAAAgB,GAAyiBC,EAAG,uCCA5iB,IAAAC,EAAAjF,EAAA,QAAAkF,EAAAlF,EAAA+D,EAAAkB,GAAwjBC,EAAG,0BCA3jB1E,EAAAD,QAAiBP,EAAAK,EAAuB,8DCAxC,IAAA8E,EAAAnF,EAAA,QAAAoF,EAAApF,EAAA+D,EAAAoB,GAAujBC,EAAG,uCCA1jB,IAAAC,EAAArF,EAAA,QAAAsF,EAAAtF,EAAA+D,EAAAsB,GAAyjBC,EAAG,qCCA5jB,IAAAC,EAAAvF,EAAA,QAAAwF,EAAAxF,EAAA+D,EAAAwB,GAAujBC,EAAG,gECA1jB,IAAAC,EAAAzF,EAAA,QAAA0F,EAAA1F,EAAA+D,EAAA0B,GAAgkBC,EAAG,8DCAnkB,IAAAC,EAAA3F,EAAA,QAAA4F,EAAA5F,EAAA+D,EAAA4B,GAAkfC,EAAG,uFCArf,IAAAC,EAAA7F,EAAA,QAAA8F,EAAA9F,EAAA+D,EAAA8B,GAAgiBC,EAAG,kHCAniB,IAAAC,EAAA/F,EAAA,QAAAgG,EAAAhG,EAAA+D,EAAAgC,GAA6jBC,EAAG,uCCAhkB,IAAAC,EAAAjG,EAAA,QAAAkG,EAAAlG,EAAA+D,EAAAkC,GAA6jBC,EAAG,uCCAhkB,IAAAC,EAAAnG,EAAA,QAAAoG,EAAApG,EAAA+D,EAAAoC,GAA4jBC,EAAG,qCCA/jB,IAAAC,EAAArG,EAAA,QAAAsG,EAAAtG,EAAA+D,EAAAsC,GAAwiBC,EAAG,gECA3iB,IAAAC,EAAAvG,EAAA,QAAAwG,EAAAxG,EAAA+D,EAAAwC,GAAyiBC,EAAG,uFCA5iB,IAAAC,EAAAzG,EAAA,QAAA0G,EAAA1G,EAAA+D,EAAA0C,GAAkiBC,EAAG,+CCAriBlG,EAAAD,QAAiBP,EAAAK,EAAuB,iFCAxCsG,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,MAAA,CAAOC,GAAA,QAAY,CAAAP,EAAA,WAAAI,EAAA,UAAAJ,EAAAQ,KAAAJ,EAAA,oBAC7HK,EAAA,2BCDIC,EAAM,WAAgB,IAAAV,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,WAAsB,CAAAP,EAAA,OAAYE,MAAA,CAAOzF,IAAMzB,EAAQ,QAAsBwH,IAAA,IAAWC,GAAA,CAAKC,MAAAd,EAAAe,YAAsBX,EAAA,OAAYO,YAAA,mBAA8B,CAAAP,EAAA,eAAoBE,MAAA,CAAOU,eAAA,UAAAC,GAAA,YAAyC,CAAAjB,EAAAkB,GAAA,YAAAd,EAAA,eAAuCE,MAAA,CAAOU,eAAA,UAAAC,GAAA,YAAyC,CAAAjB,EAAAkB,GAAA,cAAAd,EAAA,eAAyCE,MAAA,CAAOU,eAAA,UAAAC,GAAA,cAA2C,CAAAjB,EAAAkB,GAAA,qBACzfC,EAAe,GCcnB,IAAqBC,EAArB,cAAoCC,EAAA,KAElCC,WACErB,KAAKsB,QAAQpJ,KAAK,CAChB+D,KAAM,WAJSkF,EAAMI,EAAA,MAD1BH,EAAA,MACoBD,GAAA,IAAAK,EAAA,ECf+UC,EAAA,0BCQpWC,EAAgBvJ,OAAAwJ,EAAA,KAAAxJ,CACdsJ,EACAhB,EACAS,GACF,EACA,KACA,WACA,MAIAQ,EAAAE,QAAAC,OAAA,cACe,IAAAC,EAAAJ,UCJf,IAAqBK,EAArB,cAAuCX,EAAA,KAGvCY,iBACE,MAA2B,SAApBhC,KAAKiC,OAAOhG,OAJA8F,EAASR,EAAA,MAL7BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,CACVC,OAAAL,MAGiBC,GAAA,IAAAK,EAAA,EChB6SC,EAAA,ECQ9TC,aAAYnK,OAAAwJ,EAAA,KAAAxJ,CACdkK,EACAvC,EACAU,GACF,EACA,KACA,KACA,OAIA8B,EAASV,QAAAC,OAAA,UACM,IAAAU,EAAAD,sBCpBXE,EAAM,WAAgB,IAAAzC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,aAAwB,CAAAX,EAAA0C,GAAA,GAAAtC,EAAA,MAAAA,EAAA,eAAuCE,MAAA,CAAOU,eAAA,UAAAC,GAAA,YAAyC,CAAAjB,EAAAkB,GAAA,kBAAAd,EAAA,eAA6CE,MAAA,CAAOU,eAAA,UAAAC,GAAA,YAAyC,CAAAjB,EAAAkB,GAAA,qBAAAd,EAAA,eAAgDE,MAAA,CAAOU,eAAA,UAAAC,GAAA,cAA2C,CAAAjB,EAAAkB,GAAA,4BACpZyB,EAAe,YAAiB,IAAA3C,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,MAAA,CAAOzF,IAAMzB,EAAQ,QAAqBwH,IAAA,UCAxKtG,aAAA,IAMIsI,EAAYxK,OAAAwJ,EAAA,KAAAxJ,CAChBkC,EACEmI,EACAE,GACF,EACA,KACA,WACA,MAIAC,EAASf,QAAAC,OAAA,WACM,IAAAe,EAAAD,UCnBXE,EAAM,WAAgB,IAAA9C,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,UAAqB,CAAAV,KAAA8C,OAAAC,MAAA,eAAA5C,EAAA,cAAAJ,EAAAQ,KAAAJ,EAAA,gBAAAH,KAAA8C,OAAAC,MAAA,gBAAA5C,EAAA,eAAwIE,MAAA,CAAO2C,UAAAjD,EAAAkD,WAAyBlD,EAAAQ,MAAA,IACnS2C,EAAe,GCDfC,EAAM,WAAgB,IAAApD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,gBAA2B,CAAAP,EAAA,OAAYO,YAAA,eAA0B,CAAAX,EAAAkB,GAAA,oCAAAd,EAAA,UAA0DS,GAAA,CAAIC,MAAAd,EAAAqD,OAAkB,CAAArD,EAAAkB,GAAA,YAAAd,EAAA,OAA+BO,YAAA,eAA0B,CAAAP,EAAA,UAAeE,MAAA,CAAOgD,OAAAtD,EAAAiD,cAAwB,MAC9VM,EAAe,GCDfC,EAAM,WAAgB,IAAAxD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,QAAmB,CAAAP,EAAA,UAAeE,MAAA,CAAOgD,OAAAtD,EAAAsD,WAAqB,IACpKG,EAAe,GCDfC,EAAM,WAAgB,IAAA1D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,UAAqB,CAAAP,EAAA,OAAYO,YAAA,QAAAE,GAAA,CAAwBC,MAAAd,EAAA2D,SAAoB,CAAA3D,EAAA4D,OAAAxD,EAAA,QAAAJ,EAAAkB,GAAA,OAAAd,EAAA,QAAAJ,EAAAkB,GAAA,OAAAlB,EAAAkB,GAAA,SAAAlB,EAAA6D,GAAA7D,EAAAsD,OAAApH,MAAA,UAAA8D,EAAA,YAAAI,EAAA,QAAiJO,YAAA,cAAyB,CAAAX,EAAAkB,GAAA,aAAAlB,EAAAQ,OAAAR,EAAA,OAAAI,EAAA,OAAwDO,YAAA,WAAsBX,EAAA8D,GAAA9D,EAAAsD,OAAA,eAAAS,GAA+C,OAAA3D,EAAA,OAAiBnD,IAAA8G,EAAA7H,MAAmB,CAAA8H,MAAAC,QAAAF,EAAApH,OAAAyD,EAAA,iBAAuDE,MAAA,CAAOgD,OAAAS,KAAoB3D,EAAA,cAAmBE,MAAA,CAAOgD,OAAAS,GAAmBG,MAAA,CAAQvH,MAAAoH,EAAA,MAAAI,SAAA,SAAAC,GAAiDpE,EAAAqE,KAAAN,EAAA,QAAAK,IAAkCE,WAAA,sBAA+B,KAAM,GAAAtE,EAAAQ,QAC7vB+D,EAAe,GCDfC,EAAM,WAAgB,IAAAxE,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,QAAmB,CAAAP,EAAA,OAAYO,YAAA,aAAwB,CAAAP,EAAA,OAAYO,YAAA,aAAwB,CAAAX,EAAAkB,GAAA,SAAAlB,EAAA6D,GAAA7D,EAAAsD,OAAApH,MAAA,aAAAkE,EAAA,OAAiEO,YAAA,iBAA4B,mBAAAX,EAAAsD,OAAA3G,MAAAyD,EAAA,gBAA4D8D,MAAA,CAAOvH,MAAAqD,EAAA,YAAAmE,SAAA,SAAAC,GAAiDpE,EAAAyE,YAAAL,GAAoBE,WAAA,iBAA2BtE,EAAAQ,KAAA,mBAAAR,EAAAsD,OAAA3G,MAAAyD,EAAA,iBAAuE8D,MAAA,CAAOvH,MAAAqD,EAAA,YAAAmE,SAAA,SAAAC,GAAiDpE,EAAAyE,YAAAL,GAAoBE,WAAA,iBAA2BtE,EAAAQ,KAAAR,EAAA,uBAAAI,EAAA,UAAqDO,YAAA,gBAAAE,GAAA,CAAgCC,MAAA,SAAA4D,GAAyB1E,EAAA2E,cAAA3E,EAAA2E,gBAAuC,CAAA3E,EAAAkB,GAAA,OAAAlB,EAAAQ,MAAA,KAAAR,EAAA4E,wBAAA5E,EAAA2E,aAAAvE,EAAA,WAA8FE,MAAA,CAAOuE,aAAA7E,EAAAsD,OAAAwB,SAAkCZ,MAAA,CAAQvH,MAAAqD,EAAA,YAAAmE,SAAA,SAAAC,GAAiDpE,EAAAyE,YAAAL,GAAoBE,WAAA,iBAA2BtE,EAAAQ,MAAA,IACn/BuE,EAAe,GCDfC,EAAM,WAAgB,IAAAhF,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,UAAqB,CAAAX,EAAA,cAAAI,EAAA,OAAgCO,YAAA,eAA0BX,EAAA8D,GAAA9D,EAAA,sBAAAlG,EAAAmL,GAA6C,OAAA7E,EAAA,OAAiBnD,IAAAnD,EAAAsB,KAAAuF,YAAA,aAAAuE,MAAA,CAA2CC,oBAAAF,IAAAjF,EAAAoF,eAAiDvE,GAAA,CAAKC,MAAA,SAAA4D,GAAyB,OAAA1E,EAAAqF,UAAAJ,MAA8B,CAAAjF,EAAAkB,GAAA,SAAAlB,EAAA6D,GAAA/J,EAAAsB,MAAA,cAA6C,cAAA4E,EAAAsF,OAAAlK,KAAAgF,EAAA,sBAA6DE,MAAA,CAAOgD,OAAAtD,EAAAsF,QAAoBpB,MAAA,CAAQvH,MAAAqD,EAAA,OAAAmE,SAAA,SAAAC,GAA4CpE,EAAAuF,OAAAnB,GAAeE,WAAA,YAAsBtE,EAAAQ,MAAA,IACzmBgF,EAAe,GCDfC,EAAM,WAAgB,IAAAzF,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,SAA6BsF,WAAA,EAAaxJ,KAAA,QAAAyJ,QAAA,UAAAhJ,MAAAqD,EAAA,OAAAsE,WAAA,WAAsEhE,MAAA,CAASlF,KAAA,QAAAwK,IAAA5F,EAAAsD,OAAAsC,IAAAC,IAAA7F,EAAAsD,OAAAuC,IAAAC,KAAA9F,EAAAsD,OAAAwC,MAAgFC,SAAA,CAAWpJ,MAAAqD,EAAA,QAAqBa,GAAA,CAAKmF,IAAA,SAAAtB,GAAuB1E,EAAAuF,OAAAb,EAAApJ,OAAAqB,aAC1VsJ,EAAe,GCanB,IAAqBC,EAArB,cAAgD7E,EAAA,KAK9CkE,aACE,OAAOtF,KAAKtD,MAGd4I,WAAW5I,GACTsD,KAAKkG,MAAM,QAASxJ,EAAQ,KARtB6E,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,gCACOoJ,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,iCAHkB8N,EAAkB1E,EAAA,MADtCH,EAAA,MACoB6E,GAAA,IAAAE,EAAA,ECdqVC,EAAA,ECOtWC,EAAYlO,OAAAwJ,EAAA,KAAAxJ,CACdiO,EACAZ,EACAQ,GACF,EACA,KACA,KACA,MAIAK,EAASzE,QAAAC,OAAA,oBACM,IAAAyE,EAAAD,UCQf,IAAqBE,EAArB,cAAqCnF,EAAA,KALrCC,kCAMErB,KAAAmF,cAAgB,EAEhBqB,oBACE,OAAoC,IAA7BxG,KAAK4E,aAAa5M,OAM3BqN,aACE,OAAOrF,KAAK4E,aAAa5E,KAAKmF,eAGhCG,aACE,OAAOtF,KAAKtD,MAGd4I,WAAW5I,GACTsD,KAAKkG,MAAM,QAASxJ,GAGtB2E,UAAU2D,GACRhF,KAAKmF,cAAgBH,IAhBfzD,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,uCACOoJ,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,gCARkBoO,EAAOhF,EAAA,MAL3BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAW,CACTuE,mBAAAH,MAGiBC,GAAA,IAAAG,EAAA,EC3B+UC,EAAA,ECQhWC,aAAYzO,OAAAwJ,EAAA,KAAAxJ,CACdwO,EACA5B,EACAQ,GACF,EACA,KACA,WACA,OAIAqB,EAAShF,QAAAC,OAAA,cACM,IAAAgD,EAAA+B,UCpBXC,EAAM,WAAgB,IAAA9G,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,iBAA4B,CAAAP,EAAA,SAAcsF,WAAA,EAAaxJ,KAAA,QAAAyJ,QAAA,UAAAhJ,MAAAqD,EAAA,OAAAsE,WAAA,WAAsEhE,MAAA,CAASlF,KAAA,UAAgB2K,SAAA,CAAWpJ,MAAAqD,EAAA,QAAqBa,GAAA,CAAKkG,MAAA,SAAArC,GAAyBA,EAAApJ,OAAA0L,YAAsChH,EAAAuF,OAAAb,EAAApJ,OAAAqB,cAChWsK,EAAe,GCQnB,IAAqBC,EAArB,cAA0C7F,EAAA,KAGxCkE,aACE,OAAOtF,KAAKtD,MAGd4I,WAAW5I,GACTsD,KAAKkG,MAAM,QAASxJ,EAAQ,KAPtB6E,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,gCADkB8O,EAAY1F,EAAA,MADhCH,EAAA,MACoB6F,GAAA,IAAAC,GAAA,ECT8UC,GAAA,GCQ/VC,cAAYjP,OAAAwJ,EAAA,KAAAxJ,CACdgP,GACAN,EACAG,GACF,EACA,KACA,WACA,OAIAI,GAASxF,QAAAC,OAAA,aACM,IAAAwF,GAAAD,WCpBXE,GAAM,WAAgB,IAAAvH,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,SAA6BsF,WAAA,EAAaxJ,KAAA,QAAAyJ,QAAA,UAAAhJ,MAAAqD,EAAA,OAAAsE,WAAA,WAAsEhE,MAAA,CAASlF,KAAA,YAAkB2K,SAAA,CAAWyB,QAAAxD,MAAAC,QAAAjE,EAAAuF,QAAAvF,EAAAyH,GAAAzH,EAAAuF,OAAA,SAAAvF,EAAA,QAA4Ea,GAAA,CAAK6G,OAAA,SAAAhD,GAA0B,IAAAiD,EAAA3H,EAAAuF,OAAAqC,EAAAlD,EAAApJ,OAAAuM,IAAAD,EAAAJ,QAAsE,GAAAxD,MAAAC,QAAA0D,GAAA,CAAuB,IAAAvD,EAAA,KAAA0D,EAAA9H,EAAAyH,GAAAE,EAAAvD,GAAiCwD,EAAAJ,QAAiBM,EAAA,IAAA9H,EAAAuF,OAAAoC,EAAAI,OAAA,CAAA3D,KAA2C0D,GAAA,IAAA9H,EAAAuF,OAAAoC,EAAA/J,MAAA,EAAAkK,GAAAC,OAAAJ,EAAA/J,MAAAkK,EAAA,UAAqE9H,EAAAuF,OAAAsC,SACrlBG,GAAe,GCQnB,IAAqBC,GAArB,cAA2C5G,EAAA,KAGzCkE,aACE,OAAOtF,KAAKtD,MAGd4I,WAAW5I,GACTsD,KAAKkG,MAAM,QAASxJ,KAPd6E,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,iCADkB6P,GAAazG,EAAA,MADjCH,EAAA,MACoB4G,IAAA,IAAAC,GAAA,GCT+UC,GAAA,GCOhWC,GAAYhQ,OAAAwJ,EAAA,KAAAxJ,CACd+P,GACAZ,GACAS,IACF,EACA,KACA,KACA,MAIAI,GAASvG,QAAAC,OAAA,cACM,IAAAuG,GAAAD,WCgBf,IAAqBE,GAArB,cAAwCjH,EAAA,KALxCC,kCAMErB,KAAA0E,cAAuB,EAIvBF,kBACE,OAAOxE,KAAKqD,OAAO3G,MAGrB8H,gBAAgB8D,QACc7M,IAAzBuE,KAAKqD,OAAOkF,UACbvI,KAAKqD,OAAOkF,SAASD,GAEvBtI,KAAKqD,OAAO3G,MAAQ4L,EAGtB3D,6BACE,YAA+BlJ,IAAxBuE,KAAKqD,OAAOwB,UAdbtD,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,kCAHkBkQ,GAAU9G,EAAA,MAL9BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAW,CACTsG,QAAA3D,EAAS4D,aAAApB,GAAcqB,cAAAN,OAGNC,IAAA,IAAAM,GAAA,GCnC4UC,GAAA,GCQ7VC,cAAY1Q,OAAAwJ,EAAA,KAAAxJ,CACdyQ,GACArE,EACAO,GACF,EACA,KACA,WACA,OAIA+D,GAASjH,QAAAC,OAAA,WACM,IAAAiH,GAAAD,WCgBf,IAAqBE,GAArB,cAAoC3H,EAAA,KANpCC,kCAOErB,KAAA2D,QAAiB,EAGjBqF,kBACE,OAAoC,IAA7BhJ,KAAKqD,OAAO3G,MAAM1E,OAG3BqJ,SACMrB,KAAKgJ,cACPhJ,KAAK2D,QAAU3D,KAAK2D,UARhBpC,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,kCAFkB4Q,GAAMxH,EAAA,MAN1BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT8D,KAAM,gBACNiG,WAAW,CACT+G,WAAAH,OAGiBC,IAAA,IAAAG,GAAA,GCpC8UC,GAAA,GCQ/VC,cAAYjR,OAAAwJ,EAAA,KAAAxJ,CACdgR,GACA1F,EACAa,GACF,EACA,KACA,WACA,OAIA8E,GAASxH,QAAAC,OAAA,aACM,IAAAwH,GAAAD,WCRf,IAAqBE,GAArB,cAAyClI,EAAA,OAC/BG,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,kCADkBmR,GAAW/H,EAAA,MAH/BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,CAAEqH,OAAAF,OAEKC,IAAA,IAAAE,GAAA,GCZ8UC,GAAA,GCQ/VC,cAAYvR,OAAAwJ,EAAA,KAAAxJ,CACdsR,GACAlG,EACAC,GACF,EACA,KACA,WACA,OAIAkG,GAAS9H,QAAAC,OAAA,aACM,IClBH8H,GAiBAC,GDCGC,GAAAH,YClBf,SAAYC,GACVA,EAAA,yCACAA,EAAA,mDACAA,EAAA,uDACAA,EAAA,iEACAA,EAAA,uDACAA,EAAA,qDACAA,EAAA,mDACAA,EAAA,iEACAA,EAAA,6CACAA,EAAA,mEACAA,EAAA,mDACAA,EAAA,2CACAA,EAAA,mCACAA,EAAA,wBAdF,CAAYA,QAAS,KAiBrB,SAAYC,GACVA,EAAA,uCACAA,EAAA,yDAFF,CAAYA,QAAW,KAKvB,MAAME,GAAiB3R,OAAO4R,KAAKJ,IAC7BK,GAAkB7R,OAAO4R,KAAKH,IAE7B,MAAMK,GACX5I,YAAY6I,GAMJlK,KAAAmK,WAAuC,GACvCnK,KAAAoK,WAAuC,GAN7CpK,KAAKkK,GAAKA,EACVlK,KAAKqK,qBACLrK,KAAKsK,eAMCjJ,gBAAgBpF,GACtB,MAAMiO,EAAKlK,KAAKkK,GAChB,IAAIK,EAAML,EAAGM,aAAavO,GACrBsO,IACHA,EAAML,EAAGM,aAAa,OAASvO,IAE5BsO,IACHA,EAAML,EAAGM,aAAa,UAAYvO,IAEpC+D,KAAKmK,WAAWlO,GAAQsO,EAG1BlJ,aAAcpF,GAIZ,OAHMA,KAAQ+D,KAAKmK,YACjBnK,KAAKyK,gBAAgBxO,GAEhB+D,KAAKmK,WAAWlO,GAGzBoF,aAAcpF,GACZ,OAAO+D,KAAKoK,WAAWnO,GAGjBoF,qBACN,IAAK,IAAIvJ,EAAI,EAAGA,EAAIgS,GAAe9R,OAAQF,IAAK,CAC9C,IAAI4S,EAAUZ,GAAehS,GAC7BkI,KAAKyK,gBAAgBC,IAIjBrJ,eACN,IAAK,IAAIvJ,EAAI,EAAGA,EAAIkS,GAAgBhS,OAAQF,IAAK,CAC/C,IAAImE,EAAO+N,GAAgBlS,GAC3BkI,KAAKoK,WAAWnO,GAAQ+D,KAAKkK,GAAGS,aAAc3K,KAAKkK,GAAWjO,MCnEpE,IAAY2O,IAAZ,SAAYA,GACVA,IAAA,sBACAA,IAAA,2BAFF,CAAYA,QAAU,KAKf,MAAMC,GACXxJ,YAAYyJ,EAAsB3P,GAChC6E,KAAK8K,SAAWA,EAChB,MAAMZ,EAAKlK,KAAK8K,SAASZ,GACzBlK,KAAK7E,KAAOA,EACZ,IAAI4P,EAASb,EAAGc,aAAa7P,IAASyP,GAAWK,OAASf,EAAGgB,cAAgBhB,EAAGiB,iBAChF,GAAe,OAAXJ,EACF,KAAM,6BAER/K,KAAK+K,OAASA,EAMhB1J,cAAc+J,GACZ,MAAMlB,EAAKlK,KAAK8K,SAASZ,GAGzB,GAFAA,EAAGmB,aAAarL,KAAK+K,OAAQK,GAC7BlB,EAAGoB,cAActL,KAAK+K,SACjBb,EAAGqB,mBAAmBvL,KAAK+K,OAAQb,EAAGsB,gBAAiB,CAC1D,IAAIC,EAAMvB,EAAGwB,iBAAiB1L,KAAK+K,QACnC,GAAIU,EAEF,MADAE,GAAqBP,GACf,IAAI7P,MAAMkQ,GAGpB,IAAKzL,KAAK+K,OACR,KAAM,iDAER,OAAO/K,KAAK+K,OAGd1J,UACErB,KAAK8K,SAASZ,GAAG0B,aAAa5L,KAAK+K,SAKvC,SAASY,GAAqBP,GAC5B7N,QAAQsO,KAAKC,GAAeV,IAG9B,SAASU,GAAeC,GAEtB,IADA,IAAIC,EAAQD,EAAIE,MAAM,MACbnU,EAAI,EAAGA,EAAIkU,EAAMhU,OAAQF,IAChCkU,EAAMlU,GAAMA,EAAI,EAAK,KAAOkU,EAAMlU,GAEpC,OAAOkU,EAAME,KAAK,MCvDpB,IAEa3P,GAFT4P,GAAQ,iEAAiEF,MAAM,IAC/EG,GAAO,IAAIrI,MAAM,IACjBsI,GAAM,EAEH,SAASC,KACd,IAAK,IAAIxU,EAAI,EAAGA,EAAI,GAAIA,IACZ,IAANA,GAAiB,KAANA,GAAkB,KAANA,GAAkB,KAANA,EACrCsU,GAAKtU,GAAK,IACK,KAANA,EACTsU,GAAKtU,GAAK,KAENuU,IAAO,IAAMA,GAAM,SAA6B,SAAhBE,KAAKC,SAAwB,GACjEjQ,GAAU,GAAN8P,GACJA,KAAa,EACbD,GAAKtU,GAAKqU,GAAa,KAANrU,EAAiB,EAAJyE,GAAW,EAAMA,KAGnD,OAAO6P,GAAKF,KAAK,ICZZ,MAAMO,GAWXpL,YAAYqL,EAAYC,EAAYC,GAL5B5M,KAAA6M,OAAuB,IAAIC,aAAa,GAM9C9M,KAAK0M,EAAIA,GAAK,EACd1M,KAAK2M,EAAIA,GAAK,EACd3M,KAAK4M,EAAIA,GAAK,EAGTvL,IAAIqL,EAAWC,EAAWC,GAI/B,OAHA5M,KAAK0M,EAAIA,EACT1M,KAAK2M,EAAIA,EACT3M,KAAK4M,EAAIA,EACF5M,KAGFqB,KAAK0L,GAIV,OAHA/M,KAAK0M,EAAIK,EAAEL,EACX1M,KAAK2M,EAAII,EAAEJ,EACX3M,KAAK4M,EAAIG,EAAEH,EACJ5M,KAGFqB,OAAO0L,GACZ,OAASA,EAAEL,IAAM1M,KAAK0M,GAAOK,EAAEJ,IAAM3M,KAAK2M,GAAQI,EAAEH,IAAM5M,KAAK4M,EAG1DvL,QACL,OAAO,IAAIoL,GAAQzM,KAAK0M,EAAG1M,KAAK2M,EAAG3M,KAAK4M,GAGnCvL,IAAI0L,GAIT,OAHA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACZ3M,KAAK4M,GAAKG,EAAEH,EACL5M,KAGFqB,IAAI0L,GAIT,OAHA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACZ3M,KAAK4M,GAAKG,EAAEH,EACL5M,KAGFqB,MACL,OAAOrB,KAAK0M,EAAI1M,KAAK0M,EAAI1M,KAAK2M,EAAI3M,KAAK2M,EAAI3M,KAAK4M,EAAI5M,KAAK4M,EAGpDvL,SACL,OAAOkL,KAAKS,KAAKhN,KAAKiN,OAGjB5L,SAAS0L,GAId,OAHA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACZ3M,KAAK4M,GAAKG,EAAEH,EACL5M,KAGFqB,eAAe6L,GAIpB,OAHAlN,KAAK0M,GAAKQ,EACVlN,KAAK2M,GAAKO,EACVlN,KAAK4M,GAAKM,EACHlN,KAGFqB,YACL,MAAM8L,EAAa,EAAMnN,KAAKhI,SAC9B,OAAOgI,KAAKoN,eAAeD,GAGtB9L,kBACL,OAAOkL,KAAKc,IAAIrN,KAAK0M,GAAKH,KAAKc,IAAIrN,KAAK2M,GAAKJ,KAAKc,IAAIrN,KAAK4M,GAGtDvL,IAAI0L,GAIT,OAHA/M,KAAK0M,EAAIH,KAAK3G,IAAI5F,KAAK0M,EAAGK,EAAEL,GAC5B1M,KAAK2M,EAAIJ,KAAK3G,IAAI5F,KAAK2M,EAAGI,EAAEJ,GAC5B3M,KAAK4M,EAAIL,KAAK3G,IAAI5F,KAAK4M,EAAGG,EAAEH,GACrB5M,KAGFqB,IAAI0L,GAIT,OAHA/M,KAAK0M,EAAIH,KAAK5G,IAAI3F,KAAK0M,EAAGK,EAAEL,GAC5B1M,KAAK2M,EAAIJ,KAAK5G,IAAI3F,KAAK2M,EAAGI,EAAEJ,GAC5B3M,KAAK4M,EAAIL,KAAK5G,IAAI3F,KAAK4M,EAAGG,EAAEH,GACrB5M,KAGFqB,MAAMuE,EAAcD,GAIzB,OAHA3F,KAAK0M,EAAIH,KAAK5G,IAAIC,EAAI8G,EAAGH,KAAK3G,IAAID,EAAI+G,EAAG1M,KAAK0M,IAC9C1M,KAAK2M,EAAIJ,KAAK5G,IAAIC,EAAI+G,EAAGJ,KAAK3G,IAAID,EAAIgH,EAAG3M,KAAK2M,IAC9C3M,KAAK4M,EAAIL,KAAK5G,IAAIC,EAAIgH,EAAGL,KAAK3G,IAAID,EAAIiH,EAAG5M,KAAK4M,IACvC5M,KAGFqB,IAAI0L,GACT,OAAO/M,KAAK0M,EAAIK,EAAEL,EAAI1M,KAAK2M,EAAII,EAAEJ,EAAI3M,KAAK4M,EAAIG,EAAEH,EAG3CvL,aAAaiM,EAAYC,GAC9B,MAAMC,EAAKF,EAAEZ,EAAGe,EAAKH,EAAEX,EAAGe,EAAKJ,EAAEV,EAC3Be,EAAKJ,EAAEb,EAAGkB,EAAKL,EAAEZ,EAAGkB,EAAKN,EAAEX,EAIjC,OAHA5M,KAAK0M,EAAIe,EAAKI,EAAKH,EAAKE,EACxB5N,KAAK2M,EAAIe,EAAKC,EAAKH,EAAKK,EACxB7N,KAAK4M,EAAIY,EAAKI,EAAKH,EAAKE,EACjB3N,KAGFqB,MAAM0L,GACX,OAAO/M,KAAK8N,aAAa9N,KAAM+M,GAG1B1L,WAAaiM,EAAYC,GAIhC,OAHAvN,KAAK0M,EAAIY,EAAEZ,EAAIa,EAAEb,EACjB1M,KAAK2M,EAAIW,EAAEX,EAAIY,EAAEZ,EACjB3M,KAAK4M,EAAIU,EAAEV,EAAIW,EAAEX,EACV5M,KAGAqB,kBAAkB0M,GACvB,MAAMrB,EAAI1M,KAAK0M,EAAGC,EAAI3M,KAAK2M,EAAGC,EAAI5M,KAAK4M,EACjCoB,EAAKD,EAAErB,EAAGuB,EAAKF,EAAEpB,EAAGuB,EAAKH,EAAEnB,EAAGuB,EAAKJ,EAAEK,EAGrCC,EAAKF,EAAKzB,EAAIuB,EAAKrB,EAAIsB,EAAKvB,EAC5B2B,EAAKH,EAAKxB,EAAIuB,EAAKxB,EAAIsB,EAAKpB,EAC5B2B,EAAKJ,EAAKvB,EAAIoB,EAAKrB,EAAIsB,EAAKvB,EAC5B8B,GAAOR,EAAKtB,EAAIuB,EAAKtB,EAAIuB,EAAKtB,EAOpC,OAJA5M,KAAK0M,EAAI2B,EAAKF,EAAKK,GAAOR,EAAKM,GAAOJ,EAAKK,GAAON,EAClDjO,KAAK2M,EAAI2B,EAAKH,EAAKK,GAAOP,EAAKM,GAAOP,EAAKK,GAAOH,EAClDlO,KAAK4M,EAAI2B,EAAKJ,EAAKK,GAAON,EAAKG,GAAOJ,EAAKK,GAAON,EAE3ChO,KAGFqB,iBAAiBjI,GACtB,MAAMqV,EAAYlC,KAAKmC,IAAItV,EAAEuV,OAASvV,EAAEwV,OAIxC,OAHA5O,KAAK0M,EAAI+B,EAAYlC,KAAKmC,IAAItV,EAAEyV,MAChC7O,KAAK2M,EAAIJ,KAAKuC,IAAI1V,EAAEuV,OAASvV,EAAEwV,OAC/B5O,KAAK4M,EAAI6B,EAAYlC,KAAKuC,IAAI1V,EAAEyV,MACzB7O,KAGFqB,aAAavF,GAClB,MAAM4Q,EAAI1M,KAAK0M,EACTC,EAAI3M,KAAK2M,EACTC,EAAI5M,KAAK4M,EACT/S,EAAIiC,EAAEiT,SAENX,EAAI,GAAKvU,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,IAAM+S,EAAI/S,EAAE,KAKnD,OAJAmG,KAAK0M,GAAK7S,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,GAAK+S,EAAI/S,EAAE,KAAOuU,EACpDpO,KAAK2M,GAAK9S,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,GAAK+S,EAAI/S,EAAE,KAAOuU,EACpDpO,KAAK4M,GAAK/S,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,IAAM+S,EAAI/S,EAAE,KAAOuU,EAE9CpO,KAGTqB,WAAW0L,GACT,OAAOR,KAAKS,KAAKhN,KAAKgP,kBAAkBjC,IAG1C1L,kBAAkB0L,GAChB,IAAIkC,EAAKjP,KAAK0M,EAAIK,EAAEL,EAAGwC,EAAKlP,KAAK2M,EAAII,EAAEJ,EAAGwC,EAAKnP,KAAK4M,EAAIG,EAAEH,EAC1D,OAAOqC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAG3B9N,YAQL,YAPoB5F,IAAhBuE,KAAK6M,OACP7M,KAAK6M,OAAS,IAAIC,aAAa,CAAC9M,KAAK0M,EAAG1M,KAAK2M,EAAG3M,KAAK4M,KAErD5M,KAAK6M,OAAO,GAAK7M,KAAK0M,EACtB1M,KAAK6M,OAAO,GAAK7M,KAAK2M,EACtB3M,KAAK6M,OAAO,GAAK7M,KAAK4M,GAEjB5M,KAAK6M,OAGdxL,UAAU+N,EAAiBC,GAKzB,YAJe5T,IAAX4T,IAAsBA,EAAS,GACnCrP,KAAK0M,EAAI0C,EAAMC,GACfrP,KAAK2M,EAAIyC,EAAMC,EAAS,GACxBrP,KAAK4M,EAAIwC,EAAMC,EAAS,GACjBrP,KAGTqB,QAAQ+N,EAAkBC,GAMxB,YALc5T,IAAV2T,IAAqBA,EAAQ,SAClB3T,IAAX4T,IAAsBA,EAAS,GACnCD,EAAMC,GAAUrP,KAAK0M,EACrB0C,EAAMC,EAAS,GAAKrP,KAAK2M,EACzByC,EAAMC,EAAS,GAAKrP,KAAK4M,EAClBwC,EAGT/N,eAAe0L,EAAYqC,GACzB,OAAOrC,EAAEuC,QAAQF,EAAO,IChNrB,MAAMG,GAMXlO,YAAYqL,EAAYC,EAAYC,EAAYwB,GAWhDpO,KAAAwP,WAAiB,EAVfxP,KAAK0M,EAAIA,GAAK,EACd1M,KAAK2M,EAAIA,GAAK,EACd3M,KAAK4M,EAAIA,GAAK,EACd5M,KAAKoO,OAAW3S,IAAN2S,EAAmBA,EAAI,EASnC/M,QACE,OAAO,IAAIkO,GAAQvP,KAAK0M,EAAG1M,KAAK2M,EAAG3M,KAAK4M,EAAG5M,KAAKoO,GAGlD/M,KAAK0L,GAKH,OAJA/M,KAAK0M,EAAIK,EAAEL,EACX1M,KAAK2M,EAAII,EAAEJ,EACX3M,KAAK4M,EAAIG,EAAEH,EACX5M,KAAKoO,OAAa3S,IAARsR,EAAEqB,EAAmBrB,EAAEqB,EAAI,EAC9BpO,KAGTqB,OAAO0L,GACL,OAASA,EAAEL,IAAM1M,KAAK0M,GAAOK,EAAEJ,IAAM3M,KAAK2M,GAAOI,EAAEH,IAAM5M,KAAK4M,GAAOG,EAAEqB,IAAMpO,KAAKoO,EAGpF/M,IAAKqL,EAAWC,EAAWC,EAAWwB,GAKpC,OAJApO,KAAK0M,EAAIA,EACT1M,KAAK2M,EAAIA,EACT3M,KAAK4M,EAAIA,EACT5M,KAAKoO,EAAIA,EACFpO,KAGTqB,UAAW6L,GAKT,OAJAlN,KAAK0M,EAAIQ,EACTlN,KAAK2M,EAAIO,EACTlN,KAAK4M,EAAIM,EACTlN,KAAKoO,EAAIlB,EACFlN,KAGTqB,KAAMqL,GAEJ,OADA1M,KAAK0M,EAAIA,EACF1M,KAGTqB,KAAMsL,GAEJ,OADA3M,KAAK2M,EAAIA,EACF3M,KAGTqB,KAAMuL,GAEJ,OADA5M,KAAK4M,EAAIA,EACF5M,KAGTqB,KAAM+M,GAEJ,OADApO,KAAKoO,EAAIA,EACFpO,KAGTqB,aAAc2D,EAAetI,GAC3B,OAAQsI,GACN,KAAK,EAAGhF,KAAK0M,EAAIhQ,EAAO,MACxB,KAAK,EAAGsD,KAAK2M,EAAIjQ,EAAO,MACxB,KAAK,EAAGsD,KAAK4M,EAAIlQ,EAAO,MACxB,KAAK,EAAGsD,KAAKoO,EAAI1R,EAAO,MACxB,QAAS,MAAM,IAAInB,MAAM,0BAA4ByJ,GAEvD,OAAOhF,KAGTqB,aAAc2D,GACZ,OAAQA,GACN,KAAK,EAAG,OAAOhF,KAAK0M,EACpB,KAAK,EAAG,OAAO1M,KAAK2M,EACpB,KAAK,EAAG,OAAO3M,KAAK4M,EACpB,KAAK,EAAG,OAAO5M,KAAKoO,EACpB,QAAS,MAAM,IAAI7S,MAAM,0BAA4ByJ,IAIzD3D,2BAA4B0M,GAG1B/N,KAAKoO,EAAI,EAAI7B,KAAKkD,KAAK1B,EAAEK,GACzB,IAAIhV,EAAImT,KAAKS,KAAK,EAAIe,EAAEK,EAAIL,EAAEK,GAU9B,OATIhV,EAAI,MACN4G,KAAK0M,EAAI,EACT1M,KAAK2M,EAAI,EACT3M,KAAK4M,EAAI,IAET5M,KAAK0M,EAAIqB,EAAErB,EAAItT,EACf4G,KAAK2M,EAAIoB,EAAEpB,EAAIvT,EACf4G,KAAK4M,EAAImB,EAAEnB,EAAIxT,GAEV4G,KAITqB,IAAK0L,GAKH,OAJA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACZ3M,KAAK4M,GAAKG,EAAEH,EACZ5M,KAAKoO,GAAKrB,EAAEqB,EACLpO,KAGTqB,UAAWjI,GAKT,OAJA4G,KAAK0M,GAAKtT,EACV4G,KAAK2M,GAAKvT,EACV4G,KAAK4M,GAAKxT,EACV4G,KAAKoO,GAAKhV,EACH4G,KAGTqB,WAAYiM,EAAYC,GAKtB,OAJAvN,KAAK0M,EAAIY,EAAEZ,EAAIa,EAAEb,EACjB1M,KAAK2M,EAAIW,EAAEX,EAAIY,EAAEZ,EACjB3M,KAAK4M,EAAIU,EAAEV,EAAIW,EAAEX,EACjB5M,KAAKoO,EAAId,EAAEc,EAAIb,EAAEa,EACVpO,KAGTqB,gBAAiB0L,EAAY3T,GAK3B,OAJA4G,KAAK0M,GAAKK,EAAEL,EAAItT,EAChB4G,KAAK2M,GAAKI,EAAEJ,EAAIvT,EAChB4G,KAAK4M,GAAKG,EAAEH,EAAIxT,EAChB4G,KAAKoO,GAAKrB,EAAEqB,EAAIhV,EACT4G,KAGTqB,IAAK0L,GAKH,OAJA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACZ3M,KAAK4M,GAAKG,EAAEH,EACZ5M,KAAKoO,GAAKrB,EAAEqB,EACLpO,KAGTqB,UAAWjI,GAKT,OAJA4G,KAAK0M,GAAKtT,EACV4G,KAAK2M,GAAKvT,EACV4G,KAAK4M,GAAKxT,EACV4G,KAAKoO,GAAKhV,EACH4G,KAITqB,WAAYiM,EAAYC,GAKtB,OAJAvN,KAAK0M,EAAIY,EAAEZ,EAAIa,EAAEb,EACjB1M,KAAK2M,EAAIW,EAAEX,EAAIY,EAAEZ,EACjB3M,KAAK4M,EAAIU,EAAEV,EAAIW,EAAEX,EACjB5M,KAAKoO,EAAId,EAAEc,EAAIb,EAAEa,EACVpO,KAITqB,eAAgB6L,GAKd,OAJAlN,KAAK0M,GAAKQ,EACVlN,KAAK2M,GAAKO,EACVlN,KAAK4M,GAAKM,EACVlN,KAAKoO,GAAKlB,EACHlN,KAGTqB,aAAcvF,GACZ,IAAI4Q,EAAI1M,KAAK0M,EAAGC,EAAI3M,KAAK2M,EAAGC,EAAI5M,KAAK4M,EAAGwB,EAAIpO,KAAKoO,EAC7CvU,EAAIiC,EAAEiT,SAKV,OAJA/O,KAAK0M,EAAI7S,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,GAAK+S,EAAI/S,EAAE,IAAMuU,EAClDpO,KAAK2M,EAAI9S,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,GAAK+S,EAAI/S,EAAE,IAAMuU,EAClDpO,KAAK4M,EAAI/S,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,IAAM+S,EAAI/S,EAAE,IAAMuU,EACnDpO,KAAKoO,EAAIvU,EAAE,GAAK6S,EAAI7S,EAAE,GAAK8S,EAAI9S,EAAE,IAAM+S,EAAI/S,EAAE,IAAMuU,EAC5CpO,KAGTqB,aAAc6L,GACZ,OAAOlN,KAAKoN,eAAe,EAAIF,GAGjC7L,IAAK0L,GAKH,OAJA/M,KAAK0M,EAAIH,KAAK3G,IAAI5F,KAAK0M,EAAGK,EAAEL,GAC5B1M,KAAK2M,EAAIJ,KAAK3G,IAAI5F,KAAK2M,EAAGI,EAAEJ,GAC5B3M,KAAK4M,EAAIL,KAAK3G,IAAI5F,KAAK4M,EAAGG,EAAEH,GAC5B5M,KAAKoO,EAAI7B,KAAK3G,IAAI5F,KAAKoO,EAAGrB,EAAEqB,GACrBpO,KAGTqB,IAAK0L,GAKH,OAJA/M,KAAK0M,EAAIH,KAAK5G,IAAI3F,KAAK0M,EAAGK,EAAEL,GAC5B1M,KAAK2M,EAAIJ,KAAK5G,IAAI3F,KAAK2M,EAAGI,EAAEJ,GAC5B3M,KAAK4M,EAAIL,KAAK5G,IAAI3F,KAAK4M,EAAGG,EAAEH,GAC5B5M,KAAKoO,EAAI7B,KAAK5G,IAAI3F,KAAKoO,EAAGrB,EAAEqB,GACrBpO,KAGTqB,MAAOuE,EAAcD,GAMnB,OAJA3F,KAAK0M,EAAIH,KAAK5G,IAAIC,EAAI8G,EAAGH,KAAK3G,IAAID,EAAI+G,EAAG1M,KAAK0M,IAC9C1M,KAAK2M,EAAIJ,KAAK5G,IAAIC,EAAI+G,EAAGJ,KAAK3G,IAAID,EAAIgH,EAAG3M,KAAK2M,IAC9C3M,KAAK4M,EAAIL,KAAK5G,IAAIC,EAAIgH,EAAGL,KAAK3G,IAAID,EAAIiH,EAAG5M,KAAK4M,IAC9C5M,KAAKoO,EAAI7B,KAAK5G,IAAIC,EAAIwI,EAAG7B,KAAK3G,IAAID,EAAIyI,EAAGpO,KAAKoO,IACvCpO,KAGTqB,YAAaqO,EAAgBC,GAGzB,OAFAC,GAAQC,IAAIH,EAAQA,EAAQA,EAAQA,GACpCI,GAAQD,IAAIF,EAAQA,EAAQA,EAAQA,GAC7B3P,KAAK+P,MAAMH,GAASE,IAG/BzO,YAAauE,EAAcD,GACzB,IAAI3N,EAASgI,KAAKhI,SAClB,OAAOgI,KAAKgQ,aAAahY,GAAU,GAAGoV,eAAeb,KAAK5G,IAAIC,EAAK2G,KAAK3G,IAAID,EAAK3N,KAGnFqJ,QAKE,OAJArB,KAAK0M,EAAIH,KAAK0D,MAAMjQ,KAAK0M,GACzB1M,KAAK2M,EAAIJ,KAAK0D,MAAMjQ,KAAK2M,GACzB3M,KAAK4M,EAAIL,KAAK0D,MAAMjQ,KAAK4M,GACzB5M,KAAKoO,EAAI7B,KAAK0D,MAAMjQ,KAAKoO,GAClBpO,KAGTqB,OAKE,OAJArB,KAAK0M,EAAIH,KAAK2D,KAAKlQ,KAAK0M,GACxB1M,KAAK2M,EAAIJ,KAAK2D,KAAKlQ,KAAK2M,GACxB3M,KAAK4M,EAAIL,KAAK2D,KAAKlQ,KAAK4M,GACxB5M,KAAKoO,EAAI7B,KAAK2D,KAAKlQ,KAAKoO,GACjBpO,KAGTqB,QAKE,OAJArB,KAAK0M,EAAIH,KAAK4D,MAAMnQ,KAAK0M,GACzB1M,KAAK2M,EAAIJ,KAAK4D,MAAMnQ,KAAK2M,GACzB3M,KAAK4M,EAAIL,KAAK4D,MAAMnQ,KAAK4M,GACzB5M,KAAKoO,EAAI7B,KAAK4D,MAAMnQ,KAAKoO,GAClBpO,KAGTqB,cAKE,OAJArB,KAAK0M,EAAK1M,KAAK0M,EAAI,EAAKH,KAAK2D,KAAKlQ,KAAK0M,GAAKH,KAAK0D,MAAMjQ,KAAK0M,GAC5D1M,KAAK2M,EAAK3M,KAAK2M,EAAI,EAAKJ,KAAK2D,KAAKlQ,KAAK2M,GAAKJ,KAAK0D,MAAMjQ,KAAK2M,GAC5D3M,KAAK4M,EAAK5M,KAAK4M,EAAI,EAAKL,KAAK2D,KAAKlQ,KAAK4M,GAAKL,KAAK0D,MAAMjQ,KAAK4M,GAC5D5M,KAAKoO,EAAKpO,KAAKoO,EAAI,EAAK7B,KAAK2D,KAAKlQ,KAAKoO,GAAK7B,KAAK0D,MAAMjQ,KAAKoO,GACrDpO,KAGTqB,SAKE,OAJArB,KAAK0M,GAAM1M,KAAK0M,EAChB1M,KAAK2M,GAAM3M,KAAK2M,EAChB3M,KAAK4M,GAAM5M,KAAK4M,EAChB5M,KAAKoO,GAAMpO,KAAKoO,EACTpO,KAGTqB,IAAK0L,GACH,OAAO/M,KAAK0M,EAAIK,EAAEL,EAAI1M,KAAK2M,EAAII,EAAEJ,EAAI3M,KAAK4M,EAAIG,EAAEH,EAAI5M,KAAKoO,EAAIrB,EAAEqB,EAGjE/M,WACE,OAAOrB,KAAK0M,EAAI1M,KAAK0M,EAAI1M,KAAK2M,EAAI3M,KAAK2M,EAAI3M,KAAK4M,EAAI5M,KAAK4M,EAAI5M,KAAKoO,EAAIpO,KAAKoO,EAG7E/M,SACE,OAAOkL,KAAKS,KAAKhN,KAAK0M,EAAI1M,KAAK0M,EAAI1M,KAAK2M,EAAI3M,KAAK2M,EAAI3M,KAAK4M,EAAI5M,KAAK4M,EAAI5M,KAAKoO,EAAIpO,KAAKoO,GAGvF/M,kBACE,OAAOkL,KAAKc,IAAIrN,KAAK0M,GAAKH,KAAKc,IAAIrN,KAAK2M,GAAKJ,KAAKc,IAAIrN,KAAK4M,GAAKL,KAAKc,IAAIrN,KAAKoO,GAGhF/M,YACE,OAAOrB,KAAKgQ,aAAahQ,KAAKhI,UAAY,GAG5CqJ,UAAWrJ,GACT,OAAOgI,KAAKoQ,YAAYhD,eAAepV,GAGzCqJ,KAAM0L,EAAYsD,GAKhB,OAJArQ,KAAK0M,IAAMK,EAAEL,EAAI1M,KAAK0M,GAAK2D,EAC3BrQ,KAAK2M,IAAMI,EAAEJ,EAAI3M,KAAK2M,GAAK0D,EAC3BrQ,KAAK4M,IAAMG,EAAEH,EAAI5M,KAAK4M,GAAKyD,EAC3BrQ,KAAKoO,IAAMrB,EAAEqB,EAAIpO,KAAKoO,GAAKiC,EACpBrQ,KAGTqB,YAAaiP,EAAaC,EAAaF,GACrC,OAAOrQ,KAAKwQ,WAAWD,EAAID,GAAIlD,eAAeiD,GAAOI,IAAIH,GAG3DjP,+BAA+BvF,GAM7B,IAAI4U,EAAOhE,EAAGC,EAAGC,EACf+D,EAAU,IACVC,EAAW,GAEXC,EAAK/U,EAAEiT,SAEP+B,EAAMD,EAAG,GAAIE,EAAMF,EAAG,GAAIG,EAAMH,EAAG,GACnCI,EAAMJ,EAAG,GAAIK,EAAML,EAAG,GAAIM,EAAMN,EAAG,GACnCO,EAAMP,EAAG,GAAIQ,EAAMR,EAAG,GAAIS,EAAMT,EAAG,IAErC,GAAKtE,KAAKc,IAAI0D,EAAME,GAAON,GACxBpE,KAAKc,IAAI2D,EAAMI,GAAOT,GACtBpE,KAAKc,IAAI8D,EAAME,GAAOV,EAAU,CAMjC,GAAKpE,KAAKc,IAAI0D,EAAME,GAAOL,GACxBrE,KAAKc,IAAI2D,EAAMI,GAAOR,GACtBrE,KAAKc,IAAI8D,EAAME,GAAOT,GACtBrE,KAAKc,IAAIyD,EAAMI,EAAMI,EAAM,GAAKV,EAMjC,OAFA5Q,KAAK6P,IAAI,EAAG,EAAG,EAAG,GAEX7P,KAMT0Q,EAAQnE,KAAKgF,GAEb,IAAIC,GAAMV,EAAM,GAAK,EACjBW,GAAMP,EAAM,GAAK,EACjBQ,GAAMJ,EAAM,GAAK,EACjBK,GAAMZ,EAAME,GAAO,EACnBW,GAAMZ,EAAMI,GAAO,EACnBS,GAAMV,EAAME,GAAO,EAmDvB,OAjDKG,EAAKC,GAAQD,EAAKE,EAIjBF,EAAKb,GAEPjE,EAAI,EACJC,EAAI,WACJC,EAAI,aAIJF,EAAIH,KAAKS,KAAKwE,GACd7E,EAAIgF,EAAKjF,EACTE,EAAIgF,EAAKlF,GAIF+E,EAAKC,EAIVD,EAAKd,GACPjE,EAAI,WACJC,EAAI,EACJC,EAAI,aAGJD,EAAIJ,KAAKS,KAAKyE,GACd/E,EAAIiF,EAAKhF,EACTC,EAAIiF,EAAKlF,GAQP+E,EAAKf,GACPjE,EAAI,WACJC,EAAI,WACJC,EAAI,IAEJA,EAAIL,KAAKS,KAAK0E,GACdhF,EAAIkF,EAAKhF,EACTD,EAAIkF,EAAKjF,GAGb5M,KAAK6P,IAAInD,EAAGC,EAAGC,EAAG8D,GACX1Q,KAIT,IAAI5G,EAAImT,KAAKS,MAAMqE,EAAMF,IAAQE,EAAMF,IACpCH,EAAMI,IAAQJ,EAAMI,IACpBH,EAAMF,IAAQE,EAAMF,IAUvB,OARIxE,KAAKc,IAAIjU,GAAK,OAAOA,EAAI,GAI7B4G,KAAK0M,GAAK2E,EAAMF,GAAO/X,EACvB4G,KAAK2M,GAAKqE,EAAMI,GAAOhY,EACvB4G,KAAK4M,GAAKqE,EAAMF,GAAO3X,EACvB4G,KAAKoO,EAAI7B,KAAKkD,MAAMqB,EAAMI,EAAMI,EAAM,GAAK,GACpCtR,KAGTqB,UAAW+N,EAAiBC,GAM1B,YALe5T,IAAX4T,IAAsBA,EAAS,GACnCrP,KAAK0M,EAAI0C,EAAMC,GACfrP,KAAK2M,EAAIyC,EAAMC,EAAS,GACxBrP,KAAK4M,EAAIwC,EAAMC,EAAS,GACxBrP,KAAKoO,EAAIgB,EAAMC,EAAS,GACjBrP,KAGTqB,QAAS+N,EAAkBC,GAOzB,YANc5T,IAAV2T,IAAqBA,EAAQ,SAClB3T,IAAX4T,IAAsBA,EAAS,GACnCD,EAAMC,GAAUrP,KAAK0M,EACrB0C,EAAMC,EAAS,GAAKrP,KAAK2M,EACzByC,EAAMC,EAAS,GAAKrP,KAAK4M,EACzBwC,EAAMC,EAAS,GAAKrP,KAAKoO,EAClBgB,EAGT/N,eAAe0L,EAAYqC,GACzB,OAAOrC,EAAEuC,QAAQF,EAAO,IAS5B,MAAMQ,GAAU,IAAIL,GACdO,GAAU,IAAIP,GChcduC,GAAiB,IAAIrF,GACrBsF,GAAiB,IAAItF,GACrBuF,GAAiB,IAAIvF,GAEpB,MAAMwF,GAKX5Q,cA2BArB,KAAA+O,SAAqB,CACnB,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GA3BX1N,KAAKvF,GACH,IAAI+U,EAAK7Q,KAAK+O,SACVmD,EAAKpW,EAAEiT,SAKX,OAJA8B,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,GAAKqB,EAAG,GACxDrB,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,GAAKqB,EAAG,GACxDrB,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,GAAKqB,EAAG,GAAIrB,EAAG,IAAMqB,EAAG,IAAKrB,EAAG,IAAMqB,EAAG,IAC3DrB,EAAG,IAAMqB,EAAG,IAAKrB,EAAG,IAAMqB,EAAG,IAAKrB,EAAG,IAAMqB,EAAG,IAAKrB,EAAG,IAAMqB,EAAG,IACxDlS,KAGTqB,QACE,OAAO,IAAI4Q,IAAUE,UAAUnS,KAAK+O,UAGtC1N,OAAO+Q,GAGL,IAFA,IAAIvB,EAAK7Q,KAAK+O,SACVmD,EAAKE,EAAOrD,SACPjX,EAAI,EAAGA,EAAI,GAAIA,IACtB,GAAI+Y,EAAG/Y,KAAOoa,EAAGpa,GAAI,OAAO,EAE9B,OAAO,EAUTuJ,IAAIgR,EAAaC,EAAaC,EAAaC,EACzCC,EAAaC,EAAaC,EAAaC,EACvCC,EAAaC,EAAaC,EAAaC,EACvCC,EAAaC,EAAaC,EAAaC,GACvC,MAAMvC,EAAK7Q,KAAK+O,SAKhB,OAJA8B,EAAG,GAAKwB,EAAKxB,EAAG,GAAKyB,EAAKzB,EAAG,GAAK0B,EAAK1B,EAAG,IAAM2B,EAChD3B,EAAG,GAAK4B,EAAK5B,EAAG,GAAK6B,EAAK7B,EAAG,GAAK8B,EAAK9B,EAAG,IAAM+B,EAChD/B,EAAG,GAAKgC,EAAKhC,EAAG,GAAKiC,EAAKjC,EAAG,IAAMkC,EAAKlC,EAAG,IAAMmC,EACjDnC,EAAG,GAAKoC,EAAKpC,EAAG,GAAKqC,EAAKrC,EAAG,IAAMsC,EAAKtC,EAAG,IAAMuC,EAC1CpT,KAGTqB,QAAQgS,EAAmBC,EAAwBC,GAIjD,OAHAvT,KAAKwT,2BAA2BF,GAChCtT,KAAKuT,MAAMA,EAAM7G,EAAG6G,EAAM5G,EAAG4G,EAAM3G,GACnC5M,KAAKyT,WAAWJ,EAAS3G,EAAG2G,EAAS1G,EAAG0G,EAASzG,GAC1C5M,KAGTqB,WAOE,OANArB,KAAK6P,IACH,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAEJ7P,KAGTqB,gBAAgBqS,EAAcC,EAAeC,EAC3CC,EAAgBC,EAAcC,GAC9B,MAAMlD,EAAK7Q,KAAK+O,SACVrC,EAAI,EAAIoH,GAAQH,EAAQD,GACxB/G,EAAI,EAAImH,GAAQF,EAAMC,GAEtBvG,GAAKqG,EAAQD,IAASC,EAAQD,GAC9BnG,GAAKqG,EAAMC,IAAWD,EAAMC,GAC5B9X,IAAOgY,EAAMD,IAASC,EAAMD,GAC5B9X,GAAM,EAAI+X,EAAMD,GAAQC,EAAMD,GAOpC,OALAjD,EAAG,GAAKnE,EAAGmE,EAAG,GAAK,EAAGA,EAAG,GAAKvD,EAAGuD,EAAG,IAAM,EAC1CA,EAAG,GAAK,EAAGA,EAAG,GAAKlE,EAAGkE,EAAG,GAAKtD,EAAGsD,EAAG,IAAM,EAC1CA,EAAG,GAAK,EAAGA,EAAG,GAAK,EAAGA,EAAG,IAAM9U,EAAG8U,EAAG,IAAM7U,EAC3C6U,EAAG,GAAK,EAAGA,EAAG,GAAK,EAAGA,EAAG,KAAQ,EAAGA,EAAG,IAAM,EAEtC7Q,KAGTqB,iBAAiBqS,EAAcC,EAAeC,EAC5CC,EAAgBC,EAAcC,GAC9B,IAAIlD,EAAK7Q,KAAK+O,SACVX,EAAI,GAAOuF,EAAQD,GACnBM,EAAI,GAAOJ,EAAMC,GACjBra,EAAI,GAAOua,EAAMD,GAEjBpH,GAAKiH,EAAQD,GAAQtF,EACrBzB,GAAKiH,EAAMC,GAAUG,EACrBpH,GAAKmH,EAAMD,GAAQta,EAOvB,OALAqX,EAAG,GAAK,EAAIzC,EAAGyC,EAAG,GAAK,EAAGA,EAAG,GAAK,EAAGA,EAAG,KAAQnE,EAChDmE,EAAG,GAAK,EAAGA,EAAG,GAAK,EAAImD,EAAGnD,EAAG,GAAK,EAAGA,EAAG,KAAQlE,EAChDkE,EAAG,GAAK,EAAGA,EAAG,GAAK,EAAGA,EAAG,KAAQ,EAAIrX,EAAGqX,EAAG,KAAQjE,EACnDiE,EAAG,GAAK,EAAGA,EAAG,GAAK,EAAGA,EAAG,IAAM,EAAGA,EAAG,IAAM,EAEpC7Q,KAGTqB,iBAAiBiM,EAAYC,GAE3B,IAAI0G,EAAK3G,EAAEyB,SACPmF,EAAK3G,EAAEwB,SACP8B,EAAK7Q,KAAK+O,SAEVoF,EAAMF,EAAG,GAAIG,EAAMH,EAAG,GAAII,EAAMJ,EAAG,GAAIK,EAAML,EAAG,IAChDM,EAAMN,EAAG,GAAIO,EAAMP,EAAG,GAAIQ,EAAMR,EAAG,GAAIS,EAAMT,EAAG,IAChDU,EAAMV,EAAG,GAAIW,EAAMX,EAAG,GAAIY,EAAMZ,EAAG,IAAKa,EAAMb,EAAG,IACjDc,EAAMd,EAAG,GAAIe,EAAMf,EAAG,GAAIgB,EAAMhB,EAAG,IAAKiB,EAAMjB,EAAG,IAEjDkB,EAAMjB,EAAG,GAAIkB,EAAMlB,EAAG,GAAImB,EAAMnB,EAAG,GAAIoB,EAAMpB,EAAG,IAChDqB,EAAMrB,EAAG,GAAIsB,EAAMtB,EAAG,GAAIuB,EAAMvB,EAAG,GAAIwB,EAAMxB,EAAG,IAChDyB,EAAMzB,EAAG,GAAI0B,EAAM1B,EAAG,GAAI2B,EAAM3B,EAAG,IAAK4B,EAAM5B,EAAG,IACjD6B,EAAM7B,EAAG,GAAI8B,EAAM9B,EAAG,GAAI+B,EAAM/B,EAAG,IAAKgC,EAAMhC,EAAG,IAsBrD,OApBArD,EAAG,GAAKsD,EAAMgB,EAAMf,EAAMmB,EAAMlB,EAAMsB,EAAMrB,EAAMyB,EAClDlF,EAAG,GAAKsD,EAAMiB,EAAMhB,EAAMoB,EAAMnB,EAAMuB,EAAMtB,EAAM0B,EAClDnF,EAAG,GAAKsD,EAAMkB,EAAMjB,EAAMqB,EAAMpB,EAAMwB,EAAMvB,EAAM2B,EAClDpF,EAAG,IAAMsD,EAAMmB,EAAMlB,EAAMsB,EAAMrB,EAAMyB,EAAMxB,EAAM4B,EAEnDrF,EAAG,GAAK0D,EAAMY,EAAMX,EAAMe,EAAMd,EAAMkB,EAAMjB,EAAMqB,EAClDlF,EAAG,GAAK0D,EAAMa,EAAMZ,EAAMgB,EAAMf,EAAMmB,EAAMlB,EAAMsB,EAClDnF,EAAG,GAAK0D,EAAMc,EAAMb,EAAMiB,EAAMhB,EAAMoB,EAAMnB,EAAMuB,EAClDpF,EAAG,IAAM0D,EAAMe,EAAMd,EAAMkB,EAAMjB,EAAMqB,EAAMpB,EAAMwB,EAEnDrF,EAAG,GAAK8D,EAAMQ,EAAMP,EAAMW,EAAMV,EAAMc,EAAMb,EAAMiB,EAClDlF,EAAG,GAAK8D,EAAMS,EAAMR,EAAMY,EAAMX,EAAMe,EAAMd,EAAMkB,EAClDnF,EAAG,IAAM8D,EAAMU,EAAMT,EAAMa,EAAMZ,EAAMgB,EAAMf,EAAMmB,EACnDpF,EAAG,IAAM8D,EAAMW,EAAMV,EAAMc,EAAMb,EAAMiB,EAAMhB,EAAMoB,EAEnDrF,EAAG,GAAKkE,EAAMI,EAAMH,EAAMO,EAAMN,EAAMU,EAAMT,EAAMa,EAClDlF,EAAG,GAAKkE,EAAMK,EAAMJ,EAAMQ,EAAMP,EAAMW,EAAMV,EAAMc,EAClDnF,EAAG,IAAMkE,EAAMM,EAAML,EAAMS,EAAMR,EAAMY,EAAMX,EAAMe,EACnDpF,EAAG,IAAMkE,EAAMO,EAAMN,EAAMU,EAAMT,EAAMa,EAAMZ,EAAMgB,EAE5ClW,KAITqB,WAAWvF,EAAYqa,GAErB,IAAItF,EAAK7Q,KAAK+O,SACZmD,EAAKpW,EAAEiT,SAEPsD,EAAMH,EAAG,GAAIO,EAAMP,EAAG,GAAIW,EAAMX,EAAG,GAAIe,EAAMf,EAAG,GAChDI,EAAMJ,EAAG,GAAIQ,EAAMR,EAAG,GAAIY,EAAMZ,EAAG,GAAIgB,EAAMhB,EAAG,GAChDK,EAAML,EAAG,GAAIS,EAAMT,EAAG,GAAIa,EAAMb,EAAG,IAAKiB,EAAMjB,EAAG,IACjDM,EAAMN,EAAG,IAAKU,EAAMV,EAAG,IAAKc,EAAMd,EAAG,IAAKkB,EAAMlB,EAAG,IAEnDkE,EAAMzD,EAAMK,EAAME,EAAMN,EAAMG,EAAMG,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,EAC5GiD,EAAM7D,EAAMO,EAAMG,EAAMX,EAAMS,EAAME,EAAMV,EAAMM,EAAMK,EAAMb,EAAMU,EAAMG,EAAMZ,EAAMO,EAAMM,EAAMd,EAAMS,EAAMK,EAC5GkD,EAAM/D,EAAMK,EAAMM,EAAMV,EAAMG,EAAMO,EAAMV,EAAME,EAAMS,EAAMb,EAAMM,EAAMO,EAAMZ,EAAMG,EAAMU,EAAMd,EAAMK,EAAMS,EAC5GmD,EAAM/D,EAAMG,EAAMG,EAAMP,EAAMK,EAAME,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,EAE1GwD,EAAMnE,EAAM+D,EAAM3D,EAAM4D,EAAMxD,EAAMyD,EAAMrD,EAAMsD,EAEpD,GAAY,IAARC,EAAW,CACb,IAAIC,EAAM,8DACV,IAA0B,IAAtBN,EACF,MAAM,IAAI5a,MAAMkb,GAIlB,OAFElZ,QAAQsO,KAAK4K,GAERzW,KAAK0W,WAGd,IAAIC,EAAS,EAAIH,EAsBjB,OApBA3F,EAAG,GAAKuF,EAAMO,EACd9F,EAAG,IAAM+B,EAAMG,EAAME,EAAMN,EAAMK,EAAMC,EAAML,EAAMC,EAAMM,EAAMV,EAAMO,EAAMG,EAAMR,EAAME,EAAMO,EAAMX,EAAMM,EAAMK,GAAOuD,EACtH9F,EAAG,IAAM6B,EAAMM,EAAMC,EAAML,EAAME,EAAMG,EAAML,EAAMC,EAAMK,EAAMT,EAAMO,EAAME,EAAMR,EAAMG,EAAMO,EAAMX,EAAMK,EAAMM,GAAOuD,EACtH9F,EAAG,IAAM8B,EAAMG,EAAMG,EAAMP,EAAMK,EAAME,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,GAAOwD,EAEtH9F,EAAG,GAAKwF,EAAMM,EACd9F,EAAG,IAAM0B,EAAMS,EAAMC,EAAMT,EAAMO,EAAME,EAAMT,EAAMK,EAAMM,EAAMd,EAAMW,EAAMG,EAAMZ,EAAMM,EAAMO,EAAMf,EAAMU,EAAMK,GAAOuD,EACtH9F,EAAG,IAAM2B,EAAMM,EAAMG,EAAMX,EAAMU,EAAMC,EAAMT,EAAMK,EAAMK,EAAMb,EAAMW,EAAME,EAAMZ,EAAMO,EAAMO,EAAMf,EAAMS,EAAMM,GAAOuD,EACtH9F,EAAG,IAAMyB,EAAMS,EAAME,EAAMV,EAAMO,EAAMG,EAAMV,EAAMM,EAAMK,EAAMb,EAAMU,EAAMG,EAAMZ,EAAMO,EAAMM,EAAMd,EAAMS,EAAMK,GAAOwD,EAEtH9F,EAAG,GAAKyF,EAAMK,EACd9F,EAAG,IAAM2B,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,EAAMT,EAAMC,EAAMU,EAAMd,EAAMO,EAAMO,EAAMZ,EAAME,EAAMW,EAAMf,EAAMM,EAAMS,GAAOuD,EACtH9F,EAAG,KAAOyB,EAAMM,EAAMK,EAAMT,EAAME,EAAMO,EAAMT,EAAMC,EAAMS,EAAMb,EAAMO,EAAMM,EAAMZ,EAAMG,EAAMW,EAAMf,EAAMK,EAAMU,GAAOuD,EACvH9F,EAAG,KAAO0B,EAAMG,EAAMO,EAAMX,EAAMK,EAAMM,EAAMV,EAAME,EAAMS,EAAMb,EAAMM,EAAMO,EAAMZ,EAAMG,EAAMU,EAAMd,EAAMK,EAAMS,GAAOwD,EAEvH9F,EAAG,IAAM0F,EAAMI,EACf9F,EAAG,KAAO0B,EAAMK,EAAMC,EAAML,EAAMG,EAAME,EAAML,EAAMC,EAAMM,EAAMV,EAAMO,EAAMG,EAAMR,EAAME,EAAMO,EAAMX,EAAMM,EAAMK,GAAO2D,EACvH9F,EAAG,KAAO2B,EAAME,EAAMG,EAAMP,EAAMM,EAAMC,EAAML,EAAMC,EAAMK,EAAMT,EAAMO,EAAME,EAAMR,EAAMG,EAAMO,EAAMX,EAAMK,EAAMM,GAAO2D,EACvH9F,EAAG,KAAOyB,EAAMK,EAAME,EAAMN,EAAMG,EAAMG,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,GAAO4D,EAEhH3W,KAGFqB,OAAOuV,EAAiBvb,EAAiBwb,GAE9C,MAAMhG,EAAK7Q,KAAK+O,SA0BhB,OAxBAiD,GAAM8E,KAAKF,GAAQG,IAAI1b,GACH,IAAhB2W,GAAM/E,QACR+E,GAAMpF,EAAI,GAGZoF,GAAM5B,YACN0B,GAAMhE,aAAa+I,EAAI7E,IACH,IAAhBF,GAAM7E,QACe,IAAnBV,KAAKc,IAAIwJ,EAAGjK,GACdoF,GAAMtF,GAAK,KAEXsF,GAAMpF,GAAK,KAEboF,GAAM5B,YACN0B,GAAMhE,aAAa+I,EAAI7E,KAGzBF,GAAM1B,YACN2B,GAAMjE,aAAakE,GAAOF,IAE1BjB,EAAG,GAAKiB,GAAMpF,EAAGmE,EAAG,GAAKkB,GAAMrF,EAAGmE,EAAG,GAAKmB,GAAMtF,EAChDmE,EAAG,GAAKiB,GAAMnF,EAAGkE,EAAG,GAAKkB,GAAMpF,EAAGkE,EAAG,GAAKmB,GAAMrF,EAChDkE,EAAG,GAAKiB,GAAMlF,EAAGiE,EAAG,GAAKkB,GAAMnF,EAAGiE,EAAG,IAAMmB,GAAMpF,EAE1C5M,KAGTqB,MAAMqL,EAAWC,EAAWC,GAC1B,MAAMiE,EAAK7Q,KAAK+O,SAKhB,OAJA8B,EAAG,IAAMnE,EAAGmE,EAAG,IAAMlE,EAAGkE,EAAG,IAAMjE,EACjCiE,EAAG,IAAMnE,EAAGmE,EAAG,IAAMlE,EAAGkE,EAAG,IAAMjE,EACjCiE,EAAG,IAAMnE,EAAGmE,EAAG,IAAMlE,EAAGkE,EAAG,KAAOjE,EAClCiE,EAAG,IAAMnE,EAAGmE,EAAG,IAAMlE,EAAGkE,EAAG,KAAOjE,EAC3B5M,KAGTqB,WAAWqL,EAAWC,EAAWC,GAC/B,IAAIiE,EAAK7Q,KAAK+O,SAId,OAHA8B,EAAG,IAAMnE,EACTmE,EAAG,IAAMlE,EACTkE,EAAG,IAAMjE,EACF5M,KAGTqB,2BAA2B0M,GACzB,IAAI8C,EAAK7Q,KAAK+O,SAEVrC,EAAIqB,EAAErB,EAAGC,EAAIoB,EAAEpB,EAAGC,EAAImB,EAAEnB,EAAGwB,EAAIL,EAAEK,EACjC4I,EAAKtK,EAAIA,EAAGuK,EAAKtK,EAAIA,EAAGuK,EAAKtK,EAAIA,EACjC4E,EAAK9E,EAAIsK,EAAIrF,EAAKjF,EAAIuK,EAAIrF,EAAKlF,EAAIwK,EACnCzF,EAAK9E,EAAIsK,EAAIpF,EAAKlF,EAAIuK,EAAIxF,EAAK9E,EAAIsK,EACnCC,EAAK/I,EAAI4I,EAAII,EAAKhJ,EAAI6I,EAAII,EAAKjJ,EAAI8I,EAwBvC,OAtBArG,EAAG,GAAK,GAAKY,EAAKC,GAClBb,EAAG,GAAKc,EAAK0F,EACbxG,EAAG,GAAKe,EAAKwF,EAEbvG,EAAG,GAAKc,EAAK0F,EACbxG,EAAG,GAAK,GAAKW,EAAKE,GAClBb,EAAG,GAAKgB,EAAKsF,EAEbtG,EAAG,GAAKe,EAAKwF,EACbvG,EAAG,GAAKgB,EAAKsF,EACbtG,EAAG,IAAM,GAAKW,EAAKC,GAGnBZ,EAAG,GAAK,EACRA,EAAG,GAAK,EACRA,EAAG,IAAM,EAGTA,EAAG,IAAM,EACTA,EAAG,IAAM,EACTA,EAAG,IAAM,EACTA,EAAG,IAAM,EACF7Q,KAGTqB,gBAAgBqL,EAAWC,EAAWC,GAOpC,OANA5M,KAAK6P,IACH,EAAG,EAAG,EAAGnD,EACT,EAAG,EAAG,EAAGC,EACT,EAAG,EAAG,EAAGC,EACT,EAAG,EAAG,EAAG,GAEJ5M,KAGTqB,cAAciW,GACZ,IAAIvb,EAAIwQ,KAAKuC,IAAIwI,GAAQle,EAAImT,KAAKmC,IAAI4I,GAOtC,OANAtX,KAAK6P,IACH,EAAG,EAAG,EAAG,EACT,EAAG9T,GAAK3C,EAAG,EACX,EAAGA,EAAG2C,EAAG,EACT,EAAG,EAAG,EAAG,GAEJiE,KAGTqB,cAAciW,GACZ,IAAIvb,EAAIwQ,KAAKuC,IAAIwI,GAAQle,EAAImT,KAAKmC,IAAI4I,GAOtC,OANAtX,KAAK6P,IACH9T,EAAG,EAAG3C,EAAG,EACT,EAAG,EAAG,EAAG,GACPA,EAAG,EAAG2C,EAAG,EACX,EAAG,EAAG,EAAG,GAEJiE,KAGTqB,cAAciW,GACZ,IAAIvb,EAAIwQ,KAAKuC,IAAIwI,GAAQle,EAAImT,KAAKmC,IAAI4I,GAOtC,OANAtX,KAAK6P,IACH9T,GAAK3C,EAAG,EAAG,EACXA,EAAG2C,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAEJiE,KAGTqB,QAAQ+N,EAAiBC,QAET5T,IAAV2T,IAAqBA,EAAQ,SAClB3T,IAAX4T,IAAsBA,EAAS,GAEnC,IAAIwB,EAAK7Q,KAAK+O,SAsBd,OApBAK,EAAMC,GAAUwB,EAAG,GACnBzB,EAAMC,EAAS,GAAKwB,EAAG,GACvBzB,EAAMC,EAAS,GAAKwB,EAAG,GACvBzB,EAAMC,EAAS,GAAKwB,EAAG,GAEvBzB,EAAMC,EAAS,GAAKwB,EAAG,GACvBzB,EAAMC,EAAS,GAAKwB,EAAG,GACvBzB,EAAMC,EAAS,GAAKwB,EAAG,GACvBzB,EAAMC,EAAS,GAAKwB,EAAG,GAEvBzB,EAAMC,EAAS,GAAKwB,EAAG,GACvBzB,EAAMC,EAAS,GAAKwB,EAAG,GACvBzB,EAAMC,EAAS,IAAMwB,EAAG,IACxBzB,EAAMC,EAAS,IAAMwB,EAAG,IAExBzB,EAAMC,EAAS,IAAMwB,EAAG,IACxBzB,EAAMC,EAAS,IAAMwB,EAAG,IACxBzB,EAAMC,EAAS,IAAMwB,EAAG,IACxBzB,EAAMC,EAAS,IAAMwB,EAAG,IAEjBzB,EAIT/N,UAAU+N,EAAiBC,QACV5T,IAAX4T,IAAsBA,EAAS,GACnC,IAAK,IAAIvX,EAAI,EAAGA,EAAI,GAAIA,IACtBkI,KAAK+O,SAASjX,GAAKsX,EAAMtX,EAAIuX,GAE/B,OAAOrP,KAGTqB,eAAe0L,EAAYqC,GACzB,OAAOrC,EAAEuC,QAAQF,EAAO,IClXrB,MAAMmI,GAAW,CAEtBC,QAASjL,KAAKgF,GAAK,IACnBkG,QAAS,IAAMlL,KAAKgF,GAEpBxB,MAAO,SAAUrT,EAAekJ,EAAaD,GAC3C,OAAO4G,KAAK5G,IAAIC,EAAK2G,KAAK3G,IAAID,EAAKjJ,KAKrCgb,gBAAiB,SAAUxa,EAAWpB,GACpC,OAASoB,EAAIpB,EAAKA,GAAKA,GAIzB6b,UAAW,SAAUjL,EAAWkL,EAAYC,EAAYC,EAAYC,GAClE,OAAOD,GAAMpL,EAAIkL,IAAOG,EAAKD,IAAOD,EAAKD,IAI3CI,KAAM,SAAUtL,EAAWC,EAAWhQ,GACpC,OAAQ,EAAIA,GAAK+P,EAAI/P,EAAIgQ,GAI3BsL,WAAY,SAAUvL,EAAW9G,EAAaD,GAC5C,OAAI+G,GAAK9G,EAAY,EACjB8G,GAAK/G,EAAY,GACrB+G,GAAKA,EAAI9G,IAAQD,EAAMC,GAChB8G,EAAIA,GAAK,EAAI,EAAIA,KAG1BwL,aAAc,SAAUxL,EAAW9G,EAAaD,GAC9C,OAAI+G,GAAK9G,EAAY,EACjB8G,GAAK/G,EAAY,GACrB+G,GAAKA,EAAI9G,IAAQD,EAAMC,GAChB8G,EAAIA,EAAIA,GAAKA,GAAS,EAAJA,EAAQ,IAAM,MAIzCyL,QAAS,SAAUC,EAAaC,GAC9B,OAAOD,EAAM7L,KAAK0D,MAAM1D,KAAKC,UAAY6L,EAAOD,EAAM,KAIxDE,UAAW,SAAUF,EAAaC,GAChC,OAAOD,EAAM7L,KAAKC,UAAY6L,EAAOD,IAIvCG,gBAAiB,SAAUC,GACzB,OAAOA,GAAS,GAAMjM,KAAKC,WAG7BiM,SAAU,SAAUC,GAClB,OAAOA,EAAUnB,GAASC,SAG5BmB,SAAU,SAAUC,GAClB,OAAOA,EAAUrB,GAASE,SAG5BoB,aAAc,SAAUnc,GACtB,OAAiC,KAAzBA,EAASA,EAAQ,IAAuB,IAAVA,GAGxCoc,kBAAmB,SAAUpc,GAC3B,OAAO6P,KAAKwM,IAAI,EAAGxM,KAAK4D,MAAM5D,KAAKd,IAAI/O,GAAS6P,KAAKyM,OAGvDC,eAAgB,SAAUvc,GAQxB,OAPAA,IACAA,GAASA,GAAS,EAClBA,GAASA,GAAS,EAClBA,GAASA,GAAS,EAClBA,GAASA,GAAS,EAClBA,GAASA,GAAS,GAClBA,IACOA,IC1EX,IAAKwc,IAAL,SAAKA,GACHA,IAAA,gBAAOA,IAAA,gBAAOA,IAAA,gBAAOA,IAAA,gBAAOA,IAAA,gBAAOA,IAAA,iBADrC,CAAKA,QAAU,KAIf,MAAMC,GAAa,IAAIlH,GAEhB,MAAMmH,GACX/X,YAAYqL,EAAYC,EAAYC,EAAYyM,GAYhDrZ,KAAAsZ,OAAqBF,GAAMG,aAE3BvZ,KAAAwZ,iBAA6B,SAb3BxZ,KAAKyZ,GAAK/M,GAAK,EACf1M,KAAK0Z,GAAK/M,GAAK,EACf3M,KAAK2Z,GAAK/M,GAAK,EACf5M,KAAKsZ,OAASD,GAASD,GAAMG,aAY/B7M,QAAU,OAAO1M,KAAKyZ,GACtB9M,QAAU,OAAO3M,KAAK0Z,GACtB9M,QAAU,OAAO5M,KAAK2Z,GACtBjN,MAAMhQ,GAASsD,KAAKyZ,GAAK/c,EACzBiQ,MAAMjQ,GAASsD,KAAK0Z,GAAKhd,EACzBkQ,MAAMlQ,GAASsD,KAAK2Z,GAAKjd,EAEzB2c,YAAc,OAAOrZ,KAAKsZ,OAC1BD,UAAU3c,GAAqBsD,KAAKsZ,OAAS5c,EAE7C2E,QACE,OAAO,IAAI+X,GAAMpZ,KAAKyZ,GAAIzZ,KAAK0Z,GAAI1Z,KAAK2Z,GAAI3Z,KAAKsZ,QAGnDjY,KAAKuY,GAMH,OALA5Z,KAAKyZ,GAAKG,EAAMH,GAChBzZ,KAAK0Z,GAAKE,EAAMF,GAChB1Z,KAAK2Z,GAAKC,EAAMD,GAChB3Z,KAAKsZ,OAASM,EAAMN,OACpBtZ,KAAKwZ,mBACExZ,KAGTqB,OAAOuY,GACL,OAAQA,EAAMH,KAAOzZ,KAAKyZ,IACvBG,EAAMF,KAAO1Z,KAAK0Z,IAClBE,EAAMD,KAAO3Z,KAAK2Z,IAClBC,EAAMN,SAAWtZ,KAAKsZ,OAG3BjY,sBAAsBvF,EAAYud,EAAmBQ,GACnD,IAAI9J,EAAQwH,GAASxH,MAIjBc,EAAK/U,EAAEiT,SACP+B,EAAMD,EAAG,GAAIE,EAAMF,EAAG,GAAIG,EAAMH,EAAG,GACnCI,EAAMJ,EAAG,GAAIK,EAAML,EAAG,GAAIM,EAAMN,EAAG,GACnCO,EAAMP,EAAG,GAAIQ,EAAMR,EAAG,GAAIS,EAAMT,EAAG,IA4EvC,OA1EAwI,EAAQA,GAASrZ,KAAKsZ,OAElBD,IAAUH,GAAWY,KAEvB9Z,KAAK0Z,GAAKnN,KAAKwN,KAAKhK,EAAMiB,GAAO,EAAG,IAChCzE,KAAKc,IAAI2D,GAAO,QAClBhR,KAAKyZ,GAAKlN,KAAKyN,OAAQ7I,EAAKG,GAC5BtR,KAAK2Z,GAAKpN,KAAKyN,OAAQjJ,EAAKD,KAE5B9Q,KAAKyZ,GAAKlN,KAAKyN,MAAM3I,EAAKH,GAC1BlR,KAAK2Z,GAAK,IAGHN,IAAUH,GAAWe,KAE9Bja,KAAKyZ,GAAKlN,KAAKwN,MAAOhK,EAAMoB,GAAO,EAAG,IAClC5E,KAAKc,IAAI8D,GAAO,QAClBnR,KAAK0Z,GAAKnN,KAAKyN,MAAMhJ,EAAKM,GAC1BtR,KAAK2Z,GAAKpN,KAAKyN,MAAM/I,EAAKC,KAE1BlR,KAAK0Z,GAAKnN,KAAKyN,OAAQ5I,EAAKN,GAC5B9Q,KAAK2Z,GAAK,IAGHN,IAAUH,GAAWgB,KAE9Bla,KAAKyZ,GAAKlN,KAAKwN,KAAKhK,EAAMsB,GAAO,EAAG,IAChC9E,KAAKc,IAAIgE,GAAO,QAClBrR,KAAK0Z,GAAKnN,KAAKyN,OAAQ5I,EAAKE,GAC5BtR,KAAK2Z,GAAKpN,KAAKyN,OAAQjJ,EAAKG,KAE5BlR,KAAK0Z,GAAK,EACV1Z,KAAK2Z,GAAKpN,KAAKyN,MAAM/I,EAAKH,KAGnBuI,IAAUH,GAAWiB,KAE9Bna,KAAK0Z,GAAKnN,KAAKwN,MAAOhK,EAAMqB,GAAO,EAAG,IAClC7E,KAAKc,IAAI+D,GAAO,QAClBpR,KAAKyZ,GAAKlN,KAAKyN,MAAM3I,EAAKC,GAC1BtR,KAAK2Z,GAAKpN,KAAKyN,MAAM/I,EAAKH,KAE1B9Q,KAAKyZ,GAAK,EACVzZ,KAAK2Z,GAAKpN,KAAKyN,OAAQjJ,EAAKG,KAGrBmI,IAAUH,GAAWkB,KAE9Bpa,KAAK2Z,GAAKpN,KAAKwN,KAAKhK,EAAMkB,GAAO,EAAG,IAEhC1E,KAAKc,IAAI4D,GAAO,QAClBjR,KAAKyZ,GAAKlN,KAAKyN,OAAQ7I,EAAKD,GAC5BlR,KAAK0Z,GAAKnN,KAAKyN,OAAQ5I,EAAKN,KAE5B9Q,KAAKyZ,GAAK,EACVzZ,KAAK0Z,GAAKnN,KAAKyN,MAAMhJ,EAAKM,KAGnB+H,IAAUH,GAAWmB,MAE9Bra,KAAK2Z,GAAKpN,KAAKwN,MAAOhK,EAAMgB,GAAO,EAAG,IAElCxE,KAAKc,IAAI0D,GAAO,QAClB/Q,KAAKyZ,GAAKlN,KAAKyN,MAAM3I,EAAKH,GAC1BlR,KAAK0Z,GAAKnN,KAAKyN,MAAMhJ,EAAKF,KAE1B9Q,KAAKyZ,GAAKlN,KAAKyN,OAAQ7I,EAAKG,GAC5BtR,KAAK0Z,GAAK,IAKd1Z,KAAKsZ,OAASD,GACC,IAAXQ,GAAkB7Z,KAAKwZ,mBACpBxZ,KAGTqB,kBAAkB0M,EAAesL,EAAmBQ,GAElD,OADAV,GAAW3F,2BAA2BzF,GAC/B/N,KAAKsa,sBAAsBnB,GAAYE,EAAOQ,GAGvDxY,IAAIqL,EAAWC,EAAWC,EAAWyM,GAMnC,OALArZ,KAAKyZ,GAAK/M,EACV1M,KAAK0Z,GAAK/M,EACV3M,KAAK2Z,GAAK/M,EACV5M,KAAKsZ,OAASD,GAASrZ,KAAKsZ,OAC5BtZ,KAAKwZ,mBACExZ,KAGTqB,eAAe0L,EAAYsM,GACzB,OAAOrZ,KAAK6P,IAAI9C,EAAEL,EAAGK,EAAEJ,EAAGI,EAAEH,EAAGyM,GAASrZ,KAAKsZ,QAG/CjY,UAAU+N,GAMR,OALApP,KAAKyZ,GAAKrK,EAAM,GAChBpP,KAAK0Z,GAAKtK,EAAM,GAChBpP,KAAK2Z,GAAKvK,EAAM,QACC3T,IAAb2T,EAAM,KAAkBpP,KAAKsZ,OAASlK,EAAM,IAChDpP,KAAKwZ,mBACExZ,KAGTqB,QAAQ+N,EAAiBC,GAOvB,YANc5T,IAAV2T,IAAqBA,EAAQ,SAClB3T,IAAX4T,IAAsBA,EAAS,GACnCD,EAAMC,GAAUrP,KAAKyZ,GACrBrK,EAAMC,EAAS,GAAKrP,KAAK0Z,GACzBtK,EAAMC,EAAS,GAAKrP,KAAK2Z,GACzBvK,EAAMC,EAAS,GAAKrP,KAAKsZ,OAClBlK,EAGT/N,UAAUkZ,GACR,OAAIA,EACKA,EAAe1K,IAAI7P,KAAKyZ,GAAIzZ,KAAK0Z,GAAI1Z,KAAK2Z,IAE1C,IAAIlN,GAAQzM,KAAKyZ,GAAIzZ,KAAK0Z,GAAI1Z,KAAK2Z,KAvKvCP,GAAAG,aAAeL,GAAWY,ICjBnC,MAAMxJ,GAAc,IAAI7D,GACxB,IAAI+N,GAAY,EAChB,MAAMC,GAAc,KAEb,MAAMC,GAEXrZ,YAAYqL,EAAYC,EAAYC,EAAYwB,GAC9CpO,KAAK0M,EAAIA,GAAK,EACd1M,KAAK2M,EAAID,GAAK,EACd1M,KAAK4M,EAAIA,GAAK,EACd5M,KAAKoO,EAAIA,GAAK,EAST/M,IAAIqL,EAAWC,EAAWC,EAAWwB,GAK1C,OAJApO,KAAK0M,EAAIA,EACT1M,KAAK2M,EAAIA,EACT3M,KAAK4M,EAAIA,EACT5M,KAAKoO,EAAIA,EACFpO,KAGFqB,KAAK0M,GAKV,OAJA/N,KAAK0M,EAAIqB,EAAErB,EACX1M,KAAK2M,EAAIoB,EAAEpB,EACX3M,KAAK4M,EAAImB,EAAEnB,EACX5M,KAAKoO,EAAIL,EAAEK,EACJpO,KAGFqB,QACL,OAAO,IAAIqZ,GAAW1a,KAAK0M,EAAG1M,KAAK2M,EAAG3M,KAAK4M,EAAG5M,KAAKoO,GAG9C/M,UAIL,OAHArB,KAAK0M,IAAM,EACX1M,KAAK2M,IAAM,EACX3M,KAAK4M,IAAM,EACJ5M,KAGFqB,SACL,OAAOkL,KAAKS,KAAKhN,KAAK0M,EAAI1M,KAAK0M,EAAI1M,KAAK2M,EAAI3M,KAAK2M,EAAI3M,KAAK4M,EAAI5M,KAAK4M,EAAI5M,KAAKoO,EAAIpO,KAAKoO,GAGhF/M,YACL,IAAIzH,EAAIoG,KAAKhI,SAab,OAZU,IAAN4B,GACFoG,KAAK0M,EAAI,EACT1M,KAAK2M,EAAI,EACT3M,KAAK4M,EAAI,EACT5M,KAAKoO,EAAI,IAETxU,EAAI,EAAIA,EACRoG,KAAK0M,EAAI1M,KAAK0M,EAAI9S,EAClBoG,KAAK2M,EAAI3M,KAAK2M,EAAI/S,EAClBoG,KAAK4M,EAAI5M,KAAK4M,EAAIhT,EAClBoG,KAAKoO,EAAIpO,KAAKoO,EAAIxU,GAEboG,KAIFqB,iBAAiBsZ,EAAejK,GACrC,MAAMkK,EAAYlK,EAAQ,EACpBtX,EAAImT,KAAKmC,IAAIkM,GAOnB,OALA5a,KAAK0M,EAAIiO,EAAKjO,EAAItT,EAClB4G,KAAK2M,EAAIgO,EAAKhO,EAAIvT,EAClB4G,KAAK4M,EAAI+N,EAAK/N,EAAIxT,EAClB4G,KAAKoO,EAAI7B,KAAKuC,IAAI8L,GAEX5a,KAGFqB,mBAAmBwZ,EAAgBC,GAgBxC,OAfAN,GAAIK,EAAME,IAAID,GAAO,EACjBN,GAAIC,IACND,GAAI,EACAjO,KAAKc,IAAIwN,EAAMnO,GAAKH,KAAKc,IAAIwN,EAAMjO,GACrC0D,GAAGT,KAAMgL,EAAMlO,EAAGkO,EAAMnO,EAAG,GAE3B4D,GAAGT,IAAI,GAAKgL,EAAMjO,EAAGiO,EAAMlO,IAG7B2D,GAAGxC,aAAa+M,EAAOC,GAEzB9a,KAAK0M,EAAI4D,GAAG5D,EACZ1M,KAAK2M,EAAI2D,GAAG3D,EACZ3M,KAAK4M,EAAI0D,GAAG1D,EACZ5M,KAAKoO,EAAIoM,GACFxa,KAAKoQ,YAGP/O,sBAAsBvF,GAG3B,MAAM+U,EAAK/U,EAAEiT,SACP+B,EAAMD,EAAG,GAAIE,EAAMF,EAAG,GAAIG,EAAMH,EAAG,GACnCI,EAAMJ,EAAG,GAAIK,EAAML,EAAG,GAAIM,EAAMN,EAAG,GACnCO,EAAMP,EAAG,GAAIQ,EAAMR,EAAG,GAAIS,EAAMT,EAAG,IACnCmK,EAAQlK,EAAMI,EAAMI,EAC1B,IAAIlY,EA2BJ,OAzBI4hB,EAAQ,GACV5hB,EAAI,GAAMmT,KAAKS,KAAKgO,EAAQ,GAC5Bhb,KAAKoO,EAAI,IAAOhV,EAChB4G,KAAK0M,GAAK2E,EAAMF,GAAO/X,EACvB4G,KAAK2M,GAAKqE,EAAMI,GAAOhY,EACvB4G,KAAK4M,GAAKqE,EAAMF,GAAO3X,GACd0X,EAAMI,GAAOJ,EAAMQ,GAC5BlY,EAAI,EAAMmT,KAAKS,KAAK,EAAM8D,EAAMI,EAAMI,GACtCtR,KAAKoO,GAAKiD,EAAMF,GAAO/X,EACvB4G,KAAK0M,EAAI,IAAOtT,EAChB4G,KAAK2M,GAAKoE,EAAME,GAAO7X,EACvB4G,KAAK4M,GAAKoE,EAAMI,GAAOhY,GACd8X,EAAMI,GACflY,EAAI,EAAMmT,KAAKS,KAAK,EAAMkE,EAAMJ,EAAMQ,GACtCtR,KAAKoO,GAAK4C,EAAMI,GAAOhY,EACvB4G,KAAK0M,GAAKqE,EAAME,GAAO7X,EACvB4G,KAAK2M,EAAI,IAAOvT,EAChB4G,KAAK4M,GAAKuE,EAAME,GAAOjY,IAEvBA,EAAI,EAAMmT,KAAKS,KAAK,EAAMsE,EAAMR,EAAMI,GACtClR,KAAKoO,GAAK6C,EAAMF,GAAO3X,EACvB4G,KAAK0M,GAAKsE,EAAMI,GAAOhY,EACvB4G,KAAK2M,GAAKwE,EAAME,GAAOjY,EACvB4G,KAAK4M,EAAI,IAAOxT,GAEX4G,MCtIJ,MAAMib,GAMX5Z,YAAYqL,EAAYC,GACtB3M,KAAK0M,EAAIA,GAAK,EACd1M,KAAK2M,EAAIA,GAAK,EAKhBuO,YAAc,OAAOlb,KAAK0M,EAC1BwO,UAAUxe,GAAiBsD,KAAK0M,EAAIhQ,EACpCye,aAAe,OAAOnb,KAAK2M,EAC3BwO,WAAWze,GAAiBsD,KAAK2M,EAAIjQ,EAErC2E,IAAIqL,EAAWC,GAGb,OAFA3M,KAAK0M,EAAIA,EACT1M,KAAK2M,EAAIA,EACF3M,KAGTqB,UAAU6L,GAGR,OAFAlN,KAAK0M,EAAIQ,EACTlN,KAAK2M,EAAIO,EACFlN,KAGTqB,QACE,OAAO,IAAI4Z,GAAQjb,KAAK0M,EAAG1M,KAAK2M,GAElCtL,KAAK0L,GAGH,OAFA/M,KAAK0M,EAAIK,EAAEL,EACX1M,KAAK2M,EAAII,EAAEJ,EACJ3M,KAETqB,OAAO0L,GACL,OAASA,EAAEL,IAAM1M,KAAK0M,GAAOK,EAAEJ,IAAM3M,KAAK2M,EAG5CtL,IAAI0L,GAGF,OAFA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACL3M,KAGTqB,UAAUjI,GAGR,OAFA4G,KAAK0M,GAAKtT,EACV4G,KAAK2M,GAAKvT,EACH4G,KAGTqB,WAAWiM,EAAYC,GAGrB,OAFAvN,KAAK0M,EAAIY,EAAEZ,EAAIa,EAAEb,EACjB1M,KAAK2M,EAAIW,EAAEX,EAAIY,EAAEZ,EACV3M,KAGTqB,gBAAgB0L,EAAY3T,GAG1B,OAFA4G,KAAK0M,GAAKK,EAAEL,EAAItT,EAChB4G,KAAK2M,GAAKI,EAAEJ,EAAIvT,EACT4G,KAGTqB,UAAUjI,GAGR,OAFA4G,KAAK0M,GAAKtT,EACV4G,KAAK2M,GAAKvT,EACH4G,KAGTqB,WAAWiM,EAAYC,GAGrB,OAFAvN,KAAK0M,EAAIY,EAAEZ,EAAIa,EAAEb,EACjB1M,KAAK2M,EAAIW,EAAEX,EAAIY,EAAEZ,EACV3M,KAGTqB,SAAS0L,GAGP,OAFA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACL3M,KAGTqB,eAAe6L,GAGb,OAFAlN,KAAK0M,GAAKQ,EACVlN,KAAK2M,GAAKO,EACHlN,KAGTqB,OAAO0L,GAGL,OAFA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACL3M,KAGTqB,aAAa6L,GACX,OAAOlN,KAAKoN,eAAe,EAAIF,GAGjC7L,IAAI0L,GAGF,OAFA/M,KAAK0M,GAAKK,EAAEL,EACZ1M,KAAK2M,GAAKI,EAAEJ,EACL3M,KAGTqB,IAAI0L,GAGF,OAFA/M,KAAK0M,EAAIH,KAAK3G,IAAI5F,KAAK0M,EAAGK,EAAEL,GAC5B1M,KAAK2M,EAAIJ,KAAK3G,IAAI5F,KAAK2M,EAAGI,EAAEJ,GACrB3M,KAETqB,IAAI0L,GAGF,OAFA/M,KAAK0M,EAAIH,KAAK5G,IAAI3F,KAAK0M,EAAGK,EAAEL,GAC5B1M,KAAK2M,EAAIJ,KAAK5G,IAAI3F,KAAK2M,EAAGI,EAAEJ,GACrB3M,KAGTqB,SACE,OAAOkL,KAAKS,KAAKhN,KAAK0M,EAAI1M,KAAK0M,EAAI1M,KAAK2M,EAAI3M,KAAK2M,GAEnDtL,kBACE,OAAOkL,KAAKc,IAAIrN,KAAK0M,GAAKH,KAAKc,IAAIrN,KAAK2M,GAG1CtL,YACE,OAAOrB,KAAKgQ,aAAahQ,KAAKhI,UAAY,GAG5CqJ,MAAMuE,EAAcD,GAIlB,OAFA3F,KAAK0M,EAAIH,KAAK5G,IAAIC,EAAI8G,EAAGH,KAAK3G,IAAID,EAAI+G,EAAG1M,KAAK0M,IAC9C1M,KAAK2M,EAAIJ,KAAK5G,IAAIC,EAAI+G,EAAGJ,KAAK3G,IAAID,EAAIgH,EAAG3M,KAAK2M,IACvC3M,KAETqB,YAAYqO,EAAgBC,GAG1B,OAFAyL,GAAQvL,IAAIH,EAAQA,GACpB2L,GAAQxL,IAAIF,EAAQA,GACb3P,KAAK+P,MAAMqL,GAASC,IAE7Bha,YAAYuE,EAAaD,GACvB,IAAI3N,EAASgI,KAAKhI,SAClB,OAAOgI,KAAKgQ,aAAahY,GAAU,GAAGoV,eAAeb,KAAK5G,IAAIC,EAAK2G,KAAK3G,IAAID,EAAK3N,KAG5EqJ,OAAOuX,EAAiB0C,GAC7BA,EAASA,GAAU,IAAIL,GACvB,MAAMlO,EAAIuO,EAAOvE,IAAI/W,MAAMoN,gBAAgB,GACrCV,EAAIK,EAAEL,EACNC,EAAII,EAAEJ,EACN5Q,EAAIwQ,KAAKuC,IAAI8J,GACbxf,EAAImT,KAAKmC,IAAIkK,GAGnB,OAFA5Y,KAAK0M,EAAIA,EAAI3Q,EAAI4Q,EAAIvT,EACrB4G,KAAK2M,EAAID,EAAItT,EAAIuT,EAAI5Q,EACdiE,KAGTqB,QAGE,OAFArB,KAAK0M,EAAIH,KAAK0D,MAAMjQ,KAAK0M,GACzB1M,KAAK2M,EAAIJ,KAAK0D,MAAMjQ,KAAK2M,GAClB3M,KAETqB,OAGE,OAFArB,KAAK0M,EAAIH,KAAK2D,KAAKlQ,KAAK0M,GACxB1M,KAAK2M,EAAIJ,KAAK2D,KAAKlQ,KAAK2M,GACjB3M,KAETqB,QAGE,OAFArB,KAAK0M,EAAIH,KAAK4D,MAAMnQ,KAAK0M,GACzB1M,KAAK2M,EAAIJ,KAAK4D,MAAMnQ,KAAK2M,GAClB3M,KAETqB,cAGE,OAFArB,KAAK0M,EAAK1M,KAAK0M,EAAI,EAAKH,KAAK2D,KAAKlQ,KAAK0M,GAAKH,KAAK0D,MAAMjQ,KAAK0M,GAC5D1M,KAAK2M,EAAK3M,KAAK2M,EAAI,EAAKJ,KAAK2D,KAAKlQ,KAAK2M,GAAKJ,KAAK0D,MAAMjQ,KAAK2M,GACrD3M,KAGTqB,SAGE,OAFArB,KAAK0M,GAAM1M,KAAK0M,EAChB1M,KAAK2M,GAAM3M,KAAK2M,EACT3M,KAGTqB,IAAI0L,GACF,OAAO/M,KAAK0M,EAAIK,EAAEL,EAAI1M,KAAK2M,EAAII,EAAEJ,EAGnCtL,WACE,OAAOrB,KAAK0M,EAAI1M,KAAK0M,EAAI1M,KAAK2M,EAAI3M,KAAK2M,EAIzCtL,QAEE,IAAIqP,EAAQnE,KAAKyN,MAAMha,KAAK2M,EAAG3M,KAAK0M,GAEpC,OADIgE,EAAQ,IAAGA,GAAS,EAAInE,KAAKgF,IAC1Bb,EAGTrP,WAAW0L,GACT,OAAOR,KAAKS,KAAKhN,KAAKgP,kBAAkBjC,IAG1C1L,kBAAkB0L,GAChB,IAAIkC,EAAKjP,KAAK0M,EAAIK,EAAEL,EAAGwC,EAAKlP,KAAK2M,EAAII,EAAEJ,EACvC,OAAOsC,EAAKA,EAAKC,EAAKA,EAGxB7N,oBAAoB0L,GAClB,OAAOR,KAAKc,IAAIrN,KAAK0M,EAAIK,EAAEL,GAAKH,KAAKc,IAAIrN,KAAK2M,EAAII,EAAEJ,GAGtDtL,UAAUrJ,GACR,OAAOgI,KAAKoQ,YAAYhD,eAAepV,GAGzCqJ,KAAK0L,EAAYsD,GAGf,OAFArQ,KAAK0M,IAAMK,EAAEL,EAAI1M,KAAK0M,GAAK2D,EAC3BrQ,KAAK2M,IAAMI,EAAEJ,EAAI3M,KAAK2M,GAAK0D,EACpBrQ,KAGTqB,YAAYiP,EAAaC,EAAaF,GACpC,OAAOrQ,KAAKwQ,WAAWD,EAAID,GAAIlD,eAAeiD,GAAOI,IAAIH,GAG3DjP,aAAaka,EAAiB7K,GAC5B,IAAI3U,EAAIwQ,KAAKuC,IAAI4B,GAAQtX,EAAImT,KAAKmC,IAAIgC,GAClChE,EAAI1M,KAAK0M,EAAI6O,EAAO7O,EACpBC,EAAI3M,KAAK2M,EAAI4O,EAAO5O,EAGxB,OAFA3M,KAAK0M,EAAIA,EAAI3Q,EAAI4Q,EAAIvT,EAAImiB,EAAO7O,EAChC1M,KAAK2M,EAAID,EAAItT,EAAIuT,EAAI5Q,EAAIwf,EAAO5O,EACzB3M,KAGTqB,UAAU+N,EAAiBC,GAIzB,YAHe5T,IAAX4T,IAAsBA,EAAS,GACnCrP,KAAK0M,EAAI0C,EAAMC,GACfrP,KAAK2M,EAAIyC,EAAMC,EAAS,GACjBrP,KAGTqB,QAAQ+N,EAAkBC,GAKxB,YAJc5T,IAAV2T,IAAqBA,EAAQ,SAClB3T,IAAX4T,IAAsBA,EAAS,GACnCD,EAAMC,GAAUrP,KAAK0M,EACrB0C,EAAMC,EAAS,GAAKrP,KAAK2M,EAClByC,EAGT/N,eAAe0L,EAAYqC,GACzB,OAAOrC,EAAEuC,QAAQF,EAAO,IAK5B,MAAMgM,GAAU,IAAIH,GACdI,GAAU,IAAIJ,GCvPpB,IAAkBO,IAAlB,SAAkBA,GAChBA,IAAA,oBACAA,IAAA,4BACAA,IAAA,4BACAA,IAAA,4BACAA,IAAA,gBACAA,IAAA,wBACAA,IAAA,wBACAA,IAAA,wBACAA,IAAA,kBACAA,IAAA,kBACAA,IAAA,mBACAA,IAAA,0BAZF,CAAkBA,QAAU,KAe5B,MAAMC,GAAmD,CACvDC,MAASF,GAAWE,MACpBC,KAAQH,GAAWI,UACnBC,KAAQL,GAAWM,UACnBC,KAAQP,GAAWQ,UACnBC,KAAQT,GAAWU,KACnBC,KAAQX,GAAWY,KACnBC,KAAQb,GAAWc,MAErB,IAAIC,GAAsD,GAC1DpkB,OAAO4R,KAAK0R,IAAiBe,QAAQxf,IACnCuf,GAAuBd,GAAgBze,IAAQA,IAGjD,MAAMyf,GAAoG,CACxGf,MAAS,CAAEvgB,KAAMqgB,GAAWE,MAAOgB,OAAQ,EAAGC,QAAS,GACvDhB,KAAQ,CAAExgB,KAAMqgB,GAAWI,UAAWc,OAAQ,EAAGC,QAAS,IAAI1B,IAC9DY,KAAQ,CAAE1gB,KAAMqgB,GAAWM,UAAWY,OAAQ,EAAGC,QAAS,IAAIlQ,IAC9DsP,KAAQ,CAAE5gB,KAAMqgB,GAAWQ,UAAWU,OAAQ,EAAGC,QAAS,IAAIpN,KAEhE,IAAIqN,GAAwG,GAMrG,SAASC,GAAkC1hB,GAChD,OAAOohB,GAAuBphB,GAGzB,SAAS2hB,GAAoB3hB,GAClC,OAAOyhB,GAAiCzhB,GAAMuhB,OAahD,SAASK,GAAiC5hB,GACxC,OAAOyhB,GAAiCzhB,GAAMc,KAKzC,SAAS+gB,GAA0B3Z,EAAyB4Z,GACjE,IAAIC,EAAa,GAIjB,OAHAA,GAAcC,GAAwB9Z,GACtC6Z,GAAcE,GAAsB/Z,GACpC6Z,GAAcG,GAAsBha,GAC7B6Z,EAAaD,EAGf,SAASK,GAA4Bja,EAAyB4Z,GACnE,IAAIC,EAAa,GAKjB,OAJAA,GAAc,2BACdA,GAAcE,GAAsB/Z,GACpC6Z,GAAcG,GAAsBha,GACpC6Z,GAAcK,GAAsBla,GAC7B6Z,EAAaD,EAGtB,SAASM,GAAsBla,GAC7B,IAAIma,EAAO,GAMX,YALwB/hB,IAApB4H,EAAOoa,UACTpa,EAAOoa,SAASjB,QAAQkB,IACtBF,EAAOA,EAAO,qBAA4BE,EAAQzhB,KAAO,QAGtDuhB,EAGT,SAASL,GAAwB9Z,GAC/B,IAAIma,EAAO,GAOX,YAN0B/hB,IAAtB4H,EAAOsa,YACTta,EAAOsa,WAAWnB,QAAQoB,IACxB,MAAMziB,EAAO4hB,GAAiCa,EAAIziB,MAClDqiB,EAAOA,EAAO,aAAeriB,EAAO,IAAMyiB,EAAI3hB,KAAO,QAGlDuhB,EAGT,SAASJ,GAAsB/Z,GAC7B,IAAIma,EAAO,GACX,QAAwB/hB,IAApB4H,EAAOwa,SAET,IAAK,MAAM7gB,KAAOqG,EAAOwa,SAAU,CACjC,MAAMC,EAAMza,EAAOwa,SAAS7gB,GACtB7B,EAAO0hB,GAAkCiB,EAAI3iB,MACnDqiB,EAAOA,EAAO,WAAariB,EAAO,IAAM2iB,EAAI7hB,KAAO,MAGvD,OAAOuhB,EAGT,SAASH,GAAsBha,GAC7B,IAAIma,EAAO,GAOX,YANwB/hB,IAApB4H,EAAO0a,UACT1a,EAAO0a,SAASvB,QAAQwB,IACtB,MAAM7iB,EAAO0hB,GAAkCmB,EAAK7iB,MACpDqiB,EAAOA,EAAO,WAAariB,EAAO,IAAM6iB,EAAK/hB,KAAO,QAGjDuhB,ECpIF,SAASS,GAAkB9iB,GAChC,OAAQA,GACN,KAAKqgB,GAAWE,MAAO,OAAOwC,GAC9B,KAAK1C,GAAWI,UAAW,OAAOuC,GAClC,KAAK3C,GAAWM,UAAW,OAAOsC,GAClC,KAAK5C,GAAWQ,UAAW,OAAOqC,GAElC,KAAK7C,GAAWU,KAAM,OAAOoC,GAC7B,KAAK9C,GAAWY,KAAM,OAAOmC,GAC7B,KAAK/C,GAAWc,KAAM,OAAOkC,GAK7B,KAAKhD,GAAWiD,IAAK,KAAKjD,GAAWkD,QAAS,OAAOC,GAKvD,KAAM,2BAGR,SAAST,GAAWhU,EAA2B0U,EAAe7R,GAAa7C,EAAG2U,UAAUD,EAAU7R,GAClG,SAASoR,GAAYjU,EAA2B0U,EAAe7R,GAAmB7C,EAAG4U,WAAWF,EAAU7R,GAC1G,SAASqR,GAAYlU,EAA2B0U,EAAe7R,GAAmB7C,EAAG6U,WAAWH,EAAU7R,GAC1G,SAASsR,GAAYnU,EAA2B0U,EAAe7R,GAAmB7C,EAAG8U,WAAWJ,EAAU7R,GAE1G,SAAS4R,GAAWzU,EAA2B0U,EAAe7R,GAAa7C,EAAG+U,UAAUL,EAAU7R,GAElG,SAASuR,GAAWpU,EAA2B0U,EAAe7R,GAAmB7C,EAAGgV,iBAAiBN,GAAU,EAAO7R,GACtH,SAASwR,GAAWrU,EAA2B0U,EAAe7R,GAAmB7C,EAAGgV,iBAAiBN,GAAU,EAAO7R,GACtH,SAASyR,GAAWtU,EAA2B0U,EAAe7R,GAAmB7C,EAAGgV,iBAAiBN,GAAU,EAAO7R,GAEtH,SAASoS,GAAaC,EAAgBC,GACpC,OAAOD,IAAWC,EAEpB,SAASC,GAAYF,EAAkBC,GACrC,GAAID,EAAOpnB,SAAWqnB,EAAOrnB,OAC3B,OAAO,EAET,IAAK,IAAIF,EAAI,EAAGA,EAAIsnB,EAAOpnB,OAAQF,IACjC,GAAIsnB,EAAOtnB,KAAOunB,EAAOvnB,GACvB,OAAO,EAGX,OAAO,EAGT,SAASynB,GAAWH,EAAgBI,GAClC,OAAOJ,EAGT,SAASK,GAAUL,EAAkB/jB,GACnC,IAAIqkB,EAAarkB,OACFI,IAAXJ,GAAwB+jB,EAAOpnB,SAAWqD,EAAOrD,SACnD0nB,EAAa,IAEf,IAAK,IAAI5nB,EAAI,EAAGA,EAAIsnB,EAAOpnB,OAAQF,IACjC4nB,EAAW5nB,GAAKsnB,EAAOtnB,GAEzB,OAAO4nB,EAIF,SAASC,GAAkBxkB,GAChC,OAAIA,IAASqgB,GAAWE,OAASvgB,IAASqgB,GAAWiD,IAC5CU,GAEAG,GAIJ,SAASM,GAAkBzkB,GAChC,OAAIA,IAASqgB,GAAWE,OAASvgB,IAASqgB,GAAWiD,IAC5Cc,GAEAE,GAIJ,SAASI,GAAqB1kB,GACnC,OAAQA,GACN,KAAKqgB,GAAWE,MAAO,OAAQ3O,GAAcA,EAC7C,KAAKyO,GAAWI,UAAW,OAAOX,GAAQ6E,QAC1C,KAAKtE,GAAWM,UAAW,OAAOrP,GAAQqT,QAC1C,KAAKtE,GAAWQ,UAAW,OAAOzM,GAAQuQ,QAE1C,KAAKtE,GAAWU,KAAM,KAAM,kBAC5B,KAAKV,GAAWY,KAAM,KAAM,kBAC5B,KAAKZ,GAAWc,KAAM,OAAOrK,GAAQ6N,QAUvC,KAAM,8BC5FR,IAAkBC,GFqClB5nB,OAAO4R,KAAK0S,IAA2BD,QAAQxf,IAC7C4f,GAAiCH,GAA0Bzf,GAAK7B,MAC9D,CAAEc,KAAMe,EAAK0f,OAAQD,GAA0Bzf,GAAK0f,OAASC,QAASF,GAA0Bzf,GAAK2f,WEvCzG,SAAkBoD,GAChBA,IAAA,wBACAA,IAAA,0BACAA,IAAA,kCAHF,CAAkBA,QAAmB,KAW9B,MAAMC,GAA+D,IAAIC,IA6BzE,SAASC,GAA0BC,GACxC,MAAMC,EAAiBJ,GAAgB1jB,IAAI6jB,EAAIE,UACzCC,EAAa,CACjBrkB,KAAMkkB,EAAIlkB,KACVd,KAAMilB,EAAejlB,KACrBwhB,QAASyD,EAAezD,QACxB4D,oBAAqBJ,EAAIE,UAE3B,OAAOC,EApCTN,GAAgBnQ,IAAIkQ,GAAoBS,QAAS,CAC/CvkB,KAAM,UAAWd,KAAMqgB,GAAWc,KAAMK,QAAS,IAAI1K,KAEvD+N,GAAgBnQ,IAAIkQ,GAAoBU,SAAU,CAChDxkB,KAAM,WAAYd,KAAMqgB,GAAWc,KAAMK,QAAS,IAAI1K,KAExD+N,GAAgBnQ,IAAIkQ,GAAoBW,aAAc,CACpDzkB,KAAM,eAAgBd,KAAMqgB,GAAWc,KAAMK,QAAS,IAAI1K,KAgCrD,MAAM0O,GACXtf,YAAYuf,EAAoBN,GAyBxBtgB,KAAA6gB,iBAA2B,EAxBjC7gB,KAAK/D,KAAOqkB,EAAWrkB,KACvB+D,KAAK8K,SAAW8V,EAAQ9V,SACxB9K,KAAKkK,GAAK0W,EAAQ9V,SAASZ,GAC3B,MAAM4W,EAAYF,EAAQG,aACpBnC,EAAW5e,KAAKkK,GAAG8W,mBAAmBF,EAAWR,EAAWrkB,MAClE+D,KAAKihB,SAAwB,OAAbrC,EAChB5e,KAAK4e,SAAWA,EAEhB5e,KAAKkhB,eAAqCzlB,IAAzB6kB,EAAWY,UAC5BZ,EAAWY,UAAYrB,GAAqBS,EAAWnlB,MAEvD6E,KAAKmhB,YAA+B1lB,IAAtB6kB,EAAWa,OACvBb,EAAWa,OAASlD,GAAkBqC,EAAWnlB,MAEnD6E,KAAKohB,YAA+B3lB,IAAtB6kB,EAAWc,OACzBd,EAAWc,OAASzB,GAAkBW,EAAWnlB,MAEjD6E,KAAKqhB,YAA+B5lB,IAAtB6kB,EAAWe,OACzBf,EAAWe,OAASzB,GAAkBU,EAAWnlB,MAEjD6E,KAAKshB,YAAchB,EAAWC,oBAkBhClf,IAAI3E,GACF,IAAKsD,KAAKihB,SACR,OAIF,GAFAjhB,KAAKuhB,YAAcvhB,KAAKkhB,UAAUxkB,EAAOsD,KAAKuhB,kBAEjB9lB,IAAzBuE,KAAKwhB,gBAIP,OAHAxhB,KAAKwhB,gBAAkBxhB,KAAKkhB,UAAUxkB,EAAOsD,KAAKwhB,iBAClDxhB,KAAKmhB,OAAOnhB,KAAKkK,GAAIlK,KAAK4e,SAAU5e,KAAKuhB,kBACzCvhB,KAAK8K,SAAS2W,KAAKC,gBAIrB,IAAIC,GAAkB,EAClB3hB,KAAK6gB,kBAAoB7gB,KAAK8K,SAAS8W,mBACzCD,GAAkB,EAClB3hB,KAAK6gB,gBAAkB7gB,KAAK8K,SAAS8W,kBAGnC5hB,KAAK8K,SAAS+W,oBAAsBF,EAClC3hB,KAAKohB,OAAOphB,KAAKuhB,YAAavhB,KAAKwhB,mBACrCxhB,KAAKmhB,OAAOnhB,KAAKkK,GAAIlK,KAAK4e,SAAU5e,KAAKuhB,aACzCvhB,KAAK8K,SAAS2W,KAAKC,gBACnB1hB,KAAKwhB,gBAAkBxhB,KAAKqhB,OAAOrhB,KAAKuhB,YAAavhB,KAAKwhB,mBAG5DxhB,KAAKmhB,OAAOnhB,KAAKkK,GAAIlK,KAAK4e,SAAU5e,KAAKuhB,aACzCvhB,KAAK8K,SAAS2W,KAAKC,kBC/HzB,IAAkBI,GCGNC,GCJMC,GAUAC,GAOAC,GAWAC,GASAC,GAMNC,GASAC,IFnDZ,SAAkBR,GAChBA,IAAA,0BACAA,IAAA,sBACAA,IAAA,oBACAA,IAAA,cACAA,IAAA,qBALF,CAAkBA,QAAc,KAczB,MAAMS,GACXlhB,YAAYuf,EAAoBN,GAWvBtgB,KAAAwiB,MAAgB,EAVvBxiB,KAAK/D,KAAOqkB,EAAWrkB,KACvB+D,KAAKkK,GAAK0W,EAAQ9V,SAASZ,GAC3BlK,KAAK4e,SAAW5e,KAAKkK,GAAGuY,kBAAkB7B,EAAQG,aAAcT,EAAWrkB,MAC3E+D,KAAK7E,KAAOmlB,EAAWnlB,KACvB6E,KAAKihB,UAA8B,IAAnBjhB,KAAK4e,SASvBvd,UAAUwL,GACR,IAAK7M,KAAKihB,SACR,OAEF,MAAM/W,EAAKlK,KAAKkK,GAChBA,EAAGwY,WAAWxY,EAAGyY,aAAc9V,GAC/B3C,EAAG0Y,oBAAoB5iB,KAAK4e,SAAU9B,GAAoB9c,KAAK7E,MAAO+O,EAAG2Y,OAAO,EAAO,EAAG,GAC1F3Y,EAAG4Y,wBAAwB9iB,KAAK4e,YCjCpC,SAAYmD,GACVA,IAAA,6BADF,CAAYA,QAAa,KAgBlB,MAAMgB,GACX1hB,YAAYuf,EAAoBN,GAqBhCtgB,KAAAgjB,aAAuC,KApBrChjB,KAAK8K,SAAW8V,EAAQ9V,SACxB9K,KAAKijB,YAAcrC,EAAQ9V,SAAS/H,MAAMmgB,YAC1CljB,KAAKkK,GAAK0W,EAAQ9V,SAASZ,GAC3BlK,KAAK/D,KAAOqkB,EAAWrkB,KACvB+D,KAAKmjB,QAAU7C,EAAW8C,YAC1B,MAAMtC,EAAYF,EAAQG,aACpBnC,EAAW5e,KAAKkK,GAAG8W,mBAAmBF,EAAWR,EAAWrkB,MAClE+D,KAAKihB,SAAwB,OAAbrC,EAChB5e,KAAK4e,SAAWA,EAChB5e,KAAKqjB,mBAAqB,EAc5BhiB,WAAW2hB,GACT,IAAKhjB,KAAKihB,SACR,OAEF,MAAMiC,EAAcljB,KAAKijB,YAAYK,kBAAkBN,GACnDhjB,KAAKqjB,oBAAsBH,IAC7BljB,KAAK8K,SAAS2W,KAAKC,gBACnB1hB,KAAKqjB,kBAAoBH,EACzBljB,KAAKkK,GAAG+U,UAAUjf,KAAK4e,SAAUsE,KE3BvC,SAASK,GAAqBlgB,GAa5B,YAZwB5H,IAApB4H,EAAOmgB,WACTngB,EAAOmgB,UAAW,QAEI/nB,IAApB4H,EAAOwa,WACTxa,EAAOwa,SAAW,SAEYpiB,IAA5B4H,EAAOogB,mBAAuE,IAArCpgB,EAAOqgB,4BAClDrgB,EAAOogB,iBAAiBjH,QAAQmH,IAC7BtgB,EAAOwa,SAAiC3lB,KAAKgoB,GAA0ByD,MAE1EtgB,EAAOqgB,2BAA4B,GAE9BrgB,EAIF,MAAMugB,GACXviB,YAAYyJ,EAAsBzH,GA+BlCrD,KAAA/D,KAAe,MAEP+D,KAAA4gB,QAAkC,KAQlC5gB,KAAA2d,WAA+C,GAC/C3d,KAAA6jB,kBAAsD,GACtD7jB,KAAA6d,SAA2C,GAC3C7d,KAAA8jB,eAA8B,GAC9B9jB,KAAAyd,SAAkD,GAQ1Dzd,KAAA+jB,sBAAqD,GAErD/jB,KAAAgkB,SAAmB,EACnBhkB,KAAAikB,UAAoB,EACpBjkB,KAAAkkB,cAAwB,EACxBlkB,KAAAmkB,WAAqB,EAzDnBZ,GAAqBlgB,GACrBrD,KAAK8K,SAAWA,EAChB9K,KAAKM,GAAKgM,KAEVtM,KAAKokB,aAAe,IAAIvZ,GAAS7K,KAAK8K,SAAUF,GAAWK,QAC3DjL,KAAKqkB,eAAiB,IAAIxZ,GAAS7K,KAAK8K,SAAUF,GAAW0Z,UAC7DtkB,KAAKukB,eAAelhB,GAEpBrD,KAAKwkB,cAAcxkB,KAAKokB,aAAcpkB,KAAKqkB,gBAC3CrkB,KAAKykB,iBAAiBphB,QAEU5H,IAA5B4H,EAAOogB,kBACTpgB,EAAOogB,iBAAiBjH,QAAQ2D,IAC9BngB,KAAK8jB,eAAe5rB,KAAK8H,KAAK6d,SAASsC,EAAIlkB,SAI/C+D,KAAKqD,OAASA,OACU5H,IAApB4H,EAAOmgB,WACTxjB,KAAKkkB,aAAe7gB,EAAOmgB,UAE7B1Y,EAAS4Z,eAAeC,cAAc3kB,MAEtCqD,EAAOsa,WAAWnB,QAAQoB,SACNniB,IAAdmiB,EAAIgH,QACN5kB,KAAK6jB,kBAAkBjG,EAAIgH,OAAS5kB,KAAK2d,WAAWC,EAAI3hB,SAQ9DoF,aACE,GAAqB,OAAjBrB,KAAK4gB,QACP,KAAM,oBAER,OAAO5gB,KAAK4gB,QAWdvf,YACE,OAAOrB,KAAKqD,OAWPhC,4BAA4BwjB,EAAyBC,GAC1D9kB,KAAK+jB,sBAAsBe,GAAeD,EAGrCxjB,YAAY0jB,GACjB,IAAK,MAAM/nB,KAAOgD,KAAKyd,SACrBsH,EAAG/kB,KAAK6d,SAAS7gB,IAIdqE,YAAY0jB,GACjB,IAAK,MAAM/nB,KAAOgD,KAAKyd,SACrBsH,EAAG/kB,KAAKyd,SAASzgB,IAIdqE,cAAc0jB,GACnB,IAAK,MAAM/nB,KAAOgD,KAAK2d,WACrBoH,EAAG/kB,KAAK2d,WAAW3gB,IAIfqE,eAAe2jB,GACrB,IAAIC,EAAqBD,EAAKC,mBAC1BC,EAAuBF,EAAKE,qBAC5BF,EAAKG,mBACPF,EAAqBjI,GAA0BgI,EAAMA,EAAKC,oBAC1DC,EAAuB5H,GAA4B0H,EAAMA,EAAKE,uBAEhEllB,KAAKokB,aAAa9Y,cAAc2Z,GAChCjlB,KAAKqkB,eAAe/Y,cAAc4Z,GAG5B7jB,cAAc+iB,EAAwBC,GAC5C,MAAMna,EAAKlK,KAAK8K,SAASZ,GACnB0W,EAAU1W,EAAGsa,gBACnB,GAAgB,OAAZ5D,EACF,KAAM,8BAMR,GAJA5gB,KAAK4gB,QAAUA,EACf1W,EAAGkb,aAAaplB,KAAK4gB,QAASwD,EAAarZ,QAC3Cb,EAAGkb,aAAaplB,KAAK4gB,QAASyD,EAAetZ,QAC7Cb,EAAGmb,YAAYrlB,KAAK4gB,UACf1W,EAAGob,oBAAoBtlB,KAAK4gB,QAAS1W,EAAGqb,aAAc,CACzD,IAAIC,EAAOtb,EAAGub,kBAAkBzlB,KAAK4gB,SACrC,KAAM,wCAA0C4E,GAI5CnkB,iBAAiBgC,QACG5H,IAAtB4H,EAAOsa,YACTta,EAAOsa,WAAWnB,QAAQoB,IACxB5d,KAAK2d,WAAWC,EAAI3hB,MAAQ,IAAIsmB,GAAYviB,KAAM4d,UAG9BniB,IAApB4H,EAAOwa,UACTxa,EAAOwa,SAASrB,QAAQsB,IACtB9d,KAAK6d,SAASC,EAAI7hB,MAAQ,IAAI0kB,GAAU3gB,KAAM8d,UAG1BriB,IAApB4H,EAAOoa,UACTpa,EAAOoa,SAASjB,QAAQkJ,IACtB1lB,KAAKyd,SAASiI,EAAIzpB,MAAQ,IAAI8mB,GAAiB/iB,KAAM0lB,KAK3DrkB,gBAAgBpF,EAAczE,GAC5B,MAAMmuB,EAAY3lB,KAAK2d,WAAW1hB,GAClC,QAAkBR,IAAdkqB,EACF,KAAM,oCAERA,EAAUC,UAAUpuB,GAGtB6J,oBAAoBujB,GAClB,OAAO5kB,KAAK6jB,kBAAkBe,GAGhCvjB,WAAWpF,EAAc+mB,GACvBhjB,KAAKyd,SAASxhB,GAAM4pB,WAAW7C,GAGjC3hB,aAAaykB,EAActD,GACzBxiB,KAAKgkB,SAAW8B,EAChB9lB,KAAKikB,UAAYzB,EAGnBnhB,WAAWpF,EAAczE,GACvBwI,KAAK6d,SAAS5hB,GAAM4T,IAAIrY,GAG1B6J,0BAA0B0kB,GACxB/lB,KAAK8jB,eAAetH,QAAQsB,IAC1BA,EAAIjO,IAAIkW,EAAOC,iBAAiBlI,EAAIwD,aAAoC5kB,SAI5E2E,eAAewL,GACb,MAAM3C,EAAKlK,KAAK8K,SAASZ,GACzBA,EAAGwY,WAAWxY,EAAG+b,qBAAsBpZ,GAGzCxL,UACErB,KAAKokB,aAAa8B,UAClBlmB,KAAKqkB,eAAe6B,UACpBlmB,KAAK8K,SAASZ,GAAGic,cAAcnmB,KAAK4gB,UCjNjC,MAAMwF,GAAb/kB,cAEUrB,KAAAqmB,SAAmC,IAAIpG,IAE/C5e,cAAcuf,GACZ5gB,KAAKqmB,SAASxW,IAAI+Q,EAAQtgB,GAAIsgB,GAGhCvf,WAAWilB,GACT,OAAOtmB,KAAKqmB,SAAS/pB,IAAIgqB,GAG3BC,4BACE,OAAOvmB,KAAKqmB,SAASG,KAGvBnlB,YACErB,KAAKqmB,SAAS7J,QAAQoE,IACpBA,EAAQsF,YAEVlmB,KAAKqmB,SAAW,IAAIpG,KCrBjB,MAAMwG,GACXplB,YAAYyJ,GAIJ9K,KAAA0mB,QAA6C,IAAIC,QAHvD3mB,KAAK8K,SAAWA,EAKlBzJ,YAAYulB,GACV,OAAO5mB,KAAK0mB,QAAQpqB,IAAIsqB,GAG1BvlB,aAAa7J,EAAmBqvB,GAC9B,MAAM3c,EAAKlK,KAAK8K,SAASZ,GACnB2C,EAAS3C,EAAG4c,eAClB,GAAe,OAAXja,EACF,KAAM,2BAUR,OARIga,GACF3c,EAAGwY,WAAWxY,EAAG+b,qBAAsBpZ,GACvC3C,EAAG6c,WAAW7c,EAAG+b,qBAAsBzuB,EAAM0S,EAAG8c,eAEhD9c,EAAGwY,WAAWxY,EAAGyY,aAAc9V,GAC/B3C,EAAG6c,WAAW7c,EAAGyY,aAAcnrB,EAAM0S,EAAG8c,cAE1ChnB,KAAK0mB,QAAQ7W,IAAIrY,EAAMqV,GAChBA,EAGTxL,cAAc7J,GACZ,IAAKwI,KAAK0mB,QAAQO,IAAIzvB,GACpB,KAAM,8BAER,MAAM0S,EAAKlK,KAAK8K,SAASZ,GACnB2C,EAAS7M,KAAK0mB,QAAQpqB,IAAI9E,GAChC0S,EAAGgd,aAAara,GAChB7M,KAAK0mB,QAAQS,OAAO3vB,GAGtB6J,qBAAqB7J,EAAmBqvB,GACtC,IAAK7mB,KAAK0mB,QAAQO,IAAIzvB,GACpB,OAAOwI,KAAK8mB,aAAatvB,EAAMqvB,GAEjC7mB,KAAKonB,cAAc5vB,GACnBwI,KAAK8mB,aAAatvB,EAAMqvB,GAG1BxlB,YACErB,KAAK0mB,QAAU,IAAIC,UHhDvB,SAAkB3E,GAChBA,IAAA,sBACAA,IAAA,oBACAA,IAAA,8BACAA,IAAA,gCACAA,IAAA,4BACAA,IAAA,sCACAA,IAAA,mCAPF,CAAkBA,QAAQ,KAU1B,SAAkBC,GAChBA,IAAA,kCACAA,IAAA,kCACAA,IAAA,oCACAA,IAAA,4CAJF,CAAkBA,QAAQ,KAO1B,SAAkBC,GAChBA,IAAA,+BACAA,IAAA,gCACAA,IAAA,4BACAA,IAAA,sCACAA,IAAA,8BACAA,IAAA,4CACAA,IAAA,kCACAA,IAAA,oCARF,CAAkBA,QAAa,KAW/B,SAAkBC,GAChBA,IAAA,8BACAA,IAAA,sCACAA,IAAA,0CACAA,IAAA,gDACAA,IAAA,0CACAA,IAAA,sCANF,CAAkBA,QAAY,KAS9B,SAAkBC,GAChBA,IAAA,+BACAA,IAAA,0CAFF,CAAkBA,QAAgB,KAMlC,SAAYC,GACVA,IAAA,2BACAA,IAAA,yBACAA,IAAA,yDACAA,IAAA,uDACAA,IAAA,uDACAA,IAAA,qDANF,CAAYA,QAAa,KASzB,SAAYC,GACVA,IAAA,0BACAA,IAAA,oCACAA,IAAA,0CAHF,CAAYA,QAAW,KAOhB,IAeW+E,GAOAC,IAPlB,SAAkBD,GAChBA,IAAA,8BACAA,IAAA,wCACAA,IAAA,yDAHF,CAAkBA,QAAa,KAO/B,SAAkBC,GAChBA,IAAA,kBACAA,IAAA,gBACAA,IAAA,8BACAA,IAAA,kDACAA,IAAA,8BACAA,IAAA,kDACAA,IAAA,8BACAA,IAAA,kDACAA,IAAA,8BACAA,IAAA,kDACAA,IAAA,gDACAA,IAAA,0CACAA,IAAA,8DACAA,IAAA,0CACAA,IAAA,8DAfF,CAAkBA,QAAS,KAsBpB,IAuDKC,GAOAC,GA1DDC,GAAiB,IACjBC,GAAyB,KAkDpC,SAAYH,GACVA,IAAA,uBACAA,IAAA,mBACAA,IAAA,sBAHF,CAAYA,QAAW,KAOvB,SAAYC,GACVA,IAAA,uCACAA,IAAA,sDACAA,IAAA,0DACAA,IAAA,0DACAA,IAAA,wBALF,CAAYA,QAAa,KIpKlB,MAAMG,GAEXtmB,YAAYyJ,GAOZ9K,KAAA4nB,gBAA0B,EAC1B5nB,KAAA6nB,kBAA4B,EAC5B7nB,KAAA8nB,iBAA2B,EAC3B9nB,KAAA+nB,kBAA4B,EA0B5B/nB,KAAAgoB,kBAA6B,IAAIzY,GAnC/BvP,KAAKkK,GAAKY,EAASZ,GACnBlK,KAAKioB,yBAmBP5mB,aAAa6mB,EAAkBC,EAAoBC,EAAmBC,GAChEroB,KAAK4nB,iBAAmBM,GAC1BloB,KAAK6nB,mBAAqBM,GAC1BnoB,KAAK8nB,kBAAoBM,GACzBpoB,KAAK+nB,mBAAqBM,IAE1BroB,KAAKkK,GAAGoe,UAAUJ,EAASC,EAAWC,EAAUC,GAChDroB,KAAK4nB,eAAiBM,EACtBloB,KAAK6nB,iBAAmBM,EACxBnoB,KAAK8nB,gBAAkBM,EACvBpoB,KAAK+nB,iBAAmBM,GAM5BhnB,cAAcknB,EAAmBC,GAC1BD,EAASE,OAAOzoB,KAAKgoB,qBACxBhoB,KAAKgoB,kBAAkBlR,KAAKyR,GAC5BvoB,KAAKkK,GAAGwe,WAAWH,EAAS7b,EAAG6b,EAAS5b,EAAG4b,EAAS3b,EAAG2b,EAASna,IAIpE/M,yBACErB,KAAK2oB,cAAchB,GAAciB,mBAGnCvnB,QACErB,KAAKkK,GAAG2e,MAAM7oB,KAAKkK,GAAG4e,mBAlDjBnB,GAAAiB,kBAAoB,IAAIrZ,GAAQ,GAAK,GAAK,GAAK,GCDjD,MAAMwZ,GACX1nB,YAAYyJ,GAKZ9K,KAAAgpB,iBAAmB,KACnBhpB,KAAAipB,iBAAmB,KACnBjpB,KAAAkpB,kBAAoB,KAIZlpB,KAAAmpB,aAAc,EAVpBnpB,KAAKkK,GAAKY,EAASZ,GACnBlK,KAAKopB,eAUPC,eAAe3sB,GACTsD,KAAKmpB,cAAgBzsB,IACnBA,EACFsD,KAAKkK,GAAGof,OAAOtpB,KAAKkK,GAAGqf,YAEvBvpB,KAAKkK,GAAGsf,QAAQxpB,KAAKkK,GAAGqf,aAI9BF,iBACE,OAAOrpB,KAAKmpB,YAGd9nB,QACErB,KAAKkK,GAAG2e,MAAM7oB,KAAKkK,GAAGuf,kBAGxBpoB,eACErB,KAAKqpB,YAAa,EAGpBhoB,QAAQ3E,GACFsD,KAAKgpB,mBAAqBtsB,IAC5BsD,KAAKkK,GAAGwf,UAAUhtB,GAClBsD,KAAKgpB,iBAAmBtsB,GAI5B2E,QAAQsoB,GACN,MAAMzf,EAAKlK,KAAKkK,GAChB,GAAIlK,KAAKipB,mBAAqBU,EAAW,CACvC,GAAIA,EACF,OAAQA,GACN,KAAKzH,GAAc0H,WACjB1f,EAAGyf,UAAUzf,EAAG2f,OAChB,MACF,KAAK3H,GAAc4H,YACjB5f,EAAGyf,UAAUzf,EAAG6f,QAChB,MACF,KAAK7H,GAAc8H,UACjB9f,EAAGyf,UAAUzf,EAAG+f,MAChB,MACF,KAAK/H,GAAcgI,eACjBhgB,EAAGyf,UAAUzf,EAAGigB,QAChB,MACF,KAAKjI,GAAckI,WACjBlgB,EAAGyf,UAAUzf,EAAGmgB,OAChB,MACF,KAAKnI,GAAcoI,kBACjBpgB,EAAGyf,UAAUzf,EAAGqgB,QAChB,MACF,KAAKrI,GAAcsI,aACjBtgB,EAAGyf,UAAUzf,EAAGugB,SAChB,MACF,KAAKvI,GAAcwI,cACjBxgB,EAAGyf,UAAUzf,EAAGygB,UAChB,MACF,QACEzgB,EAAGyf,UAAUzf,EAAGigB,aAGpBjgB,EAAGyf,UAAUzf,EAAGigB,QAElBnqB,KAAKipB,iBAAmBU,IChEvB,MAAMiB,GACXvpB,YAAYyJ,GAUJ9K,KAAA6qB,mBAAqB,KACrB7qB,KAAA8qB,oBAAyC,GAyBzC9qB,KAAA+qB,UAAY,EAnClB/qB,KAAK8K,SAAWA,EAChB9K,KAAKkK,GAAKY,EAASZ,GACnBlK,KAAKgrB,WAAalgB,EAASmgB,OAAOtgB,aAAaf,GAAYshB,kBAC3DC,GAAuBnrB,KAAKgrB,WAAYhrB,KAAKkK,IAS/C7I,cAAc+pB,GACRprB,KAAK6qB,qBAAuBO,IAC9BprB,KAAKkK,GAAGmhB,cAAcD,GACtBprB,KAAK6qB,mBAAqBO,GAI9B/pB,YAAYiqB,EAA6BtI,GACP,OAA5BhjB,KAAK6qB,oBACP7qB,KAAKqrB,cAAcrrB,KAAKkK,GAAGqhB,UAE7B,IAAIC,EAAexrB,KAAK8qB,oBAAoB9qB,KAAK6qB,yBAC5BpvB,IAAjB+vB,IACFA,EAAe,CAAErwB,UAAMM,EAAWiiB,aAASjiB,GAC3CuE,KAAK8qB,oBAAoB9qB,KAAK6qB,oBAAsBW,GAElDA,EAAarwB,OAASmwB,GAAaE,EAAa9N,UAAYsF,IAC9DhjB,KAAKkK,GAAGuhB,YAAYH,EAAWtI,GAC/BwI,EAAarwB,KAAOmwB,EACpBE,EAAa9N,QAAUsF,GAM3B3hB,iBACErB,KAAK+qB,UAAY,EAGnB1pB,SAAS2hB,GACP,IAAIoI,EAAOprB,KAAK+qB,UAChB,GAAI/qB,KAAK+qB,UAAY/qB,KAAKgrB,WACxB,KAAM,yCAGR,OADAhrB,KAAK+qB,YACEK,EAGT/pB,kBAAkB2hB,GAChB,MAAM0I,EAAsB1rB,KAAK2rB,SAAS3I,GACpC4I,EAAwBC,GAAeH,GAG7C,OAFA1rB,KAAKqrB,cAAcO,GACnB5rB,KAAKyrB,YAAYrJ,GAAiB0J,UAAW9I,GACtC0I,GAIX,MAAMG,GAA2B,GACjC,SAASV,GAAuBY,EAA+B7hB,GAC7D,IAAK,IAAIpS,EAAI,EAAGA,EAAIi0B,EAAuBj0B,IAAK,CAC9C,MAAMmE,YAAiBnE,IACvB+zB,GAAe/zB,GAAKoS,EAAGjO,ICzEpB,MAAM+vB,GACX3qB,YAAYyJ,GAaZ9K,KAAAisB,gBAA2B,IAAI1c,GAC/BvP,KAAAksB,YAAuB,IAAI3c,GAC3BvP,KAAAmsB,eAA0B,IAAI5c,GAC9BvP,KAAAosB,WAAsB,IAAI7c,GAwB1BvP,KAAAqsB,gBAA4BpK,GAASqK,aAoBrCtsB,KAAAusB,2BAAqC,EACrCvsB,KAAAwsB,0BAAoC,EA5DlCxsB,KAAK8K,SAAWA,EAChB9K,KAAKkK,GAAKY,EAASZ,GACnBlK,KAAKysB,YAAc,IAAI9E,GAAc7c,GACrC9K,KAAK0sB,YAAc,IAAI3D,GAAcje,GACrC9K,KAAKkjB,YAAc,IAAI0H,GAAc9f,GAevCzJ,YAAYqL,EAAWC,EAAWuO,EAAeC,GAC/Cnb,KAAKksB,YAAYrc,IAAInD,EAAGC,EAAGuO,EAAOC,GAC7Bnb,KAAKksB,YAAYzD,OAAOzoB,KAAKisB,mBAChCjsB,KAAKkK,GAAGyiB,SAASjgB,EAAGC,EAAGuO,EAAOC,GAC9Bnb,KAAKisB,gBAAgBnV,KAAK9W,KAAKksB,cAInC7qB,wBACErB,KAAK4sB,YAAY,EAAG,EAAG5sB,KAAK8K,SAASoQ,MAAOlb,KAAK8K,SAASqQ,QAG5D9Z,WAAWqL,EAAWC,EAAWuO,EAAeC,GAC9Cnb,KAAKosB,WAAWvc,IAAInD,EAAGC,EAAGuO,EAAOC,GAC5Bnb,KAAKosB,WAAW3D,OAAOzoB,KAAKmsB,kBAC/BnsB,KAAKkK,GAAGyiB,SAASjgB,EAAGC,EAAGuO,EAAOC,GAC9Bnb,KAAKmsB,eAAerV,KAAK9W,KAAKosB,aAKlC/qB,YAAYwrB,GACV,MAAM3iB,EAAKlK,KAAKkK,GACZ2iB,IAAa5K,GAASqK,cACxBpiB,EAAGof,OAAOpf,EAAG4iB,WACTD,IAAa7sB,KAAKqsB,kBAChBQ,IAAa5K,GAAS8K,aACxB7iB,EAAG2iB,SAAS3iB,EAAG8iB,MACNH,IAAa5K,GAASgL,cAC/B/iB,EAAG2iB,SAAS3iB,EAAGgjB,OAEfhjB,EAAG2iB,SAAS3iB,EAAGijB,kBAInBjjB,EAAGsf,QAAQtf,EAAG4iB,WAEhB9sB,KAAKqsB,gBAAkBQ,EAMzBxrB,iBAAiB+rB,EAA8BC,EAAgBC,GAC7D,MAAMpjB,EAAKlK,KAAKkK,GACZkjB,GACFljB,EAAGof,OAAOpf,EAAGqjB,qBACTvtB,KAAKusB,6BAA+Bc,GAAUrtB,KAAKwsB,4BAA8Bc,IACnFpjB,EAAGsjB,cAAcH,EAAQC,GACzBttB,KAAKusB,2BAA6Bc,EAClCrtB,KAAKwsB,0BAA4Bc,IAGnCpjB,EAAGsf,QAAQtf,EAAGqjB,sBCpEpB,MAAME,GAA2B,CAC/BC,UAAWrL,GAAcsL,QACzBC,UAAWvL,GAAcsL,QACzBE,MAAOvL,GAAYwL,YACnBC,MAAOzL,GAAYwL,aAGfE,GAAuCP,GAUtC,MAAMQ,GACX5sB,YAAYyJ,GAKJ9K,KAAAyd,SAAuC,IAAIwC,IAJjDjgB,KAAK8K,SAAWA,EAChB9K,KAAKkuB,gBAAkB5zB,SAASC,cAAc,UAOhD8G,OACE,MAAM6I,EAAKlK,KAAK8K,SAASZ,GACzBA,EAAGikB,YAAYjkB,EAAGkkB,qBAAqB,GAGzC/sB,aAAaqc,GACX,OAAO1d,KAAKyd,SAASnhB,IAAIohB,GAG3Brc,gBAAgBqc,GACd,MAAM2Q,EAAYruB,KAAKsuB,aAAa5Q,GACpC1d,KAAK8K,SAASZ,GAAGqkB,cAAcF,GAC/BruB,KAAKyd,SAAS0J,OAAOzJ,GAGvBrc,8BAA8Bqc,GAC5B,MAAMxT,EAAKlK,KAAK8K,SAASZ,GACnBmkB,EAAYruB,KAAKwuB,mBAAmBf,IAK1C,OAJAvjB,EAAGuhB,YAAYvhB,EAAGukB,WAAYJ,GAE9BnkB,EAAGwkB,WAAWxkB,EAAGukB,WAAY,EAAGvkB,EAAGykB,KAAMzkB,EAAGykB,KAAMzkB,EAAG0kB,cAAelR,EAAQmR,OAC5E7uB,KAAKyd,SAAS5N,IAAI6N,EAAS2Q,GACpBA,EAGThtB,6BAA6Bqc,GAC3B,MAAMxT,EAAKlK,KAAK8K,SAASZ,GACnBmkB,EAAYruB,KAAKwuB,mBAAmBR,IAE1C9jB,EAAGuhB,YAAYvhB,EAAGukB,WAAYJ,GAC9B,MAAMS,EAAiB5kB,EAAGykB,KACpBI,EAAS,EACTC,EAAS9kB,EAAGykB,KACZxzB,EAAO+O,EAAG0kB,cACVp3B,EAAO,KAOb,OANA0S,EAAGwkB,WAAWxkB,EAAGukB,WAAY,EAAGK,EAC9BpR,EAAQxC,MAAOwC,EAAQvC,OAAQ4T,EAC/BC,EAAQ7zB,EAAM3D,GAEhBwI,KAAKyd,SAAS5N,IAAI6N,EAAS2Q,GAEpBA,EAGDhtB,mBAAmBgC,GACzB,MAAM6G,EAAKlK,KAAK8K,SAASZ,GACnBwT,EAAUxT,EAAG+kB,gBACnB,GAAgB,OAAZvR,EACF,KAAM,4BAOR,OALAxT,EAAGuhB,YAAYvhB,EAAGukB,WAAY/Q,GAC9BxT,EAAGglB,cAAchlB,EAAGukB,WAAYvkB,EAAGilB,mBAAoB9rB,EAAOqqB,WAC9DxjB,EAAGglB,cAAchlB,EAAGukB,WAAYvkB,EAAGilB,mBAAoB9rB,EAAOuqB,WAC9D1jB,EAAGglB,cAAchlB,EAAGukB,WAAYvkB,EAAGklB,eAAgB/rB,EAAOwqB,OAC1D3jB,EAAGglB,cAAchlB,EAAGukB,WAAYvkB,EAAGmlB,eAAgBhsB,EAAO0qB,OACnDrQ,EAGTrc,cC/FF,IAAYiuB,GAMAC,IANZ,SAAYhI,GACVA,IAAA,mCACAA,IAAA,+BACAA,IAAA,kCAHF,CAAY+H,QAAW,KAMvB,SAAY9H,GACVA,IAAA,oCACAA,IAAA,kDACAA,IAAA,sDACAA,IAAA,sDACAA,IAAA,oBALF,CAAY+H,QAAa,KAclB,MAAeC,GAAtBnuB,cAEUrB,KAAAyvB,YAAsB,EAE9BzvB,KAAAgvB,OAAsBM,GAAYI,WAClC1vB,KAAA2vB,SAA0BJ,GAAcX,cAExCvtB,gBACErB,KAAKyvB,YAAa,EAGpBpuB,aAAa0kB,GACX,MAAMsI,EAAYtI,EAAOjb,SAAS8kB,cAActB,aAAatuB,MAC7D,YAAkBvE,IAAd4yB,GACFruB,KAAKyvB,YAAa,EACXzvB,KAAK6vB,OAAO9J,IAEjB/lB,KAAKyvB,YACPzvB,KAAKyvB,YAAa,EAClBzvB,KAAK8vB,gBAAgB/J,GACd/lB,KAAK6vB,OAAO9J,SAHrB,EAOF1kB,gBAAgB0kB,GACdA,EAAOjb,SAAS8kB,cAAcG,gBAAgB/vB,OCxC3C,MAAMgwB,WAAiCR,GAA9CnuB,kCACErB,KAAAkb,MAAgB,EAChBlb,KAAAmb,OAAiB,EAEjB9Z,OAAO0kB,GACL,OAAOA,EAAOjb,SAAS8kB,cAAcK,6BAA6BjwB,MAGpEqB,OAAO0kB,EAAsBmK,EAA4BC,GACvDpK,EAAOjb,SAASslB,gBAAgBF,GAEhC,MAAMhmB,EAAKgmB,EAAYhmB,GACvBlK,KAAKkb,MAAQgV,EAAYhV,MACzBlb,KAAKmb,OAAS+U,EAAY/U,OAC1Bnb,KAAK8vB,gBAAgB/J,GACrB,MAAMsI,EAAYruB,KAAK6vB,OAAO9J,GACxBsK,EAAkBC,GAAmBH,GAC3CjmB,EAAGqmB,qBAAqBrmB,EAAGsmB,YAAaH,EAAiBnmB,EAAGukB,WAAYJ,EAAW,IAKvF,MAAMiC,GAAqB,GAC3B,SAASG,GAAuBvmB,GAC9B,GAAkC,IAA9BomB,GAAmBt4B,OACrB,IAAK,IAAIF,EAAI,EAAGA,EAAI,GAAIA,IACtBw4B,GAAmBx4B,GAAKoS,EAAG,mBAAqBpS,GAO/C,MAAM44B,GACXrvB,YAAYyJ,EAAsB7O,EAAcif,EAAeC,GAgB/Dnb,KAAA2wB,aAAuB,EACvB3wB,KAAA4wB,iBAAgD,KAGhD5wB,KAAA6wB,oBAAkD,GAnBhD7wB,KAAK/D,KAAOA,EACZ+D,KAAK8K,SAAWA,EAChB9K,KAAKkK,GAAKY,EAASZ,GACnBumB,GAAuBzwB,KAAKkK,IAC5BlK,KAAK8wB,iBAAmB9wB,KAAK+wB,sBAC7B/wB,KAAKkb,MAAQA,EACblb,KAAKmb,OAASA,EAehB9Z,sBACE,MAAMwL,EAAS7M,KAAKkK,GAAG8mB,oBACvB,GAAe,OAAXnkB,EACF,KAAM,kCAER,OAAOA,EAGTxL,uBACE,MAAMwL,EAAS7M,KAAKkK,GAAG+mB,qBACvB,GAAe,OAAXpkB,EACF,KAAM,mCAER,OAAOA,EAGTxL,OAAO0kB,EAAsB7K,EAAeC,GAEtCnb,KAAKkb,QAAUA,GAASlb,KAAKmb,SAAWA,IAI5Cnb,KAAKkb,MAAQA,EACblb,KAAKmb,OAASA,EAEdnb,KAAKkK,GAAGgnB,kBAAkBlxB,KAAK8wB,kBAC/B9wB,KAAK8wB,iBAAmB9wB,KAAK+wB,sBAE7B/wB,KAAK8K,SAASslB,gBAAgBpwB,MAE9BA,KAAK6wB,oBAAoBrU,QAAQ,CAACgB,EAAMxY,KAClCwY,GACFA,EAAK2T,OAAOpL,EAAQ/lB,KAAMgF,KAI9BhF,KAAKoxB,6BACLpxB,KAAKqxB,2BAIPhwB,oBAAoB0kB,EAAqBoK,GACvC,QAA8C10B,IAA1CuE,KAAK6wB,oBAAoBV,GAC3B,KAAM,mCAER,MAAMmB,EAAgB,IAAItB,GAC1BsB,EAAcH,OAAOpL,EAAQ/lB,KAAMmwB,GACnCnwB,KAAK6wB,oBAAoBV,GAAemB,EAI1CjwB,0BAGE,GAFArB,KAAK8K,SAASslB,gBAAgBpwB,MAEA,OAA1BA,KAAK4wB,iBACP,OAEF,MAAM1mB,EAAKlK,KAAKkK,GACVqnB,EAAcvxB,KAAKwxB,uBACzBxxB,KAAK4wB,iBAAmBW,EAExBrnB,EAAGunB,iBAAiBvnB,EAAGwnB,aAAcH,GACrCrnB,EAAGynB,oBAAoBznB,EAAGwnB,aAAcxnB,EAAG0nB,kBAAmB5xB,KAAKkb,MAAOlb,KAAKmb,QAE/EjR,EAAG2nB,wBAAwB3nB,EAAGsmB,YAAatmB,EAAG4nB,iBAAkB5nB,EAAGwnB,aAAcH,GAGnFlwB,6BACErB,KAAKkK,GAAG6nB,mBAAmB/xB,KAAK4wB,kBAChC5wB,KAAK4wB,iBAAmB,KAG1BvvB,cAAcqc,EAAmCyS,IAMjD9uB,WAAWqL,EAAWC,EAAWuO,EAAeC,EAAgB6W,GAE9D,MAAM9nB,EAAKlK,KAAKkK,GAEhB,GADAlK,KAAK8K,SAASslB,gBAAgBpwB,MAC1B0M,EAAI,GAAKC,EAAI,GAAKD,EAAK1M,KAAKkb,MAAQA,GAAUvO,EAAK3M,KAAKmb,OAASA,EACnE,KAAM,6BAER,GAAI6W,EAAWh6B,OAASkjB,EAAQC,EAC9B,KAAM,iCAERjR,EAAG+nB,WAAWvlB,EAAGC,EAAGuO,EAAOC,EAAQoM,GAAYoH,KAAMzkB,EAAG0kB,cAAeoD,GAGzE3wB,UACErB,KAAK6wB,oBAAsB,GAC3B7wB,KAAKoxB,6BACLpxB,KAAKkK,GAAGgnB,kBAAkBlxB,KAAK8wB,kBAC/B9wB,KAAK8wB,iBAAmB,MC1JrB,MAAMoB,GACX7wB,YAAYyJ,GAOJ9K,KAAAmyB,aAA2C,IAAIlS,IANrDjgB,KAAK8K,SAAWA,EAChB9K,KAAKkK,GAAKY,EAASZ,GAOrB7I,kBAAkB0kB,EAAsB9pB,EAAcif,EAAeC,EAAgBwV,GACnF,GAAI3wB,KAAKmyB,aAAalL,IAAIhrB,GACxB,KAAM,iCAGR,MAAMi0B,EAAc,IAAIQ,GAAc1wB,KAAK8K,SAAU7O,EAAMif,EAAOC,GASlE,OARA+U,EAAYkC,oBAAoBrM,EAAQ,GACxCmK,EAAYS,YAAcA,EACtBA,GACFT,EAAYmB,0BAGdrxB,KAAKmyB,aAAatiB,IAAI5T,EAAMi0B,GAErBA,EAGT7uB,eAAewjB,GACb,OAAO7kB,KAAKmyB,aAAa71B,IAAIuoB,GAG/BxjB,sBAAsBwjB,GACpB,MAAMqL,EAAclwB,KAAKmyB,aAAa71B,IAAIuoB,GAC1C,QAAoBppB,IAAhBy0B,EACF,8BAA+BrL,IAEjC,OAAO7kB,KAAK8K,SAAS8kB,cAActB,aAAa4B,EAAYW,oBAAoB,IAGlFxvB,cC5CK,MAAMgxB,GAAbhxB,cACErB,KAAAsyB,SAAmB,EACnBtyB,KAAAuyB,cAAwB,EACxBvyB,KAAA0hB,cAAwB,EACxB1hB,KAAAwyB,kBAA4B,EAG5BnxB,QACErB,KAAKsyB,SAAW,EAChBtyB,KAAKuyB,cAAgB,EACrBvyB,KAAK0hB,cAAgB,EACrB1hB,KAAKwyB,kBAAoB,GCDtB,MAAMC,GAOXpxB,YAAYyJ,GAFJ9K,KAAA0yB,KAA+B,IAAI/L,QAGzC3mB,KAAK8K,SAAWA,EAChB9K,KAAKkK,GAAKY,EAASZ,GACnBlK,KAAK2yB,OAAS7nB,EAASmgB,OAAOzgB,aAAab,GAAUipB,yBACrD5yB,KAAK6yB,iBAA8Bp3B,IAAhBuE,KAAK2yB,OAG1BtxB,OAAOyxB,GACL,OAAO9yB,KAAK0yB,KAAKp2B,IAAIw2B,GAGvBzxB,UAAUyxB,GACR,MAAMC,EAAM/yB,KAAK2yB,OAAOK,uBAGxB,OAFAhzB,KAAK2yB,OAAOM,mBAAmBF,GAC/B/yB,KAAK0yB,KAAK7iB,IAAIijB,EAAUC,GACjB,CACLA,MAAKG,OAAQ,KACXlzB,KAAK2yB,OAAOM,mBAAmB,QAKrC5xB,UAAUyxB,GACR9yB,KAAK0yB,KAAKvL,OAAO2L,GAGnBzxB,OAAO0xB,GACL/yB,KAAK2yB,OAAOM,mBAAmBF,GAGjC1xB,YACErB,KAAK2yB,OAAOM,mBAAmB,MAC/BjzB,KAAK0yB,KAAO,IAAI/L,SCpCb,MAAMwM,GACX9xB,YAAY+xB,EAAwBxxB,GA2BpC5B,KAAAqzB,wBAAkC,EAClCrzB,KAAA6hB,mBAA6B,EAGrB7hB,KAAAszB,OAAS,IAETtzB,KAAAuzB,QAAU,IAGVvzB,KAAAwzB,iBAAmB/1B,OAAO+1B,iBAiBzBxzB,KAAAyhB,KAAe,IAAI4Q,GACpBryB,KAAAyzB,cAAqC,KAC7CzzB,KAAA4hB,iBAA2B,EAGlB5hB,KAAA0kB,eAAiB,IAAI0B,GACrBpmB,KAAA4vB,cAAgB,IAAI3B,GAAiBjuB,MACrCA,KAAA0zB,uBAAyB,IAAIjN,GAA6BzmB,MAkDnEA,KAAA2zB,mBAA8C,UA7GjCl4B,IAAP23B,IACFA,EAAK94B,SAASC,cAAc,WAE9BqH,EAAOzJ,OAAAy7B,OAAA,GAAQhyB,GACfA,EAAQiyB,WAAY,EAEpB,MAAMC,EAAMV,EAAGW,WAAW,QAASnyB,GACnC,GAAY,OAARkyB,EACF,KAAM,8BAER9zB,KAAKkK,GAAK4pB,EACV9zB,KAAKozB,GAAKA,EACVpzB,KAAKirB,OAAS,IAAIhhB,GAAO6pB,GACzB9zB,KAAKg0B,mBAAqB,IAAI9B,GAAqBlyB,MACnDA,KAAKi0B,WAAa,IAAIxB,GAAazyB,MACnCA,KAAK+C,MAAQ,IAAIipB,GAAQhsB,MACzBA,KAAK4vB,cAAcsE,OACnBl0B,KAAKm0B,QAAQn0B,KAAKozB,GAAGgB,YAAap0B,KAAKozB,GAAGiB,cAc5CnZ,YAAc,OAAOlb,KAAKszB,OAE1BnY,aAAe,OAAOnb,KAAKuzB,QAK3BlyB,QAAQ6Z,EAAeC,GACrB,OAAOnb,KAAKs0B,iBAAiBpZ,EAAQlb,KAAKwzB,iBAAkBrY,EAASnb,KAAKwzB,kBAE5EnyB,iBAAiB6Z,EAAeC,GAC9B,IAAIoZ,EAAYv0B,KAAKszB,SAAWpY,GAASlb,KAAKuzB,UAAYpY,EAM1D,OALAnb,KAAKszB,OAASpY,EACdlb,KAAKuzB,QAAUpY,EACfnb,KAAKozB,GAAGlY,MAAQlb,KAAKszB,OACrBtzB,KAAKozB,GAAGjY,OAASnb,KAAKuzB,QACtBvzB,KAAK+C,MAAM6pB,YAAY,EAAG,EAAG1R,EAAOC,GAC7BoZ,EAeTlzB,cAAc2jB,GACZ,MAAMpE,EAAU,IAAIgD,GAAU5jB,KAAMglB,GAEpC,OADAhlB,KAAK0kB,eAAeC,cAAc/D,GAC3BA,EAGTvf,WAAWilB,GACT,OAAOtmB,KAAK0kB,eAAe3D,WAAWuF,GAGxCjlB,WAAWuf,GACL5gB,KAAKyzB,gBAAkB7S,IACzB5gB,KAAKyhB,KAAK8Q,gBACVvyB,KAAKyzB,cAAgB7S,EACrB5gB,KAAK4hB,mBACL5hB,KAAKkK,GAAGsqB,WAAW5T,EAAQG,eAI/B1f,OAAOzE,EAAgB4mB,GACrB,GAA2B,OAAvBxjB,KAAKyzB,cACP,KAAM,iCAcR,GAZIjQ,EACFxjB,KAAKkK,GAAGuqB,aACN73B,EACAoD,KAAKyzB,cAAcxP,UACnBjkB,KAAKyzB,cAActP,UAAYnkB,KAAKkK,GAAGwqB,aAAe10B,KAAKkK,GAAGyqB,eAC9D,GAGF30B,KAAKkK,GAAG0qB,WAAWh4B,EAAMoD,KAAKyzB,cAAczP,SAAUhkB,KAAKyzB,cAAcxP,WAE3EjkB,KAAKyhB,KAAK6Q,WAENtyB,KAAKqzB,uBAAwB,CAC/B,MAAMwB,EAAY70B,KAAKkK,GAAG4qB,WAC1B,GAAID,IAAc70B,KAAKkK,GAAG6qB,SAExB,uBAAyBF,IAI7B70B,KAAK+C,MAAMmgB,YAAY8R,iBAIzB3zB,gBAAgB6uB,GACd,GAAIlwB,KAAK2zB,qBAAuBzD,EAAa,CAC3ClwB,KAAKyhB,KAAK+Q,oBACVxyB,KAAK2zB,mBAAqBzD,EAC1B,MAAMhmB,EAAKlK,KAAKkK,GACI,OAAhBgmB,EACFhmB,EAAG+qB,gBAAgB/qB,EAAGsmB,YAAa,MAEnCtmB,EAAG+qB,gBAAgB/qB,EAAGsmB,YAAaN,EAAYY,mBAKrDzvB,wBACErB,KAAKowB,gBAAgB,MAGvB/uB,YACErB,KAAK0zB,uBAAuBwB,YAC5Bl1B,KAAK0kB,eAAewQ,YACpBl1B,KAAK4vB,cAAcsF,YACnBl1B,KAAKg0B,mBAAmBkB,YACxBl1B,KAAKi0B,WAAWiB,aCjJb,MAAMC,WAA0B1oB,GACrCpL,YAAYqL,EAAYC,EAAYC,GAClCwoB,QAMFp1B,KAAAuI,SAAW,SALTvI,KAAKyZ,GAAK/M,GAAK,EACf1M,KAAK0Z,GAAK/M,GAAK,EACf3M,KAAK2Z,GAAK/M,GAAK,EASjBF,QACE,OAAO1M,KAAKyZ,GAEd/M,MAAM2oB,GACAr1B,KAAKuI,UACPvI,KAAKuI,WAGPvI,KAAKyZ,GAAK4b,EAGZ1oB,QACE,OAAO3M,KAAK0Z,GAEd/M,MAAM0oB,GACAr1B,KAAKuI,UACPvI,KAAKuI,WAEPvI,KAAK0Z,GAAK2b,EAGZzoB,QACE,OAAO5M,KAAK2Z,GAEd/M,MAAMyoB,GACAr1B,KAAKuI,UACPvI,KAAKuI,WAEPvI,KAAK2Z,GAAK0b,GCzCd,MAAMC,GAAc,IAAI7oB,GAClB8oB,GAAa,IAAItjB,GAShB,MAAMujB,GACXn0B,cAkBArB,KAAAy1B,uBAAwB,EAEhBz1B,KAAA01B,QAAmB,IAAIzjB,GACvBjS,KAAA21B,eAAgB,EAEhB31B,KAAA41B,UAA+B,IAAIT,GACnCn1B,KAAA61B,iBAAkB,EAElB71B,KAAA81B,OAA4B,IAAIX,GAAkB,EAAG,EAAG,GACxDn1B,KAAA+1B,cAAe,EAEf/1B,KAAAg2B,UAAmB,IAAI5c,GACvBpZ,KAAAi2B,cAAe,EAEfj2B,KAAAk2B,YAA0B,IAAIxb,GAC9B1a,KAAAm2B,mBAAoB,EAhC1Bn2B,KAAK41B,UAAUrtB,SAAW,MACxBvI,KAAK21B,eAAgB,EACrB31B,KAAKy1B,uBAAwB,IAG/Bz1B,KAAK81B,OAAOvtB,SAAW,MACrBvI,KAAK21B,eAAgB,EACrB31B,KAAKy1B,uBAAwB,IA2B1Bp0B,qBACLrB,KAAK21B,eAAgB,EACrB31B,KAAK61B,iBAAkB,EACvB71B,KAAK+1B,cAAe,EACpB/1B,KAAKi2B,cAAe,EACpBj2B,KAAKm2B,mBAAoB,EAG3B/jB,aAIE,OAHIpS,KAAK21B,eACP31B,KAAK01B,QAAQU,QAAQp2B,KAAK41B,UAAW51B,KAAKk2B,YAAal2B,KAAK81B,QAEvD91B,KAAK01B,QAGdriB,eAOE,OANIrT,KAAK61B,kBACP71B,KAAK41B,UAAUnc,GAAKzZ,KAAK01B,QAAQ3mB,SAAS,IAC1C/O,KAAK41B,UAAUlc,GAAK1Z,KAAK01B,QAAQ3mB,SAAS,IAC1C/O,KAAK41B,UAAUjc,GAAK3Z,KAAK01B,QAAQ3mB,SAAS,IAC1C/O,KAAK61B,iBAAkB,GAElB71B,KAAK41B,UAGdriB,YAUE,OATIvT,KAAK+1B,eACPT,GAAYzlB,IAAI7P,KAAK01B,QAAQ3mB,SAAS,GAAI/O,KAAK01B,QAAQ3mB,SAAS,GAAI/O,KAAK01B,QAAQ3mB,SAAS,IAC1F/O,KAAK81B,OAAOrc,GAAK6b,GAAYt9B,SAC7Bs9B,GAAYzlB,IAAI7P,KAAK01B,QAAQ3mB,SAAS,GAAI/O,KAAK01B,QAAQ3mB,SAAS,GAAI/O,KAAK01B,QAAQ3mB,SAAS,IAC1F/O,KAAK81B,OAAOrc,GAAK6b,GAAYt9B,SAC7Bs9B,GAAYzlB,IAAI7P,KAAK01B,QAAQ3mB,SAAS,GAAI/O,KAAK01B,QAAQ3mB,SAAS,GAAI/O,KAAK01B,QAAQ3mB,SAAS,KAC1F/O,KAAK81B,OAAOrc,GAAK6b,GAAYt9B,SAC7BgI,KAAK+1B,cAAe,GAEf/1B,KAAK81B,OAGdO,eAKE,OAJIr2B,KAAKi2B,eACPj2B,KAAKg2B,UAAUM,kBAAkBt2B,KAAKsT,WAAY8F,GAAMG,cAAc,GACtEvZ,KAAKi2B,cAAe,GAEfj2B,KAAKg2B,UAGd1iB,iBAOE,OANItT,KAAKm2B,oBACPZ,GAAWze,KAAK9W,KAAK01B,SACrBH,GAAWhiB,MAAM,EAAIvT,KAAKuT,MAAM7G,EAAG,EAAI1M,KAAKuT,MAAM5G,EAAG,EAAI3M,KAAKuT,MAAM3G,GACpE5M,KAAKk2B,YAAY5b,sBAAsBib,IACvCv1B,KAAKm2B,mBAAoB,GAEpBn2B,KAAKk2B,aCtFT,MAAMK,GAAbl1B,cACErB,KAAAoM,KAAOE,KACPtM,KAAAw2B,MAAyB,KACzBx2B,KAAAy2B,oBAA8B,EAE9Bz2B,KAAA02B,OAA8B,KAC9B12B,KAAA22B,SAAwB,GAExB32B,KAAA42B,UAA4B,IAAIpB,GAChCx1B,KAAA62B,aAAe,IAAI5kB,GACnBjS,KAAA82B,0BAAoC,EAKpC92B,KAAA+2B,UAAoB,EACpB/2B,KAAAg3B,aAAuB,EACvBh3B,KAAAi3B,sBAAgC,EANhCC,kBACE,OAAOl3B,KAAK62B,aAMdM,YAAYz6B,GACVsD,KAAK+2B,SAAWr6B,EACG,OAAfsD,KAAKw2B,QACPx2B,KAAKw2B,MAAMY,sBAAuB,GAGtCD,cACE,OAAOn3B,KAAK+2B,SAGd11B,SAASg2B,GACP,GAAIA,IAASr3B,KACX,KAAM,mCAaR,OAVmB,OAAfA,KAAKw2B,QACPx2B,KAAKw2B,MAAMc,wBAAyB,EACpCt3B,KAAKw2B,MAAMe,QAAQF,IAGD,OAAhBA,EAAKX,QACPW,EAAKX,OAAOc,YAAYH,GAE1BA,EAAKX,OAAS12B,KACdA,KAAK22B,SAASz+B,KAAKm/B,GACZr3B,KAGTqB,YAAYg2B,GACS,OAAfr3B,KAAKw2B,QACPx2B,KAAKw2B,MAAMc,wBAAyB,EACpCt3B,KAAKw2B,MAAMiB,WAAWJ,IAGxB,IAAIryB,EAAQhF,KAAK22B,SAASe,QAAQL,GAKlC,OAJgB,IAAZryB,IACFqyB,EAAKX,OAAS,KACd12B,KAAK22B,SAASz9B,OAAO8L,EAAO,IAEvBhF,KAGTqB,SAASs2B,GACP,SAASC,EAAMP,GACb,IAAiB,IAAbM,EAAGN,GACL,IAAK,IAAIv/B,EAAI,EAAGA,EAAIu/B,EAAKV,SAAS3+B,OAAQF,IACxC8/B,EAAMP,EAAKV,SAAS7+B,IAK1B,OADA8/B,EAAM53B,MACCA,KAGTqB,aAAas2B,GACX,SAASC,EAAMC,EAAiCR,GAC9C,MAAMx+B,EAAS8+B,EAAGE,EAAYR,GAC9B,IAAK,IAAIv/B,EAAI,EAAGA,EAAIu/B,EAAKV,SAAS3+B,OAAQF,IACxC8/B,EAAMP,EAAMA,EAAKV,SAAS7+B,IAE5B,OAAOe,EAET,OAAO++B,EAAM53B,KAAK02B,OAAQ12B,MAG5BqB,IAAIs2B,GACF,MAAMG,EAAkC,IAAI7X,IACtC8X,EAAW/3B,KAAKg4B,aAAa,CAACH,EAAiCR,KACnE,MAAMY,EAAUN,EAAGN,GAEnB,GADAS,EAAMjoB,IAAIwnB,EAAMY,GACG,OAAfJ,GAAuBC,EAAM7Q,IAAI4Q,GAAa,CAChD,MAAMK,EAAgBJ,EAAMx7B,IAAIu7B,GAChC,QAAsBp8B,IAAlBy8B,EACF,KAAM,0CAERA,EAAcvB,SAASz+B,KAAK+/B,GAE9B,OAAOA,IAET,OAAOF,EAGT12B,YAAYf,GACV,IAAIzH,EAA8B,KAOlC,OANAmH,KAAKm4B,SAASd,IACZ,GAAIA,EAAKjrB,OAAS9L,EAEhB,OADAzH,EAASw+B,GACF,IAGJx+B,EAGTwI,kBAAkB+2B,IACZp4B,KAAK42B,UAAUnB,uBAAyB2C,KAEtB,OAAhBp4B,KAAK02B,OACP12B,KAAKk3B,YAAYpgB,KAAK9W,KAAK42B,UAAUxkB,QAErCpS,KAAKk3B,YAAYmB,iBAAiBr4B,KAAK02B,OAAOQ,YAAal3B,KAAK42B,UAAUxkB,QAE5EpS,KAAK42B,UAAUnB,uBAAwB,EACvC2C,GAAQ,GAGV,IADA,IAAIzB,EAAW32B,KAAK22B,SACX7+B,EAAI,EAAG8B,EAAI+8B,EAAS3+B,OAAQF,EAAI8B,EAAG9B,IAC1C6+B,EAAS7+B,GAAGwgC,kBAAkBF,GAEhC,OAAOp4B,MC3HJ,MAAMu4B,WAAehC,GAC1Bl1B,cACE+zB,QAGFp1B,KAAAw4B,iBAAmB,IAAIvmB,GACvBjS,KAAAy4B,4BAA6B,EAMrBz4B,KAAA04B,mBAA+C,KALvDr3B,0BACAA,eAAes3B,IAKft3B,qBAAqB0kB,GACa,OAA5B/lB,KAAK04B,oBACP3S,EAAO6S,iBAAiBC,OAAO74B,KAAK04B,oBAEtC14B,KAAK04B,mBAAqB3S,EAAO6S,iBAAiBnoB,IAAIzQ,KAAK84B,iBCjC/D,MAAMC,GAAa,IAAI9mB,GAEhB,MAAM+mB,WAA0BT,GACrCl3B,YAAYyS,EAAeC,EACzBklB,EAAcC,EAAiBC,GAC/B/D,QA6BFp1B,KAAA6W,GAAK,IAAIpK,GAAQ,EAAG,EAAG,GA5BrBzM,KAAKo5B,UAAe39B,IAARw9B,EAAoBA,EAAM,GACtCj5B,KAAKq5B,MAAQ,EAEbr5B,KAAKs5B,WAAiB79B,IAATqY,EAAqBA,EAAO,GACzC9T,KAAKu5B,UAAe99B,IAARsY,EAAoBA,EAAM,IAEtC/T,KAAKw5B,aAAqB/9B,IAAXy9B,EAAuBA,EAAS,EAE/Cl5B,KAAKy5B,yBAIP3lB,WAAa,OAAO9T,KAAKs5B,MACzBxlB,SAASpX,GAASsD,KAAKs5B,MAAQ58B,EAAOsD,KAAKy4B,4BAA6B,EAExE1kB,UAAY,OAAO/T,KAAKu5B,KACxBxlB,QAAQrX,GAASsD,KAAKu5B,KAAO78B,EAAOsD,KAAKy4B,4BAA6B,EAGtEQ,UAAY,OAAOj5B,KAAKo5B,KACxBH,QAAQv8B,GAASsD,KAAKo5B,KAAO18B,EAAOsD,KAAKy4B,4BAA6B,EAEtES,aAAe,OAAOl5B,KAAKw5B,QAC3BN,WAAWx8B,GAASsD,KAAKw5B,QAAU98B,EAAOsD,KAAKy4B,4BAA6B,EAE5EU,WAAa,OAAOn5B,KAAKq5B,MACzBF,SAASz8B,GAASsD,KAAKq5B,MAAQ38B,EAAOsD,KAAKy4B,4BAA6B,EAIxEvd,YACE,OAAOlb,KAAKw5B,QAAUx5B,KAAKmb,OAE7BA,aACE,OAAO,EAAInb,KAAKs5B,MAAQ/sB,KAAKmtB,IAAuB,GAAnBniB,GAASC,QAAgBxX,KAAKo5B,MAAQp5B,KAAKq5B,MAG9Eh4B,yBACE,MAAMuS,EAAM5T,KAAKs5B,MAAQ/sB,KAAKmtB,IAAuB,GAAnBniB,GAASC,QAAgBxX,KAAKo5B,MAAQp5B,KAAKq5B,MACvEle,EAAS,EAAIvH,EACbsH,EAAQlb,KAAKw5B,QAAUre,EACvBzH,GAAS,GAAMwH,EACrBlb,KAAKw4B,iBAAiBmB,gBAAgBjmB,EAAMA,EAAOwH,EAAOtH,EAAKA,EAAMuH,EAAQnb,KAAKs5B,MAAOt5B,KAAKu5B,MAC9Fv5B,KAAKy4B,4BAA6B,EAGpCp3B,OAAOu4B,GACLb,GAAWc,OAAO75B,KAAK42B,UAAUvjB,SAAUumB,EAAgB55B,KAAK6W,IAChE7W,KAAK42B,UAAUtjB,WAAWgH,sBAAsBye,KClD7C,MAAMe,GACXz4B,YAAY3E,GAKZsD,KAAA+5B,aAAuB,EAJrB/5B,KAAKsF,OAAS5I,EAMhB2E,SAASg0B,GACPr1B,KAAKsF,OAAS+vB,EACdr1B,KAAK+5B,aAAc,EAGrB14B,qBACErB,KAAK+5B,aAAc,EAGrBr9B,YACE,OAAOsD,KAAKsF,OAGdjE,cACErB,KAAK+5B,aAAc,GCrBhB,MAAMC,GAYX34B,YAIS6C,GAAAlE,KAAAkE,WAdFlE,KAAAi6B,qBAAsB,EAItBj6B,KAAAk6B,sBAAuB,GAiBzB,MAAMC,GASX94B,YAAY+4B,GARJp6B,KAAAq6B,WAAa,IAAIt2B,MASnBq2B,IACFp6B,KAAKs6B,iBAAmBF,GAUrB/4B,IAAI6C,EAAmCq2B,GAAwB,GACpE,IAAKr2B,EACH,OAAO,KAGT,IAAIs2B,EAAW,IAAIR,GAAS91B,GAS5B,OARAs2B,EAASN,qBAAuBK,EAEhCv6B,KAAKq6B,WAAWniC,KAAKsiC,GAEjBx6B,KAAKs6B,kBACPt6B,KAAKs6B,iBAAiBE,GAGjBA,EAQFn5B,QAAQ6C,GACb,OAAOlE,KAAKyQ,IAAIvM,GAAU,GAQrB7C,OAAOm5B,GACZ,IAAKA,EACH,OAAO,EAGT,IAAIx1B,EAAQhF,KAAKq6B,WAAW3C,QAAQ8C,GAEpC,OAAe,IAAXx1B,IACFhF,KAAKy6B,iBAAiBD,IACf,GAMHn5B,iBAAiBm5B,GACvBA,EAASN,sBAAuB,EAChCM,EAASP,qBAAsB,EAC/Bv+B,WAAW,KACTsE,KAAK06B,QAAQF,IACZ,GAKGn5B,QAAQm5B,GACd,IAAKA,EACH,OAAO,EAGT,IAAIx1B,EAAQhF,KAAKq6B,WAAW3C,QAAQ8C,GAEpC,OAAe,IAAXx1B,IACFhF,KAAKq6B,WAAWnhC,OAAO8L,EAAO,IACvB,GAMJ3D,gBAAgBs5B,GACrB,GAA+B,IAA3B36B,KAAKq6B,WAAWriC,OAClB,OAAO,EAET,IAAK,IAAI4iC,KAAO56B,KAAKq6B,WACfO,EAAIX,sBAIRW,EAAI12B,SAASy2B,GAETC,EAAIV,sBACNl6B,KAAKy6B,iBAAiBG,IAG1B,OAAO,EAGFv5B,eAAem5B,EAAuBG,GAC3CH,EAASt2B,SAASy2B,GAGbt5B,eACL,OAAOrB,KAAKq6B,WAAWriC,OAAS,EAG3BqJ,QACLrB,KAAKq6B,WAAa,IAAIt2B,MACtB/D,KAAKs6B,iBAAmB,KAGnBj5B,QACL,IAAIxI,EAAS,IAAIshC,GAIjB,OAFAthC,EAAOwhC,WAAar6B,KAAKq6B,WAAW18B,MAAM,GAEnC9E,GCxJJ,MAAMgiC,GAAbx5B,cACErB,KAAA86B,SAAW7Y,GAAS8K,aAEpB/sB,KAAA+6B,SAAW5Y,GAAa6Y,eACxBh7B,KAAAi7B,SAAWxT,GACXznB,KAAAk7B,SAAWxT,GACX1nB,KAAAm7B,cAAgB9T,GAAc+T,SAC9Bp7B,KAAAq7B,cAAgB,KAChBr7B,KAAAs7B,cAAgB,KAChBt7B,KAAAu7B,mBAAqB,KAErBv7B,KAAA2pB,UAAYzH,GAAcgI,eAC1BlqB,KAAAw7B,WAAY,EACZx7B,KAAAy7B,YAAa,EAEbz7B,KAAA07B,aAAc,EACd17B,KAAA27B,aAAc,EACd37B,KAAA47B,aAAc,EACd57B,KAAA67B,aAAc,EAEd77B,KAAAwtB,eAAgB,EAChBxtB,KAAA87B,oBAAsB,EACtB97B,KAAA+7B,mBAAqB,EAErB/7B,KAAAg8B,UAAY,EACZh8B,KAAAwoB,oBAAqB,EAErBnnB,OAAOyJ,GACLA,EAAS/H,MAAMk5B,YAAYj8B,KAAK86B,UAEhC,MAAMvJ,EAAczmB,EAAS/H,MAAM2pB,YACnC6E,EAAYlI,WAAarpB,KAAKw7B,UAC9BjK,EAAY2K,QAAQl8B,KAAK2pB,WACzB4H,EAAY4K,QAAQn8B,KAAKy7B,YAEzB,MAAMW,EAActxB,EAAS/H,MAAM0pB,YACnC2P,EAAYC,aACVr8B,KAAK07B,YAAa17B,KAAK27B,YACvB37B,KAAK47B,YAAa57B,KAAK67B,aAGzB/wB,EAAS/H,MAAMu5B,iBACbt8B,KAAKwtB,cACLxtB,KAAK87B,oBACL97B,KAAK+7B,qBCfX,IAAkBQ,IAAlB,SAAkBA,GAChBA,IAAA,0BACAA,IAAA,oBACAA,IAAA,iCAHF,CAAkBA,QAAa,KAoBxB,MAAMC,WAAqBjG,GAAlCl1B,kCAMErB,KAAA+C,MAAoB,IAAI83B,GAIxB76B,KAAAy8B,SAAqBza,GAAS0a,UAC9B18B,KAAA28B,cAA+BJ,GAAcK,SAE7Cv7B,iBAAiBw7B,GAA8B,KAAM,gBAErDx7B,EAAEyxB,GAEA,OADA9yB,KAAK8yB,SAAWA,EACT9yB,KAGTqB,EAAEy7B,GAEA,OADA98B,KAAK88B,SAAWA,EACT98B,KAGTqB,EAAE07B,GAEA,OADA/8B,KAAK+8B,QAAUA,EACR/8B,MChFJ,MAAMg9B,WAAaR,GAIxBn7B,cACE+zB,QAsBFp1B,KAAAi9B,eAAsB,EApBpBj9B,KAAKy8B,SAAWza,GAAS0a,UACzB18B,KAAK28B,cAAgBJ,GAAcK,SAGrCv7B,iBAAiB67B,QACOzhC,IAAlBuE,KAAK8yB,UACP9yB,KAAK8yB,SAASqK,YAAYD,EAASl9B,KAAKwY,OAK5CnX,QAAQ+7B,EAAsBC,GAC5B,MAAM,IAAI9hC,MAAM,2BAElB8F,aAAa+7B,GACX,MAAM,IAAI7hC,MAAM,2BAElB8F,aAAa+7B,GACX,MAAM,IAAI7hC,MAAM,4BC1Bb,MAAM+hC,GACXj8B,YAAYuE,EAAeD,GAO3B3F,KAAA4F,IAAe,IAAI6G,GACnBzM,KAAA2F,IAAe,IAAI8G,QAPLhR,IAARmK,IACF5F,KAAK4F,IAAIkR,KAAKlR,GACd5F,KAAK2F,IAAImR,KAAKnR,IAOlBtE,QACE,MAAMkM,EAAI,IAAI+vB,GACd,OAAO/vB,EAAEuJ,KAAK9W,MAGhBqB,KAAKk8B,GAGH,OAFAv9B,KAAK4F,IAAIkR,KAAKymB,EAAI33B,KAClB5F,KAAK2F,IAAImR,KAAKymB,EAAI53B,KACX3F,KAGTqB,YAGE,OAFArB,KAAK4F,IAAI8G,EAAI1M,KAAK4F,IAAI+G,EAAI3M,KAAK4F,IAAIgH,EAAM4wB,IACzCx9B,KAAK2F,IAAI+G,EAAI1M,KAAK2F,IAAIgH,EAAI3M,KAAK2F,IAAIiH,GAAM4wB,IAClCx9B,KAGTqB,UAEE,OAAQrB,KAAK2F,IAAI+G,EAAI1M,KAAK4F,IAAI8G,GAAO1M,KAAK2F,IAAIgH,EAAI3M,KAAK4F,IAAI+G,GAAO3M,KAAK2F,IAAIiH,EAAI5M,KAAK4F,IAAIgH,EAG1FvL,UAAUhG,GACR,OAAO2E,KAAKy9B,UAAYpiC,EAAOwU,IAAI,EAAG,EAAG,GAAKxU,EAAOqiC,WAAW19B,KAAK4F,IAAK5F,KAAK2F,KAAKyH,eAAe,IAGrG/L,cAAcs8B,GAGZ,OAFA39B,KAAK4F,IAAIA,IAAI+3B,GACb39B,KAAK2F,IAAIA,IAAIg4B,GACN39B,MCxCJ,MAAM49B,GACXv8B,eAOAA,QACE,OAAO,IAAIu8B,IAAS9mB,KAAK9W,MAG3BqB,KAAKw8B,GAGH,OAFA79B,KAAKub,OAAOzE,KAAK+mB,EAAOtiB,QACxBvb,KAAK4O,OAASivB,EAAOjvB,OACd5O,KAGTqB,OAAOw8B,GACL,OAAOA,EAAOtiB,OAAOkN,OAAOzoB,KAAKub,SAAYsiB,EAAOjvB,SAAW5O,KAAK4O,QCLjE,MAAekvB,GACpBz8B,cAGArB,KAAAoM,KAAOE,KACEtM,KAAA+9B,YAA+C,GAWxD/9B,KAAAg+B,SAAiB,IAAIV,GASrBt9B,KAAAi+B,gBAA0B,IAAIL,GAlB9BnO,iBACE,IAAK,MAAMzyB,KAAOgD,KAAK+9B,YACrB,GAAI/9B,KAAK+9B,YAAY/gC,GAAKkhC,aACxB,OAAO,EAGX,OAAO,EAKTC,cAIE,OAHIn+B,KAAKyvB,YACPzvB,KAAKo+B,gBAEAp+B,KAAKg+B,SAKdK,qBAIE,OAHIr+B,KAAKyvB,YACPzvB,KAAKs+B,uBAEAt+B,KAAKi+B,gBAYd58B,YCzDK,MAAMk9B,ICCN,MAAMC,GAIXn9B,YAAYo9B,EAAcC,GAGxB,OAFA1+B,KAAKy+B,QAAchjC,IAAPgjC,EAAqBA,EAAK,IAAIhyB,GAC3CzM,KAAK0+B,QAAcjjC,IAAPijC,EAAqBA,EAAK,IAAIjyB,GAClCzM,KAGTqB,WACE,OAAOrB,KAAKy+B,GAAGzvB,kBAAkBhP,KAAK0+B,IAGxCr9B,SACE,OAAOrB,KAAKy+B,GAAGE,WAAW3+B,KAAK0+B,IAGjCr9B,aAAe+Q,GAGf,OAFApS,KAAKy+B,GAAGG,aAAcxsB,GACtBpS,KAAK0+B,GAAGE,aAAcxsB,GACfpS,KAGPqB,QACE,MAAMzH,EAAI,IAAI4kC,GAChB,OAAO5kC,EAAEkd,KAAM9W,MAGhBqB,KAAMw9B,GAGL,OAFA7+B,KAAKy+B,GAAG3nB,KAAM+nB,EAAKJ,IACnBz+B,KAAK0+B,GAAG5nB,KAAM+nB,EAAKH,IACZ1+B,MC5BF,MAAM8+B,GAWXz9B,YAAY7J,EAAsBklB,GAMlC1c,KAAAwiB,MAAgB,EAChBxiB,KAAA0c,OAAiB,EACjB1c,KAAAk+B,cAAe,EAPbl+B,KAAKxI,KAAOA,EACZwI,KAAKwiB,MAAQxiB,KAAKxI,KAAKQ,OAASgI,KAAK0c,OACrC1c,KAAK0c,OAASA,EAbhBrb,UAAU7J,GACR,OAAO,IAAIsnC,GAAW,IAAIhyB,aAAatV,GAAO,GAEhD6J,UAAU7J,GACR,OAAO,IAAIsnC,GAAW,IAAIhyB,aAAatV,GAAO,GAEhD6J,gBAAgB7J,GACd,OAAO,IAAIsnC,GAAW,IAAIC,YAAYvnC,GAAO,GAa/C6J,QACE67B,EACApX,EAAekZ,GAEf,MAAM5lC,EAAImT,KAAK5G,IAAI,EAAGmgB,GAChBjsB,EAAI0S,KAAK5G,IAAI3F,KAAKwiB,MAAOwc,GAC/B,IAAK,IAAIlnC,EAAIsB,EAAGtB,EAAI+B,EAAG/B,IACrBolC,EAAQl9B,KAAKxI,KAAMM,EAAIkI,KAAK0c,OAAQ1c,KAAK0c,OAAQ5kB,GAIrDuJ,SAAS2D,EAAetI,EAAe2S,GACrCrP,KAAKk+B,cAAe,EACpBl+B,KAAKxI,KAAKwN,EAAQhF,KAAK0c,OAASrN,SAAW5T,EAAY,EAAI4T,GAAU3S,EAGvE2E,SAAS2D,EAAeqK,GAEtB,OADArP,KAAKk+B,cAAe,EACbl+B,KAAKxI,KAAKwN,EAAQhF,KAAK0c,OAASrN,SAAW5T,EAAY,EAAI4T,GAGpEhO,QAAQ7J,GACNwI,KAAKk+B,cAAe,EACpBl+B,KAAKxI,KAAOA,EACZwI,KAAKwiB,MAAQxiB,KAAKxI,KAAKQ,OAASgI,KAAK0c,OAGvCrb,eAAe0kB,GACb,OAAOA,EAAOkZ,qBAAqBj/B,MAGrCqB,kBACE,OAAOrB,KAAKxI,KAAK0nC,YCrDrB,MAAMC,GAAY,IAAIZ,GAChBa,GAAY,IAAIZ,GAChBa,GAAc,IAAI5yB,GAKjB,MAAM6yB,WAAyBxB,GACpCz8B,cACE+zB,QAGF/zB,OAAOk+B,EAAmBC,EAAoBC,EAAmBC,GAC/D,MAAMC,EAAiBb,GAAWc,GAAGJ,GACrCx/B,KAAK+9B,YAAY1qB,SAAWssB,EAE5B,MAAME,EAAef,GAAWc,GAAGH,GACnCz/B,KAAK+9B,YAAY+B,OAASD,EAE1B,MAAME,EAAWjB,GAAWkB,GAAGN,GAC/B1/B,KAAK+9B,YAAYkC,GAAKF,EAEtB,MAAMG,EAAcpB,GAAWqB,SAASZ,GACxCv/B,KAAKkgC,YAAcA,EAGrB7+B,uBACE,MAAMw8B,EAAS79B,KAAKi+B,gBACdV,EAAMv9B,KAAKm+B,QACX5iB,EAASgiB,EAAI6C,UAAUvC,EAAOtiB,QACpC,IAAI8kB,EAAc,EAClBrgC,KAAKsgC,cAAe3C,IAClB0C,EAAc9zB,KAAK5G,IAAI06B,EAAa9kB,EAAOvM,kBAAkB2uB,MAE/DE,EAAOjvB,OAASyxB,EAGlBh/B,gBACE,MAAMk8B,EAAMv9B,KAAKg+B,SACjBT,EAAIgD,YACJvgC,KAAKsgC,cAAe3C,IAClBJ,EAAIiD,cAAc7C,KAItBt8B,YAAY67B,EAA+B1kB,GACzC,MAAMnF,EAAWrT,KAAK+9B,YAAY1qB,SAC5ByS,QAAmBrqB,IAAV+c,EAAsB,EAAIA,EAAMsN,OAAS,EAClDkZ,QAAiBvjC,IAAV+c,EAAsBnF,EAASmP,MAAShK,EAAMsN,MAAQtN,EAAMgK,OAAU,EACnF,IAAK,IAAI1qB,EAAIguB,EAAOhuB,EAAIknC,EAAKlnC,IAAK,CAChC,MAAM2oC,EAAc,EAAJ3oC,EACV4oC,EAAc,EAAJ5oC,EAAQ,EAClB6oC,EAAc,EAAJ7oC,EAAQ,EACxBqnC,GAAUV,GAAG5uB,IAAIwD,EAASutB,SAASH,GAAUptB,EAASutB,SAASH,EAAU,GAAIptB,EAASutB,SAASH,EAAU,IACzGtB,GAAUT,GAAG7uB,IAAIwD,EAASutB,SAASF,GAAUrtB,EAASutB,SAASF,EAAU,GAAIrtB,EAASutB,SAASF,EAAU,IACzGvB,GAAU0B,GAAGhxB,IAAIwD,EAASutB,SAASD,GAAUttB,EAASutB,SAASD,EAAU,GAAIttB,EAASutB,SAASD,EAAU,IACzGzD,EAAQiC,KAOZ99B,mBAAmB67B,EAA+B1kB,GAChD,MAAMnF,EAAWrT,KAAK+9B,YAAY1qB,SAC5ByS,QAAmBrqB,IAAV+c,EAAsB,EAAIA,EAAMsN,OAAS,EAClDkZ,QAAiBvjC,IAAV+c,EAAsBnF,EAASmP,MAAShK,EAAMsN,MAAQtN,EAAMgK,OAAU,EACnF,IAAK,IAAI1qB,EAAIguB,EAAOhuB,EAAIknC,EAAKlnC,IAAK,CAChC,MAAM2oC,EAAc,EAAJ3oC,EACV4oC,EAAc,EAAJ5oC,EAAQ,EAClB6oC,EAAc,EAAJ7oC,EAAQ,EACxBqnC,GAAUV,GAAG5uB,IAAIwD,EAASutB,SAASH,GAAUptB,EAASutB,SAASH,EAAU,GAAIptB,EAASutB,SAASH,EAAU,IACzGtB,GAAUT,GAAG7uB,IAAIwD,EAASutB,SAASF,GAAUrtB,EAASutB,SAASF,EAAU,GAAIrtB,EAASutB,SAASF,EAAU,IACzGvB,GAAU0B,GAAGhxB,IAAIwD,EAASutB,SAASD,GAAUttB,EAASutB,SAASD,EAAU,GAAIttB,EAASutB,SAASD,EAAU,IAEzGvB,GAAUX,GAAG3nB,KAAKqoB,GAAUV,IAC5BW,GAAUV,GAAG5nB,KAAKqoB,GAAUT,IAC5BxB,EAAQkC,IACRA,GAAUV,GAAG5nB,KAAKqoB,GAAU0B,IAC5B3D,EAAQkC,IACRA,GAAUX,GAAG3nB,KAAKqoB,GAAUT,IAC5BxB,EAAQkC,KAIZ/9B,cAAc67B,EAAkC1kB,GAC9C,MAAMnF,EAAWrT,KAAK+9B,YAAY1qB,SAC5ByS,OAAkBrqB,IAAV+c,EAAsB,EAAIA,EAAMsN,MACxCkZ,OAAgBvjC,IAAV+c,EAAsBnF,EAASmP,MAAShK,EAAMsN,MAAQtN,EAAMgK,MACxE,IAAK,IAAI1qB,EAAIguB,EAAOhuB,EAAIknC,EAAKlnC,IAC3BunC,GAAYxvB,IAAIwD,EAASutB,SAAS9oC,GAAIub,EAASutB,SAAS9oC,EAAI,GAAIub,EAASutB,SAAS9oC,EAAI,IACtFolC,EAAQmC,IAIZh+B,WACE,KAAM,6BCrGH,MAAMy/B,WAAsBxB,GACjCj+B,YAAY6Z,EAAgBC,EAC1B4lB,EAAwBC,GACxB5L,QASFp1B,KAAA/D,KAAO,gBAPL+D,KAAKkb,WAAkBzf,IAAVyf,EAAsBA,EAAQ,EAC3Clb,KAAKmb,YAAoB1f,IAAX0f,EAAuBA,EAAS,EAC9Cnb,KAAK+gC,mBAAkCtlC,IAAlBslC,EAA8BA,EAAgB,EACnE/gC,KAAKghC,oBAAoCvlC,IAAnBulC,EAA+BA,EAAiB,EAEtEhhC,KAAKihC,WAQP5/B,WAEE,IAYIgN,EAAIC,EAZJ4yB,EAAalhC,KAAKkb,MAAQ,EAC1BimB,EAAcnhC,KAAKmb,OAAS,EAE5BimB,EAAQ70B,KAAK0D,MAAOjQ,KAAK+gC,gBAAmB,EAC5CM,EAAQ90B,KAAK0D,MAAOjQ,KAAKghC,iBAAoB,EAE7CM,EAASF,EAAQ,EACjBG,EAASF,EAAQ,EAEjBG,EAAgBxhC,KAAKkb,MAAQkmB,EAC7BK,EAAiBzhC,KAAKmb,OAASkmB,EAK/B9B,EAAoB,GACpBC,EAAqB,GACrBC,EAAoB,GACpBC,EAAgB,GAGpB,IAAMpxB,EAAK,EAAGA,EAAKizB,EAAQjzB,IAAQ,CACjC,IAAI3B,EAAI2B,EAAKmzB,EAAiBN,EAC9B,IAAM9yB,EAAK,EAAGA,EAAKizB,EAAQjzB,IAAQ,CACjC,IAAI3B,EAAI2B,EAAKmzB,EAAgBN,EAC7B1B,EAAStnC,KAAMwU,GAAKC,EAAG,GACvB8yB,EAAQvnC,KAAM,EAAG,EAAG,GACpBwnC,EAAIxnC,KAAMmW,EAAK+yB,GACf1B,EAAIxnC,KAAM,EAAMoW,EAAK+yB,IAKzB,IAAM/yB,EAAK,EAAGA,EAAK+yB,EAAO/yB,IACxB,IAAMD,EAAK,EAAGA,EAAK+yB,EAAO/yB,IAAQ,CAChC,MAAMf,EAAIe,EAAKizB,EAAShzB,EAClBf,EAAIc,EAAKizB,GAAWhzB,EAAK,GACzBvS,EAAMsS,EAAK,EAAMizB,GAAWhzB,EAAK,GACjCtS,EAAMqS,EAAK,EAAMizB,EAAShzB,EAEhCixB,EAAQrnC,KAAMoV,EAAGC,EAAGvR,GACpBujC,EAAQrnC,KAAMqV,EAAGxR,EAAGC,GAIxBgE,KAAKjD,OAAOwiC,EAASC,EAAUC,EAASC,IC/D5C,MAAMgC,GAAW,IAAI1E,GACf2E,GAAW,IAAIb,GAAc,EAAG,EAAG,EAAG,GAC5CY,GAAS5O,SAAW6O,GACb,MAAMC,GAAbvgC,cACErB,KAAA6hC,aAAuB,EAEvBxgC,cACErB,KAAK6hC,aAAc,EAGrBxgC,iBACE,OAAIrB,KAAK6hC,YACA,MAET7hC,KAAK6hC,aAAc,EACZH,IAGTrgC,kCCnBK,SAASygC,GAAuBC,EAA2B9lC,GAChE,MAAM+lC,EAAO1nC,SAASC,cAAc,KACpCynC,EAAKrnC,aAAa,WAAYsB,EAAO,QACrC+lC,EAAKrnC,aAAa,OAAQonC,EAAOE,UAAU,aACvCC,QAAQ,YAAa,uBACzBF,EAAKnhC,QAGP,SAAeshC,GAAyBC,iDACtC,MAAMC,EAAS,IAAIC,WACnB,OAAO,IAAIroC,QAAgB,SAAUC,EAASqoC,GAC5CF,EAAOtnC,OAAS,SAAUlB,GACxB,MAAMkS,EAAMs2B,EAAOxpC,OACnBqB,EAAQ6R,IAEVs2B,EAAOG,WAAWJ,OAIf,SAASK,KACd,OAAO,IAAIxoC,QAASC,IAClB,MAAM4M,EAAQxM,SAASC,cAAc,SACrCuM,EAAMnM,aAAa,OAAQ,QAC3B,MAAM+nC,EAAQ7oC,IACZK,EAAQL,EAAEwB,OAAOsnC,MAAM,KAEzB77B,EAAM87B,iBAAiB,SAAUF,GACjC57B,EAAMjG,UAIH,SAAegiC,mDACpB,MAAMT,QAAaK,KACb12B,QAAYo2B,GAAyBC,GAC3C,OAAOr2B,ICrCF,SAAS+2B,GAAa1zB,EAAiB8tB,GAC5C,IAAK,IAAIplC,EAAI,EAAGA,EAAIsX,EAAMpX,OAAQF,IAChC,GAAIolC,EAAQ9tB,EAAMtX,IAChB,OAAOsX,EAAMtX,GCHnB,MAAMirC,GAAkB,EACxB,IAAIC,GAAa,GACjB,IAAK,IAAIlrC,GAAI,EAAGA,GAAIirC,GAAiBjrC,KACnCkrC,IAAc,IAGhB,MAAMC,GAA8B,GAC7B,SAASC,GAAUC,GACxB,QAAuC1nC,IAAnCwnC,GAAkBE,GACpB,OAAOF,GAAkBE,GAE3B,IAAIp3B,EAAM,GACV,IAAK,IAAIjU,EAAI,EAAGA,EAAIqrC,EAAarrC,IAC/BiU,GAAOi3B,GAGT,OADAC,GAAkBE,GAAep3B,EAC1BA,ECdF,MAAMq3B,GAAb/hC,cAEErB,KAAAqjC,cAAwB,EACxBrjC,KAAAnH,OAAiB,GAEjBwI,YACErB,KAAKqjC,gBAEPhiC,eACErB,KAAKqjC,gBAGPhiC,YACErB,KAAKsjC,UAAU,IAGjBjiC,UAAU3E,GACRsD,KAAKnH,QAAUqqC,GAAUljC,KAAKqjC,eAAiB3mC,EAAQ,KAGzD2E,WAAW3E,GACT,MAAMsP,EAAQtP,EAAMuP,MAAM,MAC1BD,EAAMwQ,QAAQqiB,IACZ,MAAM0E,EAAU1E,EAAK2E,OACjBD,EAAQvrC,OAAS,GACnBgI,KAAKsjC,UAAUC,KAKrBliC,cAAc3E,GACZsD,KAAKnH,QAAU6D,EAGjB2E,kBAAkB3E,GAChBsD,KAAKsjC,UAAU,MACf5mC,EAAMuP,MAAM,MAAMuQ,QAAQqiB,IACxB7+B,KAAKsjC,UAAU,MAAQzE,KAEzB7+B,KAAKsjC,UAAU,OAGjBjiC,QACErB,KAAKqjC,cAAgB,EACrBrjC,KAAKnH,OAAS,GAEhBwI,SACE,MAAMxI,EAASmH,KAAKnH,OAEpB,OADAmH,KAAKyjC,QACE5qC,GCjDJ,MAAM6qC,GAAbriC,cACErB,KAAAoM,KAAeE,KACftM,KAAA2jC,QAAwB,IAAIC,IAC5B5jC,KAAA6jC,UAA0B,IAAID,IACpB5jC,KAAA8jC,YAAoC,IAAI7jB,IAElD5e,UAAUg2B,GACRr3B,KAAK2jC,QAAQlzB,IAAI4mB,GACjBA,EAAK0M,YAAY/jC,MAGnBqB,aAAag2B,GACXr3B,KAAK2jC,QAAQxc,OAAOkQ,GACpBA,EAAK2M,eAAehkC,MAGtBqB,aACErB,KAAK2jC,QAAQnnB,QAAS6a,IACpBA,EAAK2M,eAAehkC,QAEtBA,KAAK2jC,QAAQ9a,QAGfxnB,eACErB,KAAK6jC,UAAUrnB,QAAS6a,IACtBA,EAAK4M,aAAajkC,QAEpBA,KAAK6jC,UAAUhb,QAGjBxnB,YAAYg2B,GACVr3B,KAAK6jC,UAAUpzB,IAAI4mB,GAGrBh2B,eAAeg2B,GACbr3B,KAAK6jC,UAAU1c,OAAOkQ,GAGxBh2B,UAAUg2B,GACRr3B,KAAK2jC,QAAQlzB,IAAI4mB,GAGnBh2B,aAAag2B,GACXr3B,KAAK2jC,QAAQxc,OAAOkQ,GAItBh2B,8BAEE,IAAI6iC,EAAclkC,KAAKmkC,4BACvBD,EAAY1nB,QAAQ6a,IAClBA,EAAKyM,YAAYjb,QACjBwO,EAAKwM,UAAUrnB,QAAStf,IACtBm6B,EAAKyM,YAAYj0B,IAAI3S,EAAEkP,MAAM,OAIjC,IAAIg4B,EAAwB,EAC5B,MAAMvrC,EAAoB,GAE1B,SAASwrC,EAAYhN,GACnBx+B,EAAOX,KAAKm/B,GACZA,EAAKsM,QAAQnnB,QAAStf,IACpBA,EAAE4mC,YAAY3c,OAAOkQ,EAAKjrB,QAI9B,MAAO83B,EAAYlsC,OAAS,EAU1B,GATAksC,EAAcA,EAAYI,OAAOjN,IAC/B,OAA8B,IAA1BA,EAAKyM,YAAYtd,OACnB6d,EAAYhN,IACL,KAKX+M,IACIA,EAAwB,IAC1B,KAAM,+DAIV,OAAOvrC,EAGTwI,YAAY67B,GACV,MAAMqH,EAAwB,IAAIX,IAClC,SAAShM,EAAMP,GACRkN,EAAQtd,IAAIoQ,KACfkN,EAAQ9zB,IAAI4mB,GACZ6F,EAAQ7F,GACRA,EAAKwM,UAAUrnB,QAAQtf,IACrB06B,EAAM16B,MAIZ06B,EAAM53B,MAGRqB,4BACE,MAAMxI,EAAoB,GAI1B,OAHAmH,KAAKwkC,YAAatnC,IAChBrE,EAAOX,KAAKgF,KAEPrE,GC7FJ,MAAM4rC,WAAmBf,GAC9BriC,YACSlG,GAEPi6B,QAFOp1B,KAAA7E,OAKTkG,UAAUqjC,GACR,OAAO,IAAIC,GAAkB3kC,KAAM0kC,IAahC,MAAME,WAA2BH,GACtCpjC,YAAYwjC,GACVzP,MAAMyP,EAAQC,OAAOC,YAMvB/kC,KAAAglC,SAAoC,IAAI/kB,IALtCjgB,KAAK6kC,QAAUA,EAUjBxjC,KAAKpF,GAEH,OADA+D,KAAKilC,eAAiBhpC,EACf+D,KAMTqB,MAAMrE,EAAaq6B,GACjB,MAAM1H,EAAW3vB,KAAK6kC,QAAQC,OAAOI,OAAOloC,GAC5C,QAAiBvB,IAAbk0B,EACF,+DAAgE3yB,IAElE,GAAI2yB,IAAa0H,EAAKl8B,KAGpB,MAFAoC,QAAQsO,KAAK,QAAS7L,MACtBzC,QAAQsO,KAAK,aAAcwrB,GACrB,+CAIR,OAFAA,EAAK8N,UAAUnlC,MACfA,KAAKglC,SAASn1B,IAAI7S,EAAKq6B,GAChBr3B,MAMJ,MAAMolC,WAAwBX,GACnCpjC,YAAYpF,EAAcd,GACxBi6B,MAAMj6B,GACN6E,KAAK/D,KAAOA,EACZ+D,KAAK7E,KAAOA,GAKT,MAAMkqC,WAAqCD,GAChD/jC,YAAY8e,GACViV,MAAMjV,EAAIlkB,KAAMkkB,EAAIhlB,MAKtBkG,QAAQ3E,GAEN,OADAsD,KAAKslC,aAAe5oC,EACbsD,MAIJ,MAAMulC,WAA4BH,GACvC/jC,YAAYpF,EAAcd,GACxBi6B,MAAMn5B,EAAMd,IAIT,MAAMqqC,WAAoCJ,GAC/C/jC,YAAYyc,GACVsX,MAAMtX,EAAI7hB,KAAM+jB,GAAgB1jB,IAAIwhB,EAAIuC,UAAUllB,MAClD6E,KAAKqgB,SAAWvC,EAAIuC,UAKjB,MAAMolB,WAAiCL,GAC5C/jC,YAAY8e,GACViV,MAAMjV,EAAIlkB,KAAMkkB,EAAIhlB,MACpB6E,KAAK0lC,eAAiBvlB,EAAIyE,OAM9B,SAAS+gB,GAAIjpC,GACX,IAAIqP,EAAMrP,EAAQ,GAIlB,OAH0B,IAAtBqP,EAAI2rB,QAAQ,OACd3rB,GAAY,MAEPA,EAKF,MAAM65B,WAAwBnB,GACnCpjC,YAAY3E,GACV,GAAqB,kBAAVA,EACT04B,MAAM5Z,GAAWE,OACjB1b,KAAK6lC,aAAeF,GAAIjpC,QACnB,GAAIA,aAAiBue,GAC1Bma,MAAM5Z,GAAWI,WACjB5b,KAAK6lC,qBAAuBF,GAAIjpC,EAAMgQ,OAAOi5B,GAAIjpC,EAAMiQ,WAClD,GAAIjQ,aAAiB+P,GAC1B2oB,MAAM5Z,GAAWM,WACjB9b,KAAK6lC,qBAAuBF,GAAIjpC,EAAMgQ,OAAOi5B,GAAIjpC,EAAMiQ,OAAOg5B,GAAIjpC,EAAMkQ,UACnE,MAAIlQ,aAAiB6S,IAI1B,KAAM,qCAHN6lB,MAAM5Z,GAAWQ,WACjBhc,KAAK6lC,qBAAuBF,GAAIjpC,EAAMgQ,OAAOi5B,GAAIjpC,EAAMiQ,OAAOg5B,GAAIjpC,EAAMkQ,OAAO+4B,GAAIjpC,EAAM0R,MAI3FpO,KAAKtD,MAAQA,GAMV,MAAMopC,GACXzkC,YACSpF,EACAd,GADA6E,KAAA/D,OACA+D,KAAA7E,OAITkG,MAAMg2B,GACJ,OAAO,IAAI0O,GAAuB/lC,KAAMq3B,IAI5C,SAAS2O,GAA6B7qC,GACpC,OAAQA,GACN,KAAK4mB,GAAc+J,UACjB,OAAOtQ,GAAWQ,UAEpB,QACE,KAAM,eAIL,MAAM+pB,WAA+BtB,GAC1CpjC,YACS+J,EACA66B,GAEP7Q,MAAM6Q,EAAY9qC,MAHX6E,KAAAoL,SACApL,KAAAimC,cAGPA,EAAYd,UAAUnlC,MACtBA,KAAK7E,KAAO6qC,GAA6B56B,EAAOjQ,OAIpD,SAAS+qC,GAAc/qC,GACrB,OAAQA,GACN,KAAKqgB,GAAWE,MACd,OAAO,EACT,KAAKF,GAAWI,UACd,OAAO,EACT,KAAKJ,GAAWM,UACd,OAAO,EACT,KAAKN,GAAWQ,UACd,OAAO,EACT,QACE,KAAM,4BAIL,MAAMmqB,WAA0B1B,GACrCpjC,YAAY+kC,EAAwBjrC,GAClCi6B,MAAMj6B,GACN,IAAIqnB,EAAQ,EAIZ,GAHA4jB,EAAS5pB,QAAQ6a,IACf7U,GAAS0jB,GAAc7O,EAAKl8B,QAE1BqnB,IAAU0jB,GAAc/qC,GAC1B,KAAM,mCAER6E,KAAKqmC,aAAe7jB,EACpBxiB,KAAKomC,SAAWA,EAChBpmC,KAAKomC,SAAS5pB,QAAQ6a,IACpBA,EAAK8N,UAAUnlC,SAUrB,SAASsmC,GAAY5pC,GACnB,OAAQA,EAAM1E,QACZ,KAAK,EAAG,OAAOwjB,GAAWE,MAC1B,KAAK,EAAG,OAAOF,GAAWI,UAC1B,KAAK,EAAG,OAAOJ,GAAWM,UAC1B,KAAK,EAAG,OAAON,GAAWQ,UAC1B,QAAS,KAAM,SAIZ,MAAM2oB,WAA0BF,GACrCpjC,YAAYg2B,EAAkBqN,GAC5BtP,MAAMiC,EAAKl8B,MAmBb6E,KAAA0kC,YAAsB,GAjBpB,MAAM6B,EAAsBL,GAAc7O,EAAKl8B,MAEzCqrC,EAAQ9B,EAAYlB,OAAOv3B,MAAM,IACvC,GAAIu6B,EAAMxuC,OAAS,EAEjB,KAAM,oBAGR,GAAIwuC,EAAMxuC,OAASuuC,EACjB,KAAM,wDAGRvmC,KAAKymC,KAAOpP,EACZA,EAAK8N,UAAUnlC,MACfA,KAAK0kC,YAAcA,EACnB1kC,KAAK7E,KAAOmrC,GAAY5B,IChPrB,SAASgC,GAAcC,GAC5B,MAAMC,EAAU,IAAIxD,GACpBwD,EAAQnD,QAERmD,EAAQtD,UAAU,gBAClBsD,EAAQC,YAER,MAAMC,EAAgB,IAAI7mB,IACpB8mB,EAAiBJ,EAAMK,aAAaC,8BACpCC,EAAaC,GAAaJ,EAAgB,eAAgBD,GAChEF,EAAQQ,WAAWF,EAAWG,MAC9BC,GAAcR,EAAeI,EAAWK,SAExCX,EAAQY,eACRZ,EAAQtD,UAAU,KAClB,MAAMmE,EAAWb,EAAQc,SAEnBC,EAAeC,GAAwBd,GAE7C,OAAOa,EAAeF,EAIjB,SAASI,GAAgBlB,GAC9B,MAAMC,EAAU,IAAIxD,GACpBwD,EAAQnD,QAERmD,EAAQtD,UAAU,gBAClBsD,EAAQC,YAER,MAAMC,EAAgB,IAAI7mB,IACpB8mB,EAAiBJ,EAAMmB,WAAWb,8BAClCc,EAAeZ,GAAaJ,EAAgB,cAAeD,GACjEQ,GAAcR,EAAeiB,EAAaR,SAC1CX,EAAQQ,WAAWW,EAAaV,MAChCT,EAAQtD,UAAU,uBAClBsD,EAAQoB,YAERrB,EAAM5oB,SAASvB,QAAQ,CAACyrB,EAAUjrC,KAChC,MAAMkrC,EAAiBD,EAAShB,8BAC1BkB,EAAahB,GAAae,EAAgBlrC,EAAK8pC,GACrDQ,GAAcR,EAAeqB,EAAWZ,SACxCX,EAAQQ,WAAWe,EAAWd,MAC9BT,EAAQoB,cAGVpB,EAAQY,eACRZ,EAAQtD,UAAU,KAClB,MAAMmE,EAAWb,EAAQc,SAEnBC,EAAeC,GAAwBd,GAE7C,OAAOa,EAAeF,EAGxB,SAASH,GAAcc,EAAgCC,GACrDA,EAAK7rB,QAAQ1T,IACNs/B,EAAInhB,IAAIne,EAAKw/B,YAChBF,EAAIv4B,IAAI/G,EAAKw/B,UAAWx/B,KAM9B,SAAS8+B,GAAwB9P,GAC/B,IAAIyQ,EAAe,KACnB,MAAMC,EAAkB,IAAI5E,IAU5B,OATA9L,EAAMtb,QAAQ,CAACisB,EAASpR,KAClBA,aAAgBuN,IAClB4D,EAAgB/3B,IAAI4mB,EAAKwN,WAG7B2D,EAAgBhsB,QAAQkmB,IACtB6F,GAAgB7F,EAAKgG,+BACrBH,GAAgB,OAEXA,EAUT,SAASI,GACPtR,EACAvD,EACA8U,GAEA,SAASC,EAA4BxR,GACnC,IAAIyR,EAQJ,OANEA,EADEF,EAAiB3hB,IAAIoQ,GACduR,EAAiBtsC,IAAI+6B,GAErByL,GAAUhP,EAAKiV,IACtB,OAAOA,EAAMT,YAAcjR,IAGxByR,EAGT,SAASE,EAAaF,GACpB,IAAI9rC,EAAM,GAcV,OAVEA,EADE8rC,EAAOR,qBAAqBlD,GACxB0D,EAAOR,UAAUrsC,KAEjB6sC,EAAOG,OAQRjsC,EAGT,SAASksC,EAAuB7R,GAC9B,MAAMyR,EAASD,EAA4BxR,GAC3C,QAAe57B,IAAXqtC,EACF,KAAM,YAER,OAAOE,EAAaF,GAGtB,IAAIA,EAASD,EAA4BxR,GACzC,GAAIyR,EACF,OAAOE,EAAaF,GAGtB,GAAIzR,aAAgBuN,GAAoB,CACtC,MAAMuE,EAAiB9R,EAAKwN,QAAQC,OACpC,IAAIsE,EAAiB,GACrBjxC,OAAO4R,KAAKo/B,EAAejE,QAAQ1oB,QAAQ,CAACxf,EAAKgI,KAC/C,MAAMqkC,EAAahS,EAAK2N,SAAS1oC,IAAIU,GACrC,QAAmBvB,IAAf4tC,EACF,sDAAuDrsC,uBAEzDosC,GAAkBF,EAAuBG,GACrCrkC,IAAU7M,OAAO4R,KAAKo/B,EAAejE,QAAQltC,OAAS,IACxDoxC,GAAkB,QAGtB,MAAMvwC,KAAYswC,EAAeltC,QAAQmtC,KACzC,OAAOvwC,EAGT,GAAIw+B,aAAgB+N,GAClB,OAAQ/N,EAAyBp7B,KAGnC,GAAIo7B,aAAgB0O,GAClB,mBAAoB1O,EAAKjsB,OAAOnP,SAASitC,EAAuB7R,EAAK4O,gBAGvE,GAAI5O,aAAgB8O,GAAmB,CACrC,IAAImD,EAAgB,GACpBjS,EAAK+O,SAAS5pB,QAAQ,CAAC6sB,EAAYrkC,KACjCskC,GAAiBJ,EAAuBG,GACpCrkC,IAAUqyB,EAAK+O,SAASpuC,OAAS,IACnCsxC,GAAiB,QAGrB,MAAMzwC,QAAew+B,EAAKgP,gBAAgBiD,KAC1C,OAAOzwC,EAGT,GAAIw+B,aAAgBuO,GAClB,OAAOvO,EAAKwO,aAGd,GAAIxO,aAAgBsN,GAClB,OAAOuE,EAAuB7R,EAAKoP,MAAQ,IAAMpP,EAAKqN,YAIxD,KAAM,sBAIR,SAASyC,GACPJ,EACAwC,EACAX,GAKA,MAAMhC,EAAU,IAAIxD,GACpBwD,EAAQnD,QACR,MAAM8D,EAAuB,GAC7BR,EAAevqB,QAAQgtB,IACrB,MAAMC,EAAU,MAAQD,EAAUp9B,KAAKzO,MAAM,EAAG,GAChD4pC,EAAQrvC,KAAK,CACXowC,UAAWkB,EACXP,OAAQQ,EACRplC,WAAYskC,GAA4Ba,EAAWjC,EAASqB,OAGhErB,EAAQ/qB,QAAQusB,IACd,GAAIA,EAAMT,qBAAqBlD,GAC7B,OAEF,GAAIwD,EAAiB3hB,IAAI8hB,EAAMT,WAC7B,OAEF,MAAMoB,EAAU7sB,GAAkCksB,EAAMT,UAAUntC,MAClEyrC,EAAQtD,aAAaoG,KAAWX,EAAME,YAAYF,EAAM1kC,iBAG1D,MAAMslC,EAAapC,EAAQA,EAAQvvC,OAAS,GAM5C,OALI2xC,EAAWrB,qBAAqBlD,GAClCwB,EAAQtD,aAAaiG,OAAoBI,EAAWrB,UAAUrsC,SAE9D2qC,EAAQtD,aAAaiG,OAAoBI,EAAWV,WAE/C,CACL5B,KAAMT,EAAQc,SACdH,WCtOG,SAASqC,GAA4B9iC,GAE1C,IACE,MAAOnL,EAAMkuC,GAAQC,GAAkBhjC,EAAMsE,OAAQ,MAC9C2+B,EAAUC,GAAaF,GAAkBnuC,EAAM,MAChDM,KAAEA,EAAI8oC,WAAEA,GAAekF,GAAYF,GACnC7E,EAASgF,GAAaF,GACtB5+B,EAAS++B,GAAYN,GAC3B,MAAO,CACL5tC,OACAmuC,YAAatjC,EAAMsjC,YACnBh/B,SACA85B,SACAH,cAEF,MAAOzpC,GACP,KAAM,gCAIH,SAASwuC,GAAkB/9B,EAAas+B,GAC7C,IAAK,IAAIvyC,EAAI,EAAGA,EAAIiU,EAAI/T,OAAQF,IAAK,CACnC,MAAMiE,EAAIgQ,EAAIjU,GACd,GAAIiE,IAAMsuC,EACR,MAAO,CAACt+B,EAAIu+B,OAAO,EAAGxyC,GAAIiU,EAAIu+B,OAAOxyC,IAGzC,KAAM,cAGD,SAASyyC,GAAYzjC,GAC1B,OAAQA,EAAM08B,QACZ,IAAK,QAAS,OAAOhoB,GAAWE,MAChC,IAAK,OAAQ,OAAOF,GAAWI,UAC/B,IAAK,OAAQ,OAAOJ,GAAWM,UAC/B,IAAK,OAAQ,OAAON,GAAWQ,UAC/B,IAAK,OAAQ,OAAOR,GAAWU,KAC/B,IAAK,OAAQ,OAAOV,GAAWY,KAC/B,IAAK,OAAQ,OAAOZ,GAAWc,KAE/B,QAAS,KAAM,eAIZ,SAASkuB,GAAY1jC,GAC1B,MAAMmF,EAAQnF,EAAM08B,OAAOv3B,MAAM,KAAKq4B,OAAO+F,GAAiB,KAATA,GACrD,MAAO,CACLpuC,KAAMgQ,EAAM,GAAGu3B,OACfroC,KAAMovC,GAAYt+B,EAAM,KAIrB,SAASi+B,GAAapjC,GAC3B,MAAM2jC,EAAO3jC,EAAM08B,OACnB,GAA8B,MAA1BiH,EAAKA,EAAKzyC,OAAS,IAA0B,MAAZyyC,EAAK,GACxC,KAAM,MAGR,MAAMC,EAAUD,EAAKE,UAAU,EAAGF,EAAKzyC,OAAS,GAE1CiU,EAAQy+B,EAAQz+B,MAAM,KAAKq4B,OAAO+F,GAAwB,KAAhBA,EAAK7G,QAC/C3qC,EAAS,GAKf,OAJAoT,EAAMuQ,QAAQ1T,IACZ,MAAM7M,KAAEA,EAAId,KAAEA,GAASqvC,GAAY1hC,GACnCjQ,EAAOoD,GAAQd,IAEVtC,EAIF,SAASsxC,GAAYrjC,GAC1B,MAAM2jC,EAAO3jC,EAAM08B,OACnB,GAA8B,MAA1BiH,EAAKA,EAAKzyC,OAAS,IAA0B,MAAZyyC,EAAK,GACxC,KAAM,MAER,OAAOA,EAAKE,UAAU,EAAGF,EAAKzyC,OAAS,GAGzC,SAASiyC,GAAYnjC,GACnB,MAAMmF,EAAQnF,EAAMmF,MAAM,KAAKq4B,OAAO+F,GAAwB,KAAhBA,EAAK7G,QACnD,MAAO,CACLvnC,KAAMgQ,EAAM,GAAGu3B,OACfuB,WAAYwF,GAAYt+B,EAAM,KC5D3B,MAAM2+B,GACXvpC,YAAYyjC,GACV9kC,KAAK8kC,OAAS8E,GAA4B9E,GAK5CzjC,OACE,MAAMg2B,EAAO,IAAIuN,GAAmB5kC,MACpC,OAAOq3B,EAGTh2B,+BACE,MAAMulC,EAAU,IAAIxD,GACpBwD,EAAQnD,QACR,MAAMqB,EAAS9kC,KAAK8kC,OACd4E,EAAU7sB,GAAkCioB,EAAOC,YACzD,IAAIqE,EAAiB,GACrB,MAAMr/B,EAAO5R,OAAO4R,KAAK+6B,EAAOI,QAmBhC,OAlBAn7B,EAAKyS,QAAQ,CAACxf,EAAKgI,KACjB,MAAM6lC,EAAYhuB,GAAkCioB,EAAOI,OAAOloC,IAC5D8tC,KAAcD,KAAa7tC,IACjCosC,GAAkB0B,EACd9lC,IAAU+E,EAAK/R,OAAS,IAC1BoxC,GAAkB,aAIK3tC,IAAvBqpC,EAAOsF,aACTxD,EAAQmE,kBAAkBjG,EAAOsF,aAGnCxD,EAAQtD,aAAaoG,KAAW5E,EAAO7oC,QAAQmtC,OAC/CxC,EAAQC,YACRD,EAAQQ,WAAWtC,EAAO15B,QAC1Bw7B,EAAQY,eACRZ,EAAQtD,UAAU,KACXsD,EAAQc,UC5DZ,MAAMsD,GAAO,IAAIJ,GAAe,CACrCx/B,OAAQ,0FAOG6/B,GAAa,IAAIL,GAAe,CAC3Cx/B,OAAQ,iHAOG8/B,GAAc,IAAIN,GAAe,CAC5Cx/B,OAAQ,yGAgBG+/B,IATe,IAAIP,GAAe,CAC7CR,YAAa,6EACbh/B,OAAQ,4IAOsB,IAAIw/B,GAAe,CACjDR,YACE,iHAEFh/B,OACE,oRAYSggC,GAAY,IAAIR,GAAe,CAC1CR,YACE,0CACFh/B,OAAQ,sGAMGigC,GAAe,IAAIT,GAAe,CAC7Cx/B,OAAQ,uHAOGkgC,GAAkB,IAAIV,GAAe,CAChDx/B,OAAQ,2XAgBGmgC,GAAQ,IAAIX,GAAe,CACtCx/B,OAAQ,oRC5EH,SAASua,GAAU/H,GACxB,OAAO,IAAI6nB,GAAyB7nB,GAG/B,SAAS4tB,GAAQvvC,EAAcd,GACpC,MAAMwB,OAAalB,IAATN,EAAqBA,EAAQ4mB,GAAc+J,UACrD,OAAO,IAAIga,GAAc7pC,EAAMU,GAG1B,SAAS8uC,GAAQxvC,EAAcd,GACpC,OAAO,IAAIkqC,GAA6B,CACtCppC,OAAMd,SAIH,SAASuwC,GAAiBzvC,EAAcS,GAC7C,GAAqB,kBAAVA,EACT,OAAO+uC,GAAQxvC,EAAMuf,GAAWE,OAAOiB,QAAQjgB,GAC1C,GAAIA,aAAiBue,GAC1B,OAAOwwB,GAAQxvC,EAAMuf,GAAWI,WAAWe,QAAQjgB,GAC9C,GAAIA,aAAiB+P,GAC1B,OAAOg/B,GAAQxvC,EAAMuf,GAAWM,WAAWa,QAAQjgB,GAC9C,GAAIA,aAAiB6S,GAC1B,OAAOk8B,GAAQxvC,EAAMuf,GAAWQ,WAAWW,QAAQjgB,GAC9C,GAAIA,aAAiBuV,GAC1B,OAAOw5B,GAAQxvC,EAAMuf,GAAWc,MAAMK,QAAQjgB,GAE9C,KAAM,2BAIH,SAASivC,GAAaxwC,GAC3B,OAAO,IAAIqqC,GAA4B,CACrCvpC,KAAM,QAAU+jB,GAAgB1jB,IAAInB,GAAMc,KAC1CokB,SAAUllB,IAgBP,SAAS4gB,MAAQ6vB,GACtB,OAAO,IAAIzF,GAAkByF,EAAMpwB,GAAWQ,WAGzC,SAAS6vB,GAAWnvC,GACzB,OAAO,IAAIkpC,GAAgBlpC,GAGtB,SAASovC,KAEd,OAAOZ,GAAYa,OAClBjlC,MAAM,WAAY6kC,GAAa5rB,GAAoBU,WACjD3Z,MAAM,WACLmkC,GAAWc,OACVjlC,MAAM,UAAW6kC,GAAa5rB,GAAoBS,UAClD1Z,MAAM,WAAY6e,GACjB,CAAE1pB,KAAM,WAAYd,KAAMqgB,GAAWM,UAAW8I,MAAO9C,GAAezO,aAYvE,SAAS24B,KACd,OAAOjwB,GACL4J,GACA,CAAE1pB,KAAM,WAAYd,KAAMqgB,GAAWM,UAAW8I,MAAO9C,GAAezO,WAEtEw4B,GAAW,IC/ER,MAAMI,GAAa,OACbC,GAAiB,WACjBC,GAAsB,iBACtBC,GAAwB,mBAE9B,MAAMC,GAAbhrC,cAGErB,KAAA+d,SAAoC,IAAIkC,IAExC5e,gBAAgBirC,GAEd,OADAtsC,KAAKgnC,aAAesF,EACbtsC,KAGTqB,cAAcirC,GAGZ,GAFAtsC,KAAK8nC,WAAawE,EAEdA,aAAgB1H,IAAmD,gBAA7B0H,EAAKzH,QAAQC,OAAO7oC,KAAwB,CACpF,MAAMswC,EAAOD,EAAKtH,SAAS1oC,IAAI,YAC/B,QAAab,IAAT8wC,EACF,KAAM,4EAEJA,aAAgB3H,IAAmD,eAA7B2H,EAAK1H,QAAQC,OAAO7oC,MAC5D+D,KAAKwsC,QAAQJ,GAAuBG,EAAKE,UAAU,QAIvD,OADAzsC,KAAKwsC,QAAQL,GAAqBnB,GAAKe,OAAOjlC,MAAM,WAAYwlC,IACzDtsC,KAGTqB,oBACE,OAAOrB,KAAKwsC,QAAQN,GAAgBvmB,GAClC,CAAE1pB,KAAM,SAAUd,KAAMqgB,GAAWM,UAAW8I,MAAO9C,GAAege,UAIxEz+B,gBACE,OAAOrB,KAAKwsC,QAAQP,GAAYtmB,GAC9B,CAAE1pB,KAAM,KAAMd,KAAMqgB,GAAWI,UAAWgJ,MAAO9C,GAAeme,MAMpE5+B,QAAQrE,EAAasvC,GACnB,MAAMI,EAAM1sC,KAAK+d,SAASzhB,IAAIU,GAC9B,QAAYvB,IAARixC,EACF,KAAM,2BAGR,OADA1sC,KAAK+d,SAASlO,IAAI7S,EAAKsvC,GAChBtsC,KAGTqB,cACE,OAAOrB,KAAKgnC,aAGd3lC,QAAQrE,GACN,MAAM0vC,EAAM1sC,KAAK+d,SAASzhB,IAAIU,GAC9B,QAAYvB,IAARixC,EACF,KAAM,gBAER,OAAO,IAAInH,GAAoBvoC,EAAK0vC,EAAIvxC,MAG1CkG,QAGE,OAFArB,KAAKgnC,aAAe,KACpBhnC,KAAK8nC,WAAa,KACX9nC,KAGTqB,UACE,GAAwB,OAApBrB,KAAK8nC,WACP,KAAM,iDAER,GAA0B,OAAtB9nC,KAAKgnC,aACP,KAAM,mDAER,OAAA7uC,OAAAy7B,OAAA,GACK5zB,KAAK2sC,gBAAe,CACvB1nB,mBAAoBjlB,KAAK4sC,sBACzB1nB,qBAAsBllB,KAAK6sC,oBAC3B1nB,kBAAkB,IAKtB2S,YACE,MAAMA,EAAyB,IAAI8L,IACnC5jC,KAAKgnC,aAAaxC,YAAYnN,IAC5BS,EAAMrnB,IAAI4mB,KAEZr3B,KAAK8nC,WAAWtD,YAAYnN,IAC1BS,EAAMrnB,IAAI4mB,KAEZr3B,KAAK+d,SAASvB,QAAQwB,IACpBA,EAAKwmB,YAAYnN,IACfS,EAAMrnB,IAAI4mB,OAGd,MAAMyV,EAAyB,GAI/B,OAHAhV,EAAMtb,QAAQtf,IACZ4vC,EAAS50C,KAAKgF,KAET4vC,EAGTzrC,gBACE,MAAMy2B,EAAQ93B,KAAK83B,MACbiV,EAAajV,EAAMwM,OACvBpnC,GAAKA,aAAakoC,IAGdznB,EAAaovB,EAChBzI,OAAOjN,GAAQA,aAAgBoO,IAC/B2C,IAAK/Q,IACJ,MAAO,CACLp7B,KAAMo7B,EAAKp7B,KACX2oB,MAAOyS,EAAKqO,eACZvqC,KAAMk8B,EAAKl8B,QAGX0iB,EAAWkvB,EACdzI,OAAOjN,GAAQA,aAAgBgO,IAC/B+C,IAAK/Q,IACJ,MAAO,CACLp7B,KAAMo7B,EAAKp7B,KACXd,KAAMk8B,EAAKl8B,KACXwhB,QAAS0a,EAAKiO,gBAGd7hB,EAAmBspB,EACtBzI,OAAOjN,GAAQA,aAAgBmO,IAC/B4C,IAAK/Q,IACJ,MAAO,CACLp7B,KAAMo7B,EAAKp7B,KACXokB,SAAUgX,EAAKhX,YAIf2sB,EAAa,IAAIpJ,IACvB9L,EAAMwM,OAAOpnC,GAAKA,aAAa6oC,IAC5BvpB,QAAS6a,IACR2V,EAAWv8B,IAAI4mB,EAAKjsB,UAExB,MAAMqS,EAAW,GACjBuvB,EAAWxwB,QAAQywB,IACjBxvB,EAASvlB,KAAK,CACZ+D,KAAKgxC,EAAGhxC,KACRd,KAAK8xC,EAAG9xC,SAIZ,MAAM4iB,EAAW,GAQjB,OAPA/d,KAAK+d,SAASvB,QAAQ,CAAC6a,EAAMr6B,KAC3B+gB,EAAS7lB,KAAK,CACZ+D,KAAMe,EACN7B,KAAMk8B,EAAKl8B,SAIR,CAAEwiB,aAAYE,WAAUJ,WAAUM,WAAU0F,oBAGrDpiB,sBACE,OAAOwmC,GAAgB7nC,MAGzBqB,oBACE,OAAOqlC,GAAc1mC,OCjKlB,MAAMktC,GAAb7rC,cACErB,KAAAoM,KAAOE,KACPtM,KAAA2mC,MAAqB,IAAI0F,GAEzBrsC,KAAAmtC,mBAAgD,KAChDntC,KAAAotC,mBAA6B,EAE7BptC,KAAAqtC,gBAA2C,GAO3CrtC,KAAAstC,oBAAmD,IAAInT,GALvD94B,SAASksC,GAEP,OADAvtC,KAAKqtC,gBAAgBn1C,KAAKq1C,GACnBvtC,KAITqB,QACErB,KAAK2mC,MAAMlD,QACXzjC,KAAKqtC,gBAAgB7wB,QAAQgxB,IAC3BA,EAASC,SAASztC,KAAK2mC,SAI3BtlC,mBAOE,OANErB,KAAKotC,oBACLptC,KAAK0tC,QACP1tC,KAAKmtC,mBAAqBntC,KAAK2mC,MAAMgH,UACrC3tC,KAAKstC,oBAAoBM,gBAAgB5tC,KAAKmtC,oBAC5CntC,KAAKotC,mBAAoB,GAEpBptC,KAAKmtC,mBAGd9rC,WAAW0kB,GACL/lB,KAAKotC,mBACPptC,KAAK6tC,eAAe9nB,GAEtB,IAAInF,EAAUmF,EAAOhF,WAAW/gB,MAIhC,YAHgBvE,IAAZmlB,IACFA,EAAUmF,EAAOvB,cAAcxkB,OAE1B4gB,EAGTvf,eAAe0kB,GACbA,EAAOI,cAAcnmB,OAOlB,SAAS8tC,GAAWC,GACzB,MAAO,CAAC1yC,EAA+B2B,UACbvB,IAApBJ,EAAOwiB,WACTxiB,EAAOwiB,SAAW,IAAIoC,UAEcxkB,IAAlCJ,EAAO2yC,yBACT3yC,EAAO2yC,uBAAyB,IAAI/tB,KAGtC,IAAIoV,EAAMh6B,EAAO2B,GACjB,MAAMd,EAAS,KACb,OAAOm5B,GAEHlU,EAAUzkB,IACdrB,EAAOwiB,SAAShO,IAAIk+B,EAAWrxC,GAC/BrB,EAAO4yC,sBAAuB,EAC9B5Y,EAAM34B,GAGRrB,EAAO2yC,uBAAuBn+B,IAAI7S,EAAK+wC,GAEvC51C,OAAOiE,eAAef,EAAQ2B,EAAK,CACjCV,IAAKJ,EACL2T,IAAKsR,EACL9kB,YAAY,EACZ6xC,cAAc,KAKb,MAAeC,GACpB9sC,cAYArB,KAAAiuC,sBAAgC,OAVRxyC,IAAlBuE,KAAK6d,WACP7d,KAAK6d,SAAW,IAAIoC,UAEcxkB,IAAhCuE,KAAKguC,yBACPhuC,KAAKguC,uBAAyB,IAAI/tB,KAUtC5e,mBAAmBpF,GACjB,MAAM6oB,EAAc9kB,KAAKguC,uBAAuB1xC,IAAIL,GAC9CS,EAAQsD,KAAK/D,GACnB,QAAcR,IAAViB,EACF,KAAM,0BAER,OAAOgvC,GAAiB5mB,EAAapoB,IC5HlC,MAAM0xC,WAAoBD,GAE/B9sC,SAASslC,GACPA,EACG0H,cAAcrC,MACdsC,gBACAC,gBACC/C,GAAQ,cAAcgD,MAAM7H,EAAM8H,QAAQxC,OCHlD,MAAMyC,GAAO,IAAIzzB,GACX0zB,GAAgB,IAAI1zB,GACpB2zB,GAAK,IAAI3zB,GAIR,MAAM4zB,GACXxtC,YAAYytC,GAKZ9uC,KAAA+uC,SAAmB,EACnB/uC,KAAAgvC,aAAuB,EAGfhvC,KAAAivC,YAA4B,GA8B5BjvC,KAAAkvC,YAAc,CAACr0C,IAChBmF,KAAK+uC,UAGVJ,GAAc9+B,IAAIhV,EAAMs0C,QAASt0C,EAAMu0C,SACvCR,GAAG93B,KAAK43B,IAAM33B,IAAI43B,IACO,IAArB3uC,KAAKgvC,aACPhvC,KAAKqvC,UAAUrvC,KAAKsvC,uBAAwBV,IAErB,IAArB5uC,KAAKgvC,aACPhvC,KAAKqvC,UAAUrvC,KAAKuvC,wBAAyBX,IAE/CF,GAAK53B,KAAK63B,OAGJ3uC,KAAAwvC,YAAc,CAAC30C,IAChBmF,KAAK+uC,UAGVL,GAAK7+B,IAAIhV,EAAMs0C,QAASt0C,EAAMu0C,SAC9BpvC,KAAKgvC,YAAcn0C,EAAM40C,OACzB50C,EAAM60C,oBAGA1vC,KAAA2vC,UAAY,CAAC90C,IACdmF,KAAK+uC,UAGV/uC,KAAKqvC,UAAUrvC,KAAK4vC,kBACpB5vC,KAAKgvC,aAAe,KAGdhvC,KAAA6vC,aAAe,CAACh1C,IACtB,IAAKmF,KAAK+uC,QACR,OAEF,IAAIe,EAAQ,OACsB,IAA7Bj1C,EAAck1C,WAEjBD,EAASj1C,EAAck1C,gBACG,IAAjBl1C,EAAMm1C,SAEfF,GAASj1C,EAAMm1C,QAEjBF,EAAQA,EAAQ,EAAI,IAAM,GAC1B9vC,KAAKqvC,UAAUrvC,KAAKiwC,oBAAqBH,KAGnC9vC,KAAAsvC,uBAA+C,GAC/CtvC,KAAAuvC,wBAAgD,GAChDvvC,KAAAiwC,oBAA4C,GAC5CjwC,KAAAkwC,mBAA2C,GAC3ClwC,KAAA4vC,iBAAyC,GA1F/C5vC,KAAK8uC,aAAeA,EACpB9uC,KAAK/C,OASCoE,OACN,MAAM+xB,EAAKpzB,KAAK8uC,aAChB9uC,KAAKgvC,aAAe,EACpB5b,EAAGwP,iBAAiB,YAAa5iC,KAAKkvC,aAAa,GACnD9b,EAAGwP,iBAAiB,YAAa5iC,KAAKwvC,aAAa,GACnDpc,EAAGwP,iBAAiB,UAAW5iC,KAAK2vC,WAAW,GAC/Cvc,EAAGwP,iBAAiB,QAAS5iC,KAAK6vC,cAAc,GAGhDzc,EAAGwP,iBAAiB,cAAe5iC,KAAKmwC,oBAAoB,GAEtD9uC,SACN,MAAM+xB,EAAKpzB,KAAK8uC,aAChB9uC,KAAKgvC,aAAe,EACpB5b,EAAGgd,oBAAoB,YAAapwC,KAAKkvC,aACzC9b,EAAGgd,oBAAoB,YAAapwC,KAAKwvC,aACzCpc,EAAGgd,oBAAoB,UAAWpwC,KAAK2vC,WACvCvc,EAAGgd,oBAAoB,QAASpwC,KAAK6vC,cAGrCzc,EAAGgd,oBAAoB,cAAepwC,KAAKmwC,oBAAoB,GAGzD9uC,mBAAmBxG,GACzBA,EAAM60C,iBACN70C,EAAMw1C,kBAyDAhvC,UAAUivC,KAAuCC,GACvDD,EAAa9zB,QAAQtY,IACnBA,EAASA,YAAYqsC,KAGjBlvC,iBAAiBmvC,EAAwBF,GAC/CA,EAAeA,EAAahM,OAAOpgC,IAAc,OAAOA,EAASssC,aAAeA,IAG3EnvC,kBAAkBmvC,EAAwBtsC,GAC/ClE,KAAKsvC,uBAAuBp3C,KAAK,CAACs4C,aAAYtsC,aAGzC7C,mBAAmBmvC,EAAwBtsC,GAChDlE,KAAKuvC,wBAAwBr3C,KAAK,CAACs4C,aAAYtsC,aAG1C7C,eAAemvC,EAAwBtsC,GAC5ClE,KAAKiwC,oBAAoB/3C,KAAK,CAACs4C,aAAYtsC,aAGtC7C,cAAcmvC,EAAwBtsC,GAC3ClE,KAAKkwC,mBAAmBh4C,KAAK,CAACs4C,aAAYtsC,aAGrC7C,YAAYmvC,EAAwBtsC,GACzClE,KAAK4vC,iBAAiB13C,KAAK,CAACs4C,aAAYtsC,aAGnC7C,4BAA4BmvC,GACjCxwC,KAAKywC,iBAAiBD,EAAYxwC,KAAK4vC,kBACvC5vC,KAAKywC,iBAAiBD,EAAYxwC,KAAKuvC,yBACvCvvC,KAAKywC,iBAAiBD,EAAYxwC,KAAKiwC,qBACvCjwC,KAAKywC,iBAAiBD,EAAYxwC,KAAKkwC,oBACvClwC,KAAKywC,iBAAiBD,EAAYxwC,KAAK4vC,kBAGzCvuC,UACErB,KAAKkzB,SACLlzB,KAAKsvC,uBAAyB,GAC9BtvC,KAAKuvC,wBAA0B,GAC/BvvC,KAAKiwC,oBAAsB,GAC3BjwC,KAAKkwC,mBAAqB,GAC1BlwC,KAAK4vC,iBAAmB,ICxHrB,SAASc,GAA0BtlC,EAAsB8xB,GAC9D9xB,EAAOulC,eACPvlC,EAAOwlC,cACP,IAAIC,EAAkC,KACtC,GACEA,EAAazlC,EAAO0lC,iBACD,OAAfD,GACF3T,EAAQ2T,SAEY,OAAfA,GASX,MAAME,IAAc,IAAI7D,IAAUO,SAAS,IAAIW,IACzC4C,GAAO,IAAIpP,GAEV,MAAMqP,GACX5vC,YAAY+xB,EAAwB8d,GAmBpClxC,KAAAmxC,YAAsB,EACtBnxC,KAAAoxC,aAAuB,EAiBdpxC,KAAA44B,iBAAqC,IAAIuB,GAiB3Cn6B,KAAAqxC,gBAAqC,KACrCrxC,KAAAsxC,kBAA4B,IAAIpE,IAAUO,SAAS,IAAI8D,IAQ9DvxC,KAAAwxC,QAAkB,IAAIxY,GACfh5B,KAAAyxC,iBAAkB,EAMjBzxC,KAAA0xC,oBAAsB,IAAIz/B,GAC1BjS,KAAA2xC,iBAAmB,IAAI1/B,GACvBjS,KAAAygB,SAAW,IAAIxO,GACfjS,KAAA0gB,aAAe,IAAIzO,GAEnBjS,KAAA4xC,cAAgB,IAAI3/B,GACpBjS,KAAA6xC,eAAiB,IAAI5/B,GAoHrBjS,KAAA8jB,eAAyD,IAAI7D,IAK7DjgB,KAAA8xC,kCAAgE,IAAIlO,IA2JpE5jC,KAAA+xC,kBAA6C,IAAI9xB,IA/VvDjgB,KAAK8K,SAAW,IAAIqoB,GAAWC,EAAI8d,QAExBz1C,IAAP23B,IACDpzB,KAAKgyC,OAA6B9Y,OAAS9F,EAAGlY,MAAQkY,EAAGjY,QAG5Dnb,KAAKiyC,WAAa,IAAIpD,GAAWzb,GAEjCpT,GAAgBxD,QAAQ,CAAC2D,EAAKnjB,KAC5BgD,KAAK8jB,eAAejU,IAAI7S,EAAK,IAAI88B,GAAa3Z,EAAIxD,YAGpD3c,KAAKkyC,WAAY,EAQnBC,iBAA4B,OAAOnyC,KAAKoxC,YACxCc,gBAA2B,OAAOlyC,KAAKmxC,WACvCe,cAAc7c,GACZr1B,KAAKmxC,WAAa9b,EACdA,GACGr1B,KAAK8K,SAASmpB,WAAWpB,aAC5Bt1B,QAAQsO,KAAK,yFAEf7L,KAAKoxC,aAAc,IAEnBpxC,KAAK8K,SAASmpB,WAAWiB,YACzBl1B,KAAKoxC,aAAc,GAMvB/vC,QAAQ6Z,EAAcC,GAChBnb,KAAK8K,SAASqpB,QAAQjZ,EAAOC,IAC/Bnb,KAAK44B,iBAAiBgV,gBAAgB,CACpC1yB,QAAOC,WAIb9Z,cAAc6Z,EAAeC,GACvBnb,KAAK8K,SAASwpB,iBAAiBpZ,EAAOC,IACxCnb,KAAK44B,iBAAiBgV,gBAAgB,CACpC1yB,QAAOC,WAiBb62B,aAAe,OAAOhyC,KAAKwxC,QAC3BQ,WAAWA,GACThyC,KAAKwxC,QAAUQ,EACfhyC,KAAKyxC,iBAAkB,EAUzBpwC,yBACErB,KAAK4xC,cAAc96B,KAAK9W,KAAK2xC,kBAC7B3xC,KAAK4xC,cAAc7iC,SAAS,KAAQ,EAAIxC,KAAKC,SAAW,GAAKxM,KAAK8K,SAASoQ,MAC3Elb,KAAK4xC,cAAc7iC,SAAS,KAAQ,EAAIxC,KAAKC,SAAW,GAAKxM,KAAK8K,SAASqQ,OAC3Enb,KAAK6xC,eAAexZ,iBAAiBr4B,KAAK4xC,cAAe5xC,KAAK0xC,qBAC9D1xC,KAAKgmB,iBAAiBjG,GAAoBU,UAAU2xB,SAASpyC,KAAK6xC,gBAGpExwC,QACErB,KAAKgmB,iBAAiBjG,GAAoBU,UAAU2xB,SAASpyC,KAAKygB,UASpEpf,gBACE,IAAIgxC,GAAe,EAEfryC,KAAKgyC,OAAOvZ,6BACdz4B,KAAKgyC,OAAOvY,yBACZz5B,KAAK2xC,iBAAiB76B,KAAK9W,KAAKgyC,OAAOxZ,kBACvC6Z,GAAe,GAEbryC,KAAKgyC,OAAOpb,UAAUnB,wBACxBz1B,KAAKgyC,OAAOpb,UAAUxkB,OACtBpS,KAAKgyC,OAAO1Z,mBAAkB,GAC9Bt4B,KAAK0xC,oBAAoBY,WAAWtyC,KAAKgyC,OAAO9a,aAAa,GAC7Dmb,GAAe,GAGjBryC,KAAK0gB,aAAa5J,KAAK9W,KAAKygB,UAC5BzgB,KAAKgmB,iBAAiBjG,GAAoBW,cAAc0xB,SAASpyC,KAAK0gB,cAElE2xB,GACFryC,KAAKygB,SAAS4X,iBAAiBr4B,KAAK2xC,iBAAkB3xC,KAAK0xC,qBAC3D1xC,KAAKgmB,iBAAiBjG,GAAoBU,UAAU2xB,SAASpyC,KAAKygB,UAClE4xB,GAAe,EACfryC,KAAKyxC,iBAAkB,GAEvBzxC,KAAKyxC,iBAAkB,EAW3BpwC,OAAO+J,GACLslC,GAA0BtlC,EAASmnC,IACjCvyC,KAAKwyC,aAAaD,KAItBlxC,cAAcoxC,GACZ,IAAK,IAAI36C,EAAI,EAAGA,EAAI26C,EAAQz6C,OAAQF,IAClCkI,KAAKwyC,aAAaC,EAAQ36C,IAI9BuJ,aAAalE,GAGX,MAAMyjB,EAAU5gB,KAAK0yC,eAAev1C,GAGpC6C,KAAK2yC,gBAAgBx1C,EAAO2/B,SAAUlc,GAGtC5gB,KAAK4yC,gBAAgBz1C,EAAO21B,SAAUlS,GAEtC5gB,KAAK6yC,aAAa11C,EAAOqb,MAAOoI,EAASzjB,EAAO21B,UAEhD31B,EAAO4F,MAAM+vC,OAAO9yC,KAAK8K,UAGzB9K,KAAK8K,SAAShL,OAAO3C,EAAOs/B,SAAU7b,EAAQsD,cAGhD7iB,kBAAkB6uB,EAA4B6iB,GAC5C/yC,KAAK8K,SAASkoC,wBACdhzC,KAAK8K,SAAS/H,MAAM6pB,YAClBmmB,EAAcrmC,EAAGqmC,EAAcpmC,EAC/BomC,EAAcnmC,EAAGmmC,EAAc3kC,GAGjCpO,KAAKqxC,gBAAkBN,GACvB/wC,KAAKqxC,gBAAgBtwB,WAAW/gB,MAAMizC,4BACpC/iB,EAAYj0B,KAAM,cAEpB+D,KAAKF,OAAOkxC,IACZhxC,KAAKqxC,gBAAkB,KAmBzBhwC,iBAAiBoqC,GACf,OAAOzrC,KAAK8jB,eAAexnB,IAAImvC,GAOzBpqC,eAAelE,GAGrB,IAAI4/B,EAEFA,EAD2B,OAAzB/8B,KAAKqxC,gBACGrxC,KAAKqxC,qBACa51C,IAAnB0B,EAAO4/B,QACN5/B,EAAO4/B,QAEP/8B,KAAKsxC,iBAIjB,MAAM1wB,EAAUmc,EAAQhc,WAAW/gB,MAwBnC,OAvBIA,KAAKkzC,sBAAwBtyB,GAC/B5gB,KAAK8xC,kCAAkCjpB,QAGzC7oB,KAAK8K,SAAS0pB,WAAW5T,GAEzB5gB,KAAKgmB,iBAAiBjG,GAAoBS,SAAS4xB,SAASj1C,EAAO+5B,aACnEtW,EAAQuyB,0BAA0BnzC,MAElC+8B,EAAQsQ,gBAAgB7wB,QAAQgxB,IAC1BxtC,KAAK8xC,kCAAkC7qB,IAAIumB,KACzCA,EAASS,uBAKfT,EAAS3vB,SAASrB,QAAQ,CAAC9f,EAAOM,KAChC4jB,EAAQwyB,WAAWp2C,EAAKN,KAE1B8wC,EAASS,sBAAuB,EAChCjuC,KAAK8xC,kCAAkCrhC,IAAI+8B,MAGtC5sB,EAGDvf,gBAAgBy7B,EAAoBlc,GAE1CA,EAAQyyB,YAAa3tB,IACnB,IAAI2I,EAGJ,QAAiB5yB,IAAbqhC,EAAwB,CAC1B,QAAoBrhC,IAAhBiqB,EAAIvC,QACN,KAAM,2FAER,MAAMzF,EAAUof,EAASwW,kBAAkB5tB,EAAIvC,SAC/CkL,EAAY3Q,EAAQ4Q,aAAatuB,MAInC,QAAkBvE,IAAd4yB,EAAyB,CAC3B,MAAMxJ,EAAkBjE,EAAQmD,sBAAsB2B,EAAIzpB,MAC1D,QAAwBR,IAApBopB,EACF,sCAAwCa,EAAIzpB,iCAE9CoyB,EAAYruB,KAAK8K,SAASkpB,mBAAmBuf,sBAAsB1uB,GAGrE,QAAkBppB,IAAd4yB,EACF,KAAM,sBAGR3I,EAAIG,WAAWwI,KAIXhtB,gBAAgByxB,EAAoBlS,GAG1C,GAAIA,EAAQsD,aAAc,CACxB,GAA6B,OAAzB4O,EAASoN,YACX,KAAM,uCAER,MAAMsT,EAAsB1gB,EAASoN,YACjCsT,EAAoBh8C,gBAAgBi8C,YACtC7yB,EAAQuD,WAAY,EAEpBvD,EAAQuD,WAAY,EAKxB,IAAIuvB,EACJ,GAAI1zC,KAAKoxC,YAAa,CACpB,MAAMnd,EAAaj0B,KAAK8K,SAASmpB,WAC3B0f,EAAW1f,EAAW2f,OAAO9gB,GACnC,QAAiBr3B,IAAbk4C,IAA0B7gB,EAASrD,WAKrC,YADAwE,EAAW4f,OAAOF,GAHlB1f,EAAW6f,UAAUhhB,GACrB4gB,EAAoBzf,EAAW8f,UAAUjhB,GAsB7C,GAdAlS,EAAQozB,cAAcp2B,IAEpB,MAAMmJ,EAAa+L,EAASiL,YAAYngB,EAAI3hB,MAC5C,QAAmBR,IAAfsrB,EACF,gBAAiBnG,EAAQ3kB,iCAAiC2hB,EAAI3hB,uCAEhE,IAAIg4C,EAAWj0C,KAAKi/B,qBAAqBlY,QACxBtrB,IAAbw4C,GAA0BltB,EAAWmX,eACvC+V,EAAWj0C,KAAKk0C,8BAA8BntB,GAAY,GAC1DA,EAAWmX,cAAe,GAE5BtgB,EAAIgI,UAAUquB,KAGZrzB,EAAQsD,aAAc,CACxB,MAAMsvB,EAAsB1gB,EAASoN,YACrC,IAAI+T,EAAWj0C,KAAKi/B,qBAAqBuU,QACxB/3C,IAAbw4C,IACFA,EAAWj0C,KAAKk0C,8BAA8BV,GAAqB,IAErE5yB,EAAQuzB,eAAeF,GAKrBj0C,KAAKoxC,aACHsC,IACFA,EAAkBxgB,SAClBlzB,KAAK8K,SAASmpB,WAAW4f,OAAOH,EAAkB3gB,MAKhD1xB,aAAamX,EAAoBoI,EAAoBkS,GAC3D,IAAIhN,EAAQ,EACRtD,EAAQ,EACZ,QAAc/mB,IAAV+c,EAAqB,CACvB,GAA6B,OAAzBsa,EAASoN,YAGX,KAAM,iDAFN1d,EAAQsQ,EAASoN,YAAY1oC,KAAKQ,OAKtC4oB,EAAQoD,SAAW8B,EACnBlF,EAAQqD,UAAYzB,EAOtBnhB,WAAW07B,GACT,OAAO/8B,KAAK+xC,kBAAkBz1C,IAAIygC,GAGpC17B,cAAc07B,GACZ,MAAMnc,EAAU5gB,KAAK8K,SAAS0Z,cAAcuY,EAAQqX,oBAEpD,OADAp0C,KAAK+xC,kBAAkBliC,IAAIktB,EAASnc,GAC7BA,EAGTvf,cAAc07B,GACZ,MAAMnc,EAAU5gB,KAAK+xC,kBAAkBz1C,IAAIygC,QAC3BthC,IAAZmlB,IACFA,EAAQsF,UACRlmB,KAAK+xC,kBAAkB5qB,OAAO4V,IAIlC17B,qBAAqB0lB,GACnB,OAAO/mB,KAAK8K,SAAS4oB,uBAAuB2gB,YAAYttB,EAAWvvB,KAAKqV,QAG1ExL,8BAA8B0lB,EAAwBF,GACpD,OAAO7mB,KAAK8K,SAAS4oB,uBAAuB4gB,qBAAqBvtB,EAAWvvB,KAAKqV,OAAuBga,GAK1GxlB,wBACEygC,GAAuB9hC,KAAK8K,SAASsoB,GAAI,0BAG3C/xB,YACErB,KAAK8K,SAASoqB,YAGhB7zB,UACErB,KAAK44B,iBAAiB/P,QACtB7oB,KAAKk1B,YACLl1B,KAAKiyC,WAAW/rB,WC7bb,MAAMquB,GACXlzC,YAAYmlB,GAIJxmB,KAAAwmB,KAAO,GACPxmB,KAAAwiB,MAAQ,EACRxiB,KAAAw0C,QAAoB,GAEpBx0C,KAAAnE,IAAM,EAPZmE,KAAKwmB,UAAgB/qB,IAAT+qB,EAAqB,GAAIA,EACrCxmB,KAAKyjC,QAQPgR,cACE,OAAIz0C,KAAKwiB,OAASxiB,KAAKwmB,KACdxmB,KAAKnE,IAAMmE,KAAKwmB,KAEhBxmB,KAAKnE,IAAMmE,KAAKwiB,MAI3BkyB,WACE,OAAQnoC,KAAK5G,IAAI,EAAG3F,KAAKwiB,MAAQxiB,KAAKwmB,MAAQxmB,KAAKwmB,KAGrDnlB,KAAKynC,GACH9oC,KAAKwiB,QAEL,MAAMmyB,EAAU30C,KAAKwiB,MAAQxiB,KAAKwmB,KAElCxmB,KAAKnE,KAAOmE,KAAKw0C,QAAQx0C,KAAK00C,MAC9B10C,KAAKnE,KAAOitC,EACZ9oC,KAAKw0C,QAAQG,GAAW7L,EAI1BznC,QACErB,KAAKwiB,MAAQ,EACbxiB,KAAKnE,IAAM,EACXmE,KAAKw0C,QAAU,GACf,IAAK,IAAI18C,EAAI,EAAGA,EAAIkI,KAAKwmB,KAAM1uB,IAC7BkI,KAAKw0C,QAAQt8C,KAAK,GAItBmJ,iBAAiBmlB,GACfxmB,KAAKwmB,KAAOA,EACZxmB,KAAKyjC,SCnCF,MAAMmR,GAAbvzC,cAEErB,KAAA60C,+BAA8C,IAAIN,GAAY,KAEtDv0C,KAAA80C,gBAAkD,KAKlD90C,KAAA+0C,YAAoC,CAACC,IAC3Ch1C,KAAKi1C,WAAWD,GACa,OAAzBh1C,KAAK80C,iBACP90C,KAAK80C,gBAAgBE,GAEvBh1C,KAAKk1C,SAASC,YAAYC,OACtBp1C,KAAKq1C,SACPr1C,KAAKs1C,OAAS73C,OAAO83C,sBAAsBv1C,KAAK+0C,gBAIpD/0C,KAAAq1C,QAAS,EAqBTr1C,KAAAw1C,eAAiB,EApCjBn0C,SAASo0C,GACPz1C,KAAK80C,gBAAkBW,EAiBzBp0C,MACErB,KAAKq1C,QAAS,EACdr1C,KAAKs1C,OAAS73C,OAAO83C,sBAAsBv1C,KAAK+0C,aAGlD1zC,OACOrB,KAAKq1C,QACRr1C,KAAK+0C,YAAYI,YAAYC,OAIjC/zC,OACErB,KAAKq1C,QAAS,OACM55C,IAAhBuE,KAAKs1C,QACP73C,OAAOi4C,qBAAqB11C,KAAKs1C,QAK7Bj0C,WAAWm0C,GACjBx1C,KAAKw1C,eAAiBA,EAGhBn0C,SAASs0C,GACf31C,KAAK60C,+BAA+B38C,KAAKy9C,EAAe31C,KAAKw1C,iBCtD1D,MAAMI,WAAapZ,GACxBn7B,cACE+zB,QACAp1B,KAAKy8B,SAAWza,GAAS6zB,OCHtB,MAAMC,WAAetZ,GAC1Bn7B,cACE+zB,QACAp1B,KAAKy8B,SAAWza,GAAS+zB,QCF7B,IAAkBC,GCyBNC,GAyBPC,IDlDL,SAAkBF,GAChBA,EAAA,qBACAA,EAAA,yBACAA,EAAA,uBACAA,EAAA,YAJF,CAAkBA,QAAW,KEDtB,MAAMG,GAAb90C,cAEUrB,KAAAqoC,KAAiC,GACjCroC,KAAAo2C,WAAqB,EAiB7Bp2C,KAAAq2C,iBAA2B,EAfpBh1C,cAAclE,GACf6C,KAAKo2C,WAAap2C,KAAKqoC,KAAKrwC,OAC9BgI,KAAKqoC,KAAKroC,KAAKo2C,YAAcj5C,EAE7B6C,KAAKqoC,KAAKnwC,KAAKiF,GAEjB6C,KAAKo2C,aAGP/0C,QAAQ67B,GACN,IAAK,IAAIplC,EAAI,EAAGA,EAAIkI,KAAKo2C,WAAYt+C,IACnColC,EAAQl9B,KAAKqoC,KAAKvwC,IAKtBuJ,OACE,GAAIrB,KAAKq2C,kBAAoBr2C,KAAKqoC,KAAKrwC,OACrC,OAAO,KAET,MAAM8Q,EAAO9I,KAAKqoC,KAAKroC,KAAKq2C,kBAE5B,OADAr2C,KAAKq2C,mBACEvtC,EAGTzH,QACErB,KAAKo2C,WAAa,EAGpB/0C,cACErB,KAAKq2C,iBAAmB,EAG1Bh1C,QACErB,KAAKqoC,KAAO,GAGdhnC,SChCK,MAAMi1C,GAAbj1C,cACErB,KAAAssC,KAAkB,IAAI/V,GAGtBv2B,KAAAu2C,WAAyB,IAAIJ,GAE7Bn2C,KAAAs3B,wBAAkC,EAClCt3B,KAAAw2C,wBAAkC,EAClCx2C,KAAAo3B,sBAAgC,EAIhCp3B,KAAAy2C,aAA+B,IAAI7S,IACnC5jC,KAAA02C,UAA4B,IAAI9S,IAJhC+S,oBACE,OAAO32C,KAAKs3B,wBAA0Bt3B,KAAKw2C,wBAA0Bx2C,KAAKo3B,qBAK5E/1B,QAAQlE,GACN6C,KAAKy2C,aAAatvB,OAAOhqB,GACzB6C,KAAK02C,UAAUjmC,IAAItT,GACnB6C,KAAKs3B,wBAAyB,EAGhCj2B,WAAWlE,GACT6C,KAAK02C,UAAUvvB,OAAOhqB,GACtB6C,KAAKy2C,aAAahmC,IAAItT,GACtB6C,KAAKs3B,wBAAyB,EAGhCj2B,eACMrB,KAAKs3B,wBACPt3B,KAAK42C,mBAITv1C,cACErB,KAAKu2C,WAAWM,cAGlBx1C,iBACE,OAAOrB,KAAKu2C,WAAWhK,OAGzBlrC,mBAEErB,KAAKu2C,WAAW9S,QAChBzjC,KAAKy2C,aAAa5tB,QAClB7oB,KAAK02C,UAAU7tB,QACf7oB,KAAKssC,KAAKnU,SAAUd,IAClBA,EAAKb,MAAQx2B,MACTA,KAAKs3B,wBAA0Bt3B,KAAKw2C,0BAClB,OAAhBnf,EAAKX,OACPW,EAAKR,aAAawB,iBAAiBhB,EAAKX,OAAOG,aAAcQ,EAAKT,UAAUxkB,QAE5EilB,EAAKR,aAAa/f,KAAKugB,EAAKT,UAAUxkB,SAGtCilB,aAAgBmF,IAClBx8B,KAAKu2C,WAAWO,cAAczf,KAGlCr3B,KAAKs3B,wBAAyB,EAC9Bt3B,KAAKw2C,wBAAyB,EAC9Bx2C,KAAKo3B,sBAAuB,EAI9B/1B,oBACErB,KAAKssC,KAAKhU,mBAAkB,GAG9Bj3B,YAAYg2B,GACV,GAAIA,EAAKb,MACP,KAAM,+BAERx2B,KAAKssC,KAAOjV,EACZr3B,KAAKs3B,wBAAyB,EAGhCj2B,kBACE,IAAKrB,KAAKssC,KACR,KAAM,oBAERtsC,KAAKssC,KAAKnU,SAAUd,IAClBA,EAAKb,MAAQ,OAEfx2B,KAAKssC,KAAO,KAGdjrC,qBAAqB01C,MFvEvB,SAAYd,GACVA,IAAA,sCACAA,IAAA,qBAFF,CAAYA,QAAa,KAyBzB,SAAKC,GACHA,IAAA,4CACAA,IAAA,4CAFF,CAAKA,QAAS,KG7CP,MAAMc,GACX31C,YAAYyjC,GAGV,GA6BM9kC,KAAAi3C,kBAA4B,EAC5Bj3C,KAAAk3C,kBAA4B,EAK5Bl3C,KAAAqxC,gBAAqC,KAGrCrxC,KAAAm3C,YAAmC,IAAIl3B,IAavCjgB,KAAAo3C,gBAA0B,EArDhCp3C,KAAK8kC,OAASA,EACd9kC,KAAK/D,KAAO6oC,EAAO7oC,UACIR,IAAnBqpC,EAAO/H,QAAuB,CAChC,MAAMsU,EAAkBvM,EAAO/H,QAC/B,QAAwBthC,IAApB41C,EACF,mBAAoBvM,EAAO/H,uBAE7B/8B,KAAKqxC,gBAAkBA,EAGzBrxC,KAAK0oB,WAAaoc,EAAOpc,WACzB1oB,KAAKk3C,sBAA+Cz7C,IAA5BqpC,EAAOoS,kBAAwCpS,EAAOoS,iBAC9El3C,KAAKi3C,sBAA+Cx7C,IAA5BqpC,EAAOmS,kBAAwCnS,EAAOmS,iBAE9Ej3C,KAAKq3C,kBAAoBvS,EAAOuS,kBAChCr3C,KAAKs3C,iBAAmBxS,EAAOwS,iBAIjCj2C,mBAAmB6jC,GACjBllC,KAAKm3C,YAAYtuB,QACjB1wB,OAAO4R,KAAKm7B,GAAQ1oB,QAAQ+6B,IAC1B,MAAMC,EAAQtS,EAAOqS,GACrBv3C,KAAKm3C,YAAYtnC,IAAI0nC,EAAUC,KAqBnCn2C,gBAAgB0kB,EAAsB0xB,GAChCA,EAAiBx7C,OAASy7C,GAAYC,YACxC33C,KAAK43C,kBAAen8C,EACpBuE,KAAKo3C,gBAAiB,IAEtBp3C,KAAK43C,aAAeH,EAAiBI,uBAAuB9xB,GAC5D/lB,KAAKo3C,gBAAiB,GAK1B/1C,kBAAkB0kB,EAAsB4gB,GACtC,MAAMmR,EAAsBnR,EAAMoR,kBAAkBz7C,IAAI0D,KAAK43C,aAAa37C,MAAM82C,cAChFhtB,EAAOiyB,kBAAkBh4C,KAAK43C,aAAcE,GAE5C93C,KAAKm3C,YAAY36B,QAAQ,CAACy7B,EAAsBC,KAC9C,MAAMhoB,EAAcnK,EAAOjb,SAASkpB,mBAAmBmkB,eAAeF,GAChEG,EAAqBzR,EAAMoR,kBAAkBz7C,IAAI4zB,EAAYj0B,MAAM82C,cACzEhtB,EAAOiyB,kBAAkB9nB,EAAakoB,KAI1C/2C,QAAQ0kB,EAAsB4gB,GAG5B,GAAI3mC,KAAKo3C,eAEP,GADArxB,EAAOjb,SAASkoC,wBACZrM,EAAM0R,oBAAqB,CAC7B,MAAMtF,EAAgBpM,EAAM2R,WAAWvF,cACvChtB,EAAOjb,SAAS/H,MAAM6pB,YACpBmmB,EAAcrmC,EAAGqmC,EAAcpmC,EAC/BomC,EAAcnmC,EAAGmmC,EAAc3kC,QAIjC2X,EAAOjb,SAAS/H,MAAMw1C,6BAGxBxyB,EAAOjb,SAASslB,gBAAgBpwB,KAAK43C,cACrC7xB,EAAOjb,SAAS/H,MAAM6pB,YAAY,EAAG,EAAG5sB,KAAK43C,aAAa18B,MAAOlb,KAAK43C,aAAaz8B,QAIxD,OAAzBnb,KAAKqxC,kBACPtrB,EAAOsrB,gBAAkBrxC,KAAKqxC,gBAC9BrxC,KAAKm3C,YAAY36B,QAAQ,CAACy7B,EAAsBnzB,KAC7CiB,EAAOsrB,gBAA4BtwB,WAAWgF,GAAQktB,4BACrDgF,EAAsBnzB,MAMxB9kB,KAAKk3C,wBACiBz7C,IAApBuE,KAAK0oB,YACP3C,EAAOjb,SAAS/H,MAAM0pB,YAAY9D,cAAc3oB,KAAK0oB,YAEvD3C,EAAOjb,SAAS/H,MAAM0pB,YAAY5D,SAEhC7oB,KAAKi3C,mBACFj3C,KAAKo3C,gBAAkBp3C,KAAK43C,aAAajnB,aAC5C5K,EAAOjb,SAAS/H,MAAM2pB,YAAY7D,aAIPptB,IAA3BuE,KAAKq3C,mBACPr3C,KAAKq3C,oBAIPr3C,KAAK8kC,OAAO15B,OAAOoR,QAAQpR,IACzB2a,EAAOjmB,OAAOsL,UAIc3P,IAA1BuE,KAAKs3C,kBACPt3C,KAAKs3C,mBAGPvxB,EAAOsrB,gBAAkB,KACzBtrB,EAAOjb,SAAS/H,MAAM0pB,YAAYxE,yBAG9B0e,EAAM0R,sBAAwBr4C,KAAKo3C,gBACrCp3C,KAAKw4C,kBAAkBzyB,EAAQ4gB,GAKnCtlC,eACE,GAAIrB,KAAKo3C,eACP,OAEF,MAAM/7C,EAAS2E,KAAK43C,aAAa37C,KACjC+D,KAAKm3C,YAAY36B,QAAQ1V,IACvB,GAAIA,IAAUzL,EACZ,qFACY2E,KAAK43C,aAAa37C,WC9I/B,MAAMw8C,GAAbp3C,cAEUrB,KAAA04C,OAAuB,GACvB14C,KAAA24C,QAA0C,IAAI14B,IAEtD5e,OAAO0kB,EAAsB4gB,GAC3B3mC,KAAK04C,OAAOl8B,QAAQo8B,IAClBA,EAAKC,QAAQ9yB,EAAQ4gB,KAIzBtlC,QACErB,KAAK04C,OAAS,GAGhBr3C,QAAQu3C,GACN54C,KAAK04C,OAAOxgD,KAAK0gD,GAGnBv3C,aAAag2B,EAAqByN,GAChC,MAAM8T,EAAO,IAAI5B,GAAWlS,GAC5B9kC,KAAK24C,QAAQ9oC,IAAIwnB,EAAMuhB,GAGzBv3C,QACErB,KAAK04C,OAAS,GACd14C,KAAK24C,QAAQ9vB,QAGfxnB,QAAQg2B,GACN,OAAOr3B,KAAK24C,QAAQr8C,IAAI+6B,IAOrB,MAAMqgB,GAAbr2C,cAKErB,KAAAq4C,qBAA+B,EAG/Br4C,KAAA+3C,kBAAmD,IAAI93B,IACvDjgB,KAAA84C,UAAwC,IAAI74B,IAE5C6X,YACE,MAAMA,EAAQ,GAOd,OANA93B,KAAK84C,UAAUt8B,QAAQ6a,IACrBS,EAAM5/B,KAAKm/B,KAEbr3B,KAAK+3C,kBAAkBv7B,QAAQ6a,IAC7BS,EAAM5/B,KAAKm/B,KAENS,EAQTz2B,QACErB,KAAK+3C,kBAAkBlvB,QACvB7oB,KAAK84C,UAAUjwB,QASjBxnB,YAAY03C,EAA0BC,GACpCh5C,KAAKyjC,QACLzjC,KAAKi5C,0BAA0BD,EAAYE,eAC3Cl5C,KAAKm5C,mBAAmBH,EAAYN,OAAQK,GAQ9C13C,OAAO0kB,EAAsBgzB,GAG3B/4C,KAAK84C,UAAUt8B,QAAQ6a,IACrBA,EAAK+hB,iBAAiBp5C,QAExBA,KAAK+3C,kBAAkBv7B,QAAQ6a,IAC7BA,EAAK+hB,iBAAiBp5C,QAIxB,MAAMq5C,EAAYr5C,KAAKs4C,WAAWrR,8BAClC8R,EAAStV,QACT4V,EAAU78B,QAAQ6a,IACZA,aAAgBiiB,IAClBjiB,EAAKkiB,WAAWxzB,KAGpBszB,EAAU78B,QAAQ6a,IAChB,GAAIA,aAAgBmiB,GAAe,CACjC,MAAMZ,EAAOG,EAASU,QAAQpiB,GAC9B,QAAa57B,IAATm9C,EACF,KAAM,MAERvhB,EAAKqiB,WAAW3zB,EAAQ6yB,EAAMS,GAC9BN,EAASY,QAAQf,MAKfv3C,mBAAmBu4C,EAA4Bb,GACrDa,EAAap9B,QAAQsoB,IACnB,GAAK9kC,KAAK84C,UAAU7xB,IAAI6d,EAAO7oC,MAK7B,KAAM,8BAL8B,CACpC,MAAMo7B,EAAO,IAAImiB,GAAcx5C,KAAM8kC,GACrC9kC,KAAK84C,UAAUjpC,IAAIi1B,EAAO7oC,KAAMo7B,GAChC0hB,EAASc,aAAaxiB,EAAMyN,MAOlCzjC,0BAA0BpF,GACxB,OAAO+D,KAAK+3C,kBAAkBz7C,IAAIL,GAGpCoF,wBAAwBpF,GACtB,OAAO+D,KAAK84C,UAAUx8C,IAAIL,GAG5BoF,0BACE,IAAIi3C,EAMJ,OALAt4C,KAAK+3C,kBAAkBv7B,QAAQ6a,IACzBA,EAAKyiB,eACPxB,EAAajhB,KAGVihB,EAGDj3C,0BAA0B04C,GAehC,GAdAA,EAAYv9B,QAAQsoB,IAClB,GAAI9kC,KAAK+3C,kBAAkB9wB,IAAI6d,EAAO7oC,MACpC,KAAM,8DAER,MAAMw7C,EAAmB,IAAI6B,GAAiBxU,GAC9C,GAAIA,EAAO7oC,OAASy7C,GAAYC,WAAY,CAC1C,QAAwBl8C,IAApBuE,KAAKs4C,WACP,KAAM,6BAERt4C,KAAKs4C,WAAab,EAEpBz3C,KAAK+3C,kBAAkBloC,IAAIi1B,EAAO7oC,KAAMw7C,UAGlBh8C,IAApBuE,KAAKs4C,WACP,KAAM,yBA3HHZ,GAAAC,WAAqB,8BACrBD,GAAAsC,WAAa,IAAIpY,GCxCnB,MAAM0X,WAAyB5V,GACpCriC,YAAYyjC,GACV1P,QA8BFp1B,KAAA+yC,cAAyB,IAAIxjC,GAAQ,EAAG,EAAG,IAAK,KAEhDvP,KAAAi6C,eAAyB,EACzBj6C,KAAAk6C,gBAA0B,EAC1Bl6C,KAAA2wB,aAAuB,EAEvB3wB,KAAAm6C,SAAmB,EACnBn6C,KAAAo6C,UAAoB,EAGZp6C,KAAAymC,KAAe,KAvCrBzmC,KAAK/D,KAAO6oC,EAAO7oC,KACnB+D,KAAK8kC,OAASA,EAEd9kC,KAAKq6C,WAAavV,EAAO2B,KAEzBzmC,KAAK85C,aAAehV,EAAO7oC,OAASy7C,GAAYC,WAC5C33C,KAAK85C,oBAKar+C,IAAlBqpC,EAAO9V,SACT8V,EAAO9V,OAAS,CACdsrB,YAAa/yB,GAAYoH,KACzB4rB,cAAetE,GAAcuE,iBAI7B1V,EAAO9V,OAAOurB,gBAAkBtE,GAAcuE,iBAChDx6C,KAAKi6C,oBAAyCx+C,IAAxBqpC,EAAO9V,OAAO9T,MAAsB3D,GAASxH,MAAM+0B,EAAO9V,OAAO9T,MAAO,EAAG,GAAK,EACtGlb,KAAKk6C,qBAA2Cz+C,IAAzBqpC,EAAO9V,OAAO7T,OAAuB5D,GAASxH,MAAM+0B,EAAO9V,OAAO7T,OAAQ,EAAG,GAAK,GAE3Gnb,KAAK2wB,iBAAmDl1B,IAArCqpC,EAAO9V,OAAOyrB,oBAAmC3V,EAAO9V,OAAOyrB,oBAmBpFp5C,uBAAuB0kB,GACrB,MAAM20B,EAAI30B,EAAOjb,SAASkpB,mBAAmBmkB,eAAen4C,KAAK/D,MACjE,OAAIy+C,GAGK30B,EAAOjb,SAASkpB,mBAAmB2mB,kBACxC50B,EAAQ/lB,KAAK/D,KAAM+D,KAAKm6C,SAAUn6C,KAAKo6C,UAAWp6C,KAAK2wB,aAI7DtvB,WAAW0kB,GACT,GAAI/lB,KAAK85C,aACP,OAEF,MAAMhV,EAAS9kC,KAAK8kC,OACpB,IAAI5pB,EACAC,EAEA2pB,EAAO9V,OAAOurB,gBAAkBtE,GAAc2E,OAChD1/B,OAAgCzf,IAAxBqpC,EAAO9V,OAAO9T,MAAsB4pB,EAAO9V,OAAO9T,MAAQ6K,EAAOjb,SAASoQ,MAClFC,OAAkC1f,IAAzBqpC,EAAO9V,OAAO7T,OAAuB2pB,EAAO9V,OAAO7T,OAAS4K,EAAOjb,SAASqQ,SAErFD,EAAQ3O,KAAK5G,IAAI,EAAGogB,EAAOjb,SAASoQ,MAAQlb,KAAKi6C,gBACjD9+B,EAAS5O,KAAK5G,IAAI,EAAGogB,EAAOjb,SAASqQ,OAASnb,KAAKk6C,kBAErDl6C,KAAKm6C,SAAW5tC,KAAK5G,IAAI,EAAGuV,GAC5Blb,KAAKo6C,UAAY7tC,KAAK5G,IAAI,EAAGwV,GAE7Bnb,KAAK63C,uBAAuB9xB,GAAQ80B,OAAO90B,EAAQ7K,EAAOC,GAG5D9Z,iBAAiBslC,GAOf,GAJA3mC,KAAK86C,eAEL96C,KAAKymC,KAAOzmC,KAAKq6C,aAEC,OAAdr6C,KAAKymC,KAAe,CACtB,MAAMsU,EAAWpU,EAAMqU,wBAAwBh7C,KAAKymC,MACpDsU,EAAS5V,UAAUnlC,QCtFlB,MAAMw5C,WAAsB9V,GACjCriC,YAAYslC,EAAoB7B,GAC9B1P,QAQMp1B,KAAAi7C,aAAiD,KACzDj7C,KAAAklC,OAA2B,GARzBllC,KAAK/D,KAAO6oC,EAAO7oC,UAEGR,IAAlBqpC,EAAOI,SACTllC,KAAKi7C,aAAenW,EAAOI,QAQ/B7jC,iBAAiBslC,GAEf3mC,KAAK86C,eAGqB,OAAtB96C,KAAKi7C,eACPj7C,KAAKklC,OAASllC,KAAKi7C,gBAErB,MAAM/V,EAASllC,KAAKklC,OAEpB/sC,OAAO4R,KAAKm7B,GAAQ1oB,QAAQ0+B,IAC1B,MAAMr2B,EAAkBqgB,EAAOgW,GACzBzD,EAAmB9Q,EAAMwU,0BAA0Bt2B,GACzD,QAAyBppB,IAArBg8C,EACF,8DAA+D5yB,eAEjE4yB,EAAiBtS,UAAUnlC,QAI/BqB,WAAW0kB,EAAsB6yB,EAAkBwC,GACjDxC,EAAKyC,mBAAmBr7C,KAAKklC,QAC7B,IAAIoW,EAAc,KAClB,GAA0B,IAAtBt7C,KAAK2jC,QAAQnd,KACf,KAAM,kDAERxmB,KAAK2jC,QAAQnnB,QAAQ6a,IACnB,GAAIA,aAAgBiiB,GAClB,IAAK,IAAIxhD,EAAI,EAAGA,EAAIsjD,EAAYpjD,OAAQF,IACtC,GAAIsjD,EAAYtjD,KAAOu/B,EAAM,CAC3B,GAAoB,OAAhBikB,EACF,kHACgBA,EAAYr/C,iCACjBm/C,EAAYtjD,GAAGmE,wBAG5Bq/C,EAAcjkB,EACduhB,EAAK2C,gBAAgBx1B,EAAQsR,MAKrCuhB,EAAK4C,gBCzDT,MAAMC,GAAgB,IAAI7Q,GAAe,CACvCx/B,OACE,yFAKG,MAAMmmC,WAAsBpD,GAEjC9sC,SAASslC,GACPA,EACG0H,cAAcvC,MACd4P,oBACAnN,gBACCkN,GAAc1P,OAAOjlC,MAAM,SAAU6/B,EAAM8H,QAAQvC,OCnBpD,MAAMyP,GAAY,IAAI/Q,GAAe,CAC1CR,YAAa,4BACbh/B,OAAQ,2SAWGwwC,GAAc,IAAIhR,GAAe,CAC5CR,YAAa,iCACbh/B,OAAQ,8LCfGywC,GAAO,IAAIjR,GAAe,CACrCx/B,OAAQ,gEAWG0wC,IARS,IAAIlR,GAAe,CACvCx/B,OAAQ,6GAOa,IAAIw/B,GAAe,CACxCx/B,OAAQ,kMCJJ2wC,GAAoB,IAAInR,GAAe,CAC3Cx/B,OAAQ,yHAOJ4wC,GAAkC,IAAIpR,GAAe,CACzDx/B,OAAQ,gLASJ6wC,GAAW,IAAIrR,GAAe,CAClCx/B,OAAQ,8LAWJ8wC,GAAW,IAAItR,GAAe,CAClCx/B,OAAQ,mKAOH,MAAM+wC,WAAqBhO,GAAlC9sC,kCAGErB,KAAAo8C,YAAsB,EAGtBp8C,KAAAq8C,gBAA2B,IAAIpqC,GAG/BjS,KAAAs8C,SAAmB,EAEnBj7C,SAASslC,GACP,MAAMlmB,EAAWkrB,GAAa5rB,GAAoBU,UAC5C27B,EAAcp8C,KAAKu8C,mBAAmB,eACtCC,EAAWhR,GAAQ,eACzB7E,EACG0H,cAAcrC,MACdsC,gBAEH,MAAMmO,EAAM9V,EAAM8H,QAAQxC,IACpByQ,EAAQd,GAAY7P,OAAOjlC,MAAM,MAAO01C,EAAShO,MAAMiO,IAEvDE,EAAgBxR,GAAiBY,OACpCjlC,MAAM,KAAM21C,GACZ31C,MAAM,QAAS41C,GACf51C,MAAM,WAAY2Z,GAClB3Z,MAAM,kBAAmB9G,KAAKu8C,mBAAmB,oBAE9CK,EAAYd,GAAQ/P,OACvBjlC,MAAM,OAAQ21C,GACd31C,MAAM,IAAKs1C,GAERS,EAAYhB,GAAK9P,OACtBjlC,MAAM,IAAK81C,GAENE,EAAUvR,GAAMQ,OACnBjlC,MAAM,IAAK81C,GACX91C,MAAM,IAAK+1C,GAERE,EAAkBhB,GAAkBhQ,OACvCjlC,MAAM,cAAe61C,EAAclQ,UAAU,QAC7C3lC,MAAM,WAAY9G,KAAKu8C,mBAAmB,aAC1Cz1C,MAAM,MAAOg2C,GAEVE,EAAWpB,GAAY7P,OAC1BjlC,MAAM,MACL01C,EAAShO,MACPpD,GAAUW,OACPjlC,MACC,MAAOk1C,GAAgCjQ,OACpCjlC,MACC,WAAYi2C,GACZj2C,MACA,SAAU2Z,MAMxBkmB,EAAM4H,gBACJ2N,GAASnQ,OACNjlC,MAAM,WAAY0kC,GAAQ,SAASgD,MAAMiO,GAAKhQ,UAAU,QACxD3lC,MAAM,WACLm1C,GAASlQ,OACNjlC,MAAM,QAAS41C,GACf51C,MAAM,WAAYk2C,IAEtBl2C,MAAM,cAAes1C,KAhE5Ba,GAAA,MADCnP,GAAW,qDAIZmP,GAAA,MADCnP,GAAW,2DAIZmP,GAAA,MADCnP,GAAW,+CCpDd,MAAMoP,GAAa,IAAItS,GAAe,CACpCx/B,OAAQ,mcAgBH,MAAM+xC,WAA0BhP,GAAvC9sC,kCAGErB,KAAAo8C,YAAsB,EAGtBp8C,KAAAo9C,iBAA2B,EAG3Bp9C,KAAAq9C,mBAA6B,IAG7Br9C,KAAAs9C,sBAAgC,GAEhCj8C,SAASslC,GACPA,EACG0H,cAAcrC,MACdsC,gBACAC,gBACC2O,GAAWnR,OACRjlC,MAAM,QAAS0kC,GAAQ,SAASgD,MAAM7H,EAAM8H,QAAQxC,KAAaQ,UAAU,QAC3E3lC,MAAM,UAAW0kC,GAAQ,SAASgD,MAAM7H,EAAM8H,QAAQxC,KAAaQ,UAAU,QAC7E3lC,MAAM,cAAe9G,KAAKu8C,mBAAmB,gBAC7Cz1C,MAAM,mBAAoB9G,KAAKu8C,mBAAmB,qBAClDz1C,MAAM,qBAAsB9G,KAAKu8C,mBAAmB,uBACpDz1C,MAAM,wBAAyB9G,KAAKu8C,mBAAmB,4BAtBhEU,GAAA,MADCnP,GAAW,qDAIZmP,GAAA,MADCnP,GAAW,+DAIZmP,GAAA,MADCnP,GAAW,mEAIZmP,GAAA,MADCnP,GAAW,yEC1Bd,MAAMyP,GAAS,IAAI3S,GACjB,CACEx/B,OAAQ,6GAOL,MAAMoyC,WAAqBrP,GAEhC9sC,SAASslC,GACP,MAAMgW,EAAgB7Q,KACtBnF,EAAM0H,cAAcsO,GACjBnQ,QAAQ,QAAS+Q,GAAOxR,OAAOjlC,MAAM,gBAAiB61C,IACtDpO,gBACCoN,GAAU5P,OAAOjlC,MAAM,aAAc6/B,EAAM8H,QAAQ,YCd3D,MAAMgP,GAAS,IAAI7S,GAAe,CAChCx/B,OACE,iqBAoBG,MAAMsyC,WAAmBvP,GAAhC9sC,kCAGErB,KAAAq8C,gBAA2B,IAAIpqC,GAG/BjS,KAAAo8C,YAAsB,EAEtB/6C,SAASslC,GACPA,EACG0H,cAAcrC,MACdsC,gBAEH,MAAMmO,EAAM9V,EAAM8H,QAAQxC,IACpByQ,EAAQd,GAAY7P,OAAOjlC,MAAM,MAAO0kC,GAAQ,eAAegD,MAAMiO,IAErEkB,EAAWnS,GAAQ,iBAAiBgD,MACxCpD,GAAUW,OAAOjlC,MAAM,MACrBwkC,GAAgBS,OACbjlC,MAAM,MACLukC,GAAaU,OACVjlC,MAAM,QAAS41C,GACf51C,MAAM,KAAM6/B,EAAM8H,QAAQxC,MAE9BnlC,MAAM,kBAAmB9G,KAAKu8C,mBAAmB,oBACjDz1C,MAAM,eAAgB6kC,GAAa5rB,GAAoBW,iBAI9DimB,EAAM4H,gBACJkP,GAAO1R,OACJjlC,MAAM,WAAY62C,EAASlR,UAAU,QACrC3lC,MAAM,WAAY0kC,GAAQ,eAAegD,MAAMiO,GAAKhQ,UAAU,QAC9D3lC,MAAM,cAAe9G,KAAKu8C,mBAAmB,kBA9BpDU,GAAA,MADCnP,GAAW,2DAIZmP,GAAA,MADCnP,GAAW,qDC/BP,MAAM8P,WAAuBte,GAClCj+B,YAAYuN,EAAiBmyB,EAAwBC,EACnD6c,EAAmBC,EAAoBC,EAAqBC,GAC5D5oB,QAYFp1B,KAAA/D,KAAO,iBACP+D,KAAA4O,OAAS,EACT5O,KAAA+gC,cAAgB,GAChB/gC,KAAAghC,eAAiB,GACjBhhC,KAAA69C,SAAW,EACX79C,KAAA89C,UAAsB,EAAVvxC,KAAKgF,GACjBvR,KAAA+9C,WAAa,EACb/9C,KAAAg+C,YAAwB,EAAVzxC,KAAKgF,GAlBjBvR,KAAK4O,YAAoBnT,IAAXmT,EAAuBA,EAAS,EAC9C5O,KAAK+gC,cAAgBx0B,KAAK5G,IAAI,EAAG4G,KAAK0D,MAAM8wB,IAAkB,GAC9D/gC,KAAKghC,eAAiBz0B,KAAK5G,IAAI,EAAG4G,KAAK0D,MAAM+wB,IAAmB,GAChEhhC,KAAK69C,cAAwBpiD,IAAboiD,EAAyBA,EAAW,EACpD79C,KAAK89C,eAA0BriD,IAAdqiD,EAA0BA,EAAsB,EAAVvxC,KAAKgF,GAC5DvR,KAAK+9C,gBAA4BtiD,IAAfsiD,EAA2BA,EAAa,EAC1D/9C,KAAKg+C,iBAA8BviD,IAAhBuiD,EAA4BA,EAAczxC,KAAKgF,GAClEvR,KAAKi+C,SAAWj+C,KAAK+9C,WAAa/9C,KAAKg+C,YAEvCh+C,KAAKihC,WAYP5/B,WAEE,IAAIgN,EAAYC,EACZtJ,EAAQ,EACRk5C,EAAO,GACPjzC,EAAS,IAAIwB,GAAQ,EAAG,EAAG,GAC3BqzB,EAAS,IAAIrzB,GAAQ,EAAG,EAAG,GAI3B8yB,EAAU,GACVC,EAAW,GACXC,EAAU,GACVC,EAAM,GAEV,IAAKpxB,EAAK,EAAGA,GAAMtO,KAAKghC,eAAgB1yB,IAAM,CAC5C,IAAI6vC,EAAc,GACdpxC,EAAIuB,EAAKtO,KAAKghC,eAClB,IAAK3yB,EAAK,EAAGA,GAAMrO,KAAK+gC,cAAe1yB,IAAM,CAC3C,IAAI+vC,EAAI/vC,EAAKrO,KAAK+gC,cAElB91B,EAAOyB,GAAM1M,KAAK4O,OAASrC,KAAKuC,IAAI9O,KAAK69C,SAAWO,EAAIp+C,KAAK89C,WAAavxC,KAAKmC,IAAI1O,KAAK+9C,WAAahxC,EAAI/M,KAAKg+C,aAC9G/yC,EAAO0B,EAAI3M,KAAK4O,OAASrC,KAAKuC,IAAI9O,KAAK+9C,WAAahxC,EAAI/M,KAAKg+C,aAC7D/yC,EAAO2B,EAAI5M,KAAK4O,OAASrC,KAAKmC,IAAI1O,KAAK69C,SAAWO,EAAIp+C,KAAK89C,WAAavxC,KAAKmC,IAAI1O,KAAK+9C,WAAahxC,EAAI/M,KAAKg+C,aAC5Gxe,EAAStnC,KAAK+S,EAAOyB,EAAGzB,EAAO0B,EAAG1B,EAAO2B,GAEzCkzB,EAAOjwB,IAAI5E,EAAOyB,EAAGzB,EAAO0B,EAAG1B,EAAO2B,GAAGwD,YACzCqvB,EAAQvnC,KAAK4nC,EAAOpzB,EAAGozB,EAAOnzB,EAAGmzB,EAAOlzB,GAExC8yB,EAAIxnC,KAAKkmD,EAAG,EAAIrxC,GAChBoxC,EAAYjmD,KAAK8M,KAEnBk5C,EAAKhmD,KAAKimD,GAIZ,IAAK7vC,EAAK,EAAGA,EAAKtO,KAAKghC,eAAgB1yB,IACrC,IAAKD,EAAK,EAAGA,EAAKrO,KAAK+gC,cAAe1yB,IAAM,CAC1C,IAAIf,EAAI4wC,EAAK5vC,GAAID,EAAK,GAClBd,EAAI2wC,EAAK5vC,GAAID,GACbtS,EAAImiD,EAAK5vC,EAAK,GAAGD,GACjBrS,EAAIkiD,EAAK5vC,EAAK,GAAGD,EAAK,IACf,IAAPC,GAAYtO,KAAK+9C,WAAa,IAAGxe,EAAQrnC,KAAKoV,EAAGC,EAAGvR,IACpDsS,IAAOtO,KAAKghC,eAAiB,GAAKhhC,KAAKi+C,SAAW1xC,KAAKgF,KAAIguB,EAAQrnC,KAAKqV,EAAGxR,EAAGC,GAItFgE,KAAKjD,OAAOwiC,EAASC,EAAUC,EAASC,ICxErC,MAAM2e,WAAqB/e,GAChCj+B,YAAY6Z,EAAgBC,EAAiBuhC,EAC3C3b,EAAwBC,EAAyBsd,GACjDlpB,QAWFp1B,KAAAkb,MAAgB,EAChBlb,KAAAmb,OAAiB,EACjBnb,KAAA08C,MAAgB,EAChB18C,KAAA+gC,cAAwB,EACxB/gC,KAAAghC,eAAyB,EACzBhhC,KAAAs+C,cAAwB,OAfR7iD,IAAVyf,IAAuBlb,KAAKkb,MAAQA,QACzBzf,IAAX0f,IAAwBnb,KAAKmb,OAASA,QAC5B1f,IAAVihD,IAAuB18C,KAAK08C,MAAQA,QAClBjhD,IAAlBslC,IAA+B/gC,KAAK+gC,cAAgBA,QACjCtlC,IAAnBulC,IAAgChhC,KAAKghC,eAAiBA,QACpCvlC,IAAlB6iD,IAA+Bt+C,KAAKs+C,cAAgBA,GAExDt+C,KAAKihC,WAUP5/B,WAEE,MAAMk+B,EAAU,GACVC,EAAW,GACXC,EAAU,GACVC,EAAM,GAEZ,IAAI6e,EAAmB,EAEvB,SAASC,EACPJ,EACArxC,EACAqB,EACAqwC,EACAC,EACAxjC,EACAC,EACAuhC,EACAtb,EACAC,GAEA,MAAMsd,EAAezjC,EAAQkmB,EACvBwd,EAAgBzjC,EAASkmB,EAEzBwd,EAAY3jC,EAAQ,EACpB4jC,EAAa3jC,EAAS,EACtB4jC,EAAYrC,EAAQ,EAEpBpb,EAASF,EAAQ,EACjBG,EAASF,EAAQ,EAEvB,IAAIhzB,EAAYC,EAEhB,MAAM0wC,EAAS,IAAIvyC,GACnB,IAAIwyC,EAAgB,EAIpB,IAAK3wC,EAAK,EAAGA,EAAKizB,EAAQjzB,IAAM,CAC9B,IAAI3B,EAAI2B,EAAKswC,EAAgBE,EAC7B,IAAKzwC,EAAK,EAAGA,EAAKizB,EAAQjzB,IAAM,CAC9B,IAAI3B,EAAI2B,EAAKswC,EAAeE,EAG5BG,EAAOZ,GAAK1xC,EAAI+xC,EAChBO,EAAOjyC,GAAKJ,EAAI+xC,EAChBM,EAAO5wC,GAAK2wC,EAGZvf,EAAStnC,KAAK8mD,EAAOtyC,EAAGsyC,EAAOryC,EAAGqyC,EAAOpyC,GAGzCoyC,EAAOZ,GAAK,EACZY,EAAOjyC,GAAK,EACZiyC,EAAO5wC,GAAKsuC,EAAQ,EAAI,GAAM,EAG9Bjd,EAAQvnC,KAAK8mD,EAAOtyC,EAAGsyC,EAAOryC,EAAGqyC,EAAOpyC,GAGxC8yB,EAAIxnC,KAAKmW,EAAK+yB,GACd1B,EAAIxnC,KAAK,EAAKoW,EAAK+yB,GAEnB4d,GAAiB,GAQrB,IAAK3wC,EAAK,EAAGA,EAAK+yB,EAAO/yB,IACvB,IAAKD,EAAK,EAAGA,EAAK+yB,EAAO/yB,IAAM,CAC7B,IAAIf,EAAIixC,EAAmBlwC,EAAKizB,EAAShzB,EACrCf,EAAIgxC,EAAmBlwC,EAAKizB,GAAUhzB,EAAK,GAC3CvS,EAAIwiD,GAAoBlwC,EAAK,GAAKizB,GAAUhzB,EAAK,GACjDtS,EAAIuiD,GAAoBlwC,EAAK,GAAKizB,EAAShzB,EAG/CixB,EAAQrnC,KAAKoV,EAAGC,EAAGvR,GACnBujC,EAAQrnC,KAAKqV,EAAGxR,EAAGC,GAIvBuiD,GAAoBU,EAKtBT,EAAW,IAAK,IAAK,KAAO,GAAK,EAAGx+C,KAAK08C,MAAO18C,KAAKmb,OAAQnb,KAAKkb,MAAOlb,KAAKs+C,cAAet+C,KAAKghC,gBAClGwd,EAAW,IAAK,IAAK,IAAK,GAAK,EAAGx+C,KAAK08C,MAAO18C,KAAKmb,QAAWnb,KAAKkb,MAAOlb,KAAKs+C,cAAet+C,KAAKghC,gBACnGwd,EAAW,IAAK,IAAK,IAAK,EAAG,EAAGx+C,KAAKkb,MAAOlb,KAAK08C,MAAO18C,KAAKmb,OAAQnb,KAAK+gC,cAAe/gC,KAAKs+C,eAC9FE,EAAW,IAAK,IAAK,IAAK,GAAK,EAAGx+C,KAAKkb,MAAOlb,KAAK08C,OAAU18C,KAAKmb,OAAQnb,KAAK+gC,cAAe/gC,KAAKs+C,eACnGE,EAAW,IAAK,IAAK,IAAK,GAAK,EAAGx+C,KAAKkb,MAAOlb,KAAKmb,OAAQnb,KAAK08C,MAAO18C,KAAK+gC,cAAe/gC,KAAKghC,gBAChGwd,EAAW,IAAK,IAAK,KAAO,GAAK,EAAGx+C,KAAKkb,MAAOlb,KAAKmb,QAAWnb,KAAK08C,MAAO18C,KAAK+gC,cAAe/gC,KAAKghC,gBAErGhhC,KAAKjD,OAAOwiC,EAASC,EAAUC,EAASC,ICtHrC,MAAMwf,GACX79C,gBCFK,MAAM89C,GAOX99C,YAAYuN,EAAiBD,EAAgBE,GALtC7O,KAAAub,OAAS,IAAI9O,GAMlBzM,KAAK4O,YAAoBnT,IAAXmT,EAAuBA,EAAS,EAC9C5O,KAAK2O,WAAkBlT,IAAVkT,EAAsBA,EAAQ,EAC3C3O,KAAK6O,UAAgBpT,IAAToT,EAAqBA,EAAO,EAGnCxN,IAAIuN,EAAgBD,EAAeE,GAIxC,OAHA7O,KAAK4O,OAASA,EACd5O,KAAK2O,MAAQA,EACb3O,KAAK6O,KAAOA,EACL7O,KAGFqB,KAAKjI,GACV,OAAO4G,KAAK6P,IAAIzW,EAAEwV,OAAQxV,EAAEuV,MAAOvV,EAAEyV,MAGhCxN,QACL,OAAO,IAAI89C,GAAUn/C,KAAK4O,OAAQ5O,KAAK2O,MAAO3O,KAAK6O,MAG9CxN,cAAc0L,GASnB,OARA/M,KAAK4O,OAAS7B,EAAE/U,SACI,IAAhBgI,KAAK4O,QACP5O,KAAK2O,MAAQ,EACb3O,KAAK6O,KAAO,IAEZ7O,KAAK2O,MAAQpC,KAAKkD,KAAK8H,GAASxH,MAAOhD,EAAEJ,EAAI3M,KAAK4O,QAAU,EAAG,IAC/D5O,KAAK6O,KAAOtC,KAAKyN,MAAMjN,EAAEL,EAAGK,EAAEH,IAEzB5M,MChCX,MAAMo/C,GAAU,IAAI3yC,GAEb,MAAM4yC,WAAwBH,GAEnC79C,YAAmB2wC,GACjB5c,QADiBp1B,KAAAgyC,SASnBhyC,KAAAs/C,UAAuB,IAAIH,GAC3Bn/C,KAAAu/C,kBAAoB,GACpBv/C,KAAAw/C,UAAY,KAGZx/C,KAAAy/C,cAAgB,IAAM,IAAMlzC,KAAKgF,GACjCvR,KAAA0/C,cAAgB,GAGhB1/C,KAAA2/C,eAA4B,IAAIR,GAAU,EAAG,EAAG,GAChDn/C,KAAA4/C,cAAwB,EACxB5/C,KAAA6/C,UAAqB,IAAIpzC,GAEzBzM,KAAA8/C,eAAgB,EAChB9/C,KAAA+/C,cAAgB,IAChB//C,KAAAggD,iBAAmB,GAenBhgD,KAAAigD,OAAS,CAAC5wC,IACR,MAAM6wC,EAAgC,IAApBlgD,KAAKgyC,OAAO92B,MACxBilC,EAAkC,IAArBngD,KAAKgyC,OAAO72B,OAE/Bnb,KAAK2/C,eAAehxC,OAASU,EAAO1C,EAAIwzC,EAAa5zC,KAAKgF,GAAKvR,KAAKu/C,kBACpEv/C,KAAK2/C,eAAe9wC,MAAQQ,EAAO3C,EAAIwzC,EAAY3zC,KAAKgF,GAAKvR,KAAKu/C,kBAElEv/C,KAAKyvB,YAAa,IAEpBzvB,KAAAm5B,KAAO,CAAC9L,IACNrtB,KAAK4/C,cAAgBvyB,EACrBrtB,KAAKyvB,YAAa,IAEpBzvB,KAAAogD,KAAO,CAAC/wC,IACNA,EAAO4wC,QAAQjgD,KAAKs/C,UAAUzwC,MAAMzB,eAAepN,KAAKs/C,UAAU1wC,OAAS5O,KAAKw/C,WAGhFx/C,KAAK6/C,UAAUnzC,GAAK2C,EAAO3C,EAC3B1M,KAAK6/C,UAAUjzC,GAAKyC,EAAO1C,EAC3B3M,KAAKyvB,YAAa,IAGbzvB,KAAAyvB,YAAsB,EA3D3BzvB,KAAKgyC,OAASA,EAEd,MAAMjlC,EAAI,IAAIN,GACdM,EAAE+J,KAAKk7B,EAAOpb,UAAUvjB,UAAU0D,IAAI/W,KAAKs/C,UAAU/jC,QACrDvb,KAAKs/C,UAAUe,cAActzC,GAqBxB1L,mBAAmB4wC,QACAx2C,IAApBuE,KAAKiyC,YACPjyC,KAAKiyC,WAAWqO,4BAA4BtgD,MAE9CA,KAAKiyC,WAAaA,EAClBjyC,KAAKiyC,WAAWsO,kBAAkBvgD,KAAMA,KAAKigD,QAC7CjgD,KAAKiyC,WAAWuO,mBAAmBxgD,KAAMA,KAAKogD,MAC9CpgD,KAAKiyC,WAAWwO,eAAezgD,KAAMA,KAAKm5B,MA8BrC93B,UAEDkL,KAAKc,IAAIrN,KAAK2/C,eAAe9wC,MAAQ,MACvCtC,KAAKc,IAAIrN,KAAK2/C,eAAehxC,OAAS,MACtCpC,KAAKc,IAAIrN,KAAK2/C,eAAe/wC,QAAU,MACvCrC,KAAKc,IAAIrN,KAAK4/C,cAAgB,GAAK,MACnC5/C,KAAK6/C,UAAU5yC,MAAQ,OAEvBjN,KAAKyvB,YAAa,GAIhBzvB,KAAKyvB,aACPzvB,KAAKs/C,UAAU1wC,QAAU5O,KAAK4/C,cAE9B5/C,KAAKs/C,UAAUzwC,MAAQ7O,KAAK2/C,eAAe9wC,KAE3C7O,KAAKs/C,UAAU3wC,MAAQ4I,GAASxH,MAC9B/P,KAAKs/C,UAAU3wC,MAAQ3O,KAAK2/C,eAAehxC,MAC3C3O,KAAK0/C,cAAe1/C,KAAKy/C,eAE3Bz/C,KAAKs/C,UAAU/jC,OAAO9K,IAAIzQ,KAAK6/C,WAE/BT,GAAQsB,iBAAiB1gD,KAAKs/C,WAAW7uC,IAAIzQ,KAAKs/C,UAAU/jC,QAC5Dvb,KAAKgyC,OAAOpb,UAAUvjB,SAASyD,KAAKsoC,IACpCp/C,KAAKgyC,OAAOnY,OAAO75B,KAAKs/C,UAAU/jC,SAEpCvb,KAAKyvB,YAAa,GAGS,IAAvBzvB,KAAK8/C,eACP9/C,KAAK2/C,eAAe9wC,MAAS,EAAI7O,KAAK+/C,cACtC//C,KAAK2/C,eAAehxC,OAAU,EAAI3O,KAAK+/C,cACvC//C,KAAK4/C,cAAgB5/C,KAAK4/C,eAAiB,EAAI5/C,KAAK4/C,eAAiB5/C,KAAK+/C,cAC1E//C,KAAK6/C,UAAUzyC,eAAe,EAAIpN,KAAKggD,oBAEvChgD,KAAK2/C,eAAe9vC,IAAI,EAAG,EAAG,GAC9B7P,KAAK4/C,cAAgB,EACrB5/C,KAAK6/C,UAAUhwC,IAAI,EAAG,EAAG,KChH/B,MAAM8wC,GAAK,IAAIl0C,GACT8D,GAAK,IAAI9D,GACTm0C,GAAK,IAAIn0C,GACTo0C,GAAM,IAAIp0C,GACVq0C,GAAM,IAAIr0C,GACVs0C,GAAI,IAAIt0C,GAEP,SAASu0C,GAA2BxhB,GACzC,MAAMyhB,EAAkBzhB,EAASxnC,OAC3B6N,EAAO,EACP45B,EAAU,IAAI3yB,aAAam0C,GAEjC,IAAK,IAAInpD,EAAI,EAAGA,EAAImpD,EAAiBnpD,GAAK+N,EACtC86C,GAAG9wC,IAAI2vB,EAAS1nC,EAAI,GAAI0nC,EAAS1nC,EAAI,GAAI0nC,EAAS1nC,EAAI,IACtDyY,GAAGV,IAAI2vB,EAAS1nC,EAAI,GAAI0nC,EAAS1nC,EAAI,GAAI0nC,EAAS1nC,EAAI,IACtD8oD,GAAG/wC,IAAI2vB,EAAS1nC,EAAI,GAAI0nC,EAAS1nC,EAAI,GAAI0nC,EAAS1nC,EAAI,IACtD+oD,GAAI/pC,KAAKvG,IAAIwG,IAAI4pC,IACjBG,GAAIhqC,KAAK8pC,IAAI7pC,IAAI4pC,IACjBI,GAAEjzC,aAAa+yC,GAAKC,IACpBC,GAAE3wC,YACFqvB,EAAQ3nC,EAAI,GAAKipD,GAAEr0C,EACnB+yB,EAAQ3nC,EAAI,GAAKipD,GAAEp0C,EACnB8yB,EAAQ3nC,EAAI,GAAKipD,GAAEn0C,EACnB6yB,EAAQ3nC,EAAI,GAAKipD,GAAEr0C,EACnB+yB,EAAQ3nC,EAAI,GAAKipD,GAAEp0C,EACnB8yB,EAAQ3nC,EAAI,GAAKipD,GAAEn0C,EACnB6yB,EAAQ3nC,EAAI,GAAKipD,GAAEr0C,EACnB+yB,EAAQ3nC,EAAI,GAAKipD,GAAEp0C,EACnB8yB,EAAQ3nC,EAAI,GAAKipD,GAAEn0C,EAGvB,OAAO6yB,ECvBF,MAAeyhB,GAAtB7/C,cACErB,KAAA/D,KAAe,kBAaV,MAAeklD,WAAuBD,ICTtC,MAAME,WAAkBD,GAA/B9/C,kCACUrB,KAAAqhD,cAAgB,sEAGhBrhD,KAAAshD,cAAgB,uEAGhBthD,KAAAuhD,UAAY,iDAGZvhD,KAAAwhD,aAAe,6BAGfxhD,KAAAyhD,aAAe,yCAGfzhD,KAAA0hD,aAAe,mDAGf1hD,KAAA2hD,aAAe,2CAqCf3hD,KAAA4hD,UAAuB,GACvB5hD,KAAAy/B,QAAqB,GACrBz/B,KAAA0/B,IAAiB,GAEjB1/B,KAAA6hD,gBAA4B,GAC5B7hD,KAAA8hD,wBAAqC,GACrC9hD,KAAA+hD,mBAAgC,GAChC/hD,KAAAgiD,uBAAoC,GAEpChiD,KAAAiiD,aAAsE,GACtEjiD,KAAAkiD,qBAA+B,EAyG/BliD,KAAAmiD,kCAAoC,CAACC,IAC3C,MAAMC,EAAeriD,KAAKsiD,gBAAgBF,GAC1C,IAAK,IAAIG,EAAI,EAAGA,EAAIF,EAAarqD,OAAQuqD,IAAK,CAG5C,IAAI5kB,EAAQ0kB,EAAaE,GAAGt2C,MAAM,MAE9Bu2C,EAAwBC,SAAS9kB,EAAM,IAAM,EAC7C+kB,EAAsBD,SAAS9kB,EAAM,IAAM,EAE/C39B,KAAK2iD,QACHH,EACA,EACAE,EACA1iD,KAAK4hD,UAAUY,GACf,IAAIvnC,GAAQ,EAAG,GACfjb,KAAKy/B,QAAQijB,OAtKXrhD,gBAAgBuhD,GACtB,MAAMC,EAAsB,GAE5B,OADA7iD,KAAK8iD,aAAaF,EAAO,EAAGC,GACrBA,EAGDxhD,aAAa+gD,EAAgBr1C,EAAWg2C,GAO1Ch2C,EAAI,EAAIq1C,EAAKpqD,SAEf+qD,EAAa7qD,KAAKkqD,EAAK,GAAIA,EAAKr1C,GAAIq1C,EAAKr1C,EAAI,IAE7CA,GAAK,EAEL/M,KAAK8iD,aAAaV,EAAMr1C,EAAGg2C,IAI/B1hD,QACErB,KAAK4hD,UAAY,GACjB5hD,KAAKy/B,QAAU,GACfz/B,KAAK0/B,IAAM,GACX1/B,KAAK6hD,gBAAkB,GACvB7hD,KAAK8hD,wBAA0B,GAC/B9hD,KAAK+hD,mBAAqB,GAC1B/hD,KAAKgiD,uBAAyB,GAC9BhiD,KAAKiiD,aAAe,GACpBjiD,KAAKkiD,qBAAuB,EAetB7gD,UAAUgS,EAAkBysB,GAC7B9/B,KAAKiiD,aAAa5uC,KACrBrT,KAAKiiD,aAAa5uC,GAAY,CAAEosB,QAAS,GAAIujB,IAAK,KAEpD,MAAMA,EAAMhjD,KAAKiiD,aAAa5uC,GAAUosB,QAAQ/H,QAAQoI,GACxD,OAAgB,IAATkjB,GAAc,EAAIhjD,KAAKiiD,aAAa5uC,GAAU2vC,IAAIA,GAInD3hD,QACNmhD,EACAS,EACAP,EACAQ,EACAC,EACAC,GAIA,MAAMp+C,GAAS,GAGA,IAAXA,GAIFhF,KAAK6hD,gBAAgB3pD,KAAK8H,KAAK8hD,wBAAwB9pD,QACvDgI,KAAK8hD,wBAAwB5pD,KAAKgrD,GAClCljD,KAAK+hD,mBAAmB7pD,KAAKirD,GAC7BnjD,KAAKgiD,uBAAuB9pD,KAAKkrD,GAIjCpjD,KAAKkiD,wBAKLliD,KAAK6hD,gBAAgB3pD,KAAK8M,GAItB3D,kCAAkC+gD,GACxC,MAAMC,EAAeriD,KAAKsiD,gBAAgBF,GAG1C,IAAK,IAAIG,EAAI,EAAGA,EAAIF,EAAarqD,OAAQuqD,IAAK,CAE5C,IAAIC,EAAwBC,SAASJ,EAAaE,IAAM,EACxDviD,KAAK2iD,QACHH,EACA,EAAG,EACHxiD,KAAK4hD,UAAUY,GACf,IAAIvnC,GAAW,IAAIxO,GAAQ,EAAG,EAAG,KAK/BpL,kCAAkC+gD,GACxC,MAAMC,EAAeriD,KAAKsiD,gBAAgBF,GAC1C,IAAK,IAAIG,EAAI,EAAGA,EAAIF,EAAarqD,OAAQuqD,IAAK,CAG5C,IAAI5kB,EAAQ0kB,EAAaE,GAAGt2C,MAAM,KAE9Bu2C,EAAwBC,SAAS9kB,EAAM,IAAM,EAE7CslB,EAAmBR,SAAS9kB,EAAM,IAAM,EAE5C39B,KAAK2iD,QACHH,EACAS,EACA,EACAjjD,KAAK4hD,UAAUY,GACfxiD,KAAK0/B,IAAIujB,GACT,IAAIx2C,GAAQ,EAAG,EAAG,KAKhBpL,kCAAkC+gD,GACxC,MAAMC,EAAeriD,KAAKsiD,gBAAgBF,GAC1C,IAAK,IAAIG,EAAI,EAAGA,EAAIF,EAAarqD,OAAQuqD,IAAK,CAG5C,IAAI5kB,EAAQ0kB,EAAaE,GAAGt2C,MAAM,KAE9Bu2C,EAAwBC,SAAS9kB,EAAM,IAAM,EAE7CslB,EAAmBR,SAAS9kB,EAAM,IAAM,EAExC+kB,EAAsBD,SAAS9kB,EAAM,IAAM,EAE/C39B,KAAK2iD,QACHH,EAAuBS,EAAkBP,EACzC1iD,KAAK4hD,UAAUY,GACfxiD,KAAK0/B,IAAIujB,GACTjjD,KAAKy/B,QAAQijB,KA2BnBrhD,MAAMgiD,EAAgBC,GACpBtjD,KAAKyjC,QAGL,MAAMz3B,EAAQq3C,EAAOp3C,MAAM,MAC3B,IAAK,IAAInU,EAAI,EAAGA,EAAIkU,EAAMhU,OAAQF,IAAK,CACrC,MAAM+mC,EAAO7yB,EAAMlU,GAAG0rC,OACtB,IAAI3qC,EAGgB,IAAhBgmC,EAAK7mC,QAAmC,MAAnB6mC,EAAK0kB,OAAO,KAGmB,QAA5C1qD,EAASmH,KAAKqhD,cAAcmC,KAAK3kB,IAC3C7+B,KAAK4hD,UAAU1pD,KAAK,IAAIuU,GACtBg3C,WAAW5qD,EAAO,IAClB4qD,WAAW5qD,EAAO,IAClB4qD,WAAW5qD,EAAO,MAEkC,QAA5CA,EAASmH,KAAKshD,cAAckC,KAAK3kB,IAC3C7+B,KAAKy/B,QAAQvnC,KAAK,IAAIuU,GACpBg3C,WAAW5qD,EAAO,IAClB4qD,WAAW5qD,EAAO,IAClB4qD,WAAW5qD,EAAO,MAG8B,QAAxCA,EAASmH,KAAKuhD,UAAUiC,KAAK3kB,IACvC7+B,KAAK0/B,IAAIxnC,KAAK,IAAI+iB,GAChBwoC,WAAW5qD,EAAO,IAClB4qD,WAAW5qD,EAAO,MAEiC,QAA3CA,EAASmH,KAAK0hD,aAAa8B,KAAK3kB,IAK1C7+B,KAAK0jD,kCACH7qD,EAAO,GAAG2qC,OAAOv3B,MAAM,MAG4B,QAA3CpT,EAASmH,KAAK2hD,aAAa6B,KAAK3kB,IAK1C7+B,KAAKmiD,kCACHtpD,EAAO,GAAG2qC,OAAOv3B,MAAM,MAG4B,QAA3CpT,EAASmH,KAAKyhD,aAAa+B,KAAK3kB,IAK1C7+B,KAAK2jD,kCACH9qD,EAAO,GAAG2qC,OAAOv3B,MAAM,MAG4B,QAA3CpT,EAASmH,KAAKwhD,aAAagC,KAAK3kB,IAK1C7+B,KAAK4jD,kCACH/qD,EAAO,GAAG2qC,OAAOv3B,MAAM,MAOzB1O,QAAQkO,IAAI,kCAAoCozB,IAIpD,MAAM/L,EAAW,IAAIwM,GACfjsB,EAAqB,GAC3BrT,KAAK8hD,wBAAwBtlC,QAAQqnC,IACnCxwC,EAASnb,KAAK2rD,EAAGn3C,GACjB2G,EAASnb,KAAK2rD,EAAGl3C,GACjB0G,EAASnb,KAAK2rD,EAAGj3C,KAGnB,MAAMkzB,EAAmB,GACzB9/B,KAAKgiD,uBAAuBxlC,QAAQqnC,IAClC/jB,EAAO5nC,KAAK2rD,EAAGn3C,GACfozB,EAAO5nC,KAAK2rD,EAAGl3C,GACfmzB,EAAO5nC,KAAK2rD,EAAGj3C,KAEjB,MAAM+yB,EAAiB,IAAI7yB,aAAauG,GAClCwsB,EAAe,IAAI/yB,aAAagzB,GACtC,IAAII,EACAlgC,KAAK6hD,gBAAgB7pD,OAAS,OAChCkoC,EAAc,IAAIuT,YAAYzzC,KAAK6hD,iBACnC/uB,EAASoN,YAAc,IAAIpB,GAAWoB,EAAa,KAEnDA,EAAc,IAAInB,YAAY/+B,KAAK6hD,iBACnC/uB,EAASoN,YAAc,IAAIpB,GAAWoB,EAAa,IAErDpN,EAASiL,YAAY1qB,SAAW,IAAIyrB,GAAWa,EAAgB,GAC/D,MAAMmkB,GAAqB,EAc3B,OAZEhxB,EAASiL,YAAY+B,OAAS,IAAIhB,GADhCglB,EAC2C9C,GAA2BrhB,GAE3BE,EAF4C,GAI3FtiC,QAAQkO,IAAI,eAAiBy0B,EAAYloC,QACzCuF,QAAQkO,IAAI,kBAAoBk0B,EAAe3nC,QAG7C86B,EAAS72B,KADPqnD,EACc,WAAaA,EAEb,kBAEXxwB,GCvTJ,MAAMixB,WAAiBxtB,GAC5Bl1B,cACE+zB,aAEsB35B,IAAlBuE,KAAK6d,WACP7d,KAAK6d,SAAW,IAAIoC,UAEcxkB,IAAhCuE,KAAKguC,yBACPhuC,KAAKguC,uBAAyB,IAAI/tB,KAItC5e,SAAS2iD,GACP,MAAM,IAAIzoD,MAAM,2BASlB8F,mBAAmBpF,GACjB,MAAM6oB,EAAc9kB,KAAKguC,uBAAuB1xC,IAAIL,GAC9CS,EAAQsD,KAAK/D,GACnB,QAAcR,IAAViB,EACF,KAAM,0BAER,OAAOgvC,GAAiB5mB,EAAapoB,IAIzC,MAAMunD,GAAoB,IAAIrZ,GAAe,CAC3Cx/B,OACE,qWAgBE84C,GAAa,IAAItZ,GAAe,CACpCx/B,OAAQ,yFASH,MAAM+4C,WAAmBJ,GAAhC1iD,kCAkBErB,KAAAokD,MAAiB,IAAI33C,GAAQ,EAAG,EAAG,GAGnCzM,KAAAqT,SAAoB,IAAI5G,GAAQ,EAAG,EAAG,GAGtCzM,KAAA4O,OAAiB,EAtBjBvN,SAASgjD,GACPA,EACG9V,gBACC2V,GAAWnY,OACRjlC,MAAM,OAAQu9C,EAAUC,eACxBx9C,MAAM,QAASm9C,GAAkBlY,OAC/BjlC,MAAM,eAAgBu9C,EAAU5V,QAAQrC,KACxCtlC,MAAM,aAAcu9C,EAAU5V,QAAQvC,KACtCplC,MAAM,gBAAiB9G,KAAKu8C,mBAAmB,aAC/Cz1C,MAAM,QAAS9G,KAAKu8C,mBAAmB,UACvCz1C,MAAM,SAAU9G,KAAKu8C,mBAAmB,cAMnDU,GAAA,MADCnP,GAAW,4CAIZmP,GAAA,MADCnP,GAAW,kDAIZmP,GAAA,MADCnP,GAAW,8CCvFC,IAAAyW,GAAA,SAAUjY,GACvB,MAAMkY,EAAY,IAAI5G,GAAe,EAAG,GAAI,IACtC6G,EAAW,IAAI3jB,GAAc,GAAI,GAAI,GAAI,IACzC4jB,EAAU,IAAIrG,GAAa,EAAG,EAAG,GACjCsG,EAAQ,IAAIR,GAElB,IAAIpnB,GAAU,IAAImQ,IACfO,SAAS,IAAI8D,IACb9D,SAASkX,GAEZ5nB,EAAQuQ,oBAAoB78B,IAAKpN,IAC/B9F,QAAQkO,IAAIpI,KAGd,MAAMuhD,GAAY,IAAI5nB,IAAO6nB,EAAEJ,GAAUrrD,EAAE2jC,GAC3CuP,EAAKwY,SAASF,GAGd,MAAMG,GAAU,IAAI/nB,IAAO6nB,EAAEH,GAAStrD,EAAE2jC,GACxCgoB,EAAQnuB,UAAUvjB,SAAS1G,GAAK,EAChC2/B,EAAKwY,SAASC,GAGd,IAAK,IAAIjtD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMu/B,EAAO,IAAId,GACjBc,EAAKT,UAAUvjB,SAAS3G,EAAI5U,EAC5Bw0C,EAAKwY,SAASztB,GACd,IAAK,IAAIr+B,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMgsD,EAAQ,IAAIzuB,GAClByuB,EAAMpuB,UAAUvjB,SAAS1G,EAAI3T,EAC7Bq+B,EAAKytB,SAASE,GACd,IAAK,IAAIzC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAE1B,MAAM0C,GAAW,IAAIjoB,IAAO6nB,EAAEL,GAAWprD,EAAE2jC,GAC3CkoB,EAASruB,UAAUvjB,SAASzG,EAAI21C,EAChC0C,EAASruB,UAAUrjB,MAAM1D,IAAI,GAAK,GAAK,IACvCm1C,EAAMF,SAASG,KAIrB,OAAO3Y,GC1CF,SAAS4Y,GAAWn/B,EAAsBo/B,GAC/C,MAAO,CACLlpD,KAAM,OACNd,KAAM,SACNuB,MAAO,CACL,CACET,KAAM,SACNS,MAAO,CACL,CACET,KAAM,aACNS,MAAO,CACL,CACET,KAAM,QACNS,MAAOqpB,EAAOjb,SAASoQ,MACvB3S,SAAW7L,IACTyoD,EAAS/I,YAAc,EACvBr2B,EAAOq/B,cAAc1oD,EAAOqpB,EAAOjb,SAASqQ,SAE9CtW,QAAS,CACP,CACE1J,KAAM,SACNyK,IAAK,GACLD,IAAK,IACLE,KAAM,KAIZ,CACE5J,KAAM,SACNS,MAAOqpB,EAAOjb,SAASqQ,OACvB5S,SAAW7L,IACTyoD,EAAS/I,YAAc,EACvBr2B,EAAOq/B,cAAcr/B,EAAOjb,SAASoQ,MAAOxe,IAE9CmI,QAAS,CACP,CACE1J,KAAM,SACNyK,IAAK,GACLD,IAAK,IACLE,KAAM,SAQpB,CACE5J,KAAM,SACNS,MAAO,CACL,CACET,KAAM,eACNS,MAAOqpB,EAAOmsB,UACd3pC,SAAW7L,IACTqpB,EAAOmsB,UAAYx1C,IAGvB,CACET,KAAM,0BACNS,MAAOqpB,EAAOjb,SAAS+W,kBACvBtZ,SAAW7L,IACTqpB,EAAOjb,SAAS+W,kBAAoBnlB,GAEtC0tC,YAAa,8BAEf,CACEnuC,KAAM,MACNS,MAAO,CACL,CACET,KAAM,SACNS,MAAOyoD,EAASE,UAChB98C,SAAW7L,IACTyoD,EAASE,UAAY3oD,EAChBA,IACHyoD,EAAS/I,YAAc,OAMjC,CACEngD,KAAM,QACNS,MAAO,CACL,CACET,KAAM,SACNS,MAAOyoD,EAASG,YAChB/8C,SAAW7L,IACTyoD,EAASG,YAAc5oD,EAErByoD,EAASI,eAAenI,iBADtB1gD,EACyC,EAEA,IAIjD,CACET,KAAM,cACNS,MAAOyoD,EAASI,eAAenI,iBAC/B70C,SAAW7L,IACTyoD,EAASI,eAAenI,iBAAmB1gD,GAE7CmI,QAAS,CACP,CACE1J,KAAM,SACNyK,IAAK,EACLD,IAAK,EACLE,KAAM,MAIZ,CACE5J,KAAM,mBACNS,MAAOyoD,EAASI,eAAejI,sBAC/B/0C,SAAW7L,IACTyoD,EAASI,eAAejI,sBAAwB5gD,GAElDmI,QAAS,CACP,CACE1J,KAAM,SACNyK,IAAK,EACLD,IAAK,EACLE,KAAM,MAIZ,CACE5J,KAAM,SACNS,MAAOyoD,EAASK,aAAalJ,SAC7B/zC,SAAW7L,IACTyoD,EAASK,aAAalJ,SAAW5/C,EACjCyoD,EAAS/I,YAAc,GAEzBv3C,QAAS,CACP,CACE1J,KAAM,SACNyK,IAAK,GACLD,IAAK,GACLE,KAAM,MAIZ,CACE5J,KAAM,uBACNS,MAAOyoD,EAASI,eAAelI,mBAC/B90C,SAAW7L,IACTyoD,EAASI,eAAelI,mBAAqB3gD,GAE/CmI,QAAS,CACP,CACE1J,KAAM,SACNyK,IAAK,EACLD,IAAK,IACLE,KAAM,YCnJnB,MAAM4/C,GAAbpkD,cAGErB,KAAA2mC,MAAqB,IAAI+Q,GACzB13C,KAAA+4C,SAA2B,IAAIN,GAE/Bz4C,KAAAqlD,WAAY,EACZrlD,KAAA0lD,WAAa,IAAIhI,GACjB19C,KAAA2lD,WAAqB,IAAIzY,IAAUO,SAASztC,KAAK0lD,YAEjD1lD,KAAAslD,aAAc,EACdtlD,KAAAwlD,aAAe,IAAIrJ,GACnBn8C,KAAA4lD,aAAuB,IAAI1Y,IAAUO,SAASztC,KAAKwlD,cAEnDxlD,KAAAulD,eAAiB,IAAIpI,GACrBn9C,KAAA6lD,eAAyB,IAAI3Y,IAAUO,SAASztC,KAAKulD,gBACrDvlD,KAAA8lD,aAAc,IAAI5Y,IAAUO,SAAS,IAAI+P,IAEzCx9C,KAAAo8C,YAAsB,EAEdp8C,KAAA+lD,QAAU,EAClBC,iBACE,OAAOhmD,KAAK+lD,QAAU,IAAM,EAG9B1kD,OAAO0kB,EAAsByQ,GAC3Bx2B,KAAK+lD,UAELhgC,EAAOkgC,gBACHlgC,EAAO0rB,iBAAmBjb,EAAMmgB,cAClC32C,KAAKo8C,YAAc,EAEfp8C,KAAKqlD,WACPt/B,EAAOmgC,yBAKXlmD,KAAK2mC,MAAM9sB,OAAOkM,EAAQ/lB,KAAK+4C,UAC/B/4C,KAAK+4C,SAASj5C,OAAOimB,EAAQ/lB,KAAK2mC,OAIpCtlC,MAAM0kB,EAAsByQ,GAC1Bx2B,KAAKqD,OAAS6hD,GAAWn/B,EAAQ/lB,MACjCA,KAAK2mC,MAAMwf,YACTnmD,KAAK+4C,SACL,CACAG,cAAe,CACb,CACEj9C,KAAMy7C,GAAYC,WAClBlR,KAAM,IAAM,gBAEd,CACExqC,KAAM,cACNwqC,KAAM,IAAM,eAEd,CACExqC,KAAM,cACNwqC,KAAM,IAAM,SAEd,CACExqC,KAAM,cACNwqC,KAAM,IAAMzmC,KAAKgmD,WAAa,KAAO,OAEvC,CACE/pD,KAAM,cACNwqC,KAAM,IAAMzmC,KAAKgmD,WAAa,MAAQ,MAExC,CACE/pD,KAAM,gBACNwqC,KAAM,IAAMzmC,KAAKgmD,WAAa,KAAO,SAEvC,CACE/pD,KAAM,gBACNwqC,KAAM,IAAMzmC,KAAKgmD,WAAa,QAAU,OAG5CtN,OAAQ,CACN,CACEz8C,KAAM,cACNmP,OAAQ,CAACorB,IAEX,CACEv6B,KAAM,QACN8gC,QAAS/8B,KAAK8lD,YACd16C,OAAQ,CAACorB,IAEX,CACEv6B,KAAM,MACNipC,OAAQ,KACN,MAAO,CACLkhB,YAAa,cACbC,YAAa,cACbC,cAAetmD,KAAKgmD,WAAa,cAAgB,gBAGrDjpB,QAAS/8B,KAAK2lD,UACdv6C,OAAQ,CAACssC,GAAYsC,YACrB9C,kBAAkB,EAClBG,kBAAmB,KACjBtxB,EAAOwgC,QACP,MAAMC,EAAczgC,EAAOC,iBAAiBjG,GAAoBU,UAAU/jB,MAC1EsD,KAAK0lD,WAAWrJ,gBAAkBr8C,KAAK0lD,WAAWrJ,gBAAgB/J,WAAWkU,GAAI,GACjFxmD,KAAK0lD,WAAWtJ,YAAcp8C,KAAKo8C,cAGvC,CACEngD,KAAM,QACNipC,OAAQ,KACN,MAAO,CACLmhB,YAAa,cACbI,MAAOzmD,KAAKgmD,WAAa,gBAAkB,kBAG/CjpB,QAAS/8B,KAAK4lD,YACdx6C,OAAQ,CAACssC,GAAYsC,YACrB9C,kBAAkB,EAClBG,kBAAmB,KACjB,MAAMmP,EAAczgC,EAAOC,iBAAiBjG,GAAoBU,UAAU/jB,MAC1EsD,KAAKwlD,aAAanJ,gBAAkBr8C,KAAKwlD,aAAanJ,gBAAgB/J,WAAWkU,GAAI,GACrFxmD,KAAKwlD,aAAapJ,YAAcp8C,KAAKo8C,cAGzC,CACEngD,KAAM,eACNi7C,kBAAkB,EAClBhS,OAAQ,KACN,IAAIwhB,EACAC,EAWJ,OATED,EADE1mD,KAAKqlD,UACCrlD,KAAKgmD,WAAa,cAAgB,cAElC,cAGRW,EADE3mD,KAAKslD,YACCtlD,KAAKgmD,WAAa,gBAAkB,gBAEpC,cAEH,CAAEU,QAAOC,UAElBtP,kBAAmB,KACjBr3C,KAAKulD,eAAenJ,YAAcp8C,KAAKo8C,aAEzC9E,iBAAkB,KAChBt3C,KAAKo8C,eAEPrf,QAAS/8B,KAAK6lD,cACdz6C,OAAQ,CAACssC,GAAYsC,iBCtJxB,MAAM4M,GAAgB,yBAEtB,MAAMC,GAAbxlD,cAGErB,KAAA8mD,OAAiB,IAAIlS,GAErB50C,KAAA+mD,gBAA0B,EAC1B/mD,KAAAw2B,MAAe,IAAI8f,GA4BXt2C,KAAAgnD,kBAAoB,MAC1B,MAAM9rC,EAAQlb,KAAKozB,GAAGgB,YAChBjZ,EAASnb,KAAKozB,GAAGiB,aACvBr0B,KAAK+lB,OAAOoO,QAAQjZ,EAAOC,GAC1Bnb,KAAK+lB,OAAOisB,OAA6B9Y,OAAShe,EAAQC,IAS7Dnb,KAAAo8C,YAAc,EACdp8C,KAAAinD,aAAyC,IAAI9sB,GAC7Cn6B,KAAAknD,YAAwC,IAAI/sB,GAC5Cn6B,KAAAF,OAAS,MACPE,KAAKinD,aAAarZ,gBAAgB5tC,KAAK+lB,QACvC/lB,KAAKmnD,gBAAgBttC,SAErB7Z,KAAKmlD,SAASrlD,OAAOE,KAAK+lB,OAAQ/lB,KAAKw2B,OAEvCx2B,KAAKknD,YAAYtZ,gBAAgB5tC,KAAK+lB,QACtC/lB,KAAK+lB,OAAOjb,SAAS2W,KAAKgiB,UAhD5BpiC,WAAW0gC,GACT/hC,KAAKozB,GAAK2O,EACV/hC,KAAK+lB,OAAS,IAAIkrB,GAAalP,GAC/B/hC,KAAKmlD,SAAW,IAAIM,GACpBzlD,KAAKmlD,SAASzX,MAAM1tC,KAAK+lB,OAAQ/lB,KAAKw2B,OACtCx2B,KAAK+lB,OAAOisB,OAAOpb,UAAUvjB,SAASxD,IAAI,GAAI,GAAI,IAClD7P,KAAKmnD,gBAAkB,IAAI9H,GAAgBr/C,KAAK+lB,OAAOisB,QACvDhyC,KAAKmnD,gBAAgBC,mBAAmBpnD,KAAK+lB,OAAOksB,YACpDjyC,KAAK+mD,gBAAiB,EACtB/mD,KAAKqnD,YAAYrnD,KAAKw2B,OAEtB/4B,OAAOmlC,iBAAiB,SAAU5iC,KAAKgnD,mBACvChnD,KAAKgnD,oBACLhnD,KAAK8mD,OAAOQ,SAAStnD,KAAKF,QAG5BuB,cACE5D,OAAO2yC,oBAAoB,SAAUpwC,KAAKgnD,mBAC1ChnD,KAAK+lB,OAAS,KACd/lB,KAAKmlD,SAAW,KAChBnlD,KAAK8mD,OAAOS,OACZvnD,KAAK8mD,OAAOQ,SAAS,MACrBtnD,KAAKozB,GAAK,KAYZ/xB,eACErB,KAAKgnD,oBAiBP3lD,UAAUqL,EAAWC,GACnB,MAAM+tC,EAAI16C,KAAK+lB,OAAOjb,SAASkpB,mBAAmBmkB,eAAe,eAC3Dt/C,EAAS,IAAI2uD,WAAW,IAC9B9M,EAAEzoB,WACAvlB,EAAI1M,KAAK+lB,OAAOjb,SAASoQ,MACzBvO,EAAI3M,KAAK+lB,OAAOjb,SAASqQ,OACzB,EAAG,EAAGtiB,GACR0E,QAAQkO,OAAO5S,EAAO,MAGxBwI,MACErB,KAAK+lB,OAAOksB,WAAWlD,SAAU,EACjC/uC,KAAK8mD,OAAOW,MAGdpmD,OACErB,KAAK+lB,OAAOksB,WAAWlD,SAAU,EACjC/uC,KAAK8mD,OAAOS,OAGdlmD,OACErB,KAAK8mD,OAAOjhD,OAGdxE,YAAYm1B,GAGV,OAFA+tB,GAAqB/tB,EAAM8V,MAEpB9V,EAGHn1B,8DACJ,MAAMqmD,EAAY,IAAItG,GAChBuG,QAAiBnZ,MAAMoY,GAAgB,iBACvC/tD,QAAe8uD,EAASnqC,OACxBoqC,EAAMF,EAAUG,MAAMhvD,GACtBivD,EAAO,IAAI9qB,GACjB8qB,EAAKh1B,SAAW80B,EAChB5nD,KAAKw2B,MAAM8V,KAAKwY,SAASgD,MAKtB,IAAIC,GAAqB,IAAIlB,GC5FfmB,GAArB,cAAyC5mD,EAAA,KAIjCC,oDACJrB,KAAK8C,OAAOC,MAAMklD,iBAAkB,QAC9BjoD,KAAKkoD,YACXH,GAAMI,mBANA5mD,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,qCADkB6vD,GAAWzmD,EAAA,MAL/BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAW,CACTkmD,OAAAv+C,OAGiBm+C,IAAA,IAAAK,GAAA,GCrBqUC,GAAA,GCQtVC,cAAYpwD,OAAAwJ,EAAA,KAAAxJ,CACdmwD,GACAnlD,EACAG,GACF,EACA,KACA,WACA,OAIAilD,GAAS3mD,QAAAC,OAAA,mBACM,IAAA2mD,GAAAD,WCpBXE,GAAM,WAAgB,IAAA1oD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,eAA0B,CAA2BX,EAAAQ,KAAAJ,EAAA,OAAoBO,YAAA,eAA0B,CAAAX,EAAAkB,GAAA,wBAAAd,EAAA,UAA8CS,GAAA,CAAIC,MAAAd,EAAA2oD,OAAkB,CAAA3oD,EAAAkB,GAAA,UAAAd,EAAA,UAAgCS,GAAA,CAAIC,MAAAd,EAAAqD,OAAkB,CAAArD,EAAAkB,GAAA,YAAAd,EAAA,OAA+BO,YAAA,aAAwBX,EAAA8D,GAAA9D,EAAA,aAAA4oD,GAAoC,OAAAxoD,EAAA,OAAiBnD,IAAA2rD,EAAA1jD,MAAA,CAAmB2jD,cAAAD,IAAA5oD,EAAA8oD,YAAwCjoD,GAAA,CAAKC,MAAA,SAAA4D,GAAyB1E,EAAA8oD,WAAAF,KAA2B,CAAA5oD,EAAAkB,GAAAlB,EAAA6D,GAAA+kD,QAA4B,GAAA5oD,EAAA,UAAAI,EAAA,OAA+BO,YAAA,aAAwB,eAAAX,EAAA8oD,WAAA1oD,EAAA,YAAkDE,MAAA,CAAOyoD,KAAA/oD,EAAAgpD,UAAAzc,MAA0B1rC,GAAA,CAAKooD,WAAAjpD,EAAAkpD,eAA8BlpD,EAAAQ,KAAA,aAAAR,EAAA8oD,WAAA1oD,EAAA,qBAAmEE,MAAA,CAAOyoD,KAAA/oD,EAAAgpD,aAAsBhpD,EAAAQ,KAAA,aAAAR,EAAA8oD,WAAA1oD,EAAA,qBAAmEE,MAAA,CAAOyoD,KAAA/oD,EAAAgpD,aAAsBhpD,EAAAQ,MAAA,GAAAR,EAAAQ,KAAAJ,EAAA,OAAkCO,YAAA,eAA0B,CAAAP,EAAA,OAAYO,YAAA,eAA0B,CAAAX,EAAAkB,GAAA,gBAAAlB,EAAA,WAAAI,EAAA,OAAoDO,YAAA,qBAAgC,CAAAP,EAAA,OAAAJ,EAAAkB,GAAA,iCAAAlB,EAAA6D,GAAA7D,EAAAmpD,WAAAC,kBAAA,cAAAhpD,EAAA,OAAAJ,EAAAkB,GAAA,4BAAAlB,EAAA6D,GAAA7D,EAAAmpD,WAAAE,oBAAA,cAAAjpD,EAAA,OAAAJ,EAAAkB,GAAA,uBAAAlB,EAAA6D,GAAA7D,EAAAmpD,WAAA52B,UAAA,cAAAnyB,EAAA,OAAAJ,EAAAkB,GAAA,4BAAAlB,EAAA6D,GAAA7D,EAAAmpD,WAAAxnC,eAAA,gBAAAvhB,EAAA,OAAiZO,YAAA,qBAAgC,CAAAX,EAAAkB,GAAA,oEACnhDooD,GAAe,GCMnB,MAAMC,GAAY,IAAIlI,GAOf,MAAMmI,GAIXloD,cAAcyxB,GACZ,MAAMg2B,EAAO,IAAIS,GACjBT,EAAK18C,KAAO0mB,EAAS1mB,KACrB08C,EAAK7sD,UAAyBR,IAAlBq3B,EAAS72B,KAAqB,UAAY62B,EAAS72B,KAC/D6sD,EAAKpiC,QAAU,GACf,IAAK,MAAM1pB,KAAO81B,EAASiL,YACzB,GAAIjL,EAASiL,YAAY1lC,eAAe2E,GAAM,CAC5C,MAAMwsD,EAAa12B,EAASiL,YAAY/gC,GACxC8rD,EAAKpiC,QAAQxuB,KAAK,CAChB+D,KAAMe,EACN7B,KAAM,aACNsuD,aAAcD,EAAWE,oBAW/B,OAPI52B,EAASoN,aACX4oB,EAAKpiC,QAAQxuB,KAAK,CAChB+D,KAAM,QACNd,KAAM,cACNsuD,aAAc32B,EAASoN,YAAYwpB,oBAGhCZ,GAIJ,MAAMa,GAGXtoD,cAAcy7B,GACZ,MAAMgsB,EAAO,IAAIa,GAcjB,OAbAb,EAAK18C,KAAO0wB,EAAS1wB,KAad08C,GAIJ,MAAMc,GAAbvoD,cAEErB,KAAA6pD,WAAwC,IAAI5pC,IAC5CjgB,KAAA8pD,UAAuC,IAAI7pC,IAE3C5e,cAAcg2B,GACZ,GAAIA,aAAgB2F,GAAM,CACxB,MAAMlK,EAAWuE,EAAKvE,SAChBgK,EAAWzF,EAAKyF,cACLrhC,IAAbq3B,IACG9yB,KAAK6pD,WAAW5iC,IAAI6L,EAAS1mB,OAChCpM,KAAK6pD,WAAWh6C,IAAIijB,EAAS1mB,KAAMm9C,GAAaxsD,OAAO+1B,UAG1Cr3B,IAAbqhC,IACG98B,KAAK6pD,WAAW5iC,IAAI6V,EAAS1wB,OAChCpM,KAAK8pD,UAAUj6C,IAAIitB,EAAS1wB,KAAMu9C,GAAa5sD,OAAO+/B,MAM9Dz7B,cAAcm1B,GACZ,MAAMsyB,EAAO,IAAIc,GAKjB,OAJAd,EAAKxc,KAAO9V,EAAM8V,KAAKlE,IAAK/Q,IAE1B,OADAyxB,EAAKiB,cAAc1yB,GACZ2yB,GAAcjtD,OAAOs6B,KAEvByxB,EAGTznD,kBAAkBf,EAAYk2B,GAC5B,MAAM39B,EAAS29B,EAAM8V,KAAK2d,YAAY3pD,QACvB7E,IAAX5C,IAGAA,EAAO69B,OACT79B,EAAO69B,OAAOc,YAAY3+B,GAE1B29B,EAAM0zB,YAAY,IAAI3zB,KAI1Bl1B,eAAqBf,EAAYk2B,gDAC/B,MAAMa,EAAOb,EAAM8V,KAAK2d,YAAY3pD,GACpC,QAAa7E,IAAT47B,EACF,OAEF,MAAM8yB,QAAetnB,KACrB,IAAIsnB,GAA4B,IAAlBA,EAAOnyD,OACnB,OAEF,MAAM4vD,EAAM0B,GAAUzB,MAAMsC,GACtBrC,EAAO,IAAI9qB,GACjB8qB,EAAKh1B,SAAW80B,EAChBE,EAAK/qB,SAAU,IAAImQ,IAAUO,SAAS,IAAI8D,IAC1Cla,EAAKytB,SAASgD,MAIX,MAAMkC,GAAb3oD,cACErB,KAAAqT,SAAW,IAAI5G,GAEfzM,KAAA7E,KAAO,OAEP6E,KAAA22B,SAA4B,GAC5Bt1B,cAAcg2B,GACZ,MAAM+yB,EAAW,IAAIJ,GAMrB,OALAI,EAAS/2C,SAASyD,KAAKugB,EAAKT,UAAUvjB,UACtC+2C,EAASh+C,KAAOirB,EAAKjrB,KACjBirB,aAAgB2F,KAClBotB,EAASjvD,KAAO,QAEXivD,GCzIJ,MAAMC,GAMXhpD,cAAc0kB,GACZ,MAAMjb,EAAWib,EAAOjb,SAClBg+C,EAAO,IAAIuB,GAGjB,OAFAvB,EAAKK,iBAAmBr+C,EAAS4Z,eAAe6B,sBAChDuiC,EAAKwB,gBAAgBvkC,GACd+iC,EAGTznD,gBAAgB0kB,GACd/lB,KAAKopD,mBAAqBrjC,EAAOjb,SAAS2W,KAAK8Q,cAC/CvyB,KAAK0hB,cAAgBqE,EAAOjb,SAAS2W,KAAKC,cAC1C1hB,KAAKsyB,SAAWvM,EAAOjb,SAAS2W,KAAK6Q,UCnBzC,IAAIi4B,GAAM,WAAgB,IAAAxqD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,iBAA4BX,EAAA8D,GAAA9D,EAAA,sBAAA+yB,GAA8C,OAAA3yB,EAAA,OAAiBnD,IAAA81B,EAAA1mB,MAAkB,CAAAjM,EAAA,QAAAJ,EAAAkB,GAAA,SAAAlB,EAAA6D,GAAAkvB,EAAA72B,MAAA,IAAA8D,EAAA6D,GAAAkvB,EAAA1mB,KAAAzO,MAAA,gBAAAoC,EAAA,aAAAI,EAAA,OAAgIO,YAAA,iBAA4BX,EAAA8D,GAAAivB,EAAA,iBAAA03B,GAAgD,OAAArqD,EAAA,OAAiBnD,IAAAwtD,EAAAvuD,MAAoB,CAAA8D,EAAAkB,GAAA,WAAAlB,EAAA6D,GAAA4mD,EAAAvuD,MAAA,MAAA8D,EAAA6D,GAAA2I,KAAA2D,KAAAs6C,EAAAf,aAAA,+BAA6H,GAAA1pD,EAAAQ,SAAgB,IACjlBkqD,GAAe,GC2BnB,IAAqBC,GAArB,cAA+CtpD,EAAA,KAJ/CC,kCAOErB,KAAA2qD,cAAe,EAEfC,mBACE,MAAMviB,EAAO,GAIb,OAHAroC,KAAK8oD,KAAKe,WAAWrtC,QAAQorC,IAC3Bvf,EAAKnwC,KAAK0vD,KAELvf,IATD9mC,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,gCADkBuyD,GAAiBnpD,EAAA,MAJrCpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,MAGOwoD,IAAA,IAAAG,GAAA,GC5BqVC,GAAA,GCQtWC,cAAY5yD,OAAAwJ,EAAA,KAAAxJ,CACd2yD,GACAP,GACAE,IACF,EACA,KACA,WACA,OAIAM,GAASnpD,QAAAC,OAAA,oBACM,IAAAmpD,GAAAD,WCpBXE,GAAM,WAAgB,IAAAlrD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,iBAA4B,KAAAX,EAAAmrD,aAAAlzD,OAAAmI,EAAA,OAAAJ,EAAAkB,GAAA,iCAAAlB,EAAAQ,KAAAR,EAAA8D,GAAA9D,EAAA,sBAAA+8B,GAAwI,OAAA38B,EAAA,OAAiBnD,IAAA8/B,EAAA1wB,MAAkB,CAAAjM,EAAA,QAAAJ,EAAAkB,GAAA,WAAAlB,EAAA6D,GAAAk5B,EAAA7gC,MAAA,IAAA8D,EAAA6D,GAAAk5B,EAAA1wB,KAAAzO,MAAA,kBAAAoC,EAAA,aAAAI,EAAA,OAAoIO,YAAA,mBAA6BX,EAAAQ,UAAa,IAC3d4qD,GAAe,GCDfC,GAAM,WAAgB,IAAArrD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BH,EAAAK,MAAAD,GAAwB,OAAAJ,EAAA0C,GAAA,IACrF4oD,GAAe,YAAiB,IAAAtrD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,UAAAJ,EAAAkB,GAAA,gBCOpF,MAAMqqD,WAAsBlqD,EAAA,MCRgU,IAAAmqD,GAAA,GCOvWC,GAAYrzD,OAAAwJ,EAAA,KAAAxJ,CACdozD,GACAH,GACAC,IACF,EACA,KACA,KACA,MAIAG,GAAS5pD,QAAAC,OAAA,qBACM,IAAA4pD,GAAAD,WCYf,IAAqBE,GAArB,cAA+CtqD,EAAA,KAL/CC,kCAQErB,KAAA2qD,cAAe,EAEfO,mBACE,MAAM7iB,EAAO,GAIb,OAHAroC,KAAK8oD,KAAKgB,UAAUttC,QAAQmvC,IAC1BtjB,EAAKnwC,KAAKyzD,KAELtjB,IATD9mC,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,gCADkBuzD,GAAiBnqD,EAAA,MALrCpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,CACV0pD,cAAAH,OAGiBC,IAAA,IAAAG,GAAA,GC/BqVC,GAAA,GCOtWC,GAAY5zD,OAAAwJ,EAAA,KAAAxJ,CACd2zD,GACAb,GACAE,IACF,EACA,KACA,WACA,MAIAY,GAASnqD,QAAAC,OAAA,oBACM,IAAAmqD,GAAAD,WCnBXE,GAAM,WAAgB,IAAAlsD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BH,EAAAK,MAAAD,GAAwB,OAAAJ,EAAA0C,GAAA,IACrFypD,GAAe,YAAiB,IAAAnsD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,gBAA2B,CAAAP,EAAA,UAAAJ,EAAAkB,GAAA,WCW/I,IAAqBkrD,GAArB,cAAyC/qD,EAAA,OAApB+qD,GAAW5qD,EAAA,MAJ/BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAW,MAGQiqD,IAAA,IAAAC,GAAA,GCZoVC,GAAA,GCQrWC,cAAYn0D,OAAAwJ,EAAA,KAAAxJ,CACdk0D,GACAJ,GACAC,IACF,EACA,KACA,WACA,OAIAI,GAAS1qD,QAAAC,OAAA,mBACM,IAAA0qD,GAAAD,WCpBXE,GAAM,WAAgB,IAAAzsD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,aAAwB,CAAAP,EAAA,OAAYO,YAAA,SAAoB,CAAAP,EAAA,OAAY8E,MAAA,CAAOwnD,WAAA1sD,EAAA2sD,aAA8B9rD,GAAA,CAAKC,MAAA,SAAA4D,GAAyB1E,EAAA4sD,UAAA5sD,EAAA4sD,YAA+B,CAAA5sD,EAAA2sD,cAAA3sD,EAAA4sD,SAAAxsD,EAAA,QAAAJ,EAAAkB,GAAA,SAAAlB,EAAAQ,KAAAR,EAAA2sD,aAAA3sD,EAAA4sD,SAAAxsD,EAAA,QAAAJ,EAAAkB,GAAA,SAAAlB,EAAAQ,KAAAR,EAAAkB,GAAA,aAAAlB,EAAA6D,GAAA7D,EAAA+oD,KAAA3tD,MAAA,MAAA4E,EAAA6D,GAAA7D,EAAA6sD,SAAA,YAAAzsD,EAAA,UAA4OS,GAAA,CAAIC,MAAA,SAAA4D,GAAyB1E,EAAA8sD,UAAA,KAAsB,CAAA9sD,EAAAkB,GAAA,SAAAlB,EAAA,SAAAI,EAAA,OAA2CO,YAAA,QAAmB,CAAAP,EAAA,UAAeS,GAAA,CAAIC,MAAAd,EAAA+sD,aAAwB,CAAA/sD,EAAAkB,GAAA,YAAAd,EAAA,UAAkCS,GAAA,CAAIC,MAAAd,EAAAgtD,cAAyB,CAAAhtD,EAAAkB,GAAA,eAAAlB,EAAAQ,KAAAR,EAAA,SAAAI,EAAA,OAA0DO,YAAA,OAAAE,GAAA,CAAuBC,MAAA,SAAA4D,GAAyB1E,EAAA8sD,UAAA,MAAuB9sD,EAAAQ,KAAAR,EAAA,SAAAI,EAAA,OAAoCO,YAAA,YAAuBX,EAAA8D,GAAA9D,EAAA+oD,KAAA,kBAAAkE,GAA4C,OAAA7sD,EAAA,mBAA6BnD,IAAAgwD,EAAA5gD,KAAA/L,MAAA,CAAsByoD,KAAAkE,GAAapsD,GAAA,CAAKooD,WAAAjpD,EAAAktD,gBAA+B,GAAAltD,EAAAQ,QAC/hC2sD,GAAe,GCkCnB,IAAqBC,GAArB,cAA2C/rD,EAAA,KAH3CC,kCAMErB,KAAA6sD,UAAW,EAKX7sD,KAAA2sD,UAAmB,EAHnBC,cACE,OAAO5sD,KAAK8oD,KAAK18C,KAAKzO,MAAM,EAAG,GAIjC+uD,kBACE,OAAO1sD,KAAK8oD,KAAKnyB,SAAS3+B,OAG5BqJ,cACErB,KAAKitD,WAAW,CACd9xD,KAAM,OACNmF,GAAIN,KAAK8oD,KAAK18C,OAIlB/K,aACErB,KAAKitD,WAAW,CACd9xD,KAAM,SACNmF,GAAIN,KAAK8oD,KAAK18C,OAIlB/K,WAAWmkB,GACTxlB,KAAKkG,MAAM,aAAcsf,GACzBxlB,KAAK6sD,UAAW,IA7BVtrD,EAAA,MAAPpJ,OAAAiJ,EAAA,KAAAjJ,gCADkBg1D,GAAa5rD,EAAA,MAHjCpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT8D,KAAK,qBAEckxD,IAAA,IAAAC,GAAA,GCnCuVC,GAAA,GCQxWC,cAAYn1D,OAAAwJ,EAAA,KAAAxJ,CACdk1D,GACAb,GACAU,IACF,EACA,KACA,WACA,OAIAI,GAAS1rD,QAAAC,OAAA,sBACM,IAAA0rD,GAAAD,WCgDf,IAAqBE,GAArB,cAAwCpsD,EAAA,KARxCC,kCASErB,KAAA+oD,UAAuB,KACvB/oD,KAAAkpD,WAAyB,KAGzBlpD,KAAAytD,IAAM,CAAC,YAAa,YAAY,WAAW,YAC3CztD,KAAA6oD,WAAa,YAGbxnD,OACErB,KAAK+oD,UAAYa,GAAU7sD,OAAOgrD,GAAMvxB,OACxCx2B,KAAKkpD,WAAamB,GAAWttD,OAAOgrD,GAAMhiC,QACvC/lB,KAAK0tD,UACN3F,GAAMb,YAAYruB,OAAO74B,KAAK0tD,UAEhC1tD,KAAK0tD,SAAW3F,GAAMb,YAAYz2C,IAAKsV,IACrC/lB,KAAKkpD,WAAWoB,gBAAgBvkC,KAI9B1kB,oDACJrB,KAAK8C,OAAOC,MAAM4qD,gBAAiB,QAC7B3tD,KAAKkoD,YACXH,GAAMI,iBAGR9mD,gBACKrB,KAAK0tD,UACN3F,GAAMb,YAAYruB,OAAO74B,KAAK0tD,UAI5BrsD,YAAYmkB,gDACE,WAAdA,EAAKrqB,KACPyuD,GAAUgE,WAAWpoC,EAAKllB,GAAIynD,GAAMvxB,OACb,SAAdhR,EAAKrqB,WACRyuD,GAAUiE,QAAQroC,EAAKllB,GAAIynD,GAAMvxB,QAEvCj5B,QAAQkO,IAAI,iBACZlO,QAAQkO,IAAI+Z,IAEdxlB,KAAK0oD,WAzCY8E,GAAUjsD,EAAA,MAR9BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,CACV4rD,SAAAP,GACAQ,YAAAxB,GACAyB,kBAAAhD,GACAiD,kBAAAjC,OAGiBwB,IAAA,IAAAU,GAAA,GCpEmVC,GAAA,GCQpWC,cAAYj2D,OAAAwJ,EAAA,KAAAxJ,CACdg2D,GACA1F,GACAY,IACF,EACA,KACA,WACA,OAIA+E,GAASxsD,QAAAC,OAAA,kBACM,IAAAwsD,GAAAD,WCpBXE,GAAM,WAAgB,IAAAvuD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,eAA0B,CAAAP,EAAA,UAAeE,MAAA,CAAOC,GAAA,iBAAqBM,GAAA,CAAKC,MAAAd,EAAAwuD,QAAkBxuD,EAAAyuD,UAAyDzuD,EAAAQ,KAAzDJ,EAAA,OAA6BO,YAAA,iBAA4B,CAAAX,EAAAkB,GAAA,aAAAlB,EAAA,gBAAAI,EAAA,OAA+DO,YAAA,qBAAgC,CAAAP,EAAA,OAAYsuD,YAAA,CAAap7C,SAAA,WAAAQ,OAAA,MAAA66C,iBAAA,SAA8D,CAAAvuD,EAAA,UAAeS,GAAA,CAAIC,MAAAd,EAAA4uD,SAAoB,CAAA5uD,EAAAkB,GAAA,cAAAd,EAAA,aAAuCE,MAAA,CAAOuuD,MAAA7uD,EAAA6uD,OAAkBhuD,GAAA,CAAKiuD,kBAAA9uD,EAAA8uD,oBAA2C9uD,EAAA8D,GAAA9D,EAAA,eAAA+uD,GAAuC,OAAA3uD,EAAA,eAAyBnD,IAAA8xD,EAAAz3B,KAAAjrB,KAAA2iD,IAAA,WAAAC,UAAA,EAAA3uD,MAAA,CAA2Dg3B,KAAAy3B,EAAAz3B,KAAAs3B,OAAAG,EAAAH,OAAAM,UAAAlvD,EAAA6uD,OAAoEhuD,GAAA,CAAKsuD,eAAAnvD,EAAAmvD,eAAAC,WAAApvD,EAAAovD,aAAiE,CAAApvD,EAAAqvD,mBAAAN,EAAAz3B,MAAAl3B,EAAA,wBAAqEE,MAAA,CAAOg3B,KAAAy3B,EAAAz3B,KAAAs3B,OAAAG,EAAAH,QAA8C/tD,GAAA,CAAK24C,WAAAx5C,EAAAmvD,kBAAiCnvD,EAAAQ,MAAA,KAAe,GAAAJ,EAAA,iBAAyBE,MAAA,CAAO2L,MAAAjM,EAAAiM,MAAAijD,UAAAlvD,EAAA6uD,UAAyC,GAAA7uD,EAAAQ,KAAAJ,EAAA,OAAyBO,YAAA,eAA0B,CAAAX,EAAAyuD,UAAqDzuD,EAAAQ,KAArDJ,EAAA,UAAgCS,GAAA,CAAIC,MAAAd,EAAA0nD,MAAiB,CAAA1nD,EAAAkB,GAAA,SAAAlB,EAAA,UAAAI,EAAA,UAAwDS,GAAA,CAAIC,MAAAd,EAAAwnD,OAAkB,CAAAxnD,EAAAkB,GAAA,UAAAlB,EAAAQ,KAAAR,EAAAyuD,UAAgFzuD,EAAAQ,KAAhFJ,EAAA,UAA0DS,GAAA,CAAIC,MAAAd,EAAA8F,OAAkB,CAAA9F,EAAAkB,GAAA,qBAAAlB,EAAAyuD,UAAuHzuD,EAAAQ,KAAvHJ,EAAA,UAAqEE,MAAA,CAAOgvD,SAAA,IAAczuD,GAAA,CAAKC,MAAAd,EAAAuvD,aAAwB,CAAAvvD,EAAAkB,GAAA,yBAAAlB,EAAAwvD,gBAA6GxvD,EAAAQ,KAA7GJ,EAAA,UAA+ES,GAAA,CAAIC,MAAAd,EAAAyvD,eAA0B,CAAAzvD,EAAAkB,GAAA,kBAAAlB,EAAA,gBAAAI,EAAA,UAAuES,GAAA,CAAIC,MAAAd,EAAA0vD,sBAAiC,CAAA1vD,EAAAkB,GAAA,sBAAAlB,EAAAQ,KAAAJ,EAAA,UAAqDS,GAAA,CAAIC,MAAAd,EAAA4tD,iBAA4B,CAAA5tD,EAAAkB,GAAA,sBAAAd,EAAA,UAA4CS,GAAA,CAAIC,MAAAd,EAAAkoD,kBAA6B,CAAAloD,EAAAkB,GAAA,4BAC7zDyuD,GAAe,GCDfC,GAAM,WAAgB,IAAA5vD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,eAAAL,MAAA,CAAkCuvD,SAAA,OAAiB,CAAAzvD,EAAA,OAAY0vD,MAAA,CACzKj5B,UAAA72B,EAAA62B,YACS,CAAA72B,EAAA+vD,GAAA,eAAA/vD,EAAA,SAAAI,EAAA,OAAiDO,YAAA,OAAAE,GAAA,CAAuBmvD,UAAAhwD,EAAAiwD,aAA2BjwD,EAAAQ,KAAAJ,EAAA,OAAqBO,YAAA,OAAkB,CAAAX,EAAAkwD,SAAkFlwD,EAAAQ,KAAlFJ,EAAA,UAA+BS,GAAA,CAAIC,MAAA,SAAA4D,GAAyB1E,EAAAkwD,UAAA,KAAsB,CAAAlwD,EAAAkB,GAAA,UAAAlB,EAAA,SAAAI,EAAA,UAAwDS,GAAA,CAAIC,MAAA,SAAA4D,GAAyB1E,EAAAkwD,UAAA,KAAuB,CAAAlwD,EAAAkB,GAAA,YAAAlB,EAAAQ,UAC7U2vD,GAAe,GCsBnB,IAAqBC,GAArB,cAAyC/uD,EAAA,KAHzCC,kCAUErB,KAAAiwD,UAAW,EAEXjwD,KAAAowD,YAAa,EANbx5B,gBACE,mBAAoB52B,KAAK4uD,MAAMyB,iBAAiBrwD,KAAK4uD,MAAM0B,gBAU7DjvD,UAAUxH,GACRmG,KAAKowD,YAAa,EAClBpwD,KAAKuwD,cAAgB12D,EAAE22D,QACvBxwD,KAAKywD,cAAgB52D,EAAE62D,QACvB1wD,KAAK2wD,iBAAmB3wD,KAAK4uD,MAAMyB,WACnCrwD,KAAK4wD,iBAAmB5wD,KAAK4uD,MAAM0B,WACnC7yD,OAAOmlC,iBAAiB,YAAa5iC,KAAK6wD,UAC1CpzD,OAAOmlC,iBAAiB,UAAW/oC,IACjCmG,KAAKowD,YAAa,EAClB3yD,OAAO2yC,oBAAoB,YAAapwC,KAAK6wD,YAIjDxvD,SAASxH,GACPmG,KAAK4uD,MAAMyB,WACTrwD,KAAK2wD,iBAAmB92D,EAAE22D,QAAUxwD,KAAKuwD,cAC3CvwD,KAAK4uD,MAAM0B,WACTtwD,KAAK4wD,iBAAmB/2D,EAAE62D,QAAU1wD,KAAKywD,cAC3CzwD,KAAKkG,MAAM,qBAGb7E,UACErB,KAAK8wD,cACLrzD,OAAOmlC,iBAAiB,SAAU5iC,KAAK8wD,aAGzCzvD,gBACE5D,OAAO2yC,oBAAoB,SAAUpwC,KAAK8wD,aAG5CzvD,cACErB,KAAK4uD,MAAM1zC,MAAQlb,KAAK+wD,IAAIC,YAC5BhxD,KAAK4uD,MAAMzzC,OAASnb,KAAK+wD,IAAIE,aAC7BjxD,KAAKkG,MAAM,uBA9Ca3E,EAAA,MAAzBpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CAAE+4D,UAAU,kCADCf,GAAW5uD,EAAA,MAH/BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,MAEOiuD,IAAA,IAAAgB,GAAA,GCzBoVC,GAAA,GCQrWC,cAAYl5D,OAAAwJ,EAAA,KAAAxJ,CACdi5D,GACAzB,GACAO,IACF,EACA,KACA,WACA,OAIAmB,GAASzvD,QAAAC,OAAA,mBACM,IAAAyvD,GAAAD,WCpBXE,GAAM,WAAgB,IAAAxxD,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,WAAAmvD,MAAA,CAC1Gn8C,KAAA3T,EAAAyxD,cACA59C,IAAA7T,EAAA0xD,cACAv2C,MAAAnb,EAAAmgD,YACI,CAAA//C,EAAA,OAAYO,YAAA,aAAAmvD,MAAA,CAAiC6B,OAAA1xD,KAAAowD,WAAA,eAAwCxvD,GAAA,CAAMmvD,UAAAhwD,EAAAiwD,YAA2B,CAAA7vD,EAAA,QAAAJ,EAAAkB,GAAAlB,EAAA6D,GAAA7D,EAAAs3B,KAAAs6B,YAAA11D,MAAA,KAAA8D,EAAA6D,GAAA7D,EAAAs3B,KAAAjrB,KAAAzO,MAAA,WAAAoC,EAAA+vD,GAAA,gBACtH8B,GAAe,GCWZ,SAASC,GAAYlD,GAC1B,MAAO,CACLjiD,EAAGiiD,EAAOmD,KAAOnD,EAAOzzC,MACxBvO,EAAGgiD,EAAOoD,KAAO,IAUd,SAASC,GACdj6B,EACAk6B,EACAC,EAAW,KAGX,MAAMC,EAAsC,GAC5C,SAASC,EAAW/6B,GAClB86B,EAAa31C,QAAS61C,IACpB,MAAMrtD,EAAQqtD,EAAI36B,QAAQL,IACX,IAAXryB,GACFqtD,EAAIn5D,OAAO8L,EAAO,KAIxB,SAASuyB,EAAQF,EAAei7B,GAC9B,IAAIC,EAAMJ,EAAaG,QACX72D,IAAR82D,IACFJ,EAAaG,GAAmB,GAChCC,EAAMJ,EAAaG,IAErBF,EAAW/6B,GACXk7B,EAAIr6D,KAAKm/B,GAETA,EAAKwM,UAAUrnB,QAAQ1V,IACrBywB,EAAQzwB,EAAOwrD,EAAkB,KAGrC/6B,EAAQQ,EAAU,GAClBo6B,EAAaK,UAAUh2C,QAAQ,CAAC61C,EAAKI,KACnCJ,EAAI71C,QAAQ,CAAC1T,EAAM4pD,KAEjB,MAAM/D,EAASsD,EAAcnpD,EAAKsD,MAClC,QAAe3Q,IAAXkzD,EACF,KAAM,yBAGRA,EAAOmD,KAAOW,EAAWP,EACzBvD,EAAOoD,KAAOW,EAASR,MAMtB,MAAMS,GAAbtxD,cACErB,KAAA4yD,OAAiB,EACjB5yD,KAAA6yD,OAAiB,EACjB7yD,KAAA8yD,KAAe,EACf9yD,KAAA+yD,KAAe,EAEf1xD,KAAK2xD,EAAe/D,GAClB,MAAMn7B,EAAMk/B,EAAIl/B,IAChBA,EAAIm/B,YACJn/B,EAAIo/B,OAAOlzD,KAAK4yD,OAAS3D,EAAUoB,WAAYrwD,KAAK6yD,OAAS5D,EAAUqB,YACvEx8B,EAAIq/B,OAAOnzD,KAAK8yD,KAAO7D,EAAUoB,WAAYrwD,KAAK+yD,KAAO9D,EAAUqB,YACnEx8B,EAAIs/B,UAID,MAAMC,GACXhyD,YAAY+xB,GAMZpzB,KAAAkb,MAAgB,EAChBlb,KAAAmb,OAAiB,EANfnb,KAAKozB,GAAKA,EACVpzB,KAAK8zB,IAAMV,EAAGW,WAAW,MAO3B1yB,QACErB,KAAK8zB,IAAIw/B,UAAU,EAAG,EAAGtzD,KAAKkb,MAAOlb,KAAKmb,QAG5C9Z,KAAK2K,EAAyBijD,GAC5BjvD,KAAK6oB,QACL7c,EAAMwQ,QAAQqiB,GAAQA,EAAK00B,KAAKvzD,KAAMivD,KChE1C,IAAqBuE,GAArB,cAAyCpyD,EAAA,KAHzCC,kCA8CErB,KAAAyzD,UAA8B,GAwC9BzzD,KAAAowD,YAAsB,EACtBpwD,KAAA0zD,QAAU,EACV1zD,KAAA2zD,QAAU,EACV3zD,KAAAuwD,cAAgB,EAChBvwD,KAAAywD,cAAgB,EA9DhBpvD,eAAeg2B,GACb,OAAOyL,GAAU9iC,KAAK83B,MAAO87B,IAC3B,OAAOA,EAAGv8B,OAASA,IAClBs3B,OAGLttD,WACE,OAAOrB,KAAKklC,OAAOkD,IAAIyrB,IACrB,MAAMC,EAAcjC,GAAY7xD,KAAK+zD,eAAeF,IAC9Ch1B,EAAO,IAAI8zB,GAKjB,OAJA9zB,EAAK+zB,OAASkB,EAAYpnD,EAC1BmyB,EAAKg0B,OAASiB,EAAYnnD,EAC1BkyB,EAAKi0B,KAAO9yD,KAAK2uD,OAAOmD,KACxBjzB,EAAKk0B,KAAO/yD,KAAK2uD,OAAOoD,KACjBlzB,IAKXx9B,aACErB,KAAKyzD,UAAUj3C,QAAQqiB,IACrB,MAAMxrB,EAAWrT,KAAKgM,MAAM0rB,QAAQmH,IAClB,IAAdxrB,GACFrT,KAAKgM,MAAM9S,OAAOma,EAAU,KAGhCrT,KAAKyzD,UAAYzzD,KAAKg0D,WACtBh0D,KAAKyzD,UAAUj3C,QAAQqiB,IACrB7+B,KAAKgM,MAAM9T,KAAK2mC,KAIpBx9B,UACErB,KAAKmvD,aAGPjqB,aACE,MAAM7H,EAAU,GAIhB,OAHAr9B,KAAKq3B,KAAKwM,UAAUrnB,QAAQ9f,IAC1B2gC,EAAQnlC,KAAKwE,KAER2gC,EAGTm0B,oBACE,OAAOxxD,KAAK2uD,OAAOmD,KAAO,KAE5BL,oBACE,OAAOzxD,KAAK2uD,OAAOoD,KAAO,KAG5B7R,gBACE,OAAOlgD,KAAK2uD,OAAOzzC,MAAQ,KAE7BilC,iBACE,OAAOngD,KAAK2uD,OAAOxzC,OAAS,KAQ9B9Z,UAAUxH,GACRmG,KAAKowD,YAAa,EAClBpwD,KAAK0zD,QAAU1zD,KAAK2uD,OAAOmD,KAC3B9xD,KAAK2zD,QAAU3zD,KAAK2uD,OAAOoD,KAC3B/xD,KAAKuwD,cAAgB12D,EAAE22D,QACvBxwD,KAAKywD,cAAgB52D,EAAE62D,QACvBjzD,OAAOmlC,iBAAiB,YAAa5iC,KAAK6wD,UAC1CpzD,OAAOmlC,iBAAiB,UAAW/oC,IACjCmG,KAAKowD,YAAa,EAClB3yD,OAAO2yC,oBAAoB,YAAapwC,KAAK6wD,YAIjDxvD,SAASxH,GACPmG,KAAK2uD,OAAOmD,KAAO9xD,KAAK0zD,QAAU75D,EAAE22D,QAAUxwD,KAAKuwD,cACnDvwD,KAAK2uD,OAAOoD,KAAO/xD,KAAK2zD,QAAU95D,EAAE62D,QAAU1wD,KAAKywD,cACnDzwD,KAAKkG,MAAM,iBAAkB,CAAEmxB,KAAMr3B,KAAKq3B,KAAMs3B,OAAQ3uD,KAAK2uD,SAC7D3uD,KAAKkG,MAAM,aAAclG,KAAKq3B,QAxGd91B,EAAA,MAAjBpJ,OAAAiJ,EAAA,KAAAjJ,iCACiBoJ,EAAA,MAAjBpJ,OAAAiJ,EAAA,KAAAjJ,iCAKDoJ,EAAA,MAHCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,iCAOZ3vD,EAAA,MAHCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,mCAOZ3vD,EAAA,MAHCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,sCAQZ3vD,EAAA,MAJCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,EACVv0C,SAAS,qCArBQ62C,GAAWjyD,EAAA,MAH/BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,MAEOsxD,IAAA,IAAAS,GAAA,GCxCgVC,GAAA,GCQjWC,cAAYh8D,OAAAwJ,EAAA,KAAAxJ,CACd+7D,GACA3C,GACAK,IACF,EACA,KACA,WACA,OAIAuC,GAASvyD,QAAAC,OAAA,eACM,IAAAuyD,GAAAD,WCpBXE,GAAM,WAAgB,IAAAt0D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBO,YAAA,eACzG4zD,GAAe,GCSnB,IAAqBC,GAArB,cAA2CnzD,EAAA,KAH3CC,kCAKErB,KAAAwuD,WAAqB,EAYrBntD,UACErB,KAAKw0D,IAAM,IAAInB,GAASrzD,KAAK+wD,KAC7BtzD,OAAOmlC,iBAAiB,SAAU5iC,KAAKu5C,YACvC97C,OAAO83C,sBAAsBv1C,KAAKuzD,MAClCvzD,KAAKu5C,aAGPl4C,gBACErB,KAAKwuD,WAAY,EAGnBntD,aACE,MAAM+xB,EAAKpzB,KAAK+wD,IAChB/wD,KAAKw0D,IAAIt5C,MAAQkY,EAAG49B,YACpBhxD,KAAKw0D,IAAIr5C,OAASiY,EAAG69B,aACrB79B,EAAGlY,MAAQkY,EAAG49B,YACd59B,EAAGjY,OAASiY,EAAG69B,aAGjB5vD,OACErB,KAAKw0D,IAAIjB,KAAKvzD,KAAKgM,MAAOhM,KAAKivD,WAC3BjvD,KAAKwuD,WACP/wD,OAAO83C,sBAAsBv1C,KAAKuzD,QA7BtChyD,EAAA,MAHCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,kCAOZ3vD,EAAA,MAHCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,sCAVOqD,GAAahzD,EAAA,MAHjCpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,MAEOqyD,IAAA,IAAAE,GAAA,GCVwUC,GAAA,GCQzVC,cAAYx8D,OAAAwJ,EAAA,KAAAxJ,CACdu8D,GACAL,GACAC,IACF,EACA,KACA,WACA,OAIAK,GAAS/yD,QAAAC,OAAA,sBACM,IAAA+yD,GAAAD,WCpBXE,GAAM,WAAgB,IAAA90D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAJ,EAAAkB,GAAA,OAAAlB,EAAA6D,GAAA7D,EAAAs3B,KAAAp7B,MAAA,QAAAkE,EAAA,UAA0ES,GAAA,CAAIC,MAAAd,EAAA+0D,aAAwB,CAAA/0D,EAAAkB,GAAA,iBAAAd,EAAA,UAAuCS,GAAA,CAAIC,MAAAd,EAAAg1D,cAAyB,CAAAh1D,EAAAkB,GAAA,qBAC/P+zD,GAAe,GCenB,IAAqBC,GAArB,cAAkD7zD,EAAA,KAWhDC,aACErB,KAAK2uD,OAAOzzC,MAAQlb,KAAKq3B,KAAK8iB,SAAW,EAAI18C,OAAO+1B,iBACpDxzB,KAAK2uD,OAAOxzC,OAASnb,KAAKq3B,KAAK+iB,UAAY,EAAI38C,OAAO+1B,iBACtDxzB,KAAKkG,MAAM,aAAc,CACvBmxB,KAAMr3B,KAAKq3B,KACXs3B,OAAQ3uD,KAAK2uD,SAIjBttD,cACErB,KAAK2uD,OAAOzzC,MAAQ,IACpBlb,KAAK2uD,OAAOxzC,OAAS,IACrBnb,KAAKkG,MAAM,aAAc,CACvBmxB,KAAMr3B,KAAKq3B,KACXs3B,OAAQ3uD,KAAK2uD,WArBjBptD,EAAA,MAHCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,iCAOZ3vD,EAAA,MAHCpJ,OAAAiJ,EAAA,KAAAjJ,CAAK,CACJ+4D,UAAU,mCAPO+D,GAAoB1zD,EAAA,MAHxCpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,MAEO+yD,IAAA,IAAAC,GAAA,GChByWC,GAAA,GCO1XC,GAAYj9D,OAAAwJ,EAAA,KAAAxJ,CACdg9D,GACAN,GACAG,IACF,EACA,KACA,WACA,MAIAI,GAASxzD,QAAAC,OAAA,yBACM,IAAAwzD,GAAAD,WCkDf,IAAqBE,GAArB,cAA0Cl0D,EAAA,KAR1CC,kCASErB,KAAAwuD,UAAqBzG,GAAMjB,OAAOzR,OAuBlCr1C,KAAAuvD,iBAA2B,EAC3BvvD,KAAA4uD,MAAwB,CACtB1zC,MAAO,EACPC,OAAQ,EACRk1C,WAAY,EACZC,WAAY,GAGKtwD,KAAA83B,MAAoB,GACpB93B,KAAAgM,MAA0B,GA7BvC3K,8DACJrB,KAAK8C,OAAOC,MAAM4qD,gBAAiB,QAC7B3tD,KAAKkoD,YACXH,GAAMI,iBAGF9mD,+DACJrB,KAAK8C,OAAOC,MAAMklD,iBAAkB,QAC9BjoD,KAAKkoD,YACXH,GAAMI,iBAGR9mD,KAAKxH,GACH,MAAMkoC,EAAS/hC,KAAK+wD,IAAIwE,cAAc,UACtCxN,GAAMyN,UACJ37D,EAAE47D,QAAU1zB,EAAOivB,aAClBjvB,EAAOkvB,aAAep3D,EAAE67D,SAAW3zB,EAAOkvB,cAe/C5vD,gBAAeg2B,KAAEA,EAAIs3B,OAAEA,IACrB,GAAIt3B,aAAgBiiB,GAAkB,CACpC,MAAM3sB,EAAW,IAAIpd,GACf3V,EAAI+0D,EACJzxD,EAAIm6B,EACV1K,EAAS9c,IACPjW,EAAEk4D,KAAO9xD,KAAK4uD,MAAMyB,WACpBrwD,KAAK4uD,MAAMzzC,OAASvhB,EAAEm4D,KAAOn4D,EAAEuhB,OAASnb,KAAK4uD,MAAM0B,WACnD12D,EAAEshB,MACFthB,EAAEuhB,QAEJwR,EAASvf,eAAe3P,OAAO+1B,kBAC/Bt2B,EAAE61C,cAAcj8B,KAAK6V,IAIzBtrB,WAAWg2B,GACTr3B,KAAK21D,yBAAyBt+B,GAC9BA,EAAKsM,QAAQnnB,QAAQo5C,IACnB51D,KAAK21D,yBAAyBC,KAIlCv0D,yBAAyBnE,GACvB,GAAG8C,KAAK61D,MAAMC,SACZ,IAAK,IAAIh+D,EAAI,EAAGA,EAAKkI,KAAK61D,MAAMC,SAAgC99D,OAAQF,IAAK,CAC3E,MAAMiV,EAAI/M,KAAK61D,MAAMC,SAASh+D,GAC3BiV,EAAEsqB,OAASn6B,GACZ6P,EAAEoiD,cAMV9tD,oBACErB,KAAK83B,MAAMtb,QAAQ6a,IACjBr3B,KAAKkvD,eAAe73B,KAIxBh2B,SACE,MAAM+mC,EAAM,GACZpoC,KAAK83B,MAAMtb,QAAQ6a,IACjB+Q,EAAI/Q,EAAKA,KAAKjrB,MAAQirB,EAAKs3B,SAE7BqD,GAAYjK,GAAM5C,SAASxe,MAAM2R,WAAYlQ,GAC7CpoC,KAAK6uD,oBAEL7uD,KAAK83B,MAAMtb,QAAQ6a,GAAQr3B,KAAKmvD,WAAW93B,EAAKA,OAGlDh2B,mBAAmBg2B,GACjB,OAAOA,aAAgBiiB,GAGzBj4C,eACE0mD,GAAM5C,SAASxe,MAAM0R,qBAAsB,EAC3C,MAAMvgB,EAAQiwB,GAAM5C,SAASxe,MAAM7O,MACnC93B,KAAK83B,MAAQA,EAAMsQ,IAAI/Q,IACrB,MAAO,CACLA,OACAs3B,OAAQ,CACNmD,KAAM,EACNC,KAAM,EACN72C,MAAO,IACPC,OAAQ,QAIdnb,KAAKuvD,iBAAkB,EACvBvvD,KAAK2uD,SAGPttD,sBACE0mD,GAAM5C,SAASxe,MAAM0R,qBAAsB,EAC3Cr4C,KAAKuvD,iBAAkB,EAGzBluD,MACE0mD,GAAMN,MACNznD,KAAKwuD,WAAY,EAGnBntD,OACE0mD,GAAMR,OACNvnD,KAAKwuD,WAAY,EAGnBntD,OACE0mD,GAAMliD,OAGRxE,aACE0mD,GAAMhiC,OAAOgwC,0BAhGIx0D,EAAA,MAAlBpJ,OAAAiJ,EAAA,KAAAjJ,iCACkBoJ,EAAA,MAAlBpJ,OAAAiJ,EAAA,KAAAjJ,iCAjCkBm9D,GAAY/zD,EAAA,MARhCpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,CACV8zD,UAAA1E,GACA2E,YAAA7B,GACA8B,qBAAAb,GACAc,cAAAvB,OAGiBU,IAAA,IAAAc,GAAA,GCrEsUC,GAAA,GCQvVC,cAAYn+D,OAAAwJ,EAAA,KAAAxJ,CACdk+D,GACA/H,GACAoB,IACF,EACA,KACA,WACA,OAIA4G,GAAS10D,QAAAC,OAAA,oBACM,IAAA00D,GAAAD,WCGf,IAAqBE,GAArB,cAAoCp1D,EAAA,KALpCC,kCAYErB,KAAAiD,QAAU,CACRhH,KAAM,OACNd,KAAM,SACNuB,MAAO,IATT2E,UACE,MAAM0gC,EAAS/hC,KAAK+wD,IAAIwE,cAAc,kBACtCxN,GAAM0O,WAAW10B,GACjB/hC,KAAKiD,QAAU8kD,GAAM5C,SAAS9hD,OAUhChC,gBACE0mD,GAAM2O,gBAfWF,GAAMj1D,EAAA,MAL1BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAW,CACTy0D,YAAAnO,GAAaoO,WAAAvI,GAAYwI,aAAAN,GAAcxI,YAAAxB,OAGtBiK,IAAA,IAAAM,GAAA,GCvB+TC,GAAA,GCQhVC,cAAY7+D,OAAAwJ,EAAA,KAAAxJ,CACd4+D,GACAl0D,EACAK,GACF,EACA,KACA,WACA,OAIA8zD,GAASp1D,QAAAC,OAAA,aACM,IAAAo1D,GAAAD,WCpBXE,GAAM,WAAgB,IAAAn3D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBO,YAAA,gBAA2B,CAAAP,EAAA,OAAYO,YAAA,UAAqB,CAAAP,EAAA,UAAeS,GAAA,CAAIC,MAAAd,EAAA4uD,SAAoB,CAAA5uD,EAAAkB,GAAA,cAAAd,EAAA,OAAAA,EAAA,UAA8CS,GAAA,CAAIC,MAAAd,EAAAo3D,aAAwB,CAAAp3D,EAAAkB,GAAA,aAAAd,EAAA,UAAAJ,EAAAkB,GAAA,iBAAAd,EAAA,aAA2EE,MAAA,CAAOuuD,MAAA7uD,EAAA6uD,QAAmB7uD,EAAA8D,GAAA9D,EAAA,eAAA+uD,GAAuC,OAAA3uD,EAAA,eAAyBnD,IAAA8xD,EAAAz3B,KAAAjrB,KAAA/L,MAAA,CAA8Bg3B,KAAAy3B,EAAAz3B,KAAAs3B,OAAAG,EAAAH,OAAAM,UAAAlvD,EAAA6uD,OAAoEhuD,GAAA,CAAKsuD,eAAA,SAAAzqD,GAAkC,OAAA1E,EAAAmvD,eAAAJ,SAAwC,OAAA3uD,EAAA,OAAmBO,YAAA,UAAqB,CAAAP,EAAA,MAAAJ,EAAAkB,GAAA,YAAAlB,EAAA,SAAAI,EAAA,UAA0DS,GAAA,CAAIC,MAAA,SAAA4D,GAAyB1E,EAAAq3D,UAAA,KAAuB,CAAAr3D,EAAAkB,GAAA,YAAAd,EAAA,UAAkCS,GAAA,CAAIC,MAAAd,EAAAs3D,UAAqB,CAAAt3D,EAAAkB,GAAA,yBAAAd,EAAA,UAA+CS,GAAA,CAAIC,MAAAd,EAAAu3D,kBAA6B,CAAAv3D,EAAAkB,GAAA,qBAAAd,EAAA,OAAwCsF,WAAA,EAAaxJ,KAAA,OAAAyJ,QAAA,SAAAhJ,MAAAqD,EAAA,SAAAsE,WAAA,aAAwE3D,YAAA,eAA4B,CAAAP,EAAA,OAAAJ,EAAAkB,GAAAlB,EAAA6D,GAAA7D,EAAAw3D,oBAAAp3D,EAAA,OAA4DsF,WAAA,EAAaxJ,KAAA,OAAAyJ,QAAA,SAAAhJ,OAAAqD,EAAAq3D,SAAA/yD,WAAA,cAA0E3D,YAAA,cAAAE,GAAA,CAAgC42D,WAAAz3D,EAAA+lB,MAAA2xC,WAAA13D,EAAAi/B,MAA6C,CAAA7+B,EAAA,UAAeE,MAAA,CAAOC,GAAA,iCACzxCo3D,GAAe,GCKZ,MAAMC,GAAbt2D,cAGErB,KAAA2mC,MAAqB,IAAI0F,GACzBrsC,KAAAw2B,MAAe,IAAI8f,GA0CnBt2C,KAAA43D,WAAqB,EAKrB53D,KAAA63D,KAAO,MACD73D,KAAK43D,WACP53D,KAAKF,SAEPrC,OAAO83C,sBAAsBv1C,KAAK63D,QAc5B73D,KAAAgnD,kBAAoB,MAC1B,MAAM9rC,EAAQlb,KAAK+hC,OAAO3N,YACpBjZ,EAASnb,KAAK+hC,OAAO1N,aAC3Br0B,KAAK+lB,OAAOoO,QAAQjZ,EAAOC,GAC1Bnb,KAAK+lB,OAAOisB,OAA6B9Y,OAAShe,EAAQC,IA5D7D9Z,KAAK0gC,GACH/hC,KAAK+hC,OAASA,EACd/hC,KAAK+lB,OAAS,IAAIkrB,GAAalP,GAC/B/hC,KAAK+lB,OAAOisB,OAAOpb,UAAUvjB,SAASxD,IAAI,GAAI,GAAI,IAClD7P,KAAKmnD,gBAAkB,IAAI9H,GAAgBr/C,KAAK+lB,OAAOisB,QACvDhyC,KAAKmnD,gBAAgBC,mBAAmBpnD,KAAK+lB,OAAOksB,YACpDjyC,KAAK+K,QAAS,IAAImiC,IAAUO,SAAS,IAAI8D,IACzCvxC,KAAK83D,YACL93D,KAAK63D,OACL73D,KAAK8lB,QAELroB,OAAOmlC,iBAAiB,SAAU5iC,KAAKgnD,mBACvChnD,KAAKgnD,oBAGP3lD,gBASAA,YACE,IAAI02D,EAAU,IAAIna,GAAe,EAAG,GAAI,IACxC,MAAMkK,EAAO,IAAI9qB,GACjB8qB,EAAKh1B,SAAWilC,EAChBjQ,EAAK/qB,QAAU/8B,KAAK+K,OACpB/K,KAAK8nD,KAAOA,EACZ9nD,KAAKw2B,MAAM8V,KAAKwY,SAASgD,GAI3BzmD,QACErB,KAAK43D,WAAY,EAUnBv2D,SACErB,KAAKmnD,gBAAgBttC,SACrB7Z,KAAK+lB,OAAOkgC,gBACZjmD,KAAK+lB,OAAOjmB,OAAOE,KAAKw2B,OAG1Bn1B,SACErB,KAAK+hC,OAAS,KACd/hC,KAAK+lB,OAAS,MAcX,IAAIiyC,GAA+B,IAAIL,GChCzBM,GAArB,cAA0C72D,EAAA,KAN1CC,kCAOErB,KAAAo3D,UAAoB,EACpBp3D,KAAA2mC,MAAqB,KACrB3mC,KAAAu3D,cAAwB,GAExBv3D,KAAA4uD,MAAwB,CACtB1zC,MAAO,EACPC,OAAQ,EACRk1C,WAAY,EACZC,WAAY,GAGdtwD,KAAA83B,MAAoB,GAEpBz2B,UACE,MAAM0gC,EAAS/hC,KAAK+wD,IAAIwE,cAAc,yBACtCyC,GAAU9jC,KAAK6N,GACf/hC,KAAK2mC,MAAQqxB,GAAUjtD,OAAO47B,MAE9B3mC,KAAK4uD,MAAM1zC,MAAQ6mB,EAAOivB,YAC1BhxD,KAAK4uD,MAAMzzC,OAAS4mB,EAAOkvB,aAG3B1zD,QAAQkO,IAAIzL,KAAK2mC,OAGnBtlC,UAEAA,eAAeynD,GACbvrD,QAAQkO,IAAI,OAGdpK,UACErB,KAAKo3D,UAAW,EAKlB/1D,aACErB,KAAK83B,MAAM5/B,KAAK,CACdm/B,KAAMoU,GAAQ,UAAWjwB,GAAWE,OACpCizC,OAAQ,CACNmD,KAAM,EACNC,KAAM,EACN72C,MAAO,IACPC,OAAQ,OAKd9Z,kBACE22D,GAAUE,eAGZ72D,QACE22D,GAAUlyC,QAGZzkB,MACE22D,GAAUJ,WAAY,IA3DLK,GAAY12D,EAAA,MANhCpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,CACV+zD,YAAA7B,GACA4B,UAAA1E,OAGiB2G,IAAA,IAAAE,GAAA,GCtDsUC,GAAA,GCQvVC,cAAYlgE,OAAAwJ,EAAA,KAAAxJ,CACdigE,GACAlB,GACAQ,IACF,EACA,KACA,WACA,OAIAW,GAASz2D,QAAAC,OAAA,oBACM,IAAAy2D,GAAAD,WCpBXE,GAAM,WAAgB,IAAAx4D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,QACrFq4D,GAAe,GCSnB,IAAqBC,GAArB,cAAmCr3D,EAAA,KACjCC,UACE9D,QAAQkO,IAAI,SACC,IAAI+xC,KAHAib,GAAKl3D,EAAA,MAFzBpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,KAEUsgE,IAAA,IAAAC,GAAA,GCV8TC,GAAA,GCO/UC,GAAYzgE,OAAAwJ,EAAA,KAAAxJ,CACdwgE,GACAJ,GACAC,IACF,EACA,KACA,KACA,MAIAI,GAASh3D,QAAAC,OAAA,YACM,IAAAg3D,GAAAD,WCnBXE,GAAM,WAAgB,IAAA/4D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,MAAAJ,EAAAkB,GAAA,cAAAlB,EAAA8D,GAAA9D,EAAA,kBAAAg5D,GAAuF,OAAA54D,EAAA,OAAiBnD,IAAA+7D,EAAA98D,KAAAyE,YAAA,gBAAAE,GAAA,CAAiDC,MAAA,SAAA4D,GAAyB,OAAA1E,EAAAi5D,YAAAD,EAAA98D,SAAuC,CAAA8D,EAAAkB,GAAAlB,EAAA6D,GAAAm1D,EAAA98D,YAAiC,IAC/Ug9D,GAAe,GCkBnB,IAAqBC,GAArB,cAAyC93D,EAAA,KAIvC+3D,eACE,OAAOn5D,KAAK8C,OAAOC,MAAMo2D,SAG3B93D,WAGAA,YAAYpF,GACVsB,QAAQkO,IAAI,QACZzL,KAAK8C,OAAOC,MAAMq2D,YAAcn9D,EAChC+D,KAAKsB,QAAQpJ,KAAK,CAChB+D,KAAM,UACNo9D,OAAQ,CACNp9D,YAjBai9D,GAAW33D,EAAA,MAH/BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,MAEOg3D,IAAA,IAAAI,GAAA,GCnBoVC,GAAA,GCQrWC,cAAYrhE,OAAAwJ,EAAA,KAAAxJ,CACdohE,GACAT,GACAG,IACF,EACA,KACA,WACA,OAIAO,GAAS53D,QAAAC,OAAA,mBACM,IAAA43D,GAAAD,WCpBXE,GAAM,WAAgB,IAAA35D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,MAAAJ,EAAAkB,GAAAlB,EAAA6D,GAAA7D,EAAAg5D,QAAA98D,SAAAkE,EAAA,OAAAJ,EAAA0C,GAAA,GAAA1C,EAAA,gBAAAI,EAAA,OAAAJ,EAAAyuD,UAAsKzuD,EAAAQ,KAAtKJ,EAAA,UAA+IS,GAAA,CAAIC,MAAAd,EAAA+lB,QAAmB,CAAA/lB,EAAAkB,GAAA,WAAAlB,EAAAyuD,UAAiFzuD,EAAAQ,KAAjFJ,EAAA,UAA2DS,GAAA,CAAIC,MAAAd,EAAA8F,OAAkB,CAAA9F,EAAAkB,GAAA,UAAAlB,EAAA,UAAAI,EAAA,UAAyDS,GAAA,CAAIC,MAAAd,EAAAwnD,OAAkB,CAAAxnD,EAAAkB,GAAA,UAAAlB,EAAAQ,OAAAJ,EAAA,OAAAJ,EAAAkB,GAAA,yCAC3Z04D,GAAe,YAAiB,IAAA55D,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,cCQ5F,MAAMy5D,GAAbv4D,cAGErB,KAAA8mD,OAAiB,IAAIlS,GAFfvzC,yBAAyBw4D,EAAsBC,qDAMhD,MAAMC,GAAb14D,cAMErB,KAAA8mD,OAAiB,IAAIlS,GAJfvzC,yBAAyBw4D,EAAsBC,uDAC7Cr8D,OAAOu8D,yBAAyBH,EAASC,MAOnDr8D,OAAOw8D,mBAAqBF,GCF5B,MAAMG,GAAS,IAAIN,GAKnB,IAAqBO,GAArB,cAAyC/4D,EAAA,KAHzCC,kCAmBErB,KAAAo6D,iBAA2B,EAC3Bp6D,KAAAwuD,WAAqB,EAZrBuK,cACE/4D,KAAK8C,OAAOC,MAAMq2D,YAAcp5D,KAAKiC,OAAOo3D,OAAOp9D,KACnD,IAAK,IAAInE,EAAI,EAAGA,EAAIkI,KAAK8C,OAAOC,MAAMo2D,SAASnhE,OAAQF,IAAK,CAC1D,MAAMihE,EAAU/4D,KAAK8C,OAAOC,MAAMo2D,SAASrhE,GAC3C,GAAIihE,EAAQ98D,OAAS+D,KAAK8C,OAAOC,MAAMq2D,YACrC,OAAOL,EAGX,KAAM,oBAMR13D,QACE64D,GAAOpT,OAAOW,MACdznD,KAAKwuD,WAAY,EAGnBntD,OACE64D,GAAOpT,OAAOS,OACdvnD,KAAKwuD,WAAY,EAGnBntD,OACE64D,GAAOpT,OAAOjhD,OAGVxE,uDACJ9D,QAAQkO,IAAIzL,KAAK+4D,eACX/4D,KAAK+4D,QAAQrrB,MAAMwsB,IACzBl6D,KAAKo6D,iBAAkB,MApCND,GAAW54D,EAAA,MAH/BpJ,OAAAiJ,EAAA,KAAAjJ,CAAU,CACT+J,WAAY,MAEOi4D,IAAA,IAAAE,GAAA,GC7ByVC,GAAA,GCQ1WC,cAAYpiE,OAAAwJ,EAAA,KAAAxJ,CACdmiE,GACAZ,GACAC,IACF,EACA,KACA,WACA,OAIAY,GAAS34D,QAAAC,OAAA,wBACM,IAAA24D,GAAAD,WCXfE,EAAA,KAAIC,IAAIC,EAAA,MAEO,IAAAC,GAAA,IAAID,EAAA,KAAO,CACxBE,OAAQ,CACN,CACEC,KAAM,IACN7+D,KAAM,OACNyF,UAAWkB,GAEb,CACEk4D,KAAM,SACN7+D,KAAM,QACNyF,UAAWm3D,IAEb,CACEiC,KAAM,UACN7+D,KAAM,SACNyF,UAAWu1D,IAEb,CACE6D,KAAM,UACN7+D,KAAM,gBACNyF,UAAW42D,IAEb,CACEwC,KAAM,YACN7+D,KAAM,WACNyF,UAAW+3D,IAEb,CACEqB,KAAM,iBACN7+D,KAAM,UACNyF,UAAW84D,IAEb,CACEM,KAAM,SACN7+D,KAAM,QAINyF,UAAW,IAAMvI,EAAAU,EAAA,SAAAkhE,KAAA5hE,EAAA8D,KAAA,+BC/CR+9D,GAAA,yDAYb,IAAIj5B,EAASznC,SAASi7D,cAAc,UAEpC,MAAMxvC,EAAS,IAAIkrB,GAAmBlP,GAEhCvL,EAAQ,IAAI8f,GAElB,IAAI2O,EAAW,IAAIjoB,GAEnBxG,EAAM8V,KAAKwY,SAASG,GAEpBl/B,EAAOjmB,OAAO02B,MCpBD,SAAeykC,GAAKC,iDAIjC,IAAIn5B,EAASznC,SAASi7D,cAAc,UACpC,MAAMxvC,EAAS,IAAIkrB,GAAmBlP,GAEhCvL,EAAQ,IAAI8f,GAEZxjB,EAAW,IAAI8qB,GAEfkK,EAAO,IAAI9qB,GACX6B,EAAO,IAAI+W,GACXulB,EAAS,IAAIrlB,GAEnBgS,EAAKh1B,SAAWA,EAChB+L,EAAK/L,SAAWA,EAChBqoC,EAAOroC,SAAWA,EAElB+L,EAAKjI,UAAUvjB,SAAS3G,GAAK,EAC7ByuD,EAAOvkC,UAAUvjB,SAAS3G,EAAI,EAE9B8pB,EAAM8V,KAAKwY,SAASgD,GACpBtxB,EAAM8V,KAAKwY,SAASjmB,GACpBrI,EAAM8V,KAAKwY,SAASqW,GAEpB,MAAMnpB,EAASjsB,EAAOisB,OAItB,SAASuhB,IACPxtC,EAAOkgC,gBACPlgC,EAAOjb,SAAS/H,MAAM0pB,YAAY9D,cAAc,IAAIpZ,GAAc,GAAK,GAAK,GAAK,IACjFwW,EAAOjb,SAAS/H,MAAM0pB,YAAY5D,QAClC9C,EAAOjmB,OAAO02B,GAPhBwb,EAAOpb,UAAUvjB,SAASxD,IAAI,EAAG,EAAG,IACpCmiC,EAAOnY,OAAO,IAAIptB,GAAQ,EAAE,EAAE,IAS9B8mD,UAKM2H,EAAWlB,yBAAyBj4B,EAAQ,QAGlD,MAAMkQ,EAAa,IAAIpD,GAAiB9M,GAClColB,EAAkB,IAAI9H,GAAsBrN,GAClDmV,EAAgBC,mBAAmBnV,GAEnCipB,EAAWpU,OAAOQ,SAAS,KACzBH,EAAgBttC,SAChB05C,QClCG,MAAM4F,GAAsB,CACjC,CACEl9D,KAAM,cACNyxC,MAAOstB,IAET,CACE/+D,KAAM,YACNyxC,MAAOutB,KAKXx9D,OAAO29D,cAAgBjC,GACvB17D,OAAOw8D,mBAAqBF,GC7B5BU,EAAA,KAAIC,IAAIW,GAAA,MAEO,IAAAC,GAAA,IAAID,GAAA,KAAKE,MAAM,CAC5Bx4D,MAAO,CACLklD,iBAAiB,EACjB0F,gBAAgB,EAChBwL,YACAC,YAAa,IAEfoC,UAAW,GAGXC,QAAS,KCZXhB,EAAA,KAAIp3D,OAAOq4D,eAAgB,EAE3B,IAAIjB,EAAA,KAAI,CACNG,UACAU,SACAx7D,OAAQkU,GAAKA,EAAEzR,KACdo5D,OAAO,kECXV,IAAAC,EAAAziE,EAAA,QAAA0iE,EAAA1iE,EAAA+D,EAAA0+D,GAAkkBC,EAAG,mFCArkB,IAAAC,EAAA3iE,EAAA,QAAA4iE,EAAA5iE,EAAA+D,EAAA4+D,GAAwjBC,EAAG,mFCA3jB,IAAAC,EAAA7iE,EAAA,QAAA8iE,EAAA9iE,EAAA+D,EAAA8+D,GAA2iBC,EAAG,4DCA9iB,IAAAC,EAAA/iE,EAAA,QAAAgjE,EAAAhjE,EAAA+D,EAAAg/D,GAAqjBC,EAAG","file":"js/app.0d47ef23.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"cbdfe239\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./folder.vue?vue&type=style&index=0&id=b2989a74&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./folder.vue?vue&type=style&index=0&id=b2989a74&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-page.vue?vue&type=style&index=0&id=063d4f2b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-page.vue?vue&type=style&index=0&id=063d4f2b&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./geometry-view.vue?vue&type=style&index=0&id=16a04246&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./geometry-view.vue?vue&type=style&index=0&id=16a04246&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shader-editor.vue?vue&type=style&index=0&id=31be39e7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shader-editor.vue?vue&type=style&index=0&id=31be39e7&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editors.vue?vue&type=style&index=0&id=5d23d6f4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editors.vue?vue&type=style&index=0&id=5d23d6f4&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/artgl.7059ff1a.svg\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./number.vue?vue&type=style&index=0&id=41fd1826&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./number.vue?vue&type=style&index=0&id=41fd1826&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dag-node.vue?vue&type=style&index=0&id=186cb780&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dag-node.vue?vue&type=style&index=0&id=186cb780&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=style&index=0&id=5bb907a0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=style&index=0&id=5bb907a0&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-node-view.vue?vue&type=style&index=0&id=95da2114&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-node-view.vue?vue&type=style&index=0&id=95da2114&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=style&index=0&id=4ae3c20a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=style&index=0&id=4ae3c20a&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./object-panel.vue?vue&type=style&index=0&id=4a932871&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./object-panel.vue?vue&type=style&index=0&id=4a932871&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./graph-viewer.vue?vue&type=style&index=0&id=4b63007a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./graph-viewer.vue?vue&type=style&index=0&id=4b63007a&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-panel.vue?vue&type=style&index=0&id=cd90fe88&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-panel.vue?vue&type=style&index=0&id=cd90fe88&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config-panel.vue?vue&type=style&index=0&id=134ba5ce&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config-panel.vue?vue&type=style&index=0&id=134ba5ce&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer-canvas.vue?vue&type=style&index=0&id=5da8d6ca&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer-canvas.vue?vue&type=style&index=0&id=5da8d6ca&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=style&index=0&id=36c0e409&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=style&index=0&id=36c0e409&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/art.208123ee.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.showTopNav)?_c('TopNav'):_vm._e(),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"top-nav\"},[_c('img',{attrs:{\"src\":require(\"../../assets/art.svg\"),\"alt\":\"\"},on:{\"click\":_vm.gotoHome}}),_c('div',{staticClass:\"current-project\"},[_c('router-link',{attrs:{\"active-class\":\"current\",\"to\":\"/viewer\"}},[_vm._v(\"Viewer\")]),_c('router-link',{attrs:{\"active-class\":\"current\",\"to\":\"/shader\"}},[_vm._v(\"Composer\")]),_c('router-link',{attrs:{\"active-class\":\"current\",\"to\":\"/examples\"}},[_vm._v(\"Examples\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n@Component\nexport default class TopNav extends Vue {\n  $router: any;\n  gotoHome() {\n    this.$router.push({\n      name: \"home\"\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-nav.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-nav.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./top-nav.vue?vue&type=template&id=f17af42a&scoped=true&\"\nimport script from \"./top-nav.vue?vue&type=script&lang=ts&\"\nexport * from \"./top-nav.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./top-nav.vue?vue&type=style&index=0&id=f17af42a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f17af42a\",\n  null\n  \n)\n\ncomponent.options.__file = \"top-nav.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport TopNav from './components/nav/top-nav.vue';\n\n@Component({\n  components: {\n    TopNav,\n  },\n})\nexport default class ViewerApp extends Vue {\n  $route: any;\n\nget showTopNav(){\n  return this.$route.name !=='home'\n}\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=215b130b&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-page\"},[_vm._m(0),_c('ul',[_c('router-link',{attrs:{\"active-class\":\"current\",\"to\":\"/viewer\"}},[_vm._v(\"Scene Viewer\")]),_c('router-link',{attrs:{\"active-class\":\"current\",\"to\":\"/shader\"}},[_vm._v(\"Shader Composer\")]),_c('router-link',{attrs:{\"active-class\":\"current\",\"to\":\"/examples\"}},[_vm._v(\"Simple Examples\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('img',{attrs:{\"src\":require(\"../assets/artgl.svg\"),\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=4ae3c20a&scoped=true&\"\nvar script = {}\nimport style0 from \"./home.vue?vue&type=style&index=0&id=4ae3c20a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ae3c20a\",\n  null\n  \n)\n\ncomponent.options.__file = \"home.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"viewer\"},[(this.$store.state.showScenePanel)?_c('ScenePanel'):_vm._e(),_c('ViewerCanvas'),(this.$store.state.showConfigPanel)?_c('ConfigPanel',{attrs:{\"appConfig\":_vm.appConf}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"config-panel\"},[_c('div',{staticClass:\"panel-title\"},[_vm._v(\"\\n    Render configuration\\n    \"),_c('button',{on:{\"click\":_vm.hide}},[_vm._v(\"hide\")])]),_c('div',{staticClass:\"config-wrap\"},[_c('Config',{attrs:{\"config\":_vm.appConfig}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"conf\"},[_c('Folder',{attrs:{\"config\":_vm.config}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"folder\"},[_c('div',{staticClass:\"title\",on:{\"click\":_vm.toggle}},[(!_vm.expand)?_c('span',[_vm._v(\">\")]):_c('span',[_vm._v(\"=\")]),_vm._v(\"\\n    \"+_vm._s(_vm.config.name)+\"\\n    \"),(_vm.isEmptyList)?_c('span',{staticClass:\"empty-hint\"},[_vm._v(\" empty \")]):_vm._e()]),(_vm.expand)?_c('div',{staticClass:\"subitem\"},_vm._l((_vm.config.value),function(subConfig){return _c('div',{key:subConfig.name},[(Array.isArray(subConfig.value))?_c('config-folder',{attrs:{\"config\":subConfig}}):_c('ConfigItem',{attrs:{\"config\":subConfig},model:{value:(subConfig.value),callback:function ($$v) {_vm.$set(subConfig, \"value\", $$v)},expression:\"subConfig.value\"}})],1)}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"item-head\"},[_c('div',{staticClass:\"item-name\"},[_vm._v(\"\\n    \"+_vm._s(_vm.config.name)+\" \\n    \")]),_c('div',{staticClass:\"inline-editor\"},[(typeof _vm.config.value === 'number')?_c('NumberEditor',{model:{value:(_vm.configValue),callback:function ($$v) {_vm.configValue=$$v},expression:\"configValue\"}}):_vm._e(),(typeof _vm.config.value === 'boolean')?_c('BooleanEditor',{model:{value:(_vm.configValue),callback:function ($$v) {_vm.configValue=$$v},expression:\"configValue\"}}):_vm._e(),(_vm.shouldHaveCustomEditor)?_c('button',{staticClass:\"expand-editor\",on:{\"click\":function($event){_vm.expandEditor = !_vm.expandEditor}}},[_vm._v(\"&\")]):_vm._e()],1)]),(_vm.shouldHaveCustomEditor && _vm.expandEditor)?_c('Editors',{attrs:{\"editorConfig\":_vm.config.editors},model:{value:(_vm.configValue),callback:function ($$v) {_vm.configValue=$$v},expression:\"configValue\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor\"},[(_vm.isMultiEditor)?_c('div',{staticClass:\"editor-list\"},_vm._l((_vm.editorConfig),function(e,index){return _c('div',{key:e.type,staticClass:\"editor-nav\",class:{'active-editor-nav': index === _vm.currentEditor},on:{\"click\":function($event){return _vm.useEditor(index)}}},[_vm._v(\"\\n    \"+_vm._s(e.type)+\"\\n    \")])}),0):(_vm.editor.type === 'slider')?_c('NumberSliderEditor',{attrs:{\"config\":_vm.editor},model:{value:(_vm._value),callback:function ($$v) {_vm._value=$$v},expression:\"_value\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm._value),expression:\"_value\"}],attrs:{\"type\":\"range\",\"max\":_vm.config.max,\"min\":_vm.config.min,\"step\":_vm.config.step},domProps:{\"value\":(_vm._value)},on:{\"__r\":function($event){_vm._value=$event.target.value}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n@Component\nexport default class NumberSliderEditor extends Vue {\n\n  @Prop() value: number;\n  @Prop() config: number;\n\n  get _value(){\n    return this.value;\n  }\n\n  set _value(value){\n    this.$emit('input', value - 0);\n  }\n\n\n  \n}\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./number-slider.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./number-slider.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./number-slider.vue?vue&type=template&id=724fbe74&\"\nimport script from \"./number-slider.vue?vue&type=script&lang=ts&\"\nexport * from \"./number-slider.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"number-slider.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport NumberSliderEditor from './number-slider.vue';\n@Component({\n  components:{\n    NumberSliderEditor\n  }\n})\nexport default class Editors extends Vue {\n  currentEditor = 0;\n\n  get isMultiEditor(){\n    return this.editorConfig.length !== 1;\n  }\n\n  @Prop() editorConfig: any;\n  @Prop() value: any;\n\n  get editor(){\n    return this.editorConfig[this.currentEditor];\n  }\n\n  get _value(){\n    return this.value;\n  }\n\n  set _value(value){\n    this.$emit('input', value);\n  }\n\n  useEditor(index){\n    this.currentEditor = index;\n  }\n\n\n}\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editors.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editors.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./editors.vue?vue&type=template&id=5d23d6f4&scoped=true&\"\nimport script from \"./editors.vue?vue&type=script&lang=ts&\"\nexport * from \"./editors.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./editors.vue?vue&type=style&index=0&id=5d23d6f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d23d6f4\",\n  null\n  \n)\n\ncomponent.options.__file = \"editors.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"number-editor\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm._value),expression:\"_value\"}],attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm._value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm._value=$event.target.value}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n@Component\nexport default class NumberEditor extends Vue {\n  @Prop() value: number;\n\n  get _value() {\n    return this.value;\n  }\n\n  set _value(value) {\n    this.$emit(\"input\", value - 0);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./number.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./number.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./number.vue?vue&type=template&id=41fd1826&scoped=true&\"\nimport script from \"./number.vue?vue&type=script&lang=ts&\"\nexport * from \"./number.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./number.vue?vue&type=style&index=0&id=41fd1826&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41fd1826\",\n  null\n  \n)\n\ncomponent.options.__file = \"number.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm._value),expression:\"_value\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm._value)?_vm._i(_vm._value,null)>-1:(_vm._value)},on:{\"change\":function($event){var $$a=_vm._value,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm._value=$$a.concat([$$v]))}else{$$i>-1&&(_vm._value=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm._value=$$c}}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n@Component\nexport default class BooleanEditor extends Vue {\n  @Prop() value: number;\n\n  get _value() {\n    return this.value;\n  }\n\n  set _value(value) {\n    this.$emit(\"input\", value);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./boolean.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./boolean.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./boolean.vue?vue&type=template&id=6d8834d4&\"\nimport script from \"./boolean.vue?vue&type=script&lang=ts&\"\nexport * from \"./boolean.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"boolean.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport Editors from './editors.vue';\nimport NumberEditor from './number.vue';\nimport BooleanEditor from './boolean.vue';\n@Component({\n  components:{\n    Editors, NumberEditor, BooleanEditor\n  }\n})\nexport default class ConfigItem extends Vue {\n  expandEditor:boolean = false;\n\n  @Prop() config: any;\n\n  get configValue(){\n    return this.config.value;\n  }\n\n  set configValue(newValue){\n    if(this.config.onChange !== undefined){\n      this.config.onChange(newValue);\n    }\n    this.config.value = newValue;\n  }\n\n  get shouldHaveCustomEditor(){\n    return this.config.editors !== undefined\n  }\n}\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./item.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./item.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./item.vue?vue&type=template&id=1e529480&scoped=true&\"\nimport script from \"./item.vue?vue&type=script&lang=ts&\"\nexport * from \"./item.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./item.vue?vue&type=style&index=0&id=1e529480&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e529480\",\n  null\n  \n)\n\ncomponent.options.__file = \"item.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport ConfigItem from './item.vue';\n@Component({\n  name: 'config-folder',\n  components:{\n    ConfigItem\n  }\n})\nexport default class Folder extends Vue {\n  expand:boolean = true;\n  @Prop() config: any;\n\n  get isEmptyList(){\n    return this.config.value.length === 0\n  }\n\n  toggle(){\n    if(!this.isEmptyList){\n      this.expand = !this.expand;\n    }\n  }\n}\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./folder.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./folder.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./folder.vue?vue&type=template&id=b2989a74&scoped=true&\"\nimport script from \"./folder.vue?vue&type=script&lang=ts&\"\nexport * from \"./folder.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./folder.vue?vue&type=style&index=0&id=b2989a74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2989a74\",\n  null\n  \n)\n\ncomponent.options.__file = \"folder.vue\"\nexport default component.exports","\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Folder from \"./folder.vue\";\n@Component({\n  components: { Folder }\n})\nexport default class ConfigPanel extends Vue {\n  @Prop() config: any;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./config.vue?vue&type=template&id=5bb907a0&scoped=true&\"\nimport script from \"./config.vue?vue&type=script&lang=ts&\"\nexport * from \"./config.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./config.vue?vue&type=style&index=0&id=5bb907a0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5bb907a0\",\n  null\n  \n)\n\ncomponent.options.__file = \"config.vue\"\nexport default component.exports","// https://github.com/pissang/claygl/blob/master/src/core/GLInfo.js\n\nexport enum GLExtList {\n  OES_texture_float = \"OES_texture_float\",\n  OES_texture_half_float = \"OES_texture_half_float\",\n  OES_texture_float_linear = \"OES_texture_float_linear\",\n  OES_texture_half_float_linear = \"OES_texture_half_float_linear\",\n  OES_standard_derivatives = \"OES_standard_derivatives\",\n  OES_vertex_array_object = \"OES_vertex_array_object\",\n  OES_element_index_uint = \"OES_element_index_uint\",\n  WEBGL_compressed_texture_s3tc = \"WEBGL_compressed_texture_s3tc\",\n  WEBGL_depth_texture = \"WEBGL_depth_texture\",\n  EXT_texture_filter_anisotropic = \"EXT_texture_filter_anisotropic\",\n  EXT_shader_texture_lod = \"EXT_shader_texture_lod\",\n  WEBGL_draw_buffers = \"WEBGL_draw_buffers\",\n  EXT_frag_depth = \"EXT_frag_depth\",\n  EXT_sRGB = \"EXT_sRGB\"\n}\n\nexport enum GLParamList {\n  MAX_TEXTURE_SIZE = \"MAX_TEXTURE_SIZE\",\n  MAX_CUBE_MAP_TEXTURE_SIZE = \"MAX_CUBE_MAP_TEXTURE_SIZE\"\n}\n\nconst EXTENSION_LIST = Object.keys(GLExtList);\nconst PARAMETER_NAMES = Object.keys(GLParamList);\n\nexport class GLInfo{\n  constructor(gl: WebGLRenderingContext) {\n    this.gl = gl;\n    this.createAllExtension();\n    this.getAllParams();\n  }\n  private gl: WebGLRenderingContext\n  private extensions: { [index: string]: any } = {}\n  private parameters: { [index: string]: any } = {}\n\n  private createExtension(name: string) {\n    const gl = this.gl;\n    var ext = gl.getExtension(name);\n    if (!ext) {\n      ext = gl.getExtension('MOZ_' + name);\n    }\n    if (!ext) {\n      ext = gl.getExtension('WEBKIT_' + name);\n    }\n    this.extensions[name] = ext;\n  }\n\n  getExtension (name: GLExtList) {\n    if (!(name in this.extensions)) {\n      this.createExtension(name);\n    }\n    return this.extensions[name];\n  };\n\n  getParameter (name: string) {\n    return this.parameters[name];\n  };\n\n  private createAllExtension() {\n    for (var i = 0; i < EXTENSION_LIST.length; i++) {\n      var extName = EXTENSION_LIST[i];\n      this.createExtension(extName);\n    }\n  }\n\n  private getAllParams() {\n    for (var i = 0; i < PARAMETER_NAMES.length; i++) {\n      var name = PARAMETER_NAMES[i];\n      this.parameters[name] = this.gl.getParameter((this.gl as any)[name]);\n    }\n  }\n}\n","import { GLRenderer } from \"./gl-renderer\";\nimport { GLProgramConfig } from \"./program\";\n\nexport enum ShaderType {\n  vertex,\n  fragment\n}\n\nexport class GLShader {\n  constructor(renderer: GLRenderer, type: ShaderType) {\n    this.renderer = renderer;\n    const gl = this.renderer.gl;\n    this.type = type;\n    var shader = gl.createShader(type === ShaderType.vertex ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n    if (shader === null) {\n      throw 'webgl shader create failed';\n    }\n    this.shader = shader;\n  }\n  renderer: GLRenderer;\n  shader: WebGLShader;\n  type: ShaderType;\n\n  compileShader(source: string): WebGLShader {\n    const gl = this.renderer.gl;\n    gl.shaderSource(this.shader, source);\n    gl.compileShader(this.shader);\n    if (!gl.getShaderParameter(this.shader, gl.COMPILE_STATUS)) {\n      let log = gl.getShaderInfoLog(this.shader);\n      if (log) {\n        logDebugShaderSource(source);\n        throw new Error(log);\n      }\n    }\n    if (!this.shader) {\n      throw \"Something went wrong while compile the shader.\";\n    }\n    return this.shader;\n  };\n\n  dispose() {\n    this.renderer.gl.deleteShader(this.shader);\n  }\n\n}\n\nfunction logDebugShaderSource(source: string) {\n  console.warn(addLineNumbers(source));\n}\n\nfunction addLineNumbers(str: string) {\n  var lines = str.split('\\n');\n  for (var i = 0; i < lines.length; i++) {\n    lines[i] = (i + 1) + ': ' + lines[i];\n  }\n  return lines.join('\\n');\n}","var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\nvar uuid = new Array(36);\nvar rnd = 0, r;\n  // http://www.broofa.com/Tools/Math.uuid.htm\nexport function generateUUID(): string{\n  for (var i = 0; i < 36; i++) {\n    if (i === 8 || i === 13 || i === 18 || i === 23) {\n      uuid[i] = '-';\n    } else if (i === 14) {\n      uuid[i] = '4';\n    } else {\n      if (rnd <= 0x02) rnd = 0x2000000 + (Math.random() * 0x1000000) | 0;\n      r = rnd & 0xf;\n      rnd = rnd >> 4;\n      uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r];\n    }\n  }\n  return uuid.join('');\n}\n","import { Quaternion } from './quaternion';\nimport { Matrix4 } from './Matrix4';\nimport { Spherical } from './Spherical';\nimport { DataObject, VectorDataObject, ArrayFlattenable } from './index';\n\nexport class Vector3\n  implements\n  DataObject<Vector3>,\n  VectorDataObject<Vector3>,\n  ArrayFlattenable<Vector3>\n{\n  private buffer: Float32Array = new Float32Array(3);\n  public x: number;\n  public y: number;\n  public z: number;\n\n  constructor(x?: number, y?: number, z?: number) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.z = z || 0;\n  }\n\n  public set(x: number, y: number, z: number): Vector3 {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n\n  public copy(v: Vector3): Vector3 {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  }\n\n  public equals(v: Vector3) {\n    return ((v.x === this.x) && (v.y === this.y)) && (v.z === this.z);\n  }\n\n  public clone(): Vector3 {\n    return new Vector3(this.x, this.y, this.z);\n  }\n\n  public add(v: Vector3): Vector3 {\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    return this;\n  }\n\n  public sub(v: Vector3): Vector3 {\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    return this;\n  }\n\n  public mag(): number {\n    return this.x * this.x + this.y * this.y + this.z * this.z;\n  }\n\n  public length(): number {\n    return Math.sqrt(this.mag());\n  }\n\n  public multiply(v: Vector3): Vector3 {\n    this.x *= v.x;\n    this.y *= v.y;\n    this.z *= v.z;\n    return this;\n  }\n\n  public multiplyScalar(scalar: number): Vector3 {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n    return this;\n  }\n\n  public normalize(): Vector3 {\n    const inv_length = 1.0 / this.length();\n    return this.multiplyScalar(inv_length);\n  }\n\n  public lengthManhattan() {\n    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\n  }\n\n  public min(v: Vector3) {\n    this.x = Math.min(this.x, v.x);\n    this.y = Math.min(this.y, v.y);\n    this.z = Math.min(this.z, v.z);\n    return this;\n  }\n\n  public max(v: Vector3) {\n    this.x = Math.max(this.x, v.x);\n    this.y = Math.max(this.y, v.y);\n    this.z = Math.max(this.z, v.z);\n    return this;\n  }\n\n  public clamp(min: Vector3, max: Vector3): Vector3 {\n    this.x = Math.max(min.x, Math.min(max.x, this.x));\n    this.y = Math.max(min.y, Math.min(max.y, this.y));\n    this.z = Math.max(min.z, Math.min(max.z, this.z));\n    return this;\n  }\n\n  public dot(v: Vector3): number {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  }\n\n  public crossVectors(a: Vector3, b: Vector3): Vector3 {\n    const ax = a.x, ay = a.y, az = a.z;\n    const bx = b.x, by = b.y, bz = b.z;\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n    return this;\n  }\n\n  public cross(v: Vector3): Vector3 {\n    return this.crossVectors(this, v);\n  }\n\n  public addVectors ( a: Vector3, b : Vector3): Vector3 {\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\treturn this;\n\t}\n\n  public setFromQuaternion(q: Quaternion): Vector3 {\n    const x = this.x, y = this.y, z = this.z;\n    const qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n    // calculate quat * vector\n    const ix = qw * x + qy * z - qz * y;\n    const iy = qw * y + qz * x - qx * z;\n    const iz = qw * z + qx * y - qy * x;\n    const iw = - qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n    this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n    this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n    return this;\n  }\n\n  public setFromSpherical(s: Spherical): Vector3 {\n    const sinRadius = Math.sin(s.polar) * s.radius;\n    this.x = sinRadius * Math.sin(s.azim);\n    this.y = Math.cos(s.polar) * s.radius;\n    this.z = sinRadius * Math.cos(s.azim);\n    return this;\n  }\n\n  public applyMatrix4(m: Matrix4): Vector3 {\n    const x = this.x;\n    const y = this.y;\n    const z = this.z;\n    const e = m.elements;\n\n    const w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n    this.x = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n    this.y = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n    this.z = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n\n    return this;\n  }\n\n  distanceTo(v: Vector3) {\n    return Math.sqrt(this.distanceToSquared(v));\n  }\n\n  distanceToSquared(v: Vector3) {\n    var dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n    return dx * dx + dy * dy + dz * dz;\n  }\n\n  public getBuffer() {\n    if (this.buffer === undefined) {\n      this.buffer = new Float32Array([this.x, this.y, this.z]);\n    } else {\n      this.buffer[0] = this.x;\n      this.buffer[1] = this.y;\n      this.buffer[2] = this.z;\n    }\n    return this.buffer;\n  }\n\n  fromArray(array: number[], offset?: number) {\n    if (offset === undefined) offset = 0;\n    this.x = array[offset];\n    this.y = array[offset + 1];\n    this.z = array[offset + 2];\n    return this;\n  }\n\n  toArray(array?: number[], offset?: number) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.x;\n    array[offset + 1] = this.y;\n    array[offset + 2] = this.z;\n    return array;\n  }\n\n  static flatten(v: Vector3, array: number[]) {\n    return v.toArray(array, 0);\n  }\n}","import { DataObject, ArrayFlattenable, VectorDataObject } from \"./index\";\nimport { Matrix4 } from \"./matrix4\";\nimport { Quaternion } from \"./quaternion\";\n\nexport class Vector4\n  implements\n  DataObject<Vector4>,\n  VectorDataObject<Vector4>,\n  ArrayFlattenable<Vector4>\n{\n  constructor(x?: number, y?: number, z?: number, w?: number) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.z = z || 0;\n    this.w = (w !== undefined) ? w : 1;\n  }\n\n  x: number;\n  y: number;\n  z: number;\n  w: number;\n  isVector4:true = true;\n\n  clone(){\n    return new Vector4(this.x, this.y, this.z, this.w);\n  }\n\n  copy(v: Vector4) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    this.w = (v.w !== undefined) ? v.w : 1;\n    return this;\n  }\n\n  equals(v: Vector4) {\n    return ((v.x === this.x) && (v.y === this.y) && (v.z === this.z) && (v.w === this.w));\n  }\n\n  set (x: number, y: number, z: number, w: number) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  }\n\n  setScalar (scalar: number) {\n    this.x = scalar;\n    this.y = scalar;\n    this.z = scalar;\n    this.w = scalar;\n    return this;\n  }\n\n  setX (x: number) {\n    this.x = x;\n    return this;\n  }\n\n  setY (y: number) {\n    this.y = y;\n    return this;\n  }\n\n  setZ (z: number) {\n    this.z = z;\n    return this;\n  }\n\n  setW (w: number) {\n    this.w = w;\n    return this;\n  }\n\n  setComponent (index: number, value: number) {\n    switch (index) {\n      case 0: this.x = value; break;\n      case 1: this.y = value; break;\n      case 2: this.z = value; break;\n      case 3: this.w = value; break;\n      default: throw new Error('index is out of range: ' + index);\n    }\n    return this;\n  }\n\n  getComponent (index: number) {\n    switch (index) {\n      case 0: return this.x;\n      case 1: return this.y;\n      case 2: return this.z;\n      case 3: return this.w;\n      default: throw new Error('index is out of range: ' + index);\n    }\n  }\n\n  setAxisAngleFromQuaternion (q: Quaternion) {\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n    // q is assumed to be normalized\n    this.w = 2 * Math.acos(q.w);\n    var s = Math.sqrt(1 - q.w * q.w);\n    if (s < 0.0001) {\n      this.x = 1;\n      this.y = 0;\n      this.z = 0;\n    } else {\n      this.x = q.x / s;\n      this.y = q.y / s;\n      this.z = q.z / s;\n    }\n    return this;\n  }\n\n\n  add (v: Vector4) {\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    this.w += v.w;\n    return this;\n  }\n\n  addScalar (s: number) {\n    this.x += s;\n    this.y += s;\n    this.z += s;\n    this.w += s;\n    return this;\n  }\n\n  addVectors (a: Vector4, b: Vector4) {\n    this.x = a.x + b.x;\n    this.y = a.y + b.y;\n    this.z = a.z + b.z;\n    this.w = a.w + b.w;\n    return this;\n  }\n\n  addScaledVector (v: Vector4, s: number) {\n    this.x += v.x * s;\n    this.y += v.y * s;\n    this.z += v.z * s;\n    this.w += v.w * s;\n    return this;\n  }\n\n  sub (v: Vector4) {\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    this.w -= v.w;\n    return this;\n  }\n\n  subScalar (s: number) {\n    this.x -= s;\n    this.y -= s;\n    this.z -= s;\n    this.w -= s;\n    return this;\n\n  }\n\n  subVectors (a: Vector4, b: Vector4) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n    this.z = a.z - b.z;\n    this.w = a.w - b.w;\n    return this;\n\n  }\n\n  multiplyScalar (scalar: number) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n    this.w *= scalar;\n    return this;\n  }\n\n  applyMatrix4 (m: Matrix4) {\n    var x = this.x, y = this.y, z = this.z, w = this.w;\n    var e = m.elements;\n    this.x = e[0] * x + e[4] * y + e[8] * z + e[12] * w;\n    this.y = e[1] * x + e[5] * y + e[9] * z + e[13] * w;\n    this.z = e[2] * x + e[6] * y + e[10] * z + e[14] * w;\n    this.w = e[3] * x + e[7] * y + e[11] * z + e[15] * w;\n    return this;\n  }\n\n  divideScalar (scalar: number) {\n    return this.multiplyScalar(1 / scalar);\n  }\n\n  min (v: Vector4) {\n    this.x = Math.min(this.x, v.x);\n    this.y = Math.min(this.y, v.y);\n    this.z = Math.min(this.z, v.z);\n    this.w = Math.min(this.w, v.w);\n    return this;\n  }\n\n  max (v: Vector4) {\n    this.x = Math.max(this.x, v.x);\n    this.y = Math.max(this.y, v.y);\n    this.z = Math.max(this.z, v.z);\n    this.w = Math.max(this.w, v.w);\n    return this;\n  }\n\n  clamp (min: Vector4, max: Vector4) {\n    // assumes min < max, componentwise\n    this.x = Math.max(min.x, Math.min(max.x, this.x));\n    this.y = Math.max(min.y, Math.min(max.y, this.y));\n    this.z = Math.max(min.z, Math.min(max.z, this.z));\n    this.w = Math.max(min.w, Math.min(max.w, this.w));\n    return this;\n  }\n\n  clampScalar (minVal: number, maxVal: number) {\n      tempMin.set(minVal, minVal, minVal, minVal);\n      tempMax.set(maxVal, maxVal, maxVal, maxVal);\n      return this.clamp(tempMin, tempMax);\n    };\n\n  clampLength (min:  number, max:  number) {\n    var length = this.length();\n    return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n  }\n\n  floor () {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    this.z = Math.floor(this.z);\n    this.w = Math.floor(this.w);\n    return this;\n  }\n\n  ceil () {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    this.z = Math.ceil(this.z);\n    this.w = Math.ceil(this.w);\n    return this;\n  }\n\n  round () {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    this.z = Math.round(this.z);\n    this.w = Math.round(this.w);\n    return this;\n  }\n\n  roundToZero () {\n    this.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n    this.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n    this.z = (this.z < 0) ? Math.ceil(this.z) : Math.floor(this.z);\n    this.w = (this.w < 0) ? Math.ceil(this.w) : Math.floor(this.w);\n    return this;\n  }\n\n  negate () {\n    this.x = - this.x;\n    this.y = - this.y;\n    this.z = - this.z;\n    this.w = - this.w;\n    return this;\n  }\n\n  dot (v: Vector4) {\n    return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n  }\n\n  lengthSq () {\n    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n  }\n\n  length () {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n  }\n\n  lengthManhattan () {\n    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\n  }\n\n  normalize () {\n    return this.divideScalar(this.length() || 1);\n  }\n\n  setLength (length: number) {\n    return this.normalize().multiplyScalar(length);\n  }\n\n  lerp (v: Vector4, alpha: number) {\n    this.x += (v.x - this.x) * alpha;\n    this.y += (v.y - this.y) * alpha;\n    this.z += (v.z - this.z) * alpha;\n    this.w += (v.w - this.w) * alpha;\n    return this;\n  }\n\n  lerpVectors (v1: Vector4, v2: Vector4, alpha: number) {\n    return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n  }\n\n  setAxisAngleFromRotationMatrix(m: Matrix4) {\n\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n    var angle, x, y, z,\t\t// variables for result\n      epsilon = 0.01,\t\t// margin to allow for rounding errors\n      epsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n      te = m.elements,\n\n      m11 = te[0], m12 = te[4], m13 = te[8],\n      m21 = te[1], m22 = te[5], m23 = te[9],\n      m31 = te[2], m32 = te[6], m33 = te[10];\n\n    if ((Math.abs(m12 - m21) < epsilon) &&\n      (Math.abs(m13 - m31) < epsilon) &&\n      (Math.abs(m23 - m32) < epsilon)) {\n\n      // singularity found\n      // first check for identity matrix which must have +1 for all terms\n      // in leading diagonal and zero in other terms\n\n      if ((Math.abs(m12 + m21) < epsilon2) &&\n        (Math.abs(m13 + m31) < epsilon2) &&\n        (Math.abs(m23 + m32) < epsilon2) &&\n        (Math.abs(m11 + m22 + m33 - 3) < epsilon2)) {\n\n        // this singularity is identity matrix so angle = 0\n\n        this.set(1, 0, 0, 0);\n\n        return this; // zero angle, arbitrary axis\n\n      }\n\n      // otherwise this singularity is angle = 180\n\n      angle = Math.PI;\n\n      var xx = (m11 + 1) / 2;\n      var yy = (m22 + 1) / 2;\n      var zz = (m33 + 1) / 2;\n      var xy = (m12 + m21) / 4;\n      var xz = (m13 + m31) / 4;\n      var yz = (m23 + m32) / 4;\n\n      if ((xx > yy) && (xx > zz)) {\n\n        // m11 is the largest diagonal term\n\n        if (xx < epsilon) {\n\n          x = 0;\n          y = 0.707106781;\n          z = 0.707106781;\n\n        } else {\n\n          x = Math.sqrt(xx);\n          y = xy / x;\n          z = xz / x;\n\n        }\n\n      } else if (yy > zz) {\n\n        // m22 is the largest diagonal term\n\n        if (yy < epsilon) {\n          x = 0.707106781;\n          y = 0;\n          z = 0.707106781;\n\n        } else {\n          y = Math.sqrt(yy);\n          x = xy / y;\n          z = yz / y;\n\n        }\n\n      } else {\n\n        // m33 is the largest diagonal term so base result on this\n\n        if (zz < epsilon) {\n          x = 0.707106781;\n          y = 0.707106781;\n          z = 0;\n        } else {\n          z = Math.sqrt(zz);\n          x = xz / z;\n          y = yz / z;\n        }\n      }\n      this.set(x, y, z, angle);\n      return this; // return 180 deg rotation\n    }\n\n    // as we have reached here there are no singularities so we can handle normally\n    var s = Math.sqrt((m32 - m23) * (m32 - m23) +\n      (m13 - m31) * (m13 - m31) +\n      (m21 - m12) * (m21 - m12)); // used to normalize\n\n    if (Math.abs(s) < 0.001) s = 1;\n\n    // prevent divide by zero, should not happen if matrix is orthogonal and should be\n    // caught by singularity test above, but I've left it in just in case\n    this.x = (m32 - m23) / s;\n    this.y = (m13 - m31) / s;\n    this.z = (m21 - m12) / s;\n    this.w = Math.acos((m11 + m22 + m33 - 1) / 2);\n    return this;\n  }\n\n  fromArray (array: number[], offset?: number) {\n    if (offset === undefined) offset = 0;\n    this.x = array[offset];\n    this.y = array[offset + 1];\n    this.z = array[offset + 2];\n    this.w = array[offset + 3];\n    return this;\n  }\n\n  toArray (array?: number[], offset?: number) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.x;\n    array[offset + 1] = this.y;\n    array[offset + 2] = this.z;\n    array[offset + 3] = this.w;\n    return array;\n  }\n\n  static flatten(v: Vector4, array: number[]) {\n    return v.toArray(array, 0);\n  }\n  \n}\n\n\n\n\n\nconst tempMin = new Vector4();\nconst tempMax = new Vector4();","import { Vector3 } from \"./vector3\";\nimport { Quaternion } from \"./quaternion\";\nimport { DataObject, ArrayFlattenable } from \"./index\";\n\nconst tempx: Vector3 = new Vector3;\nconst tempy: Vector3 = new Vector3;\nconst tempz: Vector3 = new Vector3;\n\nexport class Matrix4\n  implements\n  DataObject<Matrix4>,\n  ArrayFlattenable<Matrix4>\n{\n  constructor() {\n\n  }\n\n  copy(m: Matrix4) {\n    var te = this.elements;\n    var me = m.elements;\n    te[0] = me[0]; te[1] = me[1]; te[2] = me[2]; te[3] = me[3];\n    te[4] = me[4]; te[5] = me[5]; te[6] = me[6]; te[7] = me[7];\n    te[8] = me[8]; te[9] = me[9]; te[10] = me[10]; te[11] = me[11];\n    te[12] = me[12]; te[13] = me[13]; te[14] = me[14]; te[15] = me[15];\n    return this;\n  }\n\n  clone() {\n    return new Matrix4().fromArray(this.elements);\n  }\n\n  equals(matrix: Matrix4): boolean {\n    var te = this.elements;\n    var me = matrix.elements;\n    for (var i = 0; i < 16; i++) {\n      if (te[i] !== me[i]) return false;\n    }\n    return true;\n  }\n\n  elements: number[] = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ]\n\n  set(n11: number, n12: number, n13: number, n14: number,\n    n21: number, n22: number, n23: number, n24: number,\n    n31: number, n32: number, n33: number, n34: number,\n    n41: number, n42: number, n43: number, n44: number) {\n    const te = this.elements;\n    te[0] = n11; te[4] = n12; te[8] = n13; te[12] = n14;\n    te[1] = n21; te[5] = n22; te[9] = n23; te[13] = n24;\n    te[2] = n31; te[6] = n32; te[10] = n33; te[14] = n34;\n    te[3] = n41; te[7] = n42; te[11] = n43; te[15] = n44;\n    return this;\n  }\n\n  compose(position: Vector3, quaternion: Quaternion, scale: Vector3) {\n    this.makeRotationFromQuaternion(quaternion);\n    this.scale(scale.x, scale.y, scale.z);\n    this.setPostion(position.x, position.y, position.z);\n    return this;\n  }\n\n  identity() {\n    this.set(\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0, 1, 0,\n      0, 0, 0, 1\n    );\n    return this;\n  }\n\n  makePerspective(left: number, right: number, top: number,\n    bottom: number, near: number, far: number) {\n    const te = this.elements;\n    const x = 2 * near / (right - left);\n    const y = 2 * near / (top - bottom);\n\n    const a = (right + left) / (right - left);\n    const b = (top + bottom) / (top - bottom);\n    const c = - (far + near) / (far - near);\n    const d = - 2 * far * near / (far - near);\n\n    te[0] = x; te[4] = 0; te[8] = a; te[12] = 0;\n    te[1] = 0; te[5] = y; te[9] = b; te[13] = 0;\n    te[2] = 0; te[6] = 0; te[10] = c; te[14] = d;\n    te[3] = 0; te[7] = 0; te[11] = - 1; te[15] = 0;\n\n    return this;\n  }\n\n  makeOrthographic(left: number, right: number, top: number,\n    bottom: number, near: number, far: number) {\n    var te = this.elements;\n    var w = 1.0 / (right - left);\n    var h = 1.0 / (top - bottom);\n    var p = 1.0 / (far - near);\n\n    var x = (right + left) * w;\n    var y = (top + bottom) * h;\n    var z = (far + near) * p;\n\n    te[0] = 2 * w; te[4] = 0; te[8] = 0; te[12] = - x;\n    te[1] = 0; te[5] = 2 * h; te[9] = 0; te[13] = - y;\n    te[2] = 0; te[6] = 0; te[10] = - 2 * p; te[14] = - z;\n    te[3] = 0; te[7] = 0; te[11] = 0; te[15] = 1;\n\n    return this;\n  }\n\n  multiplyMatrices(a: Matrix4, b: Matrix4) {\n\n    var ae = a.elements;\n    var be = b.elements;\n    var te = this.elements;\n\n    var a11 = ae[0], a12 = ae[4], a13 = ae[8], a14 = ae[12];\n    var a21 = ae[1], a22 = ae[5], a23 = ae[9], a24 = ae[13];\n    var a31 = ae[2], a32 = ae[6], a33 = ae[10], a34 = ae[14];\n    var a41 = ae[3], a42 = ae[7], a43 = ae[11], a44 = ae[15];\n\n    var b11 = be[0], b12 = be[4], b13 = be[8], b14 = be[12];\n    var b21 = be[1], b22 = be[5], b23 = be[9], b24 = be[13];\n    var b31 = be[2], b32 = be[6], b33 = be[10], b34 = be[14];\n    var b41 = be[3], b42 = be[7], b43 = be[11], b44 = be[15];\n\n    te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n    te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n    te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n    te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n    te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n    te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n    te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n    te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n    te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n    te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n    te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n    te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n    te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n    te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n    te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n    te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n    return this;\n\n  }\n\n  getInverse(m: Matrix4, throwOnDegenerate: boolean) {\n    // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n    var te = this.elements,\n      me = m.elements,\n\n      n11 = me[0], n21 = me[1], n31 = me[2], n41 = me[3],\n      n12 = me[4], n22 = me[5], n32 = me[6], n42 = me[7],\n      n13 = me[8], n23 = me[9], n33 = me[10], n43 = me[11],\n      n14 = me[12], n24 = me[13], n34 = me[14], n44 = me[15],\n\n      t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n      t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n      t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n      t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n    var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n    if (det === 0) {\n      var msg = \"Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n      if (throwOnDegenerate === true) {\n        throw new Error(msg);\n      } else {\n        console.warn(msg);\n      }\n      return this.identity();\n    }\n\n    var detInv = 1 / det;\n\n    te[0] = t11 * detInv;\n    te[1] = (n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44) * detInv;\n    te[2] = (n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44) * detInv;\n    te[3] = (n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43) * detInv;\n\n    te[4] = t12 * detInv;\n    te[5] = (n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44) * detInv;\n    te[6] = (n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44) * detInv;\n    te[7] = (n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43) * detInv;\n\n    te[8] = t13 * detInv;\n    te[9] = (n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44) * detInv;\n    te[10] = (n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44) * detInv;\n    te[11] = (n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43) * detInv;\n\n    te[12] = t14 * detInv;\n    te[13] = (n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34) * detInv;\n    te[14] = (n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34) * detInv;\n    te[15] = (n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33) * detInv;\n\n    return this;\n  }\n\n  public lookAt(origin: Vector3, target: Vector3, up: Vector3): Matrix4 {\n\n    const te = this.elements;\n\n    tempz.copy(origin).sub(target);\n    if (tempz.mag() === 0) {\n      tempz.z = 1;\n    }\n\n    tempz.normalize();\n    tempx.crossVectors(up, tempz);\n    if (tempx.mag() === 0) {\n      if (Math.abs(up.z) === 1) {\n        tempz.x += 0.0001;\n      } else {\n        tempz.z += 0.0001;\n      }\n      tempz.normalize();\n      tempx.crossVectors(up, tempz);\n    }\n\n    tempx.normalize();\n    tempy.crossVectors(tempz, tempx);\n\n    te[0] = tempx.x; te[4] = tempy.x; te[8] = tempz.x;\n    te[1] = tempx.y; te[5] = tempy.y; te[9] = tempz.y;\n    te[2] = tempx.z; te[6] = tempy.z; te[10] = tempz.z;\n\n    return this;\n  };\n\n  scale(x: number, y: number, z: number) {\n    const te = this.elements;\n    te[0] *= x; te[4] *= y; te[8] *= z;\n    te[1] *= x; te[5] *= y; te[9] *= z;\n    te[2] *= x; te[6] *= y; te[10] *= z;\n    te[3] *= x; te[7] *= y; te[11] *= z;\n    return this;\n  }\n\n  setPostion(x: number, y: number, z: number) {\n    var te = this.elements;\n    te[12] = x;\n    te[13] = y;\n    te[14] = z;\n    return this;\n  }\n\n  makeRotationFromQuaternion(q: Quaternion) {\n    var te = this.elements;\n\n    var x = q.x, y = q.y, z = q.z, w = q.w;\n    var x2 = x + x, y2 = y + y, z2 = z + z;\n    var xx = x * x2, xy = x * y2, xz = x * z2;\n    var yy = y * y2, yz = y * z2, zz = z * z2;\n    var wx = w * x2, wy = w * y2, wz = w * z2;\n\n    te[0] = 1 - (yy + zz);\n    te[4] = xy - wz;\n    te[8] = xz + wy;\n\n    te[1] = xy + wz;\n    te[5] = 1 - (xx + zz);\n    te[9] = yz - wx;\n\n    te[2] = xz - wy;\n    te[6] = yz + wx;\n    te[10] = 1 - (xx + yy);\n\n    // last column\n    te[3] = 0;\n    te[7] = 0;\n    te[11] = 0;\n\n    // bottom row\n    te[12] = 0;\n    te[13] = 0;\n    te[14] = 0;\n    te[15] = 1;\n    return this;\n  }\n\n  makeTranslation(x: number, y: number, z: number) {\n    this.set(\n      1, 0, 0, x,\n      0, 1, 0, y,\n      0, 0, 1, z,\n      0, 0, 0, 1\n    );\n    return this;\n  }\n\n  makeRotationX(theta: number) {\n    var c = Math.cos(theta), s = Math.sin(theta);\n    this.set(\n      1, 0, 0, 0,\n      0, c, - s, 0,\n      0, s, c, 0,\n      0, 0, 0, 1\n    );\n    return this;\n  }\n\n  makeRotationY(theta: number) {\n    var c = Math.cos(theta), s = Math.sin(theta);\n    this.set(\n      c, 0, s, 0,\n      0, 1, 0, 0,\n      - s, 0, c, 0,\n      0, 0, 0, 1\n    );\n    return this;\n  }\n\n  makeRotationZ(theta: number) {\n    var c = Math.cos(theta), s = Math.sin(theta);\n    this.set(\n      c, - s, 0, 0,\n      s, c, 0, 0,\n      0, 0, 1, 0,\n      0, 0, 0, 1\n    );\n    return this;\n  }\n\n  toArray(array: number[], offset: number) {\n\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n\n    var te = this.elements;\n\n    array[offset] = te[0];\n    array[offset + 1] = te[1];\n    array[offset + 2] = te[2];\n    array[offset + 3] = te[3];\n\n    array[offset + 4] = te[4];\n    array[offset + 5] = te[5];\n    array[offset + 6] = te[6];\n    array[offset + 7] = te[7];\n\n    array[offset + 8] = te[8];\n    array[offset + 9] = te[9];\n    array[offset + 10] = te[10];\n    array[offset + 11] = te[11];\n\n    array[offset + 12] = te[12];\n    array[offset + 13] = te[13];\n    array[offset + 14] = te[14];\n    array[offset + 15] = te[15];\n\n    return array;\n\n  }\n\n  fromArray(array: number[], offset?: number) {\n    if (offset === undefined) offset = 0;\n    for (var i = 0; i < 16; i++) {\n      this.elements[i] = array[i + offset];\n    }\n    return this;\n  }\n\n  static flatten(v: Matrix4, array: number[]) {\n    return v.toArray(array, 0);\n  }\n\n\n}","\nexport const MathUtil = {\n\n  DEG2RAD: Math.PI / 180,\n  RAD2DEG: 180 / Math.PI,\n\n  clamp: function (value: number, min: number, max: number) {\n    return Math.max(min, Math.min(max, value));\n  },\n\n  // compute euclidean modulo of m % n\n  // https://en.wikipedia.org/wiki/Modulo_operation\n  euclideanModulo: function (n: number, m: number) {\n    return ((n % m) + m) % m;\n  },\n\n  // Linear mapping from range <a1, a2> to range <b1, b2>\n  mapLinear: function (x: number, a1: number, a2: number, b1: number, b2: number) {\n    return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n  },\n\n  // https://en.wikipedia.org/wiki/Linear_interpolation\n  lerp: function (x: number, y: number, t: number) {\n    return (1 - t) * x + t * y;\n  },\n\n  // http://en.wikipedia.org/wiki/Smoothstep\n  smoothstep: function (x: number, min: number, max: number) {\n    if (x <= min) return 0;\n    if (x >= max) return 1;\n    x = (x - min) / (max - min);\n    return x * x * (3 - 2 * x);\n  },\n\n  smootherstep: function (x: number, min: number, max: number) {\n    if (x <= min) return 0;\n    if (x >= max) return 1;\n    x = (x - min) / (max - min);\n    return x * x * x * (x * (x * 6 - 15) + 10);\n  },\n\n  // Random integer from <low, high> interval\n  randInt: function (low: number, high: number) {\n    return low + Math.floor(Math.random() * (high - low + 1));\n  },\n\n  // Random float from <low, high> interval\n  randFloat: function (low: number, high: number) {\n    return low + Math.random() * (high - low);\n  },\n\n  // Random float from <-range/2, range/2> interval\n  randFloatSpread: function (range: number) {\n    return range * (0.5 - Math.random());\n  },\n\n  degToRad: function (degrees: number) {\n    return degrees * MathUtil.DEG2RAD;\n  },\n\n  radToDeg: function (radians: number) {\n    return radians * MathUtil.RAD2DEG;\n  },\n\n  isPowerOfTwo: function (value: number) {\n    return (value & (value - 1)) === 0 && value !== 0;\n  },\n\n  nearestPowerOfTwo: function (value: number) {\n    return Math.pow(2, Math.round(Math.log(value) / Math.LN2));\n  },\n\n  nextPowerOfTwo: function (value: number) {\n    value--;\n    value |= value >> 1;\n    value |= value >> 2;\n    value |= value >> 4;\n    value |= value >> 8;\n    value |= value >> 16;\n    value++;\n    return value;\n  }\n\n};\n\n","import { Quaternion } from './quaternion';\nimport { Vector3 } from './vector3';\nimport { Matrix4 } from './matrix4';\nimport { MathUtil } from './util';\nimport { DataObject } from './index';\n\nenum EulerOrder {\n  'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX'\n}\n\nconst tempMatrix = new Matrix4();\n\nexport class Euler implements DataObject<Euler>{\n  constructor(x?: number, y?: number, z?: number, order?: EulerOrder) {\n    this._x = x || 0;\n    this._y = y || 0;\n    this._z = z || 0;\n    this._order = order || Euler.defaultOrder;\n  }\n\n  static defaultOrder = EulerOrder.XYZ;\n\n  _x: number;\n  _y: number;\n  _z: number;\n  _order: EulerOrder = Euler.defaultOrder;\n\n  onChangeCallback: Function = () => { };\n\n  get x() { return this._x };\n  get y() { return this._y };\n  get z() { return this._z };\n  set x(value) { this._x = value };\n  set y(value) { this._y = value };\n  set z(value) { this._z = value };\n\n  get order() { return this._order };\n  set order(value: EulerOrder) { this._order = value };\n\n  clone() {\n    return new Euler(this._x, this._y, this._z, this._order);\n  }\n\n  copy(euler: Euler) {\n    this._x = euler._x;\n    this._y = euler._y;\n    this._z = euler._z;\n    this._order = euler._order;\n    this.onChangeCallback();\n    return this;\n  }\n\n  equals(euler: Euler) {\n    return (euler._x === this._x) &&\n      (euler._y === this._y) &&\n      (euler._z === this._z) &&\n      (euler._order === this._order);\n  }\n\n  setFromRotationMatrix(m: Matrix4, order: EulerOrder, update: boolean) {\n    var clamp = MathUtil.clamp;\n\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n    var te = m.elements;\n    var m11 = te[0], m12 = te[4], m13 = te[8];\n    var m21 = te[1], m22 = te[5], m23 = te[9];\n    var m31 = te[2], m32 = te[6], m33 = te[10];\n\n    order = order || this._order;\n\n    if (order === EulerOrder.XYZ) {\n\n      this._y = Math.asin(clamp(m13, - 1, 1));\n      if (Math.abs(m13) < 0.99999) {\n        this._x = Math.atan2(- m23, m33);\n        this._z = Math.atan2(- m12, m11);\n      } else {\n        this._x = Math.atan2(m32, m22);\n        this._z = 0;\n      }\n\n    } else if (order === EulerOrder.YXZ) {\n\n      this._x = Math.asin(- clamp(m23, - 1, 1));\n      if (Math.abs(m23) < 0.99999) {\n        this._y = Math.atan2(m13, m33);\n        this._z = Math.atan2(m21, m22);\n      } else {\n        this._y = Math.atan2(- m31, m11);\n        this._z = 0;\n      }\n\n    } else if (order === EulerOrder.ZXY) {\n\n      this._x = Math.asin(clamp(m32, - 1, 1));\n      if (Math.abs(m32) < 0.99999) {\n        this._y = Math.atan2(- m31, m33);\n        this._z = Math.atan2(- m12, m22);\n      } else {\n        this._y = 0;\n        this._z = Math.atan2(m21, m11);\n      }\n\n    } else if (order === EulerOrder.ZYX) {\n\n      this._y = Math.asin(- clamp(m31, - 1, 1));\n      if (Math.abs(m31) < 0.99999) {\n        this._x = Math.atan2(m32, m33);\n        this._z = Math.atan2(m21, m11);\n      } else {\n        this._x = 0;\n        this._z = Math.atan2(- m12, m22);\n      }\n\n    } else if (order === EulerOrder.YZX) {\n\n      this._z = Math.asin(clamp(m21, - 1, 1));\n\n      if (Math.abs(m21) < 0.99999) {\n        this._x = Math.atan2(- m23, m22);\n        this._y = Math.atan2(- m31, m11);\n      } else {\n        this._x = 0;\n        this._y = Math.atan2(m13, m33);\n      }\n\n    } else if (order === EulerOrder.XZY) {\n\n      this._z = Math.asin(- clamp(m12, - 1, 1));\n\n      if (Math.abs(m12) < 0.99999) {\n        this._x = Math.atan2(m32, m22);\n        this._y = Math.atan2(m13, m11);\n      } else {\n        this._x = Math.atan2(- m23, m33);\n        this._y = 0;\n      }\n\n    }\n\n    this._order = order;\n    if (update !== false) this.onChangeCallback();\n    return this;\n  }\n\n  setFromQuaternion(q: Quaternion, order: EulerOrder, update: boolean) {\n    tempMatrix.makeRotationFromQuaternion(q);\n    return this.setFromRotationMatrix(tempMatrix, order, update);\n  };\n\n  set(x: number, y: number, z: number, order: EulerOrder) {\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._order = order || this._order;\n    this.onChangeCallback();\n    return this;\n  }\n\n  setFromVector3(v: Vector3, order: EulerOrder) {\n    return this.set(v.x, v.y, v.z, order || this._order);\n  }\n\n  fromArray(array: number[]) {\n    this._x = array[0];\n    this._y = array[1];\n    this._z = array[2];\n    if (array[3] !== undefined) this._order = array[3];\n    this.onChangeCallback();\n    return this;\n  }\n\n  toArray(array: number[], offset: number) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this._x;\n    array[offset + 1] = this._y;\n    array[offset + 2] = this._z;\n    array[offset + 3] = this._order;\n    return array;\n  }\n\n  toVector3(optionalTarget: Vector3) {\n    if (optionalTarget) {\n      return optionalTarget.set(this._x, this._y, this._z);\n    } else {\n      return new Vector3(this._x, this._y, this._z);\n    }\n  }\n\n}\n\n","import { Vector3 } from './vector3';\nimport { Matrix4 } from './matrix4';\n\nconst v1: Vector3 = new Vector3\nlet r: number = 0;\nconst EPS: number = 0.000001;\n\nexport class Quaternion {\n\n  constructor(x?: number, y?: number, z?: number, w?: number) {\n    this.x = x || 0;\n    this.y = x || 0;\n    this.z = z || 0;\n    this.w = w || 1;\n  }\n\n  public x: number;\n  public y: number;\n  public z: number;\n  public w: number;\n\n\n  public set(x: number, y: number, z: number, w: number): Quaternion {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  }\n\n  public copy(q: Quaternion): Quaternion {\n    this.x = q.x;\n    this.y = q.y;\n    this.z = q.z;\n    this.w = q.w;\n    return this;\n  }\n\n  public clone(): Quaternion {\n    return new Quaternion(this.x, this.y, this.z, this.w);\n  }\n\n  public inverse(): Quaternion {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    return this;\n  }\n\n  public length(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n  }\n\n  public normalize(): Quaternion {\n    let l = this.length();\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 1;\n    } else {\n      l = 1 / l;\n      this.x = this.x * l;\n      this.y = this.y * l;\n      this.z = this.z * l;\n      this.w = this.w * l;\n    }\n    return this;\n  }\n\n  // assumes axis is normalized\n  public setFromAxisAngle(axis: Vector3, angle: number): Quaternion {\n    const halfAngle = angle / 2;\n    const s = Math.sin(halfAngle);\n\n    this.x = axis.x * s;\n    this.y = axis.y * s;\n    this.z = axis.z * s;\n    this.w = Math.cos(halfAngle);\n\n    return this;\n  }\n\n  public setFromUnitVectors(vFrom: Vector3, vTo: Vector3) {\n    r = vFrom.dot(vTo) + 1;\n    if (r < EPS) {\n      r = 0;\n      if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n        v1.set(- vFrom.y, vFrom.x, 0);\n      } else {\n        v1.set(0, - vFrom.z, vFrom.y);\n      }\n    } else {\n      v1.crossVectors(vFrom, vTo);\n    }\n    this.x = v1.x;\n    this.y = v1.y;\n    this.z = v1.z;\n    this.w = r;\n    return this.normalize();\n  }\n\n  public setFromRotationMatrix(m: Matrix4) {\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n    const te = m.elements;\n    const m11 = te[0], m12 = te[4], m13 = te[8];\n    const m21 = te[1], m22 = te[5], m23 = te[9];\n    const m31 = te[2], m32 = te[6], m33 = te[10];\n    const trace = m11 + m22 + m33;\n    let s;\n\n    if (trace > 0) {\n      s = 0.5 / Math.sqrt(trace + 1.0);\n      this.w = 0.25 / s;\n      this.x = (m32 - m23) * s;\n      this.y = (m13 - m31) * s;\n      this.z = (m21 - m12) * s;\n    } else if (m11 > m22 && m11 > m33) {\n      s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n      this.w = (m32 - m23) / s;\n      this.x = 0.25 * s;\n      this.y = (m12 + m21) / s;\n      this.z = (m13 + m31) / s;\n    } else if (m22 > m33) {\n      s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n      this.w = (m13 - m31) / s;\n      this.x = (m12 + m21) / s;\n      this.y = 0.25 * s;\n      this.z = (m23 + m32) / s;\n    } else {\n      s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n      this.w = (m21 - m12) / s;\n      this.x = (m13 + m31) / s;\n      this.y = (m23 + m32) / s;\n      this.z = 0.25 * s;\n    }\n    return this;\n  }\n\n}","import { DataObject, VectorDataObject, ArrayFlattenable } from \"./index\";\nimport { Vector3 } from \"./vector3\";\n\nexport class Vector2\n  implements\n  DataObject<Vector2>,\n  VectorDataObject<Vector2>,\n  ArrayFlattenable<Vector2>\n{\n  constructor(x?: number, y?: number) {\n    this.x = x || 0;\n    this.y = y || 0;\n  }\n  x: number;\n  y: number;\n\n  get width() { return this.x; }\n  set width(value: number) { this.x = value }\n  get height() { return this.y; }\n  set height(value: number) { this.y = value }\n\n  set(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n\n  setScalar(scalar: number) {\n    this.x = scalar;\n    this.y = scalar;\n    return this;\n  }\n\n  clone() {\n    return new Vector2(this.x, this.y);\n  }\n  copy(v: Vector2) {\n    this.x = v.x;\n    this.y = v.y;\n    return this;\n  }\n  equals(v: Vector2) {\n    return ((v.x === this.x) && (v.y === this.y));\n  }\n\n  add(v: Vector2) {\n    this.x += v.x;\n    this.y += v.y;\n    return this;\n  }\n\n  addScalar(s: number) {\n    this.x += s;\n    this.y += s;\n    return this;\n  }\n\n  addVectors(a: Vector2, b: Vector2) {\n    this.x = a.x + b.x;\n    this.y = a.y + b.y;\n    return this;\n  }\n\n  addScaledVector(v: Vector2, s: number) {\n    this.x += v.x * s;\n    this.y += v.y * s;\n    return this;\n  }\n\n  subScalar(s: number) {\n    this.x -= s;\n    this.y -= s;\n    return this;\n  }\n\n  subVectors(a: Vector2, b: Vector2) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n    return this;\n  }\n\n  multiply(v: Vector2) {\n    this.x *= v.x;\n    this.y *= v.y;\n    return this;\n  }\n\n  multiplyScalar(scalar: number) {\n    this.x *= scalar;\n    this.y *= scalar;\n    return this;\n  }\n\n  divide(v: Vector2) {\n    this.x /= v.x;\n    this.y /= v.y;\n    return this;\n  }\n\n  divideScalar(scalar: number) {\n    return this.multiplyScalar(1 / scalar);\n  }\n\n  sub(v: Vector2) {\n    this.x -= v.x;\n    this.y -= v.y;\n    return this;\n  }\n\n  min(v: Vector2) {\n    this.x = Math.min(this.x, v.x);\n    this.y = Math.min(this.y, v.y);\n    return this;\n  }\n  max(v: Vector2) {\n    this.x = Math.max(this.x, v.x);\n    this.y = Math.max(this.y, v.y);\n    return this;\n  }\n\n  length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n  lengthManhattan() {\n    return Math.abs(this.x) + Math.abs(this.y);\n  }\n\n  normalize() {\n    return this.divideScalar(this.length() || 1);\n  }\n\n  clamp(min: Vector2, max: Vector2) {\n    // assumes min < max, componentwise\n    this.x = Math.max(min.x, Math.min(max.x, this.x));\n    this.y = Math.max(min.y, Math.min(max.y, this.y));\n    return this;\n  }\n  clampScalar(minVal: number, maxVal: number) {\n    tempMin.set(minVal, minVal);\n    tempMax.set(maxVal, maxVal);\n    return this.clamp(tempMin, tempMax);\n  }\n  clampLength(min: number, max: number) {\n    var length = this.length();\n    return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n  }\n\n  public rotate(radians: number, anchor?: Vector2): Vector2 {\n    anchor = anchor || new Vector2();\n    const v = anchor.sub(this).multiplyScalar(-1);\n    const x = v.x;\n    const y = v.y;\n    const c = Math.cos(radians);\n    const s = Math.sin(radians);\n    this.x = x * c - y * s;\n    this.y = x * s + y * c;\n    return this;\n  }\n\n  floor() {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    return this;\n  }\n  ceil() {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    return this;\n  }\n  round() {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    return this;\n  }\n  roundToZero() {\n    this.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n    this.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n    return this;\n  }\n\n  negate() {\n    this.x = - this.x;\n    this.y = - this.y;\n    return this;\n  }\n\n  dot(v: Vector2) {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  lengthSq() {\n    return this.x * this.x + this.y * this.y;\n  }\n\n\n  angle() {\n    // computes the angle in radians with respect to the positive x-axis\n    var angle = Math.atan2(this.y, this.x);\n    if (angle < 0) angle += 2 * Math.PI;\n    return angle;\n  }\n\n  distanceTo(v: Vector2) {\n    return Math.sqrt(this.distanceToSquared(v));\n  }\n\n  distanceToSquared(v: Vector2) {\n    var dx = this.x - v.x, dy = this.y - v.y;\n    return dx * dx + dy * dy;\n  }\n\n  distanceToManhattan(v: Vector2) {\n    return Math.abs(this.x - v.x) + Math.abs(this.y - v.y);\n  }\n\n  setLength(length: number) {\n    return this.normalize().multiplyScalar(length);\n  }\n\n  lerp(v: Vector2, alpha: number) {\n    this.x += (v.x - this.x) * alpha;\n    this.y += (v.y - this.y) * alpha;\n    return this;\n  }\n\n  lerpVectors(v1: Vector2, v2: Vector2, alpha: number) {\n    return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n  }\n\n  rotateAround(center: Vector3, angle: number) {\n    var c = Math.cos(angle), s = Math.sin(angle);\n    var x = this.x - center.x;\n    var y = this.y - center.y;\n    this.x = x * c - y * s + center.x;\n    this.y = x * s + y * c + center.y;\n    return this;\n  }\n\n  fromArray(array: number[], offset?: number) {\n    if (offset === undefined) offset = 0;\n    this.x = array[offset];\n    this.y = array[offset + 1];\n    return this;\n  }\n\n  toArray(array?: number[], offset?: number) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    array[offset] = this.x;\n    array[offset + 1] = this.y;\n    return array;\n  }\n\n  static flatten(v: Vector2, array: number[]) {\n    return v.toArray(array, 0);\n  }\n\n}\n\nconst tempMin = new Vector2();\nconst tempMax = new Vector2();\n\n","import { GLProgramConfig } from \"./program\";\nimport { Matrix4, Vector3 } from \"../math/index\";\nimport { Vector2 } from \"../math/vector2\";\nimport { Vector4 } from \"../math/vector4\";\n\nexport type GLData = number | Matrix4;\n\nexport type float = number;\n// export type floatVec2 = Vector2;\nexport type floatVec3 = Vector3;\n// export type floatVec4 = Vector4;\nexport type int = number;\n\nexport const enum GLDataType{\n  float,\n  floatVec2,\n  floatVec3,\n  floatVec4,\n  int,\n  intVec2,\n  intVec3,\n  intVec4,\n  Mat2,\n  Mat3,\n  Mat4,\n  boolean\n}\n\nconst shaderStringMap: { [index: string]: GLDataType } = {\n  'float': GLDataType.float,\n  'vec2': GLDataType.floatVec2,\n  'vec3': GLDataType.floatVec3,\n  'vec4': GLDataType.floatVec4,\n  'mat2': GLDataType.Mat2,\n  'mat3': GLDataType.Mat3,\n  'mat4': GLDataType.Mat4,\n}\nlet reverseShaderStringMap: { [index: number]: string } = {};\nObject.keys(shaderStringMap).forEach(key => {\n  reverseShaderStringMap[shaderStringMap[key]] = key\n})\n\nconst shaderAttributeStringInfo: { [index: string]: { type: GLDataType, stride: number, default: any} } = {\n  'float': { type: GLDataType.float, stride: 1, default: 0 },\n  'vec2': { type: GLDataType.floatVec2, stride: 2, default: new Vector2() },\n  'vec3': { type: GLDataType.floatVec3, stride: 3, default: new Vector3() },\n  'vec4': { type: GLDataType.floatVec4, stride: 4, default: new Vector4() },\n}\nlet reverseShaderAttributeStringInfo: { [index: number]: { name: string, stride: number , default: any} } = {};\nObject.keys(shaderAttributeStringInfo).forEach(key => {\n  reverseShaderAttributeStringInfo[shaderAttributeStringInfo[key].type] =\n    { name: key, stride: shaderAttributeStringInfo[key].stride , default: shaderAttributeStringInfo[key].default}\n})\n\nexport function getShaderTypeStringFromGLDataType(type: GLDataType) {\n  return reverseShaderStringMap[type];\n}\n\nexport function getGLDataTypeStride(type: GLDataType) {\n  return reverseShaderAttributeStringInfo[type].stride;\n}\n\nexport function getGLDataTypeDefaultDefaultValue(type: GLDataType) {\n  const value = reverseShaderAttributeStringInfo[type].default;\n  try {\n    const clonedValue = value.clone();\n    return clonedValue;\n  } catch (error) {\n    return value\n  }\n}\n\nfunction AttributeGLDataType2ShaderString(type: GLDataType) {\n  return reverseShaderAttributeStringInfo[type].name;\n}\n\n\n\nexport function injectVertexShaderHeaders(config: GLProgramConfig, shaderText: string) {\n  let injectText = '';\n  injectText += generateAttributeString(config);\n  injectText += generateUniformString(config);\n  injectText += generateVaryingString(config);\n  return injectText + shaderText;\n}\n\nexport function injectFragmentShaderHeaders(config: GLProgramConfig, shaderText: string) {\n  let injectText = '';\n  injectText += 'precision highp float;\\n';\n  injectText += generateUniformString(config);\n  injectText += generateVaryingString(config);\n  injectText += generateTextureString(config);\n  return injectText + shaderText;\n}\n\nfunction generateTextureString(config: GLProgramConfig): string {\n  let text = '';\n  if (config.textures !== undefined) {\n    config.textures.forEach(texture => {\n      text = text + 'uniform sampler2D' + ' ' + texture.name + ';\\n';\n    })\n  }\n  return text;\n}\n\nfunction generateAttributeString(config: GLProgramConfig): string {\n  let text = '';\n  if (config.attributes !== undefined) {\n    config.attributes.forEach(att => {\n      const type = AttributeGLDataType2ShaderString(att.type);\n      text = text + 'attribute ' + type + ' ' + att.name + ';\\n';\n    })\n  }\n  return text;\n}\n\nfunction generateUniformString(config: GLProgramConfig): string {\n  let text = '';\n  if (config.uniforms !== undefined) {\n\n    for (const key in config.uniforms) {\n      const uni = config.uniforms[key];\n      const type = getShaderTypeStringFromGLDataType(uni.type);\n      text = text + 'uniform ' + type + ' ' + uni.name + ';\\n';\n    }\n  }\n  return text;\n}\n\nfunction generateVaryingString(config: GLProgramConfig): string {\n  let text = '';\n  if (config.varyings !== undefined) {\n    config.varyings.forEach(vary => {\n      const type = getShaderTypeStringFromGLDataType(vary.type);\n      text = text + 'varying ' + type + ' ' + vary.name + ';\\n';\n    })\n  }\n  return text;\n}","import { GLDataType } from \"../shader-util\";\nimport { Matrix4, Vector3 } from \"../../math/index\";\nimport { Vector2 } from \"../../math/vector2\";\nimport { Vector4 } from \"../../math/vector4\";\n\nexport function findUniformSetter(type: GLDataType) {\n  switch (type) {\n    case GLDataType.float: return setValue1f;\n    case GLDataType.floatVec2: return setValue2fv;\n    case GLDataType.floatVec3: return setValue3fv;\n    case GLDataType.floatVec4: return setValue4fv;\n\n    case GLDataType.Mat2: return setValue2m;\n    case GLDataType.Mat3: return setValue3m;\n    case GLDataType.Mat4: return setValue4m;\n\n    // case 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n    // case 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n    case GLDataType.int: case GLDataType.boolean: return setValue1i; // INT, BOOL\n    // case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n    // case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n    // case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n  }\n  throw 'uniform setter not found'\n}\n\nfunction setValue1f(gl: WebGLRenderingContext, location: any, v: number) { gl.uniform1f(location, v) }\nfunction setValue2fv(gl: WebGLRenderingContext, location: any, v: Float32Array) { gl.uniform2fv(location, v) }\nfunction setValue3fv(gl: WebGLRenderingContext, location: any, v: Float32Array) { gl.uniform3fv(location, v) }\nfunction setValue4fv(gl: WebGLRenderingContext, location: any, v: Float32Array) { gl.uniform4fv(location, v) }\n\nfunction setValue1i(gl: WebGLRenderingContext, location: any, v: number) { gl.uniform1i(location, v) }\n\nfunction setValue2m(gl: WebGLRenderingContext, location: any, v: Float32Array) { gl.uniformMatrix4fv(location, false, v) }\nfunction setValue3m(gl: WebGLRenderingContext, location: any, v: Float32Array) { gl.uniformMatrix4fv(location, false, v) }\nfunction setValue4m(gl: WebGLRenderingContext, location: any, v: Float32Array) { gl.uniformMatrix4fv(location, false, v) }\n\nfunction differNumber(newVal: number, oldVal: number) {\n  return newVal !== oldVal;\n}\nfunction differArray(newVal: number[], oldVal: number[]) {\n  if (newVal.length !== oldVal.length) {\n    return true;\n  }\n  for (let i = 0; i < newVal.length; i++) {\n    if (newVal[i] !== oldVal[i]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction copyNumber(newVal: number, _target: number) {\n  return newVal;\n}\n\nfunction copyArray(newVal: number[], target: number[]) {\n  let targetReal = target;\n  if (target === undefined || newVal.length !== target.length) {\n    targetReal = [];\n  }\n  for (let i = 0; i < newVal.length; i++) {\n    targetReal[i] = newVal[i]\n  }\n  return targetReal;\n}\n\n\nexport function findUniformDiffer(type: GLDataType) {\n  if (type === GLDataType.float || type === GLDataType.int) {\n    return differNumber\n  } else {\n    return differArray\n  }\n}\n\nexport function findUniformCopier(type: GLDataType) {\n  if (type === GLDataType.float || type === GLDataType.int) {\n    return copyNumber\n  } else {\n    return copyArray\n  }\n}\n\nexport function findUniformFlattener(type: GLDataType) {\n  switch (type) {\n    case GLDataType.float: return (v: number) => v;\n    case GLDataType.floatVec2: return Vector2.flatten;\n    case GLDataType.floatVec3: return Vector3.flatten;\n    case GLDataType.floatVec4: return Vector4.flatten;\n\n    case GLDataType.Mat2: throw 'not support yet'; // _MAT2\n    case GLDataType.Mat3: throw 'not support yet' // _MAT3\n    case GLDataType.Mat4: return Matrix4.flatten // _MAT4\n\n    // case 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n    // case 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n    // case 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n    // case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n    // case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n    // case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n  }\n  throw 'uniform flattener not found'\n}\n\n","import { GLProgram } from \"../program\";\nimport { findUniformSetter, findUniformFlattener, findUniformDiffer, findUniformCopier } from \"./uniform-util\";\nimport { GLDataType } from \"../shader-util\";\nimport { Matrix4 } from \"../../math/matrix4\";\nimport { GLRenderer } from '../gl-renderer';\n\nexport type uniformUploadType = number | Float32Array | number[]\nexport type flattenerType= (value: any, receiveData: uniformUploadType) => uniformUploadType;\nexport type setterType= (gl: WebGLRenderingContext, location: WebGLUniformLocation, data: uniformUploadType) => void\nexport type copierType = (newValue: uniformUploadType, target: uniformUploadType) => uniformUploadType;\nexport type differType= (newValue: uniformUploadType, oldValue: uniformUploadType) => boolean;\n\nexport const enum InnerSupportUniform{\n  MMatrix,\n  VPMatrix,\n  LastVPMatrix\n}\n\nexport interface InnerUniformMapDescriptor{\n  name: string,\n  mapInner: InnerSupportUniform,     \n}\n\nexport const InnerUniformMap: Map<InnerSupportUniform, UniformDescriptor> = new Map();\nInnerUniformMap.set(InnerSupportUniform.MMatrix, {\n  name: 'MMatrix', type: GLDataType.Mat4, default: new Matrix4()\n})\nInnerUniformMap.set(InnerSupportUniform.VPMatrix, {\n  name: 'VPMatrix', type: GLDataType.Mat4, default: new Matrix4()\n})\nInnerUniformMap.set(InnerSupportUniform.LastVPMatrix, {\n  name: 'LastVPMatrix', type: GLDataType.Mat4, default: new Matrix4()\n})\n\n\n\nexport interface UniformDescriptor {\n  name: string,\n  type: GLDataType,\n  default?: any,\n  flattener?: flattenerType\n  setter?: setterType,\n  copier?: copierType,\n  differ?: differType\n  _innerGlobalUniform?: InnerSupportUniform\n}\n\n\nexport function createUniform(program: GLProgram, descriptor: UniformDescriptor): GLUniform{\n  return new GLUniform(program, descriptor);\n}\n\nexport function getInnerUniformDescriptor(des: InnerUniformMapDescriptor): UniformDescriptor {\n  const tempDescriptor = InnerUniformMap.get(des.mapInner);\n  const descriptor = {\n    name: des.name,\n    type: tempDescriptor.type,\n    default: tempDescriptor.default, // TODO default seems not useful\n    _innerGlobalUniform: des.mapInner\n  }\n  return descriptor;\n}\n\nexport class GLUniform{\n  constructor(program: GLProgram, descriptor: UniformDescriptor) {\n    this.name = descriptor.name;\n    this.renderer = program.renderer;\n    this.gl = program.renderer.gl;\n    const glProgram = program.getProgram();\n    const location = this.gl.getUniformLocation(glProgram, descriptor.name);\n    this.isActive = location !== null;\n    this.location = location;\n    \n    this.flattener = descriptor.flattener !== undefined ?\n    descriptor.flattener : findUniformFlattener(descriptor.type);\n\n    this.setter = descriptor.setter !== undefined ?\n      descriptor.setter : findUniformSetter(descriptor.type);\n    \n    this.differ = descriptor.differ !== undefined ?\n    descriptor.differ : findUniformDiffer(descriptor.type);\n  \n    this.copier = descriptor.copier !== undefined ?\n    descriptor.copier : findUniformCopier(descriptor.type);\n\n    this.innerGlobal = descriptor._innerGlobalUniform;\n  }\n  name: string;\n  private gl: WebGLRenderingContext;\n  private programChangeId: number = -1;\n  private renderer: GLRenderer;\n  \n  private location: WebGLUniformLocation;\n  innerGlobal?: InnerSupportUniform; \n  value: any;\n  private lastReceiveData: uniformUploadType;\n  private receiveData: uniformUploadType;\n  private setter: setterType;\n  private flattener: flattenerType\n  private differ: differType;\n  private copier: copierType;\n  private isActive: boolean;\n\n  set(value: any): void {\n    if (!this.isActive) {\n      return;\n    }\n    this.receiveData = this.flattener(value, this.receiveData);\n\n    if (this.lastReceiveData === undefined) { // this uniform never upload\n      this.lastReceiveData = this.flattener(value, this.lastReceiveData);\n      this.setter(this.gl, this.location, this.receiveData);\n      this.renderer.stat.uniformUpload++;\n      return;\n    }\n\n    let programSwitched = false;\n    if (this.programChangeId !== this.renderer._programChangeId) {\n      programSwitched = true;\n      this.programChangeId = this.renderer._programChangeId;\n    }\n\n    if (this.renderer.enableUniformDiff && !programSwitched) {\n      if (this.differ(this.receiveData, this.lastReceiveData)) {\n        this.setter(this.gl, this.location, this.receiveData);\n        this.renderer.stat.uniformUpload++;\n        this.lastReceiveData = this.copier(this.receiveData, this.lastReceiveData);\n      }\n    } else {\n      this.setter(this.gl, this.location, this.receiveData);\n      this.renderer.stat.uniformUpload++;\n    }\n  }\n\n}\n","import { GLDataType, getGLDataTypeStride } from \"./shader-util\";\nimport { GLProgram } from \"./program\";\n\nexport const enum AttributeUsage {\n  position,\n  normal,\n  color,\n  uv,\n  unset\n}\n\nexport interface AttributeDescriptor {\n  name: string,\n  type: GLDataType,\n  usage: AttributeUsage\n}\n\nexport class GLAttribute {\n  constructor(program: GLProgram, descriptor: AttributeDescriptor) {\n    this.name = descriptor.name;\n    this.gl = program.renderer.gl;\n    this.location = this.gl.getAttribLocation(program.getProgram(), descriptor.name);\n    this.type = descriptor.type;\n    this.isActive = this.location !== -1;\n  }\n  readonly name: string;\n  readonly gl: WebGLRenderingContext;\n  readonly location: number;\n  readonly type: GLDataType;\n  readonly count: number = 0;\n  readonly isActive: boolean;\n\n  useBuffer(buffer: WebGLBuffer) {\n    if (!this.isActive) {\n      return;\n    }\n    const gl = this.gl;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.vertexAttribPointer(this.location, getGLDataTypeStride(this.type), gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(this.location);\n  }\n\n}","import { GLProgram } from \"../program\";\nimport { Nullable } from \"../../type\";\nimport { GLTextureSlot } from \"../states/gl-texture-slot\";\nimport { ChannelType } from \"../../core/material\";\nimport { GLRenderer } from '../gl-renderer';\n\nexport enum GLTextureType{\n  texture2D,\n}\n\nexport interface TextureDescriptor {\n  name: string,\n  channelType?: ChannelType,\n  type: GLTextureType,\n}\n\n/**\n * for texture uniform uploading\n * \n * @export\n * @class GLTextureUniform\n */\nexport class GLTextureUniform{\n  constructor(program: GLProgram, descriptor: TextureDescriptor) {\n    this.renderer = program.renderer;\n    this.slotManager = program.renderer.state.textureSlot;\n    this.gl = program.renderer.gl;\n    this.name = descriptor.name\n    this.channel = descriptor.channelType;\n    const glProgram = program.getProgram();\n    const location = this.gl.getUniformLocation(glProgram, descriptor.name);\n    this.isActive = location !== null;\n    this.location = location;\n    this.currentActiveSlot = -1;\n  }\n  name: string;\n  channel: ChannelType;\n  private gl: WebGLRenderingContext;\n  private slotManager: GLTextureSlot;\n  private renderer: GLRenderer;\n  private location: WebGLUniformLocation;\n  isActive: boolean;\n\n\n  webglTexture: Nullable<WebGLTexture> = null;\n  currentActiveSlot: number;\n\n  useTexture(webglTexture: WebGLTexture): void {\n    if (!this.isActive) {\n      return;\n    }\n    const textureSlot = this.slotManager.updateSlotTexture(webglTexture);\n    if (this.currentActiveSlot !== textureSlot) {\n      this.renderer.stat.uniformUpload++;\n      this.currentActiveSlot = textureSlot;\n      this.gl.uniform1i(this.location, textureSlot);\n    }\n  }\n\n}","\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants#Rendering_primitives\nexport const enum DrawMode {\n  POINTS = 0x0000,\n  LINES = 0x0001,\n  LINES_LOOP = 0x0002,\n  LINES_STRIP = 0x0002,\n  TRIANGLES = 0x0004,\n  TRIANGLE_STRIP = 0x0005,\n  TRIANGLE_FAN = 0x0006,\n}\n\nexport const enum CullSide {\n  CullFaceNone = 0,\n  CullFaceBack = 1,\n  CullFaceFront = 2,\n  CullFaceFrontBack = 3\n}\n\nexport const enum DepthFunction {\n  NeverDepth = 99,\n  AlwaysDepth = 1,\n  LessDepth = 2,\n  LessEqualDepth = 3,\n  EqualDepth = 4,\n  GreaterEqualDepth = 5,\n  GreaterDepth = 6,\n  NotEqualDepth = 7,\n}\n\nexport const enum BlendingMode {\n  NoBlending = 0,\n  NormalBlending = 1,\n  AdditiveBlending = 2,\n  SubtractiveBlending = 3,\n  MultiplyBlending = 4,\n  CustomBlending = 5,\n}\n\nexport const enum GLTextureTypeRaw {\n  texture2D = 0x0DE1,\n  textureCubeMap = 0x8513,\n}\n\n\nexport enum TextureFilter {\n  nearest = 0x2600,\n  linear = 0x2601,\n  NEAREST_MIPMAP_NEAREST = 0x2700,\n  LINEAR_MIPMAP_NEAREST = 0x2701,\n  NEAREST_MIPMAP_LINEAR = 0x2702,\n  LINEAR_MIPMAP_LINEAR = 0x2703\n}\n\nexport enum TextureWrap {\n  repeat = 0x2901,\n  clampToEdge = 0x812F,\n  mirroredRepeat = 0x8370\n}\n\n\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoColors = 0;\nexport var FaceColors = 1;\nexport var VertexColors = 2;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants#Blending_equations\nexport const enum BlendEquation {\n  FUNC_ADD = 0x8006,\n  FUNC_SUBTRACT = 0x800A,\n  FUNC_REVERSE_SUBTRACT = 0x800B,\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants#Blending_modes\nexport const enum BlendMode {\n  ZERO = 0,\n  ONE = 1,\n  SRC_COLOR = 0x0300,\n  ONE_MINUS_SRC_COLOR = 0x0301,\n  SRC_ALPHA = 0x0302,\n  ONE_MINUS_SRC_ALPHA = 0x0303,\n  DST_ALPHA= 0x0304,\n  ONE_MINUS_DST_ALPHA= 0x0305,\n  DST_COLOR= 0x0306,\n  ONE_MINUS_DST_COLOR= 0x0307,\n  SRC_ALPHA_SATURATE = 0x0308,\n  CONSTANT_COLOR = 0x8001,\n  ONE_MINUS_CONSTANT_COLOR = 0x8002,\n  CONSTANT_ALPHA = 0x8003,\n  ONE_MINUS_CONSTANT_ALPHA = 0x8004,\n}\n\n// MinEquation = 103,\n// MaxEquation = 104,\n\n\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\n\n\n\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\n\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\n\nexport var NearestFilter = 1003;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants#Pixel_formats\nexport enum PixelFormat {\n  Alpha = 0x1906,\n  RGB = 0x1907,\n  RGBA = 0x1908,\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants#Pixel_types\nexport enum PixelDataType {\n  UNSIGNED_BYTE = 0x1401,\n  UNSIGNED_SHORT_5_6_5 = 0x8033,\n  UNSIGNED_SHORT_4_4_4_4 = 0x8034,\n  UNSIGNED_SHORT_5_5_5_1 = 0x8363,\n  FLOAT,\n}\n\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\n// export var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RGB_S3TC_DXT1_Format = 2001;\nexport var RGBA_S3TC_DXT1_Format = 2002;\nexport var RGBA_S3TC_DXT3_Format = 2003;\nexport var RGBA_S3TC_DXT5_Format = 2004;\nexport var RGB_PVRTC_4BPPV1_Format = 2100;\nexport var RGB_PVRTC_2BPPV1_Format = 2101;\nexport var RGBA_PVRTC_4BPPV1_Format = 2102;\nexport var RGBA_PVRTC_2BPPV1_Format = 2103;\nexport var RGB_ETC1_Format = 2151;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\n","import { GLRenderer } from \"./gl-renderer\";\nimport { GLShader, ShaderType } from \"./shader\";\nimport { generateUUID } from \"../math/uuid\";\nimport { injectVertexShaderHeaders, injectFragmentShaderHeaders, GLDataType, GLData } from \"./shader-util\";\nimport { GLUniform, UniformDescriptor, getInnerUniformDescriptor, InnerUniformMapDescriptor, InnerSupportUniform } from \"./uniform/uniform\";\nimport { AttributeDescriptor, GLAttribute, AttributeUsage } from \"./attribute\";\nimport { Nullable } from \"../type\";\nimport { GLTextureUniform, TextureDescriptor } from \"./uniform/uniform-texture\";\nimport { RenderEngine } from \"../engine/render-engine\";\n\nexport interface VaryingDescriptor {\n  name: string,\n  type: GLDataType\n}\n\nexport interface GLProgramConfig {\n  attributes: AttributeDescriptor[];\n  uniforms?: UniformDescriptor[];\n  uniformsIncludes?: InnerUniformMapDescriptor[];\n  _hasUniformIncludesExpand?: boolean;\n  varyings?: VaryingDescriptor[];\n  textures?: TextureDescriptor[];\n  vertexShaderString: string;\n  fragmentShaderString: string;\n  autoInjectHeader: boolean;\n  useIndex?: boolean;\n}\n\nfunction fulfillProgramConfig(config: GLProgramConfig){\n  if (config.useIndex === undefined) {\n    config.useIndex = true;\n  }\n  if (config.uniforms === undefined) {\n    config.uniforms = [];\n  }\n  if (config.uniformsIncludes !== undefined && config._hasUniformIncludesExpand !== true) {\n    config.uniformsIncludes.forEach(ui => {\n      (config.uniforms as UniformDescriptor[]).push(getInnerUniformDescriptor(ui));\n    })\n    config._hasUniformIncludesExpand = true;\n  }\n  return config;\n}\n\n\nexport class GLProgram{\n  constructor(renderer: GLRenderer, config: GLProgramConfig) {\n    fulfillProgramConfig(config);\n    this.renderer = renderer;\n    this.id = generateUUID();\n\n    this.vertexShader = new GLShader(this.renderer, ShaderType.vertex);\n    this.fragmentShader = new GLShader(this.renderer, ShaderType.fragment);\n    this.compileShaders(config);\n\n    this.createProgram(this.vertexShader, this.fragmentShader);\n    this.createGLResource(config);\n    \n    if (config.uniformsIncludes !== undefined) {\n      config.uniformsIncludes.forEach(des => {\n        this.globalUniforms.push(this.uniforms[des.name])\n      })\n    }\n\n    this.config = config;\n    if (config.useIndex !== undefined) {\n      this.useIndexDraw = config.useIndex;\n    }\n    renderer.programManager.addNewProgram(this);\n\n    config.attributes.forEach(att => {\n      if (att.usage !== undefined) {\n        this.attributeUsageMap[att.usage] = this.attributes[att.name];\n      }\n    });\n  }\n  id: string;\n  name: string = \"any\";\n  readonly renderer: GLRenderer;\n  private program: Nullable<WebGLProgram> = null;\n  getProgram(): WebGLProgram {\n    if (this.program === null) {\n      throw 'program is broken'\n    }\n    return this.program\n  };\n  private config: GLProgramConfig;\n  private attributes: { [index: string]: GLAttribute } = {};\n  private attributeUsageMap: { [index: number]: GLAttribute } = {};\n  private uniforms: { [index: string]: GLUniform } = {};\n  private globalUniforms: GLUniform[] = [];\n  private textures: { [index: string]: GLTextureUniform } = {};\n  private vertexShader: GLShader;\n  private fragmentShader: GLShader;\n\n  getConfig(): Readonly<GLProgramConfig>{\n    return this.config;\n  }\n\n  framebufferTextureMap: { [index: string]: string } = {};\n\n  drawFrom: number = 0;\n  drawCount: number = 0;\n  useIndexDraw: boolean = false;\n  indexUINT: boolean = false;\n\n\n  public defineFrameBufferTextureDep(framebufferName: string, uniformName: string) {\n    this.framebufferTextureMap[uniformName] = framebufferName;\n  }\n\n  public forUniforms(cb: (uniform: GLUniform) => any): void {\n    for (const key in this.textures) {\n      cb(this.uniforms[key]);\n    }\n  }\n\n  public forTextures(cb: (texture: GLTextureUniform) => any): void {\n    for (const key in this.textures) {\n      cb(this.textures[key]);\n    }\n  }\n\n  public forAttributes(cb: (texture: GLAttribute) => any): void {\n    for (const key in this.attributes) {\n      cb(this.attributes[key]);\n    }\n  }\n\n  private compileShaders(conf: GLProgramConfig) {\n    let vertexShaderString = conf.vertexShaderString;\n    let fragmentShaderString = conf.fragmentShaderString;\n    if (conf.autoInjectHeader) {\n      vertexShaderString = injectVertexShaderHeaders(conf, conf.vertexShaderString);\n      fragmentShaderString = injectFragmentShaderHeaders(conf, conf.fragmentShaderString);\n    }\n    this.vertexShader.compileShader(vertexShaderString);\n    this.fragmentShader.compileShader(fragmentShaderString);\n  }\n\n  private createProgram(vertexShader: GLShader, fragmentShader: GLShader) {\n    const gl = this.renderer.gl;\n    const program = gl.createProgram();\n    if (program === null) {\n      throw 'webgl program create failed';\n    }\n    this.program = program;\n    gl.attachShader(this.program, vertexShader.shader);\n    gl.attachShader(this.program, fragmentShader.shader);\n    gl.linkProgram(this.program);\n    if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n      let info = gl.getProgramInfoLog(this.program);\n      throw 'Could not compile WebGL program. \\n\\n' + info;\n    }\n  }\n\n  private createGLResource(config: GLProgramConfig) {\n    if (config.attributes !== undefined) {\n      config.attributes.forEach(att => {\n        this.attributes[att.name] = new GLAttribute(this, att)\n      })\n    }\n    if (config.uniforms !== undefined) {\n      config.uniforms.forEach(uni => {\n        this.uniforms[uni.name] = new GLUniform(this, uni)\n      })\n    }\n    if (config.textures !== undefined) {\n      config.textures.forEach(tex => {\n        this.textures[tex.name] = new GLTextureUniform(this, tex);\n      })\n    }\n  }\n\n  updateAttribute(name: string, data: WebGLBuffer) {\n    const attribute = this.attributes[name];\n    if (attribute === undefined) {\n      throw 'try to set a none exist attribute';\n    }\n    attribute.useBuffer(data);\n  }\n\n  getAttributeByUsage(usage:AttributeUsage) {\n    return this.attributeUsageMap[usage];\n  }\n\n  setTexture(name: string, webglTexture: WebGLTexture) {\n    this.textures[name].useTexture(webglTexture);\n  }\n\n  setDrawRange(start:number, count:number) {\n    this.drawFrom = start;\n    this.drawCount = count;\n  }\n\n  setUniform(name: string, data: GLData) {\n    this.uniforms[name].set(data);\n  }\n\n  updateInnerGlobalUniforms(engine: RenderEngine) {\n    this.globalUniforms.forEach(uni => {\n      uni.set(engine.getGlobalUniform(uni.innerGlobal as InnerSupportUniform).value)\n    })\n  }\n\n  useIndexBuffer(buffer: WebGLBuffer) {\n    const gl = this.renderer.gl;\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n  }\n\n  dispose() {\n    this.vertexShader.dispose();\n    this.fragmentShader.dispose();\n    this.renderer.gl.deleteProgram(this.program);\n  }\n}\n","import { GLRenderer } from \"./gl-renderer\";\nimport { GLProgram } from \"./program\";\nimport { GLReleasable } from '../type';\n\nexport class GLProgramManager implements GLReleasable {\n  \n  private programs: Map<string, GLProgram> = new Map();\n\n  addNewProgram(program: GLProgram) {\n    this.programs.set(program.id, program);\n  }\n\n  getProgram(storeId: string) {\n    return this.programs.get(storeId);\n  }\n\n  get compiledProgramsCount() {\n    return this.programs.size;\n  }\n\n  releaseGL() {\n    this.programs.forEach(program => {\n      program.dispose();\n    })\n    this.programs = new Map();\n  }\n\n}","import { GLRenderer } from \"./gl-renderer\";\nimport { GLReleasable } from '../type';\n\nexport class GLAttributeBufferDataManager implements GLReleasable {\n  constructor(renderer: GLRenderer) {\n    this.renderer = renderer;\n  }\n  readonly renderer: GLRenderer;\n  private buffers: WeakMap<ArrayBuffer, WebGLBuffer> = new WeakMap();\n\n  getGLBuffer(arraybuffer: ArrayBuffer): WebGLBuffer {\n    return this.buffers.get(arraybuffer);\n  }\n\n  createBuffer(data: ArrayBuffer, useForIndex: boolean): WebGLBuffer {\n    const gl = this.renderer.gl;\n    const buffer = gl.createBuffer();\n    if (buffer === null) {\n      throw 'webgl buffer create fail';\n    }\n    if (useForIndex) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, gl.STATIC_DRAW);\n    } else {\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n    }\n    this.buffers.set(data, buffer);\n    return buffer;\n  }\n\n  disposeBuffer(data: ArrayBuffer) {\n    if (!this.buffers.has(data)) {\n      throw 'cant find buffer to dispose';\n    }\n    const gl = this.renderer.gl;\n    const buffer = this.buffers.get(data);\n    gl.deleteBuffer(buffer);\n    this.buffers.delete(data);\n  }\n\n  updateOrCreateBuffer(data: ArrayBuffer, useForIndex: boolean): WebGLBuffer {\n    if (!this.buffers.has(data)) {\n      return this.createBuffer(data, useForIndex);\n    }\n    this.disposeBuffer(data);\n    this.createBuffer(data, useForIndex);\n  }\n\n  releaseGL() {\n    this.buffers = new WeakMap();\n  }\n\n}","import { GLRenderer } from \"../gl-renderer\";\nimport { Vector4 } from \"../../math/vector4\";\n\nexport class GLColorBuffer{\n  static defaultClearColor = new Vector4(0.8, 0.8, 0.8, 1);\n  constructor(renderer: GLRenderer) {\n    this.gl = renderer.gl;\n    this.resetDefaultClearColor();\n  }\n\n  private gl: WebGLRenderingContext;\n\n  redMaskEnabled: boolean = false;\n  greenMaskEnabled: boolean = false;\n  blueMaskEnabled: boolean = false;\n  alphaMaskEnabled: boolean = false;\n\n  /**\n   * set color buffer mask, inner has diff check\n   *\n   * @param {boolean} redMask whether enable red channel color mask\n   * @param {boolean} greenMask whether enable green channel color mask\n   * @param {boolean} blueMask whether enable blue channel color mask\n   * @param {boolean} alphaMask whether enable alpha channel color mask\n   * @memberof GLColorBuffer\n   */\n  setColorMask(redMask: boolean, greenMask: boolean, blueMask: boolean, alphaMask: boolean) {\n    if (this.redMaskEnabled !== redMask ||\n      this.greenMaskEnabled !== greenMask ||\n      this.blueMaskEnabled !== blueMask ||\n      this.alphaMaskEnabled !== alphaMask\n    ) {\n      this.gl.colorMask(redMask, greenMask, blueMask, alphaMask);\n      this.redMaskEnabled = redMask;\n      this.greenMaskEnabled = greenMask;\n      this.blueMaskEnabled = blueMask;\n      this.alphaMaskEnabled = alphaMask;\n    }\n  }\n\n  // TODO premultiplied alpha\n  currentClearColor: Vector4 = new Vector4();\n  setClearColor(newColor: Vector4, premultipliedAlpha?: boolean) {\n    if (!newColor.equals(this.currentClearColor)) {\n      this.currentClearColor.copy(newColor);\n      this.gl.clearColor(newColor.x, newColor.y, newColor.z, newColor.w);\n    }\n  }\n\n  resetDefaultClearColor() {\n    this.setClearColor(GLColorBuffer.defaultClearColor);\n  }\n\n  clear() {\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n  }\n}\n","import { GLRenderer } from \"../gl-renderer\";\nimport { DepthFunction } from \"../const\";\n\nexport class GLDepthBuffer {\n  constructor(renderer: GLRenderer) {\n    this.gl = renderer.gl;\n    this.resetDefault();\n  }\n\n  currentDepthMask = null;\n  currentDepthFunc = null;\n  currentDepthClear = null;\n\n  readonly gl: WebGLRenderingContext;\n\n  private _enableTest = false;\n  set enableTest(value: boolean) {\n    if (this._enableTest !== value) {\n      if (value) {\n        this.gl.enable(this.gl.DEPTH_TEST);\n      } else {\n        this.gl.disable(this.gl.DEPTH_TEST);\n      }\n    }\n  }\n  get enableTest() {\n    return this._enableTest;\n  }\n\n  clear() {\n    this.gl.clear(this.gl.DEPTH_BUFFER_BIT);\n  }\n\n  resetDefault() {\n    this.enableTest = true;\n  }\n\n  setMask(value: boolean) {\n    if (this.currentDepthMask !== value) {\n      this.gl.depthMask(value);\n      this.currentDepthMask = value;\n    }\n  }\n\n  setFunc(depthFunc: DepthFunction) {\n    const gl = this.gl;\n    if (this.currentDepthFunc !== depthFunc) {\n      if (depthFunc) {\n        switch (depthFunc) {\n          case DepthFunction.NeverDepth:\n            gl.depthFunc(gl.NEVER);\n            break;\n          case DepthFunction.AlwaysDepth:\n            gl.depthFunc(gl.ALWAYS);\n            break;\n          case DepthFunction.LessDepth:\n            gl.depthFunc(gl.LESS);\n            break;\n          case DepthFunction.LessEqualDepth:\n            gl.depthFunc(gl.LEQUAL);\n            break;\n          case DepthFunction.EqualDepth:\n            gl.depthFunc(gl.EQUAL);\n            break;\n          case DepthFunction.GreaterEqualDepth:\n            gl.depthFunc(gl.GEQUAL);\n            break;\n          case DepthFunction.GreaterDepth:\n            gl.depthFunc(gl.GREATER);\n            break;\n          case DepthFunction.NotEqualDepth:\n            gl.depthFunc(gl.NOTEQUAL);\n            break;\n          default:\n            gl.depthFunc(gl.LEQUAL);\n        }\n      } else {\n        gl.depthFunc(gl.LEQUAL);\n      }\n      this.currentDepthFunc = depthFunc;\n    }\n  }\n\n}","import { GLRenderer } from \"../gl-renderer\";\nimport { GLTextureTypeRaw } from \"../const\";\nimport { GLParamList } from \"../gl-info\";\n\ninterface textureBindInfo {\n  type: GLTextureTypeRaw,\n  texture: WebGLTexture\n}\n\n/**\n * manage gl state about texture usage\n *\n * @export\n * @class GLTextureSlot\n */\nexport class GLTextureSlot {\n  constructor(renderer: GLRenderer) {\n    this.renderer = renderer;\n    this.gl = renderer.gl;\n    this.maxSupport = renderer.glInfo.getParameter(GLParamList.MAX_TEXTURE_SIZE);\n    generateTextureSlotMap(this.maxSupport, this.gl);\n  }\n  readonly renderer;\n  readonly gl;\n  readonly maxSupport;\n\n  private currentTextureSlot = null;\n  private currentBindTextures: textureBindInfo[] = [];\n\n  activeTexture(slot: number) {\n    if (this.currentTextureSlot !== slot) {\n      this.gl.activeTexture(slot);\n      this.currentTextureSlot = slot;\n    }\n  }\n\n  bindTexture(webglType: GLTextureTypeRaw, webglTexture: WebGLTexture) {\n    if (this.currentTextureSlot === null) {\n      this.activeTexture(this.gl.TEXTURE0);\n    }\n    let boundTexture = this.currentBindTextures[this.currentTextureSlot];\n    if (boundTexture === undefined) {\n      boundTexture = { type: undefined, texture: undefined };\n      this.currentBindTextures[this.currentTextureSlot] = boundTexture;\n    }\n    if (boundTexture.type !== webglType || boundTexture.texture !== webglTexture) {\n      this.gl.bindTexture(webglType, webglTexture);\n      boundTexture.type = webglType;\n      boundTexture.texture = webglTexture;\n    }\n  }\n\n  private slotIndex = 0;\n\n  resetSlotIndex() {\n    this.slotIndex = 0;\n  }\n\n  findSlot(webglTexture: WebGLTexture): number {\n    let slot = this.slotIndex;\n    if (this.slotIndex > this.maxSupport) {\n      throw 'texture use exceed max texture support'\n    }\n    this.slotIndex++;\n    return slot;\n  }\n\n  updateSlotTexture(webglTexture: WebGLTexture): number {\n    const textureSlotToUpdate = this.findSlot(webglTexture);\n    const textureSlotGLToUpdate = textureSlotMap[textureSlotToUpdate];\n    this.activeTexture(textureSlotGLToUpdate);\n    this.bindTexture(GLTextureTypeRaw.texture2D, webglTexture);\n    return textureSlotToUpdate;\n  }\n}\n\nconst textureSlotMap: number[] = [];\nfunction generateTextureSlotMap(maxTextureSlotSupport: number, gl: WebGLRenderingContext) {\n  for (let i = 0; i < maxTextureSlotSupport; i++) {\n    const name = `TEXTURE${i}`;\n    textureSlotMap[i] = gl[name];\n  }\n}","import { GLRenderer } from \"../gl-renderer\";\nimport { Vector4 } from \"../../math/vector4\";\nimport { CullSide } from \"../const\";\nimport { GLColorBuffer } from \"./gl-color-buffer\";\nimport { GLDepthBuffer } from \"./gl-depth-buffer\";\nimport { GLTextureSlot } from \"./gl-texture-slot\";\n\nexport class GLState {\n  constructor(renderer: GLRenderer) {\n    this.renderer = renderer;\n    this.gl = renderer.gl;\n    this.colorbuffer = new GLColorBuffer(renderer);\n    this.depthbuffer = new GLDepthBuffer(renderer);\n    this.textureSlot = new GLTextureSlot(renderer);\n  }\n  readonly renderer: GLRenderer;\n  readonly gl: WebGLRenderingContext;\n  readonly colorbuffer: GLColorBuffer;\n  readonly depthbuffer: GLDepthBuffer;\n  readonly textureSlot: GLTextureSlot;\n\n  currentViewport: Vector4 = new Vector4();\n  newViewport: Vector4 = new Vector4();\n  currentScissor: Vector4 = new Vector4();\n  newScissor: Vector4 = new Vector4();\n\n  // specifies the affine transformation of x and y \n  // from normalized device coordinates to window coordinates.\n  setViewport(x: number, y: number, width: number, height: number) {\n    this.newViewport.set(x, y, width, height);\n    if (!this.newViewport.equals(this.currentViewport)) {\n      this.gl.viewport(x, y, width, height);\n      this.currentViewport.copy(this.newViewport);\n    }\n  }\n\n  setFullScreenViewPort() {\n    this.setViewport(0, 0, this.renderer.width, this.renderer.height);\n  }\n\n  setScissor(x: number, y: number, width: number, height: number) {\n    this.newScissor.set(x, y, width, height);\n    if (!this.newScissor.equals(this.currentScissor)) {\n      this.gl.viewport(x, y, width, height);\n      this.currentScissor.copy(this.newScissor)\n    }\n  }\n\n  currentCullFace: CullSide = CullSide.CullFaceNone;\n  setCullFace(cullFace: CullSide) {\n    const gl = this.gl;\n    if (cullFace !== CullSide.CullFaceNone) {\n      gl.enable(gl.CULL_FACE);\n      if (cullFace !== this.currentCullFace) {\n        if (cullFace === CullSide.CullFaceBack) {\n          gl.cullFace(gl.BACK);\n        } else if (cullFace === CullSide.CullFaceFront) {\n          gl.cullFace(gl.FRONT);\n        } else {\n          gl.cullFace(gl.FRONT_AND_BACK);\n        }\n      }\n    } else {\n      gl.disable(gl.CULL_FACE);\n    }\n    this.currentCullFace = cullFace;\n  }\n\n  currentPolygonOffsetFactor: number = 0;\n  currentPolygonOffsetUnits: number = 0;\n\n  setPolygonOffset(polygonOffsetEnable: boolean, factor: number, units: number) {\n    const gl = this.gl;\n    if (polygonOffsetEnable) {\n      gl.enable(gl.POLYGON_OFFSET_FILL);\n      if (this.currentPolygonOffsetFactor !== factor || this.currentPolygonOffsetUnits !== units) {\n        gl.polygonOffset(factor, units);\n        this.currentPolygonOffsetFactor = factor;\n        this.currentPolygonOffsetUnits = units;\n      }\n    } else {\n      gl.disable(gl.POLYGON_OFFSET_FILL);\n    }\n  }\n\n}\n\n\n","import { GLRenderer } from \"./gl-renderer\";\nimport { TextureFilter, TextureWrap } from \"./const\";\nimport { Texture, HTMLImageTexture } from \"../core/texture\";\nimport { GLReleasable } from '../type';\nimport { FramebufferAttachTexture } from \"./gl-framebuffer\";\n\ninterface TextureDescriptor {\n  minFilter: TextureFilter;\n  maxFilter: TextureFilter;\n  sWrap: TextureWrap;\n  tWrap: TextureWrap;\n}\n\nconst DefaultTextureDescriptor = {\n  minFilter: TextureFilter.nearest,\n  maxFilter: TextureFilter.nearest,\n  sWrap: TextureWrap.clampToEdge,\n  tWrap: TextureWrap.clampToEdge,\n}\n\nconst defaultRenderTargetTextureDescriptor = DefaultTextureDescriptor;\n\n\n/**\n * responsible for webgl texture resource allocation and reallocation\n * outside request create webgl texture from given source or description\n * \n * @export\n * @class GLTextureManager\n */\nexport class GLTextureManager implements GLReleasable{\n  constructor(renderer: GLRenderer) {\n    this.renderer = renderer;\n    this.POTResizeCanvas = document.createElement('canvas')\n  }\n  readonly renderer: GLRenderer;\n  private textures: Map<Texture, WebGLTexture> = new Map();\n  private POTResizeCanvas: HTMLCanvasElement;\n  // private textures: Map<Texture, WebGLTextureWithVersionIDWrap> = new Map();\n\n  init() {\n    const gl = this.renderer.gl;\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n  }\n\n  getGLTexture(texture: Texture) {\n    return this.textures.get(texture);\n  }\n\n  deleteGLTexture(texture: Texture) {\n    const glTexture = this.getGLTexture(texture);\n    this.renderer.gl.deleteTexture(glTexture);\n    this.textures.delete(texture);\n  }\n\n  createTextureFromImageElement(texture: HTMLImageTexture) {\n    const gl = this.renderer.gl;\n    const glTexture = this.createWebGLTexture(DefaultTextureDescriptor);\n    gl.bindTexture(gl.TEXTURE_2D, glTexture);\n  \n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);\n    this.textures.set(texture, glTexture);\n    return glTexture;\n  }\n\n  createTextureForRenderTarget(texture: FramebufferAttachTexture) {\n    const gl = this.renderer.gl;\n    const glTexture = this.createWebGLTexture(defaultRenderTargetTextureDescriptor)\n\n    gl.bindTexture(gl.TEXTURE_2D, glTexture);\n    const internalFormat = gl.RGBA;\n    const border = 0;\n    const format = gl.RGBA;\n    const type = gl.UNSIGNED_BYTE;\n    const data = null;\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat,\n      texture.width, texture.height, border,\n      format, type, data);\n    \n    this.textures.set(texture, glTexture);\n\n    return glTexture;\n  }\n  \n  private createWebGLTexture(config: TextureDescriptor): WebGLTexture {\n    const gl = this.renderer.gl;\n    const texture = gl.createTexture();\n    if (texture === null) {\n      throw 'webgl texture create fail';\n    }\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, config.minFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, config.maxFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, config.sWrap);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, config.tWrap);\n    return texture;\n  }\n\n  releaseGL() {\n    \n  }\n}\n","import { RenderEngine } from \"../engine/render-engine\";\nimport { GraphicResourceReleasable } from \"../type\";\n\nexport enum PixelFormat {\n  AlphaFormat = 1021,\n  RGBFormat = 1022,\n  RGBAFormat = 1023,\n}\n\nexport enum PixelDataType {\n  UNSIGNED_BYTE,\n  UNSIGNED_SHORT_5_6_5,\n  UNSIGNED_SHORT_4_4_4_4,\n  UNSIGNED_SHORT_5_5_5_1,\n  FLOAT,\n}\n\n/**\n * texture container for bitmap render data\n * \n * @export\n * @class Texture\n */\nexport abstract class Texture implements GraphicResourceReleasable {\n\n  private needUpdate: boolean = true;\n\n  format: PixelFormat = PixelFormat.RGBAFormat\n  dataType: PixelDataType = PixelDataType.UNSIGNED_BYTE\n\n  setNeedUpdate() {\n    this.needUpdate = true;\n  }\n\n  getGLTexture(engine: RenderEngine): WebGLTexture {\n    const glTexture = engine.renderer.textureManger.getGLTexture(this)\n    if (glTexture === undefined) {\n      this.needUpdate = false;\n      return this.upload(engine);\n    }\n    if (this.needUpdate) {\n      this.needUpdate = false;\n      this.releaseGraphics(engine);\n      return this.upload(engine);\n    }\n  }\n\n  releaseGraphics(engine: RenderEngine) {\n    engine.renderer.textureManger.deleteGLTexture(this);\n  }\n\n  abstract upload(engine: RenderEngine): WebGLTexture;\n}\n\nexport class DataTexture extends Texture {\n  data?: Uint8ClampedArray;\n\n  upload(engine: RenderEngine): WebGLTexture {\n    // TODO\n    throw new Error(\"Method not implemented.\");\n  }\n}\n\nexport class HTMLImageTexture extends Texture{\n  \n  image: HTMLImageElement;\n\n  upload(engine: RenderEngine) {\n    return engine.renderer.textureManger.createTextureFromImageElement(this);\n  }\n}","import { GLRenderer } from \"./gl-renderer\";\nimport { Nullable } from \"../type\";\nimport { PixelFormat } from \"./const\";\nimport { Texture } from \"../core/texture\";\nimport { RenderEngine } from \"../engine/render-engine\";\n\n\n\nexport class FramebufferAttachTexture extends Texture {\n  width: number = 5;\n  height: number = 5;\n\n  upload(engine: RenderEngine): WebGLTexture {\n    return engine.renderer.textureManger.createTextureForRenderTarget(this);\n  }\n\n  attach(engine: RenderEngine, framebuffer: GLFramebuffer, attachPoint: number) {\n    engine.renderer.setRenderTarget(framebuffer);\n\n    const gl = framebuffer.gl;\n    this.width = framebuffer.width;\n    this.height = framebuffer.height;\n    this.releaseGraphics(engine);\n    const glTexture = this.upload(engine);\n    const attachmentPoint = GLAttachmentPoints[attachPoint];\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, glTexture, 0);\n  }\n\n}\n\nconst GLAttachmentPoints = [];\nfunction loadGLAttachmentPoints(gl: WebGLRenderingContext) {\n  if (GLAttachmentPoints.length === 0) {\n    for (let i = 0; i < 32; i++) {\n      GLAttachmentPoints[i] = gl['COLOR_ATTACHMENT' + i];\n    }\n  }\n}\n\nexport type FramebufferReadBufferType = Uint8Array | Uint16Array | Float32Array;\n\nexport class GLFramebuffer {\n  constructor(renderer: GLRenderer, name: string, width: number, height: number) {\n    this.name = name;\n    this.renderer = renderer;\n    this.gl = renderer.gl;\n    loadGLAttachmentPoints(this.gl);\n    this.webglFrameBuffer = this.createGLFramebuffer();\n    this.width = width;\n    this.height = height;\n  }\n  name: string;\n  gl: WebGLRenderingContext;\n  renderer: GLRenderer;\n\n  width: number;\n  height: number;\n\n  enableDepth: boolean = true;\n  webglDepthBuffer: Nullable<WebGLRenderbuffer> = null;\n  webglFrameBuffer: WebGLFramebuffer;\n\n  textureAttachedSlot: FramebufferAttachTexture[] = [];\n\n  createGLFramebuffer() {\n    const buffer = this.gl.createFramebuffer();\n    if (buffer === null) {\n      throw 'webgl framebuffer create failed'\n    }\n    return buffer;\n  }\n\n  createGLRenderbuffer() {\n    const buffer = this.gl.createRenderbuffer();\n    if (buffer === null) {\n      throw 'webgl renderbuffer create failed'\n    }\n    return buffer;\n  }\n\n  resize(engine: RenderEngine, width: number, height: number) {\n\n    if (this.width === width && this.height === height) {\n      return;\n    }\n\n    this.width = width;\n    this.height = height;\n\n    this.gl.deleteFramebuffer(this.webglFrameBuffer);\n    this.webglFrameBuffer = this.createGLFramebuffer();\n\n    this.renderer.setRenderTarget(this);\n\n    this.textureAttachedSlot.forEach((text, index) => {\n      if (text) {\n        text.attach(engine, this, index);\n      }\n    })\n\n    this.disposeAttachedDepthBuffer();\n    this.createAttachDepthBuffer();\n\n  }\n\n  createAttachTexture(engine: RenderEngine,attachPoint: number) {\n    if (this.textureAttachedSlot[attachPoint] !== undefined) {\n      throw 'framebuffer has attached texture'\n    }\n    const attachTexture = new FramebufferAttachTexture();\n    attachTexture.attach(engine, this, attachPoint);\n    this.textureAttachedSlot[attachPoint] = attachTexture;\n\n  }\n\n  createAttachDepthBuffer() {\n    this.renderer.setRenderTarget(this);\n\n    if (this.webglDepthBuffer !== null) {\n      return\n    }\n    const gl = this.gl;\n    const depthBuffer = this.createGLRenderbuffer();\n    this.webglDepthBuffer = depthBuffer;\n\n    gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuffer);\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, this.width, this.height);\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBuffer);\n  }\n\n  disposeAttachedDepthBuffer() {\n    this.gl.deleteRenderbuffer(this.webglDepthBuffer);\n    this.webglDepthBuffer = null;\n  }\n\n  attachTexture(texture: FramebufferAttachTexture, attachPoint: number) {\n    // TODO\n  }\n\n  // read pixel info from this framebuffer\n  // https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/readPixels\n  readPixels(x: number, y: number, width: number, height: number, readBuffer: FramebufferReadBufferType) {\n    // TODO\n    const gl = this.gl;\n    this.renderer.setRenderTarget(this);\n    if (x < 0 || y < 0 || x > (this.width - width) || y > (this.height - height)) {\n      throw \"read area exceed frameSize\"\n    }\n    if (readBuffer.length < width * height) {\n      throw \"readBuffer size not sufficient\"\n    }\n    gl.readPixels(x, y, width, height, PixelFormat.RGBA, gl.UNSIGNED_BYTE, readBuffer); \n  }\n\n  dispose() {\n    this.textureAttachedSlot = [];\n    this.disposeAttachedDepthBuffer();\n    this.gl.deleteFramebuffer(this.webglFrameBuffer);\n    this.webglFrameBuffer = null;\n  }\n}","import { GLFramebuffer } from \"./gl-framebuffer\";\nimport { GLRenderer } from \"./gl-renderer\";\nimport { GLReleasable } from '../type';\nimport { RenderEngine } from \"../engine/render-engine\";\n\nexport class GLFrameBufferManager implements GLReleasable{\n  constructor(renderer: GLRenderer) {\n    this.renderer = renderer;\n    this.gl = renderer.gl;\n  }\n  readonly gl: WebGLRenderingContext;\n  readonly renderer: GLRenderer;\n\n  private framebuffers: Map<string, GLFramebuffer> = new Map();\n\n  createFrameBuffer(engine: RenderEngine, name: string, width: number, height: number, enableDepth: boolean): GLFramebuffer{\n    if (this.framebuffers.has(name)) {\n      throw 'duplicate framebuffer key name';\n    }\n\n    const framebuffer = new GLFramebuffer(this.renderer, name, width, height);\n    framebuffer.createAttachTexture(engine, 0);\n    framebuffer.enableDepth = enableDepth;\n    if (enableDepth) {\n      framebuffer.createAttachDepthBuffer();\n    }\n\n    this.framebuffers.set(name, framebuffer);\n\n    return framebuffer;\n  }\n\n  getFramebuffer(framebufferName: string) {\n    return this.framebuffers.get(framebufferName);\n  }\n\n  getFramebufferTexture(framebufferName: string): WebGLTexture{\n    const framebuffer = this.framebuffers.get(framebufferName);\n    if (framebuffer === undefined) {\n      throw `cant find framebuffer ${framebufferName}`\n    }\n    return this.renderer.textureManger.getGLTexture(framebuffer.textureAttachedSlot[0]);\n  }\n\n  releaseGL() {\n    \n  }\n}","export class GLStat{\n  drawcall: number = 0;\n  programSwitch: number = 0;\n  uniformUpload: number = 0;\n  framebufferSwitch: number = 0;\n\n\n  reset() {\n    this.drawcall = 0;\n    this.programSwitch = 0;\n    this.uniformUpload = 0;\n    this.framebufferSwitch = 0;\n  }\n}","import { GLRenderer } from \"./gl-renderer\";\nimport { GLExtList } from \"./gl-info\";\nimport { GLReleasable } from \"../type\";\nimport { Geometry } from \"../core/geometry\";\n\nexport interface VAOCreateCallback{\n  vao: any,\n  unbind: () => void\n}\n\nexport class GLVAOManager implements GLReleasable{\n  readonly gl: WebGLRenderingContext;\n  readonly renderer: GLRenderer;\n  readonly vaoExt: any;\n  readonly isSupported: boolean;\n  private vaos: WeakMap<Geometry, any> = new WeakMap();\n\n  constructor(renderer: GLRenderer) {\n    this.renderer = renderer;\n    this.gl = renderer.gl;\n    this.vaoExt = renderer.glInfo.getExtension(GLExtList.OES_vertex_array_object);\n    this.isSupported = this.vaoExt !== undefined;\n  }\n\n  getVAO(geometry: Geometry) {\n    return this.vaos.get(geometry);\n  }\n\n  createVAO(geometry: Geometry): VAOCreateCallback {\n    const vao = this.vaoExt.createVertexArrayOES(); \n    this.vaoExt.bindVertexArrayOES(vao);\n    this.vaos.set(geometry, vao);\n    return {\n      vao, unbind: () => {\n        this.vaoExt.bindVertexArrayOES(null);\n      }\n    };\n  }\n\n  deleteVAO(geometry: Geometry) {\n    this.vaos.delete(geometry);\n  }\n\n  useVAO(vao: any) {\n    this.vaoExt.bindVertexArrayOES(vao);\n  }\n\n  releaseGL(): void {\n    this.vaoExt.bindVertexArrayOES(null);\n    this.vaos = new WeakMap();\n  }\n}","import { GLInfo } from \"./gl-info\";\nimport { GLProgram, GLProgramConfig } from \"./program\";\nimport { GLProgramManager } from \"./program-manager\";\nimport { GLAttributeBufferDataManager } from \"./attribute-buffer-manager\";\nimport { GLState } from \"./states/gl-state\";\nimport { DrawMode } from \"./const\";\nimport { Nullable, GLReleasable } from \"../type\";\nimport { GLTextureManager } from \"./texture-manager\";\nimport { GLFrameBufferManager } from \"./framebuffer-manager\";\nimport { GLFramebuffer } from \"./gl-framebuffer\";\nimport { GLStat } from \"./gl-stat\";\nimport { GLVAOManager } from \"./vao\";\n\nexport class GLRenderer implements GLReleasable{\n  constructor(el?: HTMLCanvasElement, options?: any) {\n    if (el === undefined) {\n      el = document.createElement('canvas');\n    }\n    options = { ...options };\n    options.antialias = false;\n    // options.preserveDrawingBuffer = true; // for screen shot\n    const ctx = el.getContext('webgl', options);\n    if (ctx === null) {\n      throw 'webgl context create failed';\n    }\n    this.gl = ctx;\n    this.el = el;\n    this.glInfo = new GLInfo(ctx);\n    this.framebufferManager = new GLFrameBufferManager(this);\n    this.vaoManager = new GLVAOManager(this);\n    this.state = new GLState(this);\n    this.textureManger.init();\n    this.setSize(this.el.offsetWidth, this.el.offsetHeight);\n  }\n  readonly gl: WebGLRenderingContext;\n  readonly el: HTMLCanvasElement;\n\n  readonly glInfo: GLInfo;\n\n  // enable this will cause great performance issue\n  // only enable this when debug draw range issue\n  enableRenderErrorCatch: boolean = false;\n  enableUniformDiff: boolean = true;\n\n  // width height is render size, not element size\n  private _width = 100;\n  get width() { return this._width };\n  private _height = 100;\n  get height() { return this._height };\n\n  private devicePixelRatio = window.devicePixelRatio;\n\n  // set render size by device logic size\n  setSize(width: number, height: number): boolean {\n    return this.setRawRenderSize(width * this.devicePixelRatio, height * this.devicePixelRatio);\n  }\n  setRawRenderSize(width: number, height: number): boolean {\n    let isChanged = this._width !== width || this._height !== height;\n    this._width = width;\n    this._height = height;\n    this.el.width = this._width;\n    this.el.height = this._height;\n    this.state.setViewport(0, 0, width, height);\n    return isChanged;\n  }\n\n  readonly state: GLState;\n  readonly stat: GLStat = new GLStat();\n  private activeProgram: Nullable<GLProgram> = null;\n  _programChangeId: number = 0;\n\n  // resource managers\n  readonly programManager = new GLProgramManager();\n  readonly textureManger = new GLTextureManager(this);\n  readonly attributeBufferManager = new GLAttributeBufferDataManager(this);\n  readonly vaoManager: GLVAOManager;\n  readonly framebufferManager: GLFrameBufferManager;\n\n  createProgram(conf: GLProgramConfig): GLProgram {\n    const program = new GLProgram(this, conf);\n    this.programManager.addNewProgram(program);\n    return program;\n  }\n\n  getProgram(storeId: string): GLProgram {\n    return this.programManager.getProgram(storeId);\n  }\n\n  useProgram(program: GLProgram) {\n    if (this.activeProgram !== program) {\n      this.stat.programSwitch++;\n      this.activeProgram = program;\n      this._programChangeId++;\n      this.gl.useProgram(program.getProgram());\n    }\n  }\n\n  render(mode: DrawMode, useIndex: boolean) {\n    if (this.activeProgram === null) {\n      throw 'renderer hasn\\'t active program'\n    }\n    if (useIndex) {\n      this.gl.drawElements(\n        mode,\n        this.activeProgram.drawCount,\n        this.activeProgram.indexUINT ? this.gl.UNSIGNED_INT : this.gl.UNSIGNED_SHORT,\n        0\n      );\n    } else {\n      this.gl.drawArrays(mode, this.activeProgram.drawFrom, this.activeProgram.drawCount);\n    }\n    this.stat.drawcall++;\n\n    if (this.enableRenderErrorCatch) {\n      const errorCode = this.gl.getError();\n      if (errorCode !== this.gl.NO_ERROR) {\n        // debugger\n        throw `gl draw error: ${ errorCode }`;\n      }\n    }\n\n    this.state.textureSlot.resetSlotIndex();\n  }\n\n  currentFramebuffer: Nullable<GLFramebuffer> = null;\n  setRenderTarget(framebuffer: Nullable<GLFramebuffer>) {\n    if (this.currentFramebuffer !== framebuffer) {\n      this.stat.framebufferSwitch++;\n      this.currentFramebuffer = framebuffer;\n      const gl = this.gl;\n      if (framebuffer === null) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      } else {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer.webglFrameBuffer);\n      }\n    }\n  }\n  \n  setRenderTargetScreen() {\n    this.setRenderTarget(null);\n  }\n\n  releaseGL() {\n    this.attributeBufferManager.releaseGL();\n    this.programManager.releaseGL();\n    this.textureManger.releaseGL();\n    this.framebufferManager.releaseGL();\n    this.vaoManager.releaseGL();\n  }\n\n}\n","import { Vector3 } from \"../vector3\";\n\nexport class Vector3Observable extends Vector3{\n  constructor(x?: number, y?: number, z?: number) {\n    super();\n    this._x = x || 0;\n    this._y = y || 0;\n    this._z = z || 0;\n  }\n\n  onChange = () => { };\n\n  _x: number;\n  _y: number;\n  _z: number;\n\n  get x() {\n    return this._x;\n  }\n  set x(val) {\n    if (this.onChange) {\n      this.onChange();\n    }\n    \n    this._x = val;\n  }\n\n  get y() {\n    return this._y;\n  }\n  set y(val) {\n    if (this.onChange) {\n      this.onChange();\n    }\n    this._y = val;\n  }\n\n  get z() {\n    return this._z;\n  }\n  set z(val) {\n    if (this.onChange) {\n      this.onChange();\n    }\n    this._z = val;\n  }\n\n}\n","import { Matrix4, Euler, Quaternion, Vector3 } from \"../math/index\";\nimport { Vector3Observable } from \"../math/observable/vector3-observable\";\n\nconst tempVector3 = new Vector3();\nconst tempMatrix = new Matrix4();\n\n/**\n * Describe a node's local transformation info.\n * Users can set values and, from getter to get cleaned value\n * not need to update manually. All calculation is lazy.\n * @export\n * @class Transformation\n */\nexport class Transformation{\n  constructor() {\n    this._position.onChange = () => {\n      this.matrixIsDirty = true;\n      this.transformFrameChanged = true;\n    }\n\n    this._scale.onChange = () => {\n      this.matrixIsDirty = true;\n      this.transformFrameChanged = true;\n    }\n\n    // todo add rotation and qua change watcher\n    // this._quaternion.onChange = () => {\n    //   this.matrixIsDirty = true;\n    //   this.transformChanged = true;\n    // }\n  }\n\n  transformFrameChanged = true;\n\n  private _matrix: Matrix4 = new Matrix4();\n  private matrixIsDirty = false;\n\n  private _position: Vector3Observable = new Vector3Observable();\n  private positionIsDirty = false;\n\n  private _scale: Vector3Observable = new Vector3Observable(1, 1, 1);\n  private scaleIsDirty = false;\n\n  private _rotation: Euler = new Euler();\n  private eulerIsDirty = false;\n\n  private _quaternion: Quaternion = new Quaternion();\n  private quaternionIsDirty = false;\n\n  public notifyMatrixChange() {\n    this.matrixIsDirty = false;\n    this.positionIsDirty = true;\n    this.scaleIsDirty = true;\n    this.eulerIsDirty = true;\n    this.quaternionIsDirty = true;\n  }\n\n  get matrix(): Matrix4 {\n    if (this.matrixIsDirty) {\n      this._matrix.compose(this._position, this._quaternion, this._scale);\n    }\n    return this._matrix;\n  }\n\n  get position(): Vector3 {\n    if (this.positionIsDirty) {\n      this._position._x = this._matrix.elements[12];\n      this._position._y = this._matrix.elements[13];\n      this._position._z = this._matrix.elements[14];\n      this.positionIsDirty = false;\n    }\n    return this._position;\n  }\n\n  get scale(): Vector3 {\n    if (this.scaleIsDirty) {\n      tempVector3.set(this._matrix.elements[0], this._matrix.elements[1], this._matrix.elements[2])\n      this._scale._x = tempVector3.length();\n      tempVector3.set(this._matrix.elements[4], this._matrix.elements[5], this._matrix.elements[6])\n      this._scale._x = tempVector3.length();\n      tempVector3.set(this._matrix.elements[8], this._matrix.elements[9], this._matrix.elements[10])\n      this._scale._x = tempVector3.length();\n      this.scaleIsDirty = false;\n    }\n    return this._scale;\n  }\n\n  get rotation(): Euler {\n    if (this.eulerIsDirty) {\n      this._rotation.setFromQuaternion(this.quaternion, Euler.defaultOrder, false);\n      this.eulerIsDirty = false;\n    }\n    return this._rotation;\n  }\n\n  get quaternion(): Quaternion {\n    if (this.quaternionIsDirty) {\n      tempMatrix.copy(this._matrix);\n      tempMatrix.scale(1 / this.scale.x, 1 / this.scale.y, 1 / this.scale.z);\n      this._quaternion.setFromRotationMatrix(tempMatrix);\n      this.quaternionIsDirty = false;\n    }\n    return this._quaternion;\n  }\n\n\n}","import { Matrix4, generateUUID } from \"../math/index\";\nimport { Scene } from \"./scene\";\nimport { Nullable } from \"../type\";\nimport { Transformation } from \"./transformation\";\n\ninterface TreeNode{\n  children: TreeNode[];\n}\n\n/**\n * SceneNode is a node in a scene tree that\n * organize the scene hierarchy\n *\n * @export\n * @class SceneNode\n */\nexport class SceneNode {\n  uuid = generateUUID();\n  scene: Nullable<Scene> = null;\n  sceneNodeListIndex: number = -1;\n\n  parent: Nullable<SceneNode> = null;\n  children: SceneNode[] = [];\n\n  transform: Transformation = new Transformation();\n  _worldMatrix = new Matrix4();\n  _worldMatrixUpdateFrameId: number = 0;\n  get worldMatrix() {\n    return this._worldMatrix;\n  }\n\n  _visible: boolean = true;\n  _visibleNet: Boolean = true;\n  _visibleUpdateFrameId: number = 0;\n  set visible(value: boolean) {\n    this._visible = value;\n    if (this.scene !== null) {\n      this.scene.isFrameVisibleChange = true;\n    }\n  };\n  get visible() {\n    return this._visible;\n  }\n\n  addChild(node: SceneNode): SceneNode {\n    if (node === this) {\n      throw 'Cant add a scene node to it self';\n    }\n\n    if (this.scene !== null) {\n      this.scene.isFrameStructureChange = true;\n      this.scene.addNode(node);\n    }\n\n    if (node.parent !== null) {\n      node.parent.removeChild(node);\n    }\n    node.parent = this;\n    this.children.push(node);\n    return this;\n  }\n\n  removeChild(node: SceneNode): SceneNode {\n    if (this.scene !== null) {\n      this.scene.isFrameStructureChange = true;\n      this.scene.removeNode(node);\n    }\n\n    let index = this.children.indexOf(node);\n    if (index !== - 1) {\n      node.parent = null;\n      this.children.splice(index, 1);\n    }\n    return this;\n  }\n\n  traverse(fn: (sceneNode: SceneNode) => any): SceneNode  {\n    function visit(node: SceneNode) {\n      if (fn(node) !== false) {\n        for (let i = 0; i < node.children.length; i++) {\n          visit(node.children[i]);\n        }\n      }\n    }\n    visit(this);\n    return this;\n  }\n\n  traversePair(fn: (sceneNodeParent: Nullable<SceneNode>, sceneNode: SceneNode) => any): any {\n    function visit(nodeParent: Nullable<SceneNode>, node: SceneNode) {\n      const result = fn(nodeParent, node);\n      for (let i = 0; i < node.children.length; i++) {\n        visit(node, node.children[i]);\n      }\n      return result;\n    }\n    return visit(this.parent, this);\n  }\n\n  map(fn: (sceneNode: SceneNode) => TreeNode) {\n    const nodes: Map<SceneNode, TreeNode> = new Map();\n    const rootNode = this.traversePair((nodeParent: Nullable<SceneNode>, node: SceneNode) => {\n      const mapNode = fn(node);\n      nodes.set(node, mapNode);\n      if (nodeParent !== null && nodes.has(nodeParent)) {\n        const mapParentNode = nodes.get(nodeParent);\n        if (mapParentNode === undefined) {\n          throw 'tree map error: cant find mapped parent'\n        }\n        mapParentNode.children.push(mapNode);\n      }\n      return mapNode;\n    })\n    return rootNode;\n  }\n\n  findSubNode(id: string): Nullable<SceneNode> {\n    let result: Nullable<SceneNode> = null;\n    this.traverse(node => {\n      if (node.uuid === id) {\n        result = node;\n        return false;\n      }\n    })\n    return result;\n  }\n\n  updateWorldMatrix(force?: boolean): SceneNode  {\n    if (this.transform.transformFrameChanged || force) {\n\n      if (this.parent === null) {\n        this.worldMatrix.copy(this.transform.matrix);\n      } else {\n        this.worldMatrix.multiplyMatrices(this.parent.worldMatrix, this.transform.matrix);\n      }\n      this.transform.transformFrameChanged = false;\n      force = true;\n    }\n    var children = this.children;\n    for (var i = 0, l = children.length; i < l; i++) {\n      children[i].updateWorldMatrix(force);\n    }\n    return this;\n  }\n\n\n}","import { SceneNode } from \"../scene/scene-node\";\nimport { Matrix4 } from \"../math/index\";\nimport { RenderEngine, Size } from '../engine/render-engine';\nimport { Observer } from './observable';\nimport { Nullable } from '../type';\nimport { ShaderUniformProvider } from \"./shading\";\nimport { ShaderGraph } from \"../shader-graph/shader-graph\";\nimport { UniformProxy } from \"../engine/uniform-proxy\";\n\n/**\n * Camera is abstraction of a params set to a projection matrix.\n * extender can support more useful interface\n * to make the projection relation more easy to \n * understand and modified;\n * \n * @export\n * @class Camera\n * @extends {SceneNode}\n */\nexport class Camera extends SceneNode {\n  constructor() {\n    super();\n  }\n\n  projectionMatrix = new Matrix4();\n  projectionMatrixNeedUpdate = false;\n  updateProjectionMatrix() { };\n  onRenderResize(newSize: Size) {\n    \n  }\n\n  private renderSizeObserver: Nullable<Observer<Size>> = null;\n  bindEngineRenderSize(engine: RenderEngine) {\n    if (this.renderSizeObserver !== null) {\n      engine.resizeObservable.remove(this.renderSizeObserver);\n    }\n    this.renderSizeObserver = engine.resizeObservable.add(this.onRenderResize);\n  }\n  \n\n}","import { Vector3, Matrix4, MathUtil } from \"../math/index\";\nimport { Camera } from \"../core/camera\";\n\nconst tempMatrix = new Matrix4();\n\nexport class PerspectiveCamera extends Camera {\n  constructor(near?: number, far?: number,\n    fov?: number, aspect?: number, zoom?: number) {\n    super();\n    this._fov = fov !== undefined ? fov : 50;\n    this._zoom = 1;\n\n    this._near = near !== undefined ? near : 0.1;\n    this._far = far !== undefined ? far : 2000;\n\n    this._aspect = aspect !== undefined ? aspect : 1;\n\n    this.updateProjectionMatrix();\n  }\n\n  _near: number;\n  get near() { return this._near };\n  set near(value) { this._near = value; this.projectionMatrixNeedUpdate = true };\n  _far: number;\n  get far() { return this._far };\n  set far(value) { this._far = value; this.projectionMatrixNeedUpdate = true };\n\n  _fov: number;\n  get fov() { return this._fov };\n  set fov(value) { this._fov = value; this.projectionMatrixNeedUpdate = true };\n  _aspect: number;\n  get aspect() { return this._aspect };\n  set aspect(value) { this._aspect = value; this.projectionMatrixNeedUpdate = true };\n  _zoom: number;\n  get zoom() { return this._zoom };\n  set zoom(value) { this._zoom = value; this.projectionMatrixNeedUpdate = true };\n\n  up = new Vector3(0, 1, 0);\n\n  get width() {\n    return this._aspect * this.height;\n  }\n  get height() {\n    return 2 * this._near * Math.tan(MathUtil.DEG2RAD * 0.5 * this._fov) / this._zoom;\n  }\n\n  updateProjectionMatrix() {\n    const top = this._near * Math.tan(MathUtil.DEG2RAD * 0.5 * this._fov) / this._zoom;\n    const height = 2 * top;\n    const width = this._aspect * height;\n    const left = - 0.5 * width;\n    this.projectionMatrix.makePerspective(left, left + width, top, top - height, this._near, this._far);\n    this.projectionMatrixNeedUpdate = false;\n  }\n\n  lookAt(targetPosition: Vector3) {\n    tempMatrix.lookAt(this.transform.position, targetPosition, this.up);\n    this.transform.quaternion.setFromRotationMatrix(tempMatrix);\n  }\n\n\n\n}","\n/**\n * wrap class for uniform change cache and need update optimize\n *\n * @export\n * @class UniformProxy\n */\nexport class UniformProxy{\n  constructor(value:any) {\n    this._value = value;\n  }\n\n  _value: any;\n  _needUpdate: boolean = true;\n\n  setValue(val: any) {\n    this._value = val;\n    this._needUpdate = true;\n  }\n\n  setValueNeedUpdate() {\n    this._needUpdate = true;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  resetUpdate() {\n    this._needUpdate = false;\n  }\n}","\nimport { Nullable } from \"../type\";\n\n//https://github.com/BabylonJS/Babylon.js/blob/master/src/Misc/observable.ts\n\n/**\n * Represent an Observer registered to a given Observable object.\n */\nexport class Observer<T> {\n  /** @hidden */\n  public _willBeUnregistered = false;\n  /**\n   * Gets or sets a property defining that the observer as to be unregistered after the next notification\n   */\n  public unregisterOnNextCall = false;\n\n  /**\n   * Creates a new observer\n   * @param callback defines the callback to call when the observer is notified\n   */\n  constructor(\n    /**\n     * Defines the callback to call when the observer is notified\n     */\n    public callback: (eventData: T) => void\n  ) {\n  }\n}\n\n\n\nexport class Observable<T> {\n  private _observers = new Array<Observer<T>>();\n\n  private _onObserverAdded: Nullable<(observer: Observer<T>) => void>;\n\n  /**\n   * Creates a new observable\n   * @param onObserverAdded defines a callback to call when a new observer is added\n   */\n  constructor(onObserverAdded?: (observer: Observer<T>) => void) {\n    if (onObserverAdded) {\n      this._onObserverAdded = onObserverAdded;\n    }\n  }\n\n  /**\n   * Create a new Observer with the specified callback\n   * @param callback the callback that will be executed for that Observer\n   * @param unregisterOnFirstCall defines if the observer as to be unregistered after the next notification\n   * @returns the new observer created for the callback\n   */\n  public add(callback: (eventData: T) => void,  unregisterOnFirstCall = false): Nullable<Observer<T>> {\n    if (!callback) {\n      return null;\n    }\n\n    var observer = new Observer(callback);\n    observer.unregisterOnNextCall = unregisterOnFirstCall;\n\n    this._observers.push(observer);\n\n    if (this._onObserverAdded) {\n      this._onObserverAdded(observer);\n    }\n\n    return observer;\n  }\n\n  /**\n   * Create a new Observer with the specified callback and unregister after the next notification\n   * @param callback the callback that will be executed for that Observer\n   * @returns the new observer created for the callback\n   */\n  public addOnce(callback: (eventData: T) => void): Nullable<Observer<T>> {\n    return this.add(callback, true);\n  }\n\n  /**\n   * Remove an Observer from the Observable object\n   * @param observer the instance of the Observer to remove\n   * @returns false if it doesn't belong to this Observable\n   */\n  public remove(observer: Nullable<Observer<T>>): boolean {\n    if (!observer) {\n      return false;\n    }\n\n    var index = this._observers.indexOf(observer);\n\n    if (index !== -1) {\n      this._deferUnregister(observer);\n      return true;\n    }\n\n    return false;\n  }\n\n  private _deferUnregister(observer: Observer<T>): void {\n    observer.unregisterOnNextCall = false;\n    observer._willBeUnregistered = true;\n    setTimeout(() => {\n      this._remove(observer);\n    }, 0);\n  }\n\n  // This should only be called when not iterating over _observers to avoid callback skipping.\n  // Removes an observer from the _observer Array.\n  private _remove(observer: Nullable<Observer<T>>): boolean {\n    if (!observer) {\n      return false;\n    }\n\n    var index = this._observers.indexOf(observer);\n\n    if (index !== -1) {\n      this._observers.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  public notifyObservers(eventData: T): boolean {\n    if (this._observers.length === 0) {\n      return true;\n    }\n    for (var obs of this._observers) {\n      if (obs._willBeUnregistered) {\n        continue;\n      }\n\n      obs.callback(eventData);\n\n      if (obs.unregisterOnNextCall) {\n        this._deferUnregister(obs);\n      }\n    }\n    return true;\n  }\n\n  public notifyObserver(observer: Observer<T>, eventData: T): void {\n    observer.callback(eventData);\n  }\n\n  public hasObservers(): boolean {\n    return this._observers.length > 0;\n  }\n\n  public clear(): void {\n    this._observers = new Array<Observer<T>>();\n    this._onObserverAdded = null;\n  }\n\n  public clone(): Observable<T> {\n    var result = new Observable<T>();\n\n    result._observers = this._observers.slice(0);\n\n    return result;\n  }\n\n}","import {\n  DepthFunction, BlendingMode, CullSide,\n  BlendEquation, SrcAlphaFactor, OneMinusSrcAlphaFactor\n} from \"../webgl/const\";\nimport { GLRenderer } from \"../webgl/gl-renderer\";\n\n\nexport class DrawState {\n  cullSide = CullSide.CullFaceBack;\n\n  blending = BlendingMode.NormalBlending;\n  blendSrc = SrcAlphaFactor;\n  blendDst = OneMinusSrcAlphaFactor;\n  blendEquation = BlendEquation.FUNC_ADD;\n  blendSrcAlpha = null;\n  blendDstAlpha = null;\n  blendEquationAlpha = null;\n\n  depthFunc = DepthFunction.LessEqualDepth;\n  depthTest = true;\n  depthWrite = true;\n\n  colorWriteR = true;\n  colorWriteG = true;\n  colorWriteB = true;\n  colorWriteA = true;\n\n  polygonOffset = false;\n  polygonOffsetFactor = 0;\n  polygonOffsetUnits = 0;\n\n  alphaTest = 0;\n  premultipliedAlpha = false;\n\n  syncGL(renderer: GLRenderer) {\n    renderer.state.setCullFace(this.cullSide);\n\n    const depthBuffer = renderer.state.depthbuffer;\n    depthBuffer.enableTest = this.depthTest\n    depthBuffer.setFunc(this.depthFunc)\n    depthBuffer.setMask(this.depthWrite)\n\n    const colorBuffer = renderer.state.colorbuffer;\n    colorBuffer.setColorMask(\n      this.colorWriteR, this.colorWriteG,\n      this.colorWriteB, this.colorWriteA,\n    );\n\n    renderer.state.setPolygonOffset(\n      this.polygonOffset,\n      this.polygonOffsetFactor,\n      this.polygonOffsetUnits\n    )\n\n    // TODO blending staff\n  }\n}","import { Geometry } from \"./geometry\";\nimport { SceneNode } from \"../scene/scene-node\";\nimport { Material } from \"./material\";\nimport { DrawMode } from \"../webgl/const\";\nimport { DrawState } from \"./draw-state\";\nimport { Face3 } from \"../math/entity/face3\";\nimport { Line3 } from \"../math/entity/line3\";\nimport { Vector3 } from \"../math\";\nimport { Shading } from \"./shading\";\n\nexport class RenderRange {\n  constructor(start?: number, count?: number) {\n    if (start !== undefined) {\n      this.start = start;\n    }\n    if (count !== undefined) {\n      this.count = count;\n    }\n  }\n\n  setRange(start: number, count: number): void {\n    this.start = start;\n    this.count = count;\n  }\n\n  // static getFullRangeFromGeometry(geometry: Geometry): RenderRange {\n  //   if (geometry.indexBuffer !== undefined) {\n  //     return geometry.indexBuffer.data.length;\n  //   }\n  // }\n\n  start: number = 0;\n  count: number = 0;\n\n}\n\nexport const enum PrimitiveType {\n  triangle,\n  point,\n  lineSegment,\n}\n\nexport type RenderablePrimitive = Line3 | Vector3 | Face3\nexport type PrimitiveVisitor = (prim: RenderablePrimitive) => any\n\n/**\n * Class for render drawcall description,  which is describe all drawable things\n * a drawable thing should have a geometry to define what to draw\n * and a technique to defined how to draw\n * and many other draw config such as blending depth behavior defined in state object\n * engine will read these information and organize things properly\n * \n * @export\n * @class RenderObject\n * @extends {SceneNode}\n */\nexport class RenderObject extends SceneNode {\n\n  material?: Material;\n  geometry?: Geometry;\n  shading?: Shading;\n  range?: RenderRange;\n  state: DrawState =  new DrawState();\n\n  // sometimes something draw as mesh(tri), but act like line, like fatLine \n  // so, drawMode and primitiveType is different things \n  drawMode: DrawMode = DrawMode.TRIANGLES;\n  primitiveType: PrimitiveType = PrimitiveType.triangle;\n\n  foreachPrimitive(_visitor: PrimitiveVisitor) { throw \"not implement\" }\n\n  g(geometry: Geometry) {\n    this.geometry = geometry;\n    return this;\n  }\n\n  m(material: Material) {\n    this.material = material;\n    return this;\n  }\n\n  s(shading: Shading) {\n    this.shading = shading;\n    return this;\n  }\n}","import { RenderObject, PrimitiveVisitor, PrimitiveType } from \"../core/render-object\";\nimport { DrawMode } from \"../webgl/const\";\nimport { RayCasterable, Raycaster } from \"../core/raycaster\";\nexport class Mesh extends RenderObject\n  implements RayCasterable\n{\n\n  constructor() {\n    super();\n\n    this.drawMode = DrawMode.TRIANGLES;\n    this.primitiveType = PrimitiveType.triangle;\n  }\n\n  foreachPrimitive(visitor: PrimitiveVisitor) {\n    if (this.geometry !== undefined) {\n      this.geometry.foreachFace(visitor, this.range)\n    }\n  }\n\n\n  raycast(raycaster: Raycaster, results: RayCasterable[]) {\n    throw new Error(\"Method not implemented.\");\n  }\n  raycastIfHit(raycaster: Raycaster): boolean {\n    throw new Error(\"Method not implemented.\");\n  }\n  raycastFirst(raycaster: Raycaster): import(\"../core/raycaster\").RayCastResult {\n    throw new Error(\"Method not implemented.\");\n  }\n  raycasterable: true = true;\n}","import { Vector3 } from \"../vector3\";\n\nexport class Box3 {\n  constructor(min?: Vector3, max?: Vector3) {\n    if (min !== undefined) {\n      this.min.copy(min);\n      this.max.copy(max);\n    }\n  }\n\n  min: Vector3 = new Vector3();\n  max: Vector3 = new Vector3();\n\n  clone(): Box3 {\n    const b = new Box3();\n    return b.copy(this);\n  }\n\n  copy(box: Box3): Box3 {\n    this.min.copy(box.min);\n    this.max.copy(box.max);\n    return this;\n  }\n\n  makeEmpty(): Box3 {\n    this.min.x = this.min.y = this.min.z = + Infinity;\n    this.max.x = this.max.y = this.max.z = - Infinity;\n    return this;\n  }\n\n  isEmpty() {\n    // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n    return (this.max.x < this.min.x) || (this.max.y < this.min.y) || (this.max.z < this.min.z);\n  }\n\n  getCenter(target: Vector3) {\n    return this.isEmpty() ? target.set(0, 0, 0) : target.addVectors(this.min, this.max).multiplyScalar(0.5);\n  }\n\n  expandByPoint(point: Vector3) {\n    this.min.min(point);\n    this.max.max(point);\n    return this;\n  }\n\n}","import { Vector3 } from \"../vector3\";\n\nexport class Sphere {\n  constructor() {\n\n  }\n\n  center: Vector3;\n  radius: number;\n\n  clone() {\n    return new Sphere().copy(this);\n  }\n\n  copy(sphere: Sphere) {\n    this.center.copy(sphere.center);\n    this.radius = sphere.radius;\n    return this;\n  }\n\n  equals(sphere: Sphere) {\n    return sphere.center.equals(this.center) && (sphere.radius === this.radius);\n  }\n}","import { BufferData } from \"./buffer-data\";\nimport { Box3 } from \"../math/entity/box3\";\nimport { Sphere } from \"../math/entity/sphere\";\nimport { generateUUID } from '../math/uuid';\nimport { RenderRange } from \"./render-object\";\nimport { Face3 } from \"../math/entity/face3\";\nimport { Line3 } from \"../math/entity/line3\";\nimport { Vector3 } from \"../math/vector3\";\n\n/**\n * geometry define what to draw\n * by defined data layout and data content\n * also handle gl buffer update\n * @export\n * @class Geometry\n */\nexport abstract class Geometry {\n  constructor() {\n  }\n  name: string\n  uuid = generateUUID();\n  readonly bufferDatum: { [index: string]: BufferData } = {};\n  indexBuffer: BufferData;\n  get needUpdate(): boolean{\n    for (const key in this.bufferDatum) {\n      if (this.bufferDatum[key].shouldUpdate) {\n        return true\n      }\n    }\n    return false;\n  }\n\n  _AABBBox: Box3 = new Box3();\n  abstract updateAABBBox(): void;\n  get AABBBox(): Box3 {\n    if (this.needUpdate) {\n      this.updateAABBBox();\n    }\n    return this._AABBBox;\n  }\n\n  _boundingSphere: Sphere = new Sphere();\n  abstract updateBoundingSphere(): void;\n  get boundingSphere(): Sphere {\n    if (this.needUpdate) {\n      this.updateBoundingSphere();\n    }\n    return this._boundingSphere;\n  }\n\n  /**\n   * creat or update the geometry's data in BufferDatum\n   */\n  abstract populate(): void;\n\n  abstract foreachFace(visitor: (face: Face3) => any, range?: RenderRange): any;\n  abstract foreachLineSegment(visitor:  (face: Line3) => any, range?: RenderRange): any;\n  abstract foreachVertex(visitor:  (face: Vector3) => any, range?: RenderRange): any;\n\n  dispose() {\n\n  }\n\n}\n\n\n","import { Vector3 } from \"../vector3\";\n\nexport class Face3 {\n  p1: Vector3;\n  p2: Vector3;\n  p3: Vector3;\n\n}","import { Vector3 } from \"../vector3\";\nimport { Matrix4 } from \"../matrix4\";\n\nexport class Line3 {\n  p1: Vector3;\n  p2: Vector3;\n\n  constructor(p1?: Vector3, p2?: Vector3) {\n    this.p1 = ( p1 !== undefined ) ? p1 : new Vector3();\n\t  this.p2 = ( p2 !== undefined ) ? p2 : new Vector3();\n    return this;\n  }\n\n  lengthSq() {\n    return this.p1.distanceToSquared(this.p2);\n  }\n\n  length() {\n    return this.p1.distanceTo(this.p2);\n  }\n\n  applyMatrix4 ( matrix: Matrix4 ): Line3 {\n\t\tthis.p1.applyMatrix4( matrix );\n\t\tthis.p2.applyMatrix4( matrix );\n\t\treturn this;\n  }\n  \n  clone() {\n    const l = new Line3();\n\t\treturn l.copy( this );\n\t}\n\n\tcopy (line: Line3 ): Line3 {\n\t\tthis.p1.copy( line.p1 );\n\t\tthis.p2.copy( line.p2 );\n\t\treturn this;\n\t}\n\n}","import { RenderEngine } from \"../engine/render-engine\";\nexport type BufferDataType = Float32Array | Uint16Array | Uint32Array;\n\n/**\n * BufferData is a container for webglBuffer.\n * Provided some convenient methods for data manipulating\n */\nexport class BufferData{\n  static f3(data: number[]): BufferData {\n    return new BufferData(new Float32Array(data), 3)\n  }\n  static f2(data: number[]): BufferData {\n    return new BufferData(new Float32Array(data), 2)\n  }\n  static u16Index(data: number[]): BufferData {\n    return new BufferData(new Uint16Array(data), 1)\n  }\n\n  constructor(data: BufferDataType, stride: number) {\n    this.data = data;\n    this.count = this.data.length / this.stride;\n    this.stride = stride;\n  }\n  data: BufferDataType;\n  count: number = 1;\n  stride: number = 1;\n  shouldUpdate = true;\n\n  foreach(\n    visitor: (data: BufferDataType, index: number, stride: number, countIndex: number) => any,\n    start?:number, end?: number\n  ) {\n    const s = Math.max(0, start);\n    const e = Math.max(this.count, end);\n    for (let i = s; i < e; i ++) {\n      visitor(this.data, i * this.stride, this.stride, i);\n    }\n  }\n\n  setIndex(index: number, value: number, offset?:number) {\n    this.shouldUpdate = true;\n    this.data[index * this.stride + offset === undefined ? 0 : offset] = value;\n  }\n\n  getIndex(index: number, offset?: number): number {\n    this.shouldUpdate = true;\n    return this.data[index * this.stride + offset === undefined ? 0 : offset];\n  }\n\n  setData(data: BufferDataType) {\n    this.shouldUpdate = true;\n    this.data = data;\n    this.count = this.data.length / this.stride;\n  }\n\n  getGLAttribute(engine: RenderEngine): WebGLBuffer {\n    return engine.getGLAttributeBuffer(this);\n  }\n\n  getDataSizeByte() {\n    return this.data.byteLength;\n  }\n}\n","import { Geometry } from \"../core/geometry\";\nimport { RenderRange } from \"../core/render-object\";\nimport { Face3 } from \"../math/entity/face3\";\nimport { Line3 } from \"../math/entity/line3\";\nimport { Vector3 } from \"../math/vector3\";\nimport { BufferData } from \"../core/buffer-data\";\n\nconst tempFace3 = new Face3();\nconst tempLine3 = new Line3();\nconst tempVector3 = new Vector3();\n\n/**\n * StandardGeometry is indexed Geometry that has position uv normal channel\n */\nexport class StandardGeometry extends Geometry {\n  constructor() {\n    super();\n  }\n\n  create(indices: number[], vertices: number[], normals: number[], uvs: number[]) {\n    const positionBuffer = BufferData.f3(vertices);\n    this.bufferDatum.position = positionBuffer;\n\n    const normalBuffer = BufferData.f3(normals);\n    this.bufferDatum.normal = normalBuffer;\n\n    const uvBuffer = BufferData.f2(uvs);\n    this.bufferDatum.uv = uvBuffer;\n\n    const indexBuffer = BufferData.u16Index(indices);\n    this.indexBuffer = indexBuffer;\n  }\n\n  updateBoundingSphere() {\n    const sphere = this._boundingSphere;\n    const box = this.AABBBox; // update box\n    const center = box.getCenter(sphere.center);\n    let maxRadiusSq = 0;\n    this.foreachVertex((point) => {\n      maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(point));\n    })\n    sphere.radius = maxRadiusSq;\n  }\n\n  updateAABBBox() {\n    const box = this._AABBBox;\n    box.makeEmpty();\n    this.foreachVertex((point) => {\n      box.expandByPoint(point);\n    })\n  }\n\n  foreachFace(visitor: (face: Face3) => any, range?: RenderRange) {\n    const position = this.bufferDatum.position;\n    const start = (range === undefined ? 0 : range.start) / 3;\n    const end = (range === undefined ? position.count : (range.start + range.count)) / 3;\n    for (let i = start; i < end; i++) {\n      const p1Index = i * 3;\n      const p2Index = i * 3 + 1;\n      const p3Index = i * 3 + 2;\n      tempFace3.p1.set(position.getIndex(p1Index), position.getIndex(p1Index + 1), position.getIndex(p1Index + 2));\n      tempFace3.p2.set(position.getIndex(p2Index), position.getIndex(p2Index + 1), position.getIndex(p2Index + 2));\n      tempFace3.p3.set(position.getIndex(p3Index), position.getIndex(p3Index + 1), position.getIndex(p3Index + 2));\n      visitor(tempFace3);\n    }\n  };\n\n  /**\n   * this may redundant visit a lot\n   */\n  foreachLineSegment(visitor: (line: Line3) => any, range?: RenderRange) {\n    const position = this.bufferDatum.position;\n    const start = (range === undefined ? 0 : range.start) / 3;\n    const end = (range === undefined ? position.count : (range.start + range.count)) / 3;\n    for (let i = start; i < end; i++) {\n      const p1Index = i * 3;\n      const p2Index = i * 3 + 1;\n      const p3Index = i * 3 + 2;\n      tempFace3.p1.set(position.getIndex(p1Index), position.getIndex(p1Index + 1), position.getIndex(p1Index + 2));\n      tempFace3.p2.set(position.getIndex(p2Index), position.getIndex(p2Index + 1), position.getIndex(p2Index + 2));\n      tempFace3.p3.set(position.getIndex(p3Index), position.getIndex(p3Index + 1), position.getIndex(p3Index + 2));\n\n      tempLine3.p1.copy(tempFace3.p1)\n      tempLine3.p2.copy(tempFace3.p2)\n      visitor(tempLine3);\n      tempLine3.p2.copy(tempFace3.p3)\n      visitor(tempLine3);\n      tempLine3.p1.copy(tempFace3.p2)\n      visitor(tempLine3);\n    }\n  };\n\n  foreachVertex(visitor: (point: Vector3) => any, range?: RenderRange) {\n    const position = this.bufferDatum.position;\n    const start = range === undefined ? 0 : range.start;\n    const end = range === undefined ? position.count : (range.start + range.count);\n    for (let i = start; i < end; i++) {\n      tempVector3.set(position.getIndex(i), position.getIndex(i + 1), position.getIndex(i + 2));\n      visitor(tempVector3);\n    }\n  };\n\n  populate() {\n    throw 'generate methods not impl'\n  }\n}","import { StandardGeometry } from '../standard-geometry';\n\nexport class PlaneGeometry extends StandardGeometry {\n  constructor(width?: number, height?: number,\n    widthSegments?: number, heightSegments?: number) {\n    super();\n\n    this.width = width !== undefined ? width : 1;\n    this.height = height !== undefined ? height : 1;\n    this.widthSegments = widthSegments !== undefined ? widthSegments : 1;\n    this.heightSegments = heightSegments !== undefined ? heightSegments : 1;\n\n    this.populate();\n  }\n  name = 'PlaneGeometry'\n  width: number;\n  height: number;\n  widthSegments: number;\n  heightSegments: number;\n\n  populate() {\n\n    var width_half = this.width / 2;\n    var height_half = this.height / 2;\n  \n    var gridX = Math.floor( this.widthSegments ) || 1;\n    var gridY = Math.floor( this.heightSegments ) || 1;\n  \n    var gridX1 = gridX + 1;\n    var gridY1 = gridY + 1;\n  \n    var segment_width = this.width / gridX;\n    var segment_height = this.height / gridY;\n  \n    var ix, iy;\n  \n    // buffers\n    var indices: number[] = [];\n    var vertices: number[] = [];\n    var normals: number[] = [];\n    var uvs: number[] = [];\n  \n    // generate vertices, normals and uvs\n    for ( iy = 0; iy < gridY1; iy ++ ) {\n      var y = iy * segment_height - height_half;\n      for ( ix = 0; ix < gridX1; ix ++ ) {\n        var x = ix * segment_width - width_half;\n        vertices.push( x, - y, 0 );\n        normals.push( 0, 0, 1 );\n        uvs.push( ix / gridX );\n        uvs.push( 1 - ( iy / gridY ) );\n      }\n    }\n  \n    // indices\n    for ( iy = 0; iy < gridY; iy ++ ) {\n      for ( ix = 0; ix < gridX; ix ++ ) {\n        const a = ix + gridX1 * iy;\n        const b = ix + gridX1 * ( iy + 1 );\n        const c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n        const d = ( ix + 1 ) + gridX1 * iy;\n        // faces\n        indices.push( a, b, d );\n        indices.push( b, c, d );\n      }\n    }\n\n    this.create(indices, vertices, normals, uvs);\n  }\n\n}\n","import { RenderSource } from \"../engine/render-engine\";\nimport { Mesh } from \"../object/mesh\";\nimport { PlaneGeometry } from \"../geometry/geo-lib/plane-geometry\";\n\nconst quadMesh = new Mesh();\nconst geometry = new PlaneGeometry(2, 2, 1, 1);\nquadMesh.geometry = geometry;\nexport class QuadSource implements RenderSource{\n  hasRendered: boolean = false;\n\n  resetSource() {\n    this.hasRendered = false;\n  }\n\n  nextRenderable() {\n    if (this.hasRendered) {\n      return null\n    }\n    this.hasRendered = true;\n    return quadMesh\n  }\n\n  updateSource() {}\n\n}\n","\n// this is not working when preserveDrawingBuffer set false\n// TODO use read framebuffer\nexport function downloadCanvasPNGImage(canvas: HTMLCanvasElement, name: string) {\n  const link = document.createElement('a');\n  link.setAttribute('download', name + '.png');\n  link.setAttribute('href', canvas.toDataURL(\"image/png\")\n     .replace(\"image/png\", \"image/octet-stream\"));\n  link.click();\n}\n\nasync function getStringContentFromFile(file) {\n  const reader = new FileReader();\n  return new Promise<string>(function (resolve, _) {\n    reader.onload = function (e) {\n      const str = reader.result;\n      resolve(str as string);\n    };\n    reader.readAsText(file);\n  });\n}\n\nexport function openFile() {\n  return new Promise((resolve) => {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    const func = (e) => {\n      resolve(e.target.files[0])\n    }\n    input.addEventListener('change', func);\n    input.click();\n  })\n}\n\nexport async function loadStringFromFile() {\n  const file = await openFile();\n  const str = await getStringContentFromFile(file);\n  return str;\n}\n\nexport async function loadImageFromURL(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.src = url;\n    image.onload = () => {\n      resolve(image);\n    };\n    image.onerror = (err) => {\n      reject(err);\n    }\n  })\n}\n","export function findFirst<T>(array: Array<T>, visitor: (item: T)=>boolean) {\n  for (let i = 0; i < array.length; i++) {\n    if (visitor(array[i])) {\n      return array[i]\n    }\n  }\n}\n","const indentSpaceSize = 2;\nlet indentUnit = '';\nfor (let i = 0; i < indentSpaceSize; i++) {\n  indentUnit += ' ';\n  \n}\nconst indentStringCache: string[] = [];\nexport function getIndent(indentCount: number):string {\n  if (indentStringCache[indentCount] !== undefined) {\n    return indentStringCache[indentCount];\n  }\n  let str = '';\n  for (let i = 0; i < indentCount; i++) {\n    str += indentUnit;\n  }\n  indentStringCache[indentCount] = str;\n  return str;\n}","import { getIndent } from \"./indent\";\n\nexport class CodeBuilder{\n\n  currentIndent: number = 0;\n  result: string = \"\"\n\n  addIndent() {\n    this.currentIndent++;\n  }\n  reduceIndent() {\n    this.currentIndent--;\n  }\n\n  emptyLine() {\n    this.writeLine(\"\")\n  }\n\n  writeLine(value: string) {\n    this.result += getIndent(this.currentIndent) + value + \"\\n\"\n  }\n\n  writeBlock(value: string) {\n    const lines = value.split(\"\\n\");\n    lines.forEach(line => {\n      const trimmed = line.trim()\n      if (trimmed.length > 0) {\n        this.writeLine(trimmed);\n      }\n    })\n  }\n\n  writeBlockRaw(value: string) {\n    this.result += value;\n  }\n\n  writeCommentBlock(value: string) {\n    this.writeLine(\"/*\")\n    value.split(\"\\n\").forEach(line => {\n      this.writeLine(\" * \" + line)\n    })\n    this.writeLine(\" */\")\n  }\n\n  reset() {\n    this.currentIndent = 0;\n    this.result = \"\"\n  }\n  output() {\n    const result = this.result;\n    this.reset();\n    return result\n  }\n}","import { generateUUID } from \"../math/uuid\";\n\nexport class DAGNode {\n  uuid: string = generateUUID();\n  toNodes: Set<DAGNode> = new Set();\n  fromNodes: Set<DAGNode> = new Set();\n  protected fulfillList: Map<string, boolean> = new Map();\n\n  connectTo(node: DAGNode) {\n    this.toNodes.add(node);\n    node._addFromRef(this);\n  }\n\n  disconnectTo(node: DAGNode) {\n    this.toNodes.delete(node);\n    node._removeFromRef(this);\n  }\n\n  clearAllTo() {\n    this.toNodes.forEach((node) => {\n      node._removeFromRef(this)\n    })\n    this.toNodes.clear();\n  }\n\n  clearAllFrom() {\n    this.fromNodes.forEach((node) => {\n      node._removeToRef(this);\n    })\n    this.fromNodes.clear();\n  }\n\n  _addFromRef(node: DAGNode) {\n    this.fromNodes.add(node);\n  }\n\n  _removeFromRef(node: DAGNode) {\n    this.fromNodes.delete(node);\n  }\n\n  _addToRef(node: DAGNode) {\n    this.toNodes.add(node);\n  }\n\n  _removeToRef(node: DAGNode) {\n    this.toNodes.delete(node);\n  }\n\n  // TODO this should be optimized\n  generateDependencyOrderList(): DAGNode[] {\n    // get all possible depend node, and reset fulfill list\n    let allDepNodes = this.generateAllDependencyList();\n    allDepNodes.forEach(node => {\n      node.fulfillList.clear();\n      node.fromNodes.forEach((n) => {\n        node.fulfillList.set(n.uuid, false);\n      })\n    })\n\n    let preventEndlessCounter = 1;\n    const result: DAGNode[] = [];\n\n    function resolveNext(node: DAGNode) {\n      result.push(node);\n      node.toNodes.forEach((n) => {\n        n.fulfillList.delete(node.uuid);\n      })\n    }\n\n    while (allDepNodes.length > 0) {\n      allDepNodes = allDepNodes.filter(node => {\n        if (node.fulfillList.size === 0) {\n          resolveNext(node);\n          return false\n        }\n        return true;\n      });\n\n      preventEndlessCounter++;\n      if (preventEndlessCounter > 10000) {\n        throw 'generateDependencyOrderList failed, graph may contains loop.';\n      }\n\n    }\n    return result;\n  }\n\n  traverseDFS(visitor: (node: DAGNode) => any) {\n    const visited: Set<DAGNode> = new Set();\n    function visit(node: DAGNode) {\n      if (!visited.has(node)) {\n        visited.add(node);\n        visitor(node);\n        node.fromNodes.forEach(n => {\n          visit(n);\n        });\n      }\n    }\n    visit(this);\n  }\n\n  generateAllDependencyList(): DAGNode[] {\n    const result: DAGNode[] = [];\n    this.traverseDFS((n) => {\n      result.push(n);\n    })\n    return result;\n  }\n}","import { DAGNode } from \"../core/dag-node\";\nimport { ShaderFunction } from \"./shader-function\";\nimport { GLDataType } from \"../webgl/shader-util\";\nimport {\n  InnerSupportUniform, UniformDescriptor,\n  InnerUniformMapDescriptor, InnerUniformMap\n} from \"../webgl/uniform/uniform\";\nimport { AttributeUsage, AttributeDescriptor } from \"../webgl/attribute\";\nimport { Vector2 } from \"../math/vector2\";\nimport { Vector3 } from \"../math/index\";\nimport { Vector4 } from \"../math/vector4\";\nimport { GLTextureType } from \"../webgl/uniform/uniform-texture\";\n\nexport class ShaderNode extends DAGNode {\n  constructor(\n    public type: GLDataType\n  ) {\n    super();\n  }\n\n  swizzling(swizzleType: string) {\n    return new ShaderSwizzleNode(this, swizzleType);\n  }\n\n}\n\n/**\n * A node instance of a shader function\n * used in shadergraph for connection\n *\n * @export\n * @class ShaderFunctionNode\n * @extends {DAGNode}\n */\nexport class ShaderFunctionNode extends ShaderNode {\n  constructor(factory: ShaderFunction) {\n    super(factory.define.returnType);\n    this.factory = factory;\n  }\n\n  meaningfulName: string\n  factory: ShaderFunction\n  inputMap: Map<string, ShaderNode> = new Map();\n\n  /**\n   * give this node a meaningful name!, this name may show in compiled shader.\n   */\n  name(name: string): ShaderFunctionNode {\n    this.meaningfulName = name;\n    return this;\n  }\n\n  /**\n   * fill this node a input!\n   */\n  input(key: string, node: ShaderNode): ShaderFunctionNode {\n    const dataType = this.factory.define.inputs[key]\n    if (dataType === undefined) {\n      throw `this shader function node has not a input which key is ${key}`\n    }\n    if (dataType !== node.type) {\n      console.warn(\"node:\", this);\n      console.warn(\"inputNode:\", node);\n      throw \"constructFragmentGraph failed: type mismatch\"\n    }\n    node.connectTo(this);\n    this.inputMap.set(key, node);\n    return this;\n  }\n\n}\n\n\nexport class ShaderInputNode extends ShaderNode {\n  constructor(name: string, type: GLDataType) {\n    super(type);\n    this.name = name;\n    this.type = type;\n  }\n  name: string;\n}\n\nexport class ShaderCommonUniformInputNode extends ShaderInputNode {\n  constructor(des: UniformDescriptor) {\n    super(des.name, des.type);\n  }\n\n  defaultValue: any;\n\n  default(value: any): ShaderCommonUniformInputNode {\n    this.defaultValue = value;\n    return this;\n  }\n}\n\nexport class ShaderVaryInputNode extends ShaderInputNode {\n  constructor(name: string, type: GLDataType) {\n    super(name, type);\n  }\n}\n\nexport class ShaderInnerUniformInputNode extends ShaderInputNode {\n  constructor(uni: InnerUniformMapDescriptor) {\n    super(uni.name, InnerUniformMap.get(uni.mapInner).type)\n    this.mapInner = uni.mapInner;\n  }\n  mapInner: InnerSupportUniform\n}\n\nexport class ShaderAttributeInputNode extends ShaderInputNode {\n  constructor(des: AttributeDescriptor) {\n    super(des.name, des.type);\n    this.attributeUsage = des.usage;\n  }\n  attributeUsage: AttributeUsage\n}\n\n// castValidFloat\nfunction svf(value: number) {\n  let str = value + \"\";\n  if (str.indexOf(\".\") === -1) {\n    str = str + \".0\"\n  }\n  return str\n}\n\nexport type ShaderConstType = number | Vector2 | Vector3 | Vector4;\n\nexport class ShaderConstNode extends ShaderNode {\n  constructor(value: ShaderConstType) {\n    if (typeof value === \"number\") {\n      super(GLDataType.float)\n      this.shaderString = svf(value);\n    } else if (value instanceof Vector2) {\n      super(GLDataType.floatVec2)\n      this.shaderString = `vec2(${svf(value.x)}, ${svf(value.y)})`;\n    } else if (value instanceof Vector3) {\n      super(GLDataType.floatVec3)\n      this.shaderString = `vec2(${svf(value.x)}, ${svf(value.y)}, ${svf(value.z)})`;\n    } else if (value instanceof Vector4) {\n      super(GLDataType.floatVec4)\n      this.shaderString = `vec4(${svf(value.x)}, ${svf(value.y)}, ${svf(value.z)}, ${svf(value.w)})`;\n    } else {\n      throw \"un support shader const node value\"\n    }\n    this.value = value;\n  }\n  value: ShaderConstType\n  shaderString: string;\n}\n\nexport class ShaderTexture {\n  constructor(\n    public name: string,\n    public type: GLTextureType\n  ) {\n  }\n\n  fetch(node: ShaderNode): ShaderTextureFetchNode {\n    return new ShaderTextureFetchNode(this, node);\n  }\n}\n\nfunction fromGLTextureType2GLDataType(type: GLTextureType): GLDataType {\n  switch (type) {\n    case GLTextureType.texture2D:\n      return GLDataType.floatVec4\n\n    default:\n      throw \"not support\"\n  }\n}\n\nexport class ShaderTextureFetchNode extends ShaderNode {\n  constructor(\n    public source: ShaderTexture,\n    public fetchByNode: ShaderNode\n  ) {\n    super(fetchByNode.type);\n    fetchByNode.connectTo(this);\n    this.type = fromGLTextureType2GLDataType(source.type)\n  }\n}\n\nfunction getValueCount(type: GLDataType) {\n  switch (type) {\n    case GLDataType.float:\n      return 1\n    case GLDataType.floatVec2:\n      return 2\n    case GLDataType.floatVec3:\n      return 3\n    case GLDataType.floatVec4:\n      return 4\n    default:\n      throw \"not support combine type\"\n  }\n}\n\nexport class ShaderCombineNode extends ShaderNode {\n  constructor(combines: ShaderNode[], type: GLDataType) {\n    super(type);\n    let count = 0;\n    combines.forEach(node => {\n      count += getValueCount(node.type)\n    })\n    if (count !== getValueCount(type)) {\n      throw 'combine node input not satisfied'\n    }\n    this.combineCount = count;\n    this.combines = combines;\n    this.combines.forEach(node => {\n      node.connectTo(this);\n    })\n  }\n\n  combines: ShaderNode[];\n  combineCount: number;\n\n\n}\n\nfunction length2Type(value: string) {\n  switch (value.length) {\n    case 1: return GLDataType.float\n    case 2: return GLDataType.floatVec2\n    case 3: return GLDataType.floatVec3\n    case 4: return GLDataType.floatVec4\n    default: throw \"error\"\n  }\n}\n\nexport class ShaderSwizzleNode extends ShaderNode {\n  constructor(node: ShaderNode, swizzleType: string) {\n    super(node.type);\n\n    const swizzledSourceCount = getValueCount(node.type)\n\n    const parts = swizzleType.trim().split(\"\");\n    if (parts.length > 4) {\n      // TODO check more\n      throw \"swizzle not valid\"\n    }\n\n    if (parts.length > swizzledSourceCount) {\n      throw \"swizzle not valid, swizzle part exceed swizzledSource\"\n    }\n\n    this.from = node;\n    node.connectTo(this);\n    this.swizzleType = swizzleType\n    this.type = length2Type(swizzleType)\n  }\n  swizzleType: string = \"\";\n  from: ShaderNode;\n\n}","import { ShaderGraph } from \"./shader-graph\";\nimport { ShaderFunction } from \"./shader-function\";\nimport { getShaderTypeStringFromGLDataType } from \"../webgl/shader-util\";\nimport { findFirst } from \"../util/array\";\nimport { CodeBuilder } from \"./util/code-builder\";\nimport {\n  ShaderFunctionNode, ShaderNode, ShaderInputNode, ShaderTextureFetchNode,\n  ShaderCombineNode, ShaderConstNode, ShaderSwizzleNode\n} from \"./shader-node\";\n\n\nexport function genFragShader(graph: ShaderGraph): string {\n  const builder = new CodeBuilder()\n  builder.reset();\n\n  builder.writeLine(\"void main(){\")\n  builder.addIndent()\n\n  const evaluatedNode = new Map<ShaderNode, varRecord>();\n  const nodeDependList = graph.fragmentRoot.generateDependencyOrderList() as ShaderNode[];\n  const fragResult = codeGenGraph(nodeDependList, \"gl_FragColor\", evaluatedNode);\n  builder.writeBlock(fragResult.code)\n  pushListToMap(evaluatedNode, fragResult.varList)\n\n  builder.reduceIndent()\n  builder.writeLine(\"}\")\n  const mainCode = builder.output();\n  \n  const includedCode = genShaderFunctionDepend(evaluatedNode);\n\n  return includedCode + mainCode\n}\n\n\nexport function genVertexShader(graph: ShaderGraph): string {\n  const builder = new CodeBuilder()\n  builder.reset();\n\n  builder.writeLine(\"void main(){\")\n  builder.addIndent()\n\n  const evaluatedNode = new Map<ShaderNode, varRecord>();\n  const nodeDependList = graph.vertexRoot.generateDependencyOrderList() as ShaderNode[];\n  const vertexResult = codeGenGraph(nodeDependList, \"gl_Position\", evaluatedNode)\n  pushListToMap(evaluatedNode, vertexResult.varList)\n  builder.writeBlock(vertexResult.code)\n  builder.writeLine(\"gl_PointSize = 5.0;\") // TODO\n  builder.emptyLine()\n\n  graph.varyings.forEach((varyNode, key) => {\n    const varyDependList = varyNode.generateDependencyOrderList() as ShaderNode[];\n    const varyResult = codeGenGraph(varyDependList, key, evaluatedNode);\n    pushListToMap(evaluatedNode, varyResult.varList)\n    builder.writeBlock(varyResult.code)\n    builder.emptyLine()\n  })\n\n  builder.reduceIndent()\n  builder.writeLine(\"}\")\n  const mainCode = builder.output();\n  \n  const includedCode = genShaderFunctionDepend(evaluatedNode);\n\n  return includedCode + mainCode\n}\n\nfunction pushListToMap(map:Map<ShaderNode, varRecord>, list:varRecord[]) {\n  list.forEach(item => {\n    if (!map.has(item.refedNode)) {\n      map.set(item.refedNode, item)\n    }\n  })\n}\n\n\nfunction genShaderFunctionDepend(nodes: Map<ShaderNode, varRecord>): string {\n  let functionsStr = \"\\n\";\n  const dependFunctions = new Set<ShaderFunction>();\n  nodes.forEach((_record, node) => {\n    if (node instanceof ShaderFunctionNode) {\n      dependFunctions.add(node.factory)\n    }\n  })\n  dependFunctions.forEach(func => {\n    functionsStr += func.genShaderFunctionIncludeCode()\n    functionsStr += \"\\n\"\n  })\n  return functionsStr\n}\n\n// temp1 = asd(12 + d);\ninterface varRecord {\n  refedNode: ShaderNode,\n  varKey: string,\n  expression: string,\n}\n\nfunction genTempVarExpFromShaderNode(\n  node: ShaderNode,\n  ctx: varRecord[],\n  preEvaluatedList: Map<ShaderNode, varRecord>\n): string {\n  function findRecordFromEvaluatedNode(node: ShaderNode) {\n    let record: varRecord;\n    if (preEvaluatedList.has(node)) {\n      record = preEvaluatedList.get(node)\n    } else {\n      record = findFirst(ctx, varRc => {\n        return varRc.refedNode === node\n      })\n    }\n    return record;\n  }\n\n  function genRecordVar(record: varRecord): string {\n    let key = \"\";\n\n    // if depends input node, just use it.\n    if (record.refedNode instanceof ShaderInputNode) {\n      key = record.refedNode.name;\n    } else {\n      key = record.varKey;\n    }\n\n    // if (record.refedNode.enableSwizzle) {\n    //   return key + \".\" + record.refedNode.swizzleType;\n    // } else {\n    //   return key;\n    // }\n    return key\n  }\n\n  function getParamKeyFromVarList(node: ShaderNode): string {\n    const record = findRecordFromEvaluatedNode(node);\n    if (record === undefined) {\n      throw \"_var_miss\"\n    }\n    return genRecordVar(record);\n  }\n\n  let record = findRecordFromEvaluatedNode(node)\n  if (record) {\n    return genRecordVar(record);\n  }\n\n  if (node instanceof ShaderFunctionNode) {\n    const functionDefine = node.factory.define;\n    let functionInputs = \"\";\n    Object.keys(functionDefine.inputs).forEach((key, index) => {\n      const nodeDepend = node.inputMap.get(key) as ShaderNode;\n      if (nodeDepend === undefined) {\n        throw `we have a shader function node but the input <${key}> has no input node`\n      }\n      functionInputs += getParamKeyFromVarList(nodeDepend);\n      if (index !== Object.keys(functionDefine.inputs).length - 1) {\n        functionInputs += \", \"\n      }\n    })\n    const result = `${functionDefine.name}(${functionInputs})`\n    return result;\n  }\n\n  if (node instanceof ShaderInputNode) {\n    return (node as ShaderInputNode).name;\n  }\n\n  if (node instanceof ShaderTextureFetchNode) {\n    return `texture2D(${node.source.name}, ${getParamKeyFromVarList(node.fetchByNode)})`\n  }\n\n  if (node instanceof ShaderCombineNode) {\n    let combineResult = \"\";\n    node.combines.forEach((nodeDepend, index) => {\n      combineResult += getParamKeyFromVarList(nodeDepend);\n      if (index !== node.combines.length - 1) {\n        combineResult += \", \"\n      }\n    })\n    const result = `vec${node.combineCount}(${combineResult})`\n    return result;\n  }\n\n  if (node instanceof ShaderConstNode) {\n    return node.shaderString;\n  }\n\n  if (node instanceof ShaderSwizzleNode) {\n    return getParamKeyFromVarList(node.from) + '.' + node.swizzleType;\n  }\n\n\n  throw \"unknown shader node\"\n}\n\n\nfunction codeGenGraph(\n  nodeDependList: ShaderNode[],\n  rootOutputName: string,\n  preEvaluatedList: Map<ShaderNode, varRecord>\n): {\n    code: string,\n    varList: varRecord[]\n  } {\n  const builder = new CodeBuilder()\n  builder.reset();\n  const varList: varRecord[] = [];\n  nodeDependList.forEach(nodeToGen => {\n    const varName = 'var' + nodeToGen.uuid.slice(0, 4);\n    varList.push({\n      refedNode: nodeToGen,\n      varKey: varName,\n      expression: genTempVarExpFromShaderNode(nodeToGen, varList, preEvaluatedList),\n    })\n  })\n  varList.forEach(varRc => {\n    if (varRc.refedNode instanceof ShaderInputNode) {\n      return;\n    }\n    if (preEvaluatedList.has(varRc.refedNode)) {\n      return;\n    }\n    const varType = getShaderTypeStringFromGLDataType(varRc.refedNode.type);\n    builder.writeLine(`${varType} ${varRc.varKey} = ${varRc.expression};`)\n  })\n\n  const selfRecord = varList[varList.length - 1];\n  if (selfRecord.refedNode instanceof ShaderInputNode) {\n    builder.writeLine(`${rootOutputName} = ${selfRecord.refedNode.name};`)\n  } else {\n    builder.writeLine(`${rootOutputName} = ${selfRecord.varKey};`)\n  }\n  return {\n    code: builder.output(),\n    varList\n  };\n}\n","import { ShaderFunctionDefine, ShaderFunctionParsedDefine } from \"../shader-function\";\nimport { GLDataType } from \"../../webgl/shader-util\";\n\nexport function parseShaderFunctionMetaInfo(input: ShaderFunctionDefine)\n  : ShaderFunctionParsedDefine {\n  try {\n    const [head, body] = splitStrUntilChar(input.source, '{')\n    const [funcHead, funcParam] = splitStrUntilChar(head, '(')\n    const { name, returnType } = getFuncHead(funcHead)\n    const inputs = getParamList(funcParam)\n    const source = getFuncBody(body)\n    return {\n      name,\n      description: input.description,\n      source,\n      inputs,\n      returnType,\n    }\n  } catch (error) {\n    throw \"shader function parsed error\"\n  }\n}\n\nexport function splitStrUntilChar(str: string, char: string) {\n  for (let i = 0; i < str.length; i++) {\n    const c = str[i];\n    if (c === char) {\n      return [str.substr(0, i), str.substr(i)];\n    }\n  }\n  throw \"split error\"\n}\n\nexport function getDataType(input: string): GLDataType {\n  switch (input.trim()) {\n    case \"float\": return GLDataType.float\n    case \"vec2\": return GLDataType.floatVec2\n    case \"vec3\": return GLDataType.floatVec3\n    case \"vec4\": return GLDataType.floatVec4\n    case \"mat2\": return GLDataType.Mat2\n    case \"mat3\": return GLDataType.Mat3\n    case \"mat4\": return GLDataType.Mat4\n\n    default: throw 'parse error'\n  }\n}\n\nexport function getOneParam(input: string) {\n  const split = input.trim().split(' ').filter(char => char !== \"\");\n  return {\n    name: split[1].trim(),\n    type: getDataType(split[0])\n  }\n}\n\nexport function getParamList(input: string) {\n  const para = input.trim();\n  if (para[para.length - 1] !== ')' || para[0] !== '(') {\n    throw 'err'\n  }\n\n  const unbrace = para.substring(1, para.length - 1)\n\n  const split = unbrace.split(',').filter(char => char.trim() !== \"\");\n  const result = {};\n  split.forEach(item => {\n    const { name, type } = getOneParam(item)\n    result[name] = type\n  })\n  return result;\n}\n\n\nexport function getFuncBody(input: string) {\n  const para = input.trim();\n  if (para[para.length - 1] !== '}' || para[0] !== '{') {\n    throw 'err'\n  }\n  return para.substring(1, para.length - 1);\n}\n\nfunction getFuncHead(input: string) {\n  const split = input.split(' ').filter(char => char.trim() !== \"\");\n  return {\n    name: split[1].trim(),\n    returnType: getDataType(split[0])\n  }\n\n}","import { GLDataType, getShaderTypeStringFromGLDataType } from \"../webgl/shader-util\";\nimport { ShaderFunctionNode } from \"./shader-node\";\nimport { parseShaderFunctionMetaInfo } from \"./parser/shader-function-meta\";\nimport { CodeBuilder } from \"./util/code-builder\";\n\nexport interface ShaderFunctionDefine {\n  source: string, \n  description?: string;\n}\n\nexport interface ShaderFunctionParsedDefine{\n  name: string;\n  description?: string;\n  source: string;\n  inputs: { [index: string]: GLDataType };\n  returnType: GLDataType\n}\n\n/**\n *  Define a shader function node factory\n *  that with depend some input \n *  and output\n * @export\n * @class ShaderFunction\n */\nexport class ShaderFunction{\n  constructor(define: ShaderFunctionDefine) {\n    this.define = parseShaderFunctionMetaInfo(define);\n  }\n\n  define: ShaderFunctionParsedDefine\n\n  make(): ShaderFunctionNode {\n    const node = new ShaderFunctionNode(this);\n    return node;\n  }\n\n  genShaderFunctionIncludeCode(): string {\n    const builder = new CodeBuilder()\n    builder.reset();\n    const define = this.define;\n    const varType = getShaderTypeStringFromGLDataType(define.returnType);\n    let functionInputs = \"\";\n    const keys = Object.keys(define.inputs)\n    keys.forEach((key, index) => {\n      const paramType = getShaderTypeStringFromGLDataType(define.inputs[key]);\n      const paramStr = `${paramType} ${key}`\n      functionInputs += paramStr\n      if (index !== keys.length - 1) {\n        functionInputs += \", \"\n      }\n    })\n\n    if (define.description !== undefined) {\n      builder.writeCommentBlock(define.description)\n    }\n  \n    builder.writeLine(`${varType} ${define.name}(${functionInputs}){`)\n    builder.addIndent()\n    builder.writeBlock(define.source)\n    builder.reduceIndent()\n    builder.writeLine(\"}\")\n    return builder.output();\n  }\n\n}\n","import { ShaderFunction } from \"../shader-function\";\n\nexport const DivW = new ShaderFunction({\n  source: `\n    vec3 DivW ( vec4 position){\n      return position.xyz / position.w;\n    }\n  `\n})\n\nexport const MTransform = new ShaderFunction({\n  source: `\n    vec4 MTransform (mat4 MMatrix, vec3 position){\n      return MMatrix * vec4(position, 1.0);\n    }\n  `\n})\n\nexport const VPTransform = new ShaderFunction({\n  source: `\n    vec4 VPTransform (mat4 VPMatrix, vec4 position){\n      return VPMatrix * position;\n    }\n  `\n})\n\nexport const MVPTransform = new ShaderFunction({\n  description: 'Using camera view projection matrix and model matrix to transform vertices',\n  source: `\n    vec4 VPTransform (mat4 VPMatrix, mat4 MMatrix, vec3 position){\n      return VPMatrix * MMatrix * vec4(position, 1.0);\n    }\n  `,\n})\n\nexport const getWorldPosition = new ShaderFunction({\n  description:\n    `Transform from the current view projection matrix and its inverse, \n     and uv coordinates to world position`,\n  source:\n    `\n    vec4 getWorldPosition(\n      vec2 uv, \n      float depth, \n      mat4 VPMatrix, \n      mat4 VPMatrixInverse){\n      float clipW = VPMatrix[2][3] * depth + VPMatrix[3][3];\n      return VPMatrixInverse * (vec4(uv * 2.0 - 1.0, depth, 1.0) * clipW);\n    }\n    `\n})\n\nexport const NDCxyToUV = new ShaderFunction({\n  description:\n    `Get texture uv lookup position from NDC`,\n  source: `\n  vec2 NDCTextureLookUp(vec3 ndc){\n    return vec2(ndc.x / 2.0 + 0.5, ndc.y / 2.0 + 0.5);\n  }`\n})\n\nexport const UVDepthToNDC = new ShaderFunction({\n  source: `\n  vec4 UVDepthToNDC(float depth, vec2 uv){\n    return vec4(uv.x * 2.0 - 1.0, uv.y * 2.0 - 1.0,depth, 1.0);\n  }`\n})\n\n\nexport const getLastPixelNDC = new ShaderFunction({\n  source: `\n  vec3 getLastPixelNDC(vec4 ndc, mat4 VPMatrixInverse, mat4 LastVPMatrix){\n\n    // we consider frag too far is background\n    if(ndc.z > 0.99){\n      return ndc.xyz;\n    }\n    \n    vec4 worldPosition = VPMatrixInverse * ndc;\n    vec4 oldPosition = LastVPMatrix * worldPosition;\n    oldPosition = oldPosition / oldPosition.w;\n    return  oldPosition.xyz;\n  }\n  `\n})\n\nexport const dir3D = new ShaderFunction({\n  source: `\n  vec3 randDir(float x, float y){\n    float PI =  3.14159265; // TODO\n    float lambda = acos(2.0 * x - 1.0) - PI / 2.0;\n    float phi = 2.0 * PI * y;\n    return vec3(\n      cos(lambda) * cos(phi),\n      cos(lambda) * sin(phi),\n      sin(lambda)\n    );\n  }\n  `\n})","import { AttributeDescriptor, AttributeUsage } from \"../webgl/attribute\";\nimport { ShaderAttributeInputNode, ShaderCommonUniformInputNode, ShaderInnerUniformInputNode, ShaderTexture, ShaderNode, ShaderConstType, ShaderConstNode, ShaderCombineNode } from \"./shader-node\";\nimport { GLDataType } from \"../webgl/shader-util\";\nimport { InnerSupportUniform, InnerUniformMap } from \"../webgl/uniform/uniform\";\nimport { GLTextureType } from \"../webgl/uniform/uniform-texture\";\nimport { VPTransform, MTransform } from \"./built-in/transform\";\nimport { Vector2 } from \"../math/vector2\";\nimport { Vector3, Matrix4 } from \"../math\";\nimport { Vector4 } from \"../math/vector4\";\n\n// TODO simplify it\nexport function attribute(att: AttributeDescriptor) {\n  return new ShaderAttributeInputNode(att);\n}\n\nexport function texture(name: string, type?: GLTextureType) {\n  const t = type !== undefined ? type :  GLTextureType.texture2D;\n  return new ShaderTexture(name, t);\n}\n\nexport function uniform(name: string, type: GLDataType) {\n  return new ShaderCommonUniformInputNode({\n    name, type\n  })\n}\n\nexport function uniformFromValue(name: string, value: any) {\n  if (typeof value === \"number\") {\n    return uniform(name, GLDataType.float).default(value);\n  } else if (value instanceof Vector2) {\n    return uniform(name, GLDataType.floatVec2).default(value);\n  } else if (value instanceof Vector3) {\n    return uniform(name, GLDataType.floatVec3).default(value);\n  } else if (value instanceof Vector4) {\n    return uniform(name, GLDataType.floatVec4).default(value);\n  } else if (value instanceof Matrix4) {\n    return uniform(name, GLDataType.Mat4).default(value);\n  } else {\n    throw \"un support uniform value\"\n  }\n}\n\nexport function innerUniform(type: InnerSupportUniform) {\n  return new ShaderInnerUniformInputNode({\n    name: 'inner' + InnerUniformMap.get(type).name,\n    mapInner: type,\n  })\n}\n\nexport function value(value: ShaderConstType){\n  return new ShaderConstNode(value);\n}\n\nexport function vec2(...args: ShaderNode[] ) {\n  return new ShaderCombineNode(args, GLDataType.floatVec2)\n}\n\nexport function vec3(...args: ShaderNode[] ) {\n  return new ShaderCombineNode(args, GLDataType.floatVec3)\n}\n\nexport function vec4(...args: ShaderNode[] ) {\n  return new ShaderCombineNode(args, GLDataType.floatVec4)\n}\n\nexport function constValue(value: any){\n  return new ShaderConstNode(value);\n}\n\nexport function MVPWorld() {\n\n  return VPTransform.make()\n  .input(\"VPMatrix\", innerUniform(InnerSupportUniform.VPMatrix))\n    .input(\"position\",\n      MTransform.make()\n      .input('MMatrix', innerUniform(InnerSupportUniform.MMatrix))\n      .input('position', attribute(\n        { name: 'position', type: GLDataType.floatVec3, usage: AttributeUsage.position }\n      ))\n    )\n\n  // return MVPTransform.make()\n  // .input(\"VPMatrix\", innerUniform(InnerSupportUniform.VPMatrix))\n  // .input(\"MMatrix\", innerUniform(InnerSupportUniform.MMatrix))\n  // .input(\"position\", attribute(\n  //   { name: 'position', type: GLDataType.floatVec3, usage: AttributeUsage.position }\n  // ))\n}\n\nexport function screenQuad() {\n  return vec4(\n    attribute(\n    { name: 'position', type: GLDataType.floatVec3, usage: AttributeUsage.position }\n    ),\n    constValue(1)\n  )\n}","import { GLProgramConfig } from \"../webgl/program\";\nimport { genFragShader, genVertexShader } from \"./code-gen\";\nimport {\n  ShaderInputNode, ShaderTexture, ShaderFunctionNode, \n  ShaderAttributeInputNode, ShaderInnerUniformInputNode,\n  ShaderCommonUniformInputNode, ShaderNode, ShaderVaryInputNode,\n  ShaderTextureFetchNode\n} from \"./shader-node\";\nimport { Nullable } from \"../type\";\nimport { attribute } from \"./node-maker\";\nimport { GLDataType } from \"../webgl/shader-util\";\nimport { AttributeUsage } from \"../webgl/attribute\";\nimport { DivW } from \"./built-in/transform\";\n\n\nexport const UvFragVary = \"v_uv\"\nexport const NormalFragVary = \"v_normal\"\nexport const NDCPositionFragVary = \"v_position_ndc\"\nexport const WorldPositionFragVary = \"v_position_world\"\n\nexport class ShaderGraph {\n  fragmentRoot: Nullable<ShaderNode>;\n  vertexRoot: Nullable<ShaderNode>;\n  varyings: Map<string, ShaderNode> = new Map();\n\n  setFragmentRoot(root: ShaderNode): ShaderGraph {\n    this.fragmentRoot = root;\n    return this;\n  }\n\n  setVertexRoot(root: ShaderNode): ShaderGraph {\n    this.vertexRoot = root;\n    // this for:  if user use node maker MVPWorld, it can auto gen world position vary for convenient\n    if (root instanceof ShaderFunctionNode && root.factory.define.name === \"VPTransform\") {\n      const next = root.inputMap.get(\"position\")\n      if (next === undefined) {\n        throw `we have a shader function node but the input <position> has no input node`\n      }\n      if (next instanceof ShaderFunctionNode && next.factory.define.name === \"MTransform\") {\n        this.setVary(WorldPositionFragVary, next.swizzling(\"xyz\"));\n      }\n    }\n    this.setVary(NDCPositionFragVary, DivW.make().input(\"position\", root));\n    return this;\n  }\n\n  declareFragNormal(): ShaderGraph{\n    return this.setVary(NormalFragVary, attribute(\n      { name: 'normal', type: GLDataType.floatVec3, usage: AttributeUsage.normal }\n    ))\n  }\n  \n  declareFragUV(): ShaderGraph {\n    return this.setVary(UvFragVary, attribute(\n      { name: 'uv', type: GLDataType.floatVec2, usage: AttributeUsage.uv }\n    ))\n  }\n\n\n\n  setVary(key: string, root: ShaderNode): ShaderGraph {\n    const ret = this.varyings.get(key);\n    if (ret !== undefined) {\n      throw 'duplicate vary key found'\n    }\n    this.varyings.set(key, root);\n    return this;\n  }\n\n  getFragRoot(): ShaderNode {\n    return this.fragmentRoot;\n  }\n\n  getVary(key: string): ShaderVaryInputNode {\n    const ret = this.varyings.get(key);\n    if (ret === undefined) {\n      throw 'cant get vary'\n    }\n    return new ShaderVaryInputNode(key, ret.type);\n  }\n\n  reset(): ShaderGraph {\n    this.fragmentRoot = null;\n    this.vertexRoot = null;\n    return this;\n  }\n\n  compile(): GLProgramConfig {\n    if (this.vertexRoot === null) {\n      throw \"can't compile shadergraph, vertex root not set\"\n    }\n    if (this.fragmentRoot === null) {\n      throw \"can't compile shadergraph, fragment root not set\"\n    }\n    return {\n      ...this.collectInputs(),\n      vertexShaderString: this.compileVertexSource(),\n      fragmentShaderString: this.compileFragSource(),\n      autoInjectHeader: true,\n    };\n  }\n\n  // TODO maybe should cache\n  get nodes() {\n    const nodes: Set<ShaderNode> = new Set();\n    this.fragmentRoot.traverseDFS(node => {\n      nodes.add(node as ShaderNode);\n    })\n    this.vertexRoot.traverseDFS(node => {\n      nodes.add(node as ShaderNode);\n    })\n    this.varyings.forEach(vary => {\n      vary.traverseDFS(node => {\n        nodes.add(node as ShaderNode);\n      })\n    })\n    const nodeList: ShaderNode[] = [];\n    nodes.forEach(n => {\n      nodeList.push(n);\n    })\n    return nodeList\n  }\n\n  collectInputs() {\n    const nodes = this.nodes;\n    const inputNodes = nodes.filter(\n      n => n instanceof ShaderInputNode\n    );\n\n    const attributes = inputNodes\n      .filter(node => node instanceof ShaderAttributeInputNode)\n      .map((node: ShaderAttributeInputNode) => {\n        return {\n          name: node.name,\n          usage: node.attributeUsage,\n          type: node.type,\n        }\n      });\n    const uniforms = inputNodes\n      .filter(node => node instanceof ShaderCommonUniformInputNode)\n      .map((node: ShaderCommonUniformInputNode) => {\n        return {\n          name: node.name,\n          type: node.type,\n          default: node.defaultValue\n        }\n      });\n    const uniformsIncludes = inputNodes\n      .filter(node => node instanceof ShaderInnerUniformInputNode)\n      .map((node: ShaderInnerUniformInputNode) => {\n        return {\n          name: node.name,\n          mapInner: node.mapInner,\n        }\n      });\n    \n    const textureSet = new Set<ShaderTexture>();\n    nodes.filter(n => n instanceof ShaderTextureFetchNode)\n      .forEach((node: ShaderTextureFetchNode)  => {\n        textureSet.add(node.source)\n      })\n    const textures = [];\n    textureSet.forEach(st => {\n      textures.push({\n        name:st.name,\n        type:st.type \n        })\n      })\n\n    const varyings = [];\n    this.varyings.forEach((node, key) => {\n      varyings.push({\n        name: key,\n        type: node.type,\n      })\n    })\n\n    return { attributes, uniforms, textures, varyings, uniformsIncludes }\n  }\n\n  compileVertexSource(): string {\n    return genVertexShader(this);\n  }\n\n  compileFragSource(): string {\n    return genFragShader(this);\n  }\n\n}\n\n","\nimport { generateUUID, Vector3, Matrix4 } from \"../math\";\nimport { Nullable } from \"../type\";\nimport { GLProgramConfig, GLProgram } from \"../webgl/program\";\nimport { ShaderGraph } from \"../shader-graph/shader-graph\";\nimport { Observable } from \"./observable\";\nimport { RenderEngine } from \"../engine/render-engine\";\nimport { ShaderCommonUniformInputNode } from '../shader-graph/shader-node';\nimport { GLDataType } from '../webgl/shader-util';\nimport { Vector2 } from '../math/vector2';\nimport { Vector4 } from '../math/vector4';\nimport { uniform, uniformFromValue } from '../shader-graph/node-maker';\n\nexport interface ShaderUniformProvider{\n\n  /**\n  * impl this to decorate your shader source, add uniform input\n  */\n  decorate(graph: ShaderGraph): void;\n  hasAnyUniformChanged: boolean;\n  uniforms: Map<string, any>;\n  propertyUniformNameMap: Map<string, string>;\n}\n\nexport class Shading {\n  uuid = generateUUID();\n  graph: ShaderGraph = new ShaderGraph();\n\n  programConfigCache: Nullable<GLProgramConfig> = null;\n  needRebuildShader: boolean = true;\n\n  uniformProvider: ShaderUniformProvider[] = [];\n\n  decorate(deco: ShaderUniformProvider): Shading {\n    this.uniformProvider.push(deco);\n    return this;\n  }\n\n  afterShaderCompiled: Observable<GLProgramConfig> = new Observable();\n  build() {\n    this.graph.reset()\n    this.uniformProvider.forEach(provider => {\n      provider.decorate(this.graph);\n    })\n  }\n\n  getProgramConfig() {\n  if (this.needRebuildShader) {\n      this.build();\n    this.programConfigCache = this.graph.compile();\n    this.afterShaderCompiled.notifyObservers(this.programConfigCache)\n      this.needRebuildShader = false;\n    }\n    return this.programConfigCache;\n  }\n\n  getProgram(engine: RenderEngine): GLProgram {\n    if (this.needRebuildShader) {\n      this.disposeProgram(engine);\n    }\n    let program = engine.getProgram(this);\n    if (program === undefined) {\n      program = engine.createProgram(this);\n    }\n    return program;\n  }\n\n  disposeProgram(engine: RenderEngine): void {\n    engine.deleteProgram(this);\n  }\n\n}\n\n\n\nexport function MapUniform(remapName: string) {\n  return (target: ShaderUniformProvider, key: string) => {\n    if (target.uniforms === undefined) {\n      target.uniforms = new Map();\n    }\n    if (target.propertyUniformNameMap === undefined) {\n      target.propertyUniformNameMap = new Map();\n    }\n\n    let val = target[key];\n    const getter = () => {\n      return val;\n    };\n    const setter = (value) => {\n      target.uniforms.set(remapName, value);\n      target.hasAnyUniformChanged = true;\n      val = value;\n    };\n\n    target.propertyUniformNameMap.set(key, remapName);\n\n    Object.defineProperty(target, key, {\n      get: getter,\n      set: setter,\n      enumerable: true,\n      configurable: true,\n    });\n  };\n}\n\nexport abstract class BaseEffectShading<T> implements ShaderUniformProvider{\n  constructor() {\n    // need check if has initialized by decorator\n    if (this.uniforms === undefined) {\n      this.uniforms = new Map();\n    }\n    if (this.propertyUniformNameMap === undefined) {\n      this.propertyUniformNameMap = new Map();\n    }\n  }\n\n  abstract decorate(graph: ShaderGraph): void;\n\n  hasAnyUniformChanged: boolean = true;\n  propertyUniformNameMap: Map<string, string>;\n  uniforms: Map<string, any>;\n\n  getPropertyUniform(name: keyof T): ShaderCommonUniformInputNode {\n    const uniformName = this.propertyUniformNameMap.get(name as string);\n    const value = this[name as string];\n    if (value === undefined) {\n      throw \"uniform value not given\"\n    }\n    return uniformFromValue(uniformName, value);\n  }\n}\n\n\n// type Constructor<T = SceneNode> = new (...args: any[]) => T;\n// type ConstructorTypeOf<T> = new (...args:any[]) => T;\n\n// export function ShaderUniformSceneNodeProvidable<T extends Constructor>(_target: T)\n//   : ConstructorTypeOf<SceneNode & BaseEffectShading<T>>\n// {\n//   return class <K> extends SceneNode implements ShaderUniformProvider{\n//     constructor() {\n//       super();\n//       // need check if has initialized by decorator\n//       if (this.uniforms === undefined) {\n//         this.uniforms = new Map();\n//       }\n//       if (this.propertyUniformNameMap === undefined) {\n//         this.propertyUniformNameMap = new Map();\n//       }\n//     }\n    \n//     decorate(_graph: ShaderGraph): void {\n//       throw new Error(\"Method not implemented.\");\n//     }\n\n//     hasAnyUniformChanged: boolean;\n\n//     propertyUniformNameMap: Map<string, string>;\n\n//     uniforms: Map<string, any>;\n\n//     getPropertyUniform(name: keyof K): ShaderCommonUniformInputNode {\n//       const uniformName = this.propertyUniformNameMap.get(name as string);\n//       const value = this[name as string];\n//       if (value === undefined) {\n//         throw \"uniform value not given\"\n//       }\n//       if (typeof value === \"number\") {\n//         return uniform(uniformName, GLDataType.float).default(value);\n//       } else if (value instanceof Vector2) {\n//         return uniform(uniformName, GLDataType.floatVec2).default(value);\n//       } else if (value instanceof Vector3) {\n//         return uniform(uniformName, GLDataType.floatVec3).default(value);\n//       } else if (value instanceof Vector4) {\n//         return uniform(uniformName, GLDataType.floatVec4).default(value);\n//       } else if (value instanceof Matrix4) {\n//         return uniform(uniformName, GLDataType.Mat4).default(value);\n//       } else {\n//         throw \"un support uniform value\"\n//       }\n//     }\n//   };\n// }","import { BaseEffectShading } from \"../../core/shading\";\nimport { texture, screenQuad } from \"../../shader-graph/node-maker\";\nimport { UvFragVary, ShaderGraph } from '../../shader-graph/shader-graph';\n\nexport class CopyShading extends BaseEffectShading<CopyShading> {\n\n  decorate(graph: ShaderGraph) {\n    graph\n      .setVertexRoot(screenQuad())\n      .declareFragUV()\n      .setFragmentRoot(\n        texture(\"copySource\").fetch(graph.getVary(UvFragVary))\n      )\n  }\n\n}\n","import { Controller } from \"./controller\";\nimport { Vector2 } from \"../math/vector2\";\n\ninterface ControllerCallback {\n  controller: Controller,\n  callback: Function\n}\n\nconst prev = new Vector2();\nconst mousePosition = new Vector2();\nconst v1 = new Vector2();\n\n// interactor responsible for handle web event from an element\n// and dispatch control event to controllers\nexport class Interactor{\n  constructor(inputElement:HTMLElement) {\n    this.inputElement = inputElement;\n    this.bind();\n  }\n\n  enabled: boolean = true;\n  mouseButton: number = -1; // -1 is default state for no button pressed \n  inputElement: HTMLElement;\n\n  private controllers: Controller[] = [];\n\n  private bind(): void {\n    const el = this.inputElement;\n    this.mouseButton = -1;\n    el.addEventListener('mousemove', this.onMouseMove, false);\n    el.addEventListener('mousedown', this.onMouseDown, false);\n    el.addEventListener('mouseup', this.onMouseUp, false);\n    el.addEventListener('wheel', this.onMouseWheel, false);\n    // el.addEventListener('keydown', this.eventLoop, false);\n    // el.addEventListener('keyup', this.cancelLoop, false);\n    el.addEventListener('contextmenu', this.preventContentMenu, false);\n  }\n  private unbind(): void {\n    const el = this.inputElement;\n    this.mouseButton = -1;\n    el.removeEventListener('mousemove', this.onMouseMove);\n    el.removeEventListener('mousedown', this.onMouseDown);\n    el.removeEventListener('mouseup', this.onMouseUp);\n    el.removeEventListener('wheel', this.onMouseWheel);\n    // el.removeEventListener('keydown', this.eventLoop);\n    // el.removeEventListener('keyup', this.cancelLoop);\n    el.removeEventListener('contextmenu', this.preventContentMenu, false);\n  }\n\n  private preventContentMenu(event: MouseEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  private onMouseMove = (event: MouseEvent) => {\n    if (!this.enabled) {\n      return;\n    }\n    mousePosition.set(event.clientX, event.clientY);\n    v1.copy(prev).sub(mousePosition);\n    if (this.mouseButton === 0) {\n      this.groupEmit(this.leftMouseMoveCallBacks, v1);\n    }\n    if (this.mouseButton === 2) {\n      this.groupEmit(this.rightMouseMoveCallBacks, v1);\n    }\n    prev.copy(mousePosition);\n  }\n\n  private onMouseDown = (event: MouseEvent) => {\n    if (!this.enabled) {\n      return;\n    }\n    prev.set(event.clientX, event.clientY);\n    this.mouseButton = event.button;\n    event.preventDefault();\n  }\n\n  private onMouseUp = (event: MouseEvent) => {\n    if (!this.enabled) {\n      return;\n    }\n    this.groupEmit(this.mouseUpCallBacks);\n    this.mouseButton = -1;\n  }\n\n  private onMouseWheel = (event: WheelEvent) => {\n    if (!this.enabled) {\n      return;\n    }\n    let delta = 0;\n    if ((event as any).wheelDelta !== void 0) {\n      // WebKit / Opera / Explorer 9\n      delta = (event as any).wheelDelta;\n    } else if (event.deltaY !== void 0) {\n      // Firefox\n      delta = -event.deltaY;\n    }\n    delta = delta > 0 ? 1.1 : 0.9;\n    this.groupEmit(this.mouseWheelCallBacks, delta);\n  }\n\n  private leftMouseMoveCallBacks: ControllerCallback[] = [];\n  private rightMouseMoveCallBacks: ControllerCallback[] = [];\n  private mouseWheelCallBacks: ControllerCallback[] = [];\n  private mouseDownCallBacks: ControllerCallback[] = [];\n  private mouseUpCallBacks: ControllerCallback[] = [];\n\n  private groupEmit(callBackList: ControllerCallback[], ...param: any) {\n    callBackList.forEach(callback => {\n      callback.callback(...param);\n    });\n  }\n  private removeController(controller: Controller, callBackList: ControllerCallback[]) {\n    callBackList = callBackList.filter(callback => { return callback.controller === controller });\n  }\n\n  public bindLeftMouseMove(controller: Controller, callback: (offset: Vector2) => any) {\n    this.leftMouseMoveCallBacks.push({controller, callback});\n  }\n\n  public bindRightMouseMove(controller: Controller, callback: (offset: Vector2) => any) {\n    this.rightMouseMoveCallBacks.push({controller, callback});\n  }\n\n  public bindMouseWheel(controller: Controller, callback: (delta: number) => any) {\n    this.mouseWheelCallBacks.push({controller, callback});\n  }\n\n  public bindMouseDown(controller: Controller, callback: () => any) {\n    this.mouseDownCallBacks.push({controller, callback});\n  }\n\n  public bindMouseUp(controller: Controller, callback: () => any) {\n    this.mouseUpCallBacks.push({controller, callback});\n  }\n\n  public unbindControllerAllListener(controller: Controller) {\n    this.removeController(controller, this.mouseUpCallBacks);\n    this.removeController(controller, this.rightMouseMoveCallBacks);\n    this.removeController(controller, this.mouseWheelCallBacks);\n    this.removeController(controller, this.mouseDownCallBacks);\n    this.removeController(controller, this.mouseUpCallBacks);\n  }\n\n  dispose() {\n    this.unbind();\n    this.leftMouseMoveCallBacks = [];\n    this.rightMouseMoveCallBacks = [];\n    this.mouseWheelCallBacks = [];\n    this.mouseDownCallBacks = [];\n    this.mouseUpCallBacks = [];\n  }\n}","import { GLRenderer } from \"../webgl/gl-renderer\";\nimport { RenderObject, RenderRange } from \"../core/render-object\";\nimport { Camera } from \"../core/camera\";\nimport { Matrix4 } from \"../math/matrix4\";\nimport { GLProgram } from \"../webgl/program\";\nimport { Geometry } from \"../core/geometry\";\nimport { BufferData } from \"../core/buffer-data\";\nimport { DrawMode } from \"../webgl/const\";\nimport { Material } from \"../core/material\";\nimport { GLTextureUniform } from \"../webgl/uniform/uniform-texture\";\nimport { PerspectiveCamera } from \"../camera/perspective-camera\";\nimport { Nullable, GLReleasable } from \"../type\";\nimport { InnerSupportUniform, InnerUniformMap } from \"../webgl/uniform/uniform\";\nimport { UniformProxy } from \"./uniform-proxy\";\nimport { Observable } from \"../core/observable\";\nimport { GLFramebuffer } from '../webgl/gl-framebuffer';\nimport { QuadSource } from '../render-graph/quad-source';\nimport { downloadCanvasPNGImage } from \"../util/file-io\";\nimport { CopyShading } from \"../shading/pass-lib/copy\";\nimport { NormalShading } from \"../artgl\";\nimport { VAOCreateCallback } from \"../webgl/vao\";\nimport { Vector4 } from \"../math/vector4\";\nimport { Shading, ShaderUniformProvider } from \"../core/shading\";\nimport { Interactor } from \"../interact/interactor\";\n\nexport interface RenderSource{\n  resetSource(): void;\n  nextRenderable(): Nullable<RenderObject>;\n  updateSource(): void;\n}\n\nexport function foreachRenderableInSource(source: RenderSource, visitor: (obj: RenderObject) => any) {\n  source.updateSource();\n  source.resetSource();\n  let nextSource: RenderObject | null = null;\n  do {\n    nextSource = source.nextRenderable();\n    if (nextSource !== null) {\n      visitor(nextSource);\n    }\n  } while (nextSource !== null);\n}\n\nexport interface Size{\n  width: number;\n  height: number;\n}\n\n\nconst copyShading = new Shading().decorate(new CopyShading());\nconst quad = new QuadSource();\n\nexport class RenderEngine implements GLReleasable{\n  constructor(el?: HTMLCanvasElement, ctxOptions?: any) {\n    this.renderer = new GLRenderer(el, ctxOptions);\n    // if we have a element param, use it as the default camera's param for convenience\n    if (el !== undefined) {\n      (this.camera as PerspectiveCamera).aspect = el.width / el.height;\n    }\n\n    this.interactor = new Interactor(el);\n\n    InnerUniformMap.forEach((des, key) => {\n      this.globalUniforms.set(key, new UniformProxy(des.default))\n    })\n    \n    this.preferVAO = true;\n  }\n\n  readonly interactor: Interactor\n\n  readonly renderer: GLRenderer;\n  _preferVAO: boolean = true;\n  _vaoEnabled: boolean = false;\n  get vaoEnabled(): boolean { return this._vaoEnabled };\n  get preferVAO(): boolean { return this._preferVAO };\n  set preferVAO(val: boolean) {\n    this._preferVAO = val;\n    if (val) {\n      if (!this.renderer.vaoManager.isSupported) {\n        console.warn(`prefer vao is set to true, but your environment cant support vao, vaoEnabled is false`)\n      }\n      this._vaoEnabled = true\n    } else {\n      this.renderer.vaoManager.releaseGL();\n      this._vaoEnabled = false\n    }\n  }\n\n  // resize\n  readonly resizeObservable: Observable<Size> = new Observable<Size>();\n  setSize(width:number, height: number) {\n    if (this.renderer.setSize(width, height)) {\n      this.resizeObservable.notifyObservers({\n        width, height\n      })\n    }\n  }\n  setActualSize(width: number, height: number) {\n    if (this.renderer.setRawRenderSize(width, height)) {\n      this.resizeObservable.notifyObservers({\n        width, height\n      })\n    }\n  }\n\n\n  public overrideShading: Nullable<Shading> = null;\n  public defaultTechnique: Shading = new Shading().decorate(new NormalShading());\n\n  ////\n\n\n\n\n  //// camera related\n  _camera: Camera = new PerspectiveCamera();\n  public isCameraChanged = true;\n  get camera() { return this._camera };\n  set camera(camera) {\n    this._camera = camera;\n    this.isCameraChanged = true;\n  };\n  private cameraMatrixReverse = new Matrix4();\n  private ProjectionMatrix = new Matrix4();\n  private VPMatrix = new Matrix4();\n  private LastVPMatrix = new Matrix4();\n\n  private jitterPMatrix = new Matrix4();\n  private jitterVPMatrix = new Matrix4();\n\n  jitterProjectionMatrix() {\n    this.jitterPMatrix.copy(this.ProjectionMatrix);\n    this.jitterPMatrix.elements[8] += ((2 * Math.random() - 1) / this.renderer.width);\n    this.jitterPMatrix.elements[9] += ((2 * Math.random() - 1) / this.renderer.height);\n    this.jitterVPMatrix.multiplyMatrices(this.jitterPMatrix, this.cameraMatrixReverse);\n    this.getGlobalUniform(InnerSupportUniform.VPMatrix).setValue(this.jitterVPMatrix);\n  }\n\n  unJit() {\n    this.getGlobalUniform(InnerSupportUniform.VPMatrix).setValue(this.VPMatrix);\n  }\n\n  /**\n   * call this to update engine layer camera related render info\n   * such as matrix global uniform.\n   *\n   * @memberof RenderEngine\n   */\n  connectCamera() {\n    let needUpdateVP = false;\n    // \n    if (this.camera.projectionMatrixNeedUpdate) {\n      this.camera.updateProjectionMatrix();\n      this.ProjectionMatrix.copy(this.camera.projectionMatrix);\n      needUpdateVP = true;\n    }\n    if (this.camera.transform.transformFrameChanged) {\n      this.camera.transform.matrix;\n      this.camera.updateWorldMatrix(true);\n      this.cameraMatrixReverse.getInverse(this.camera.worldMatrix, true);\n      needUpdateVP = true;\n    }\n\n    this.LastVPMatrix.copy(this.VPMatrix);\n    this.getGlobalUniform(InnerSupportUniform.LastVPMatrix).setValue(this.LastVPMatrix);\n\n    if (needUpdateVP) {\n      this.VPMatrix.multiplyMatrices(this.ProjectionMatrix, this.cameraMatrixReverse);\n      this.getGlobalUniform(InnerSupportUniform.VPMatrix).setValue(this.VPMatrix);\n      needUpdateVP = false;\n      this.isCameraChanged = true;\n    } else {\n      this.isCameraChanged = false;\n    }\n   \n  }\n  ////\n\n\n\n\n  //// render APIs\n  // render renderList from given source\n  render(source: RenderSource) {\n    foreachRenderableInSource(source, (obj) => {\n      this.renderObject(obj);\n    })\n  }\n\n  renderObjects(objects: RenderObject[]) {\n    for (let i = 0; i < objects.length; i++) {\n      this.renderObject(objects[i]);\n    }\n  }\n\n  renderObject(object: RenderObject) {\n\n    // prepare technique\n    const program = this.connectShading(object);\n\n    // prepare material\n    this.connectMaterial(object.material, program);\n\n    // prepare geometry\n    this.connectGeometry(object.geometry, program);\n\n    this.connectRange(object.range, program, object.geometry)\n\n    object.state.syncGL(this.renderer)\n\n    // render\n    this.renderer.render(object.drawMode, program.useIndexDraw);\n  }\n\n  renderFrameBuffer(framebuffer: GLFramebuffer, debugViewPort: Vector4) {\n    this.renderer.setRenderTargetScreen();\n    this.renderer.state.setViewport(\n      debugViewPort.x, debugViewPort.y,\n      debugViewPort.z, debugViewPort.w\n    );\n\n    this.overrideShading = copyShading;\n    this.overrideShading.getProgram(this).defineFrameBufferTextureDep(\n      framebuffer.name, 'copySource'\n    );\n    this.render(quad);\n    this.overrideShading = null;\n  }\n  ////\n\n\n\n\n  //// low level resource binding\n\n  /**\n   * GlobalUniforms is store useful inner support uniforms\n   * Engine will update these values and auto bind them to\n   * program that you will draw as needed\n   *\n   * @private\n   * @type {Map<InnerSupportUniform, UniformProxy>}\n   * @memberof RenderEngine\n   */\n  private globalUniforms: Map<InnerSupportUniform, UniformProxy> = new Map();\n  getGlobalUniform(uniform: InnerSupportUniform): UniformProxy {\n    return this.globalUniforms.get(uniform) as UniformProxy \n  }\n\n  private lastUploadedShaderUniformProvider: Set<ShaderUniformProvider> = new Set();\n  private lastProgramRendered: GLProgram;\n\n\n  private connectShading(object: RenderObject): GLProgram {\n\n    // // get shading, check override, default situation\n    let shading: Shading;\n    if (this.overrideShading !== null) {\n      shading = this.overrideShading;\n    } else if (object.shading !== undefined) {\n      shading = object.shading;\n    } else {\n      shading = this.defaultTechnique;\n    }\n\n    // get program, refresh provider cache if changed\n    const program = shading.getProgram(this);\n    if (this.lastProgramRendered !== program) {\n      this.lastUploadedShaderUniformProvider.clear();\n    }\n\n    this.renderer.useProgram(program);\n\n    this.getGlobalUniform(InnerSupportUniform.MMatrix).setValue(object.worldMatrix);\n    program.updateInnerGlobalUniforms(this); // TODO maybe minor optimize here\n\n    shading.uniformProvider.forEach(provider => {\n      if (this.lastUploadedShaderUniformProvider.has(provider)\n        && !provider.hasAnyUniformChanged \n      ) {\n        // if we found this uniform provider has updated before and not changed, we can skip!\n        return;\n      }\n      provider.uniforms.forEach((value, key) => {\n        program.setUniform(key, value);\n      })\n      provider.hasAnyUniformChanged = false;\n      this.lastUploadedShaderUniformProvider.add(provider);\n    })\n\n    return program;\n  }\n\n  private connectMaterial(material: Material, program: GLProgram) {\n\n    program.forTextures((tex: GLTextureUniform) => {\n      let glTexture: WebGLTexture | undefined;\n\n      // acquire texture from material\n      if (material !== undefined) {\n        if (tex.channel === undefined) {\n          throw 'use texture in material / use material to render should set texture uniform channel type'\n        }\n        const texture = material.getChannelTexture(tex.channel);\n        glTexture = texture.getGLTexture(this);\n      } \n\n      // acquire texture from framebuffer\n      if (glTexture === undefined) {\n        const framebufferName = program.framebufferTextureMap[tex.name];\n        if (framebufferName === undefined) {\n          throw  `cant find framebuffer for tex ${tex.name}, please define before use`\n        }\n        glTexture = this.renderer.framebufferManager.getFramebufferTexture(framebufferName);\n      }\n\n      if (glTexture === undefined) {\n        throw 'texture bind failed'\n      }\n      \n      tex.useTexture(glTexture);\n    })\n  }\n\n  private connectGeometry(geometry: Geometry, program: GLProgram) {\n    \n    // check index buffer and update program.indexUINT\n    if (program.useIndexDraw) {\n      if (geometry.indexBuffer === null) {\n        throw 'indexBuffer not found for index draw'\n      }\n      const geometryIndexBuffer = geometry.indexBuffer;\n      if (geometryIndexBuffer.data instanceof Uint32Array) {\n        program.indexUINT = true;\n      } else {\n        program.indexUINT = false;\n      }\n    }\n\n    // vao check\n    let vaoUnbindCallback: VAOCreateCallback;\n    if (this._vaoEnabled) {\n      const vaoManager = this.renderer.vaoManager;\n      const webglVAO = vaoManager.getVAO(geometry)\n      if (webglVAO === undefined && geometry.needUpdate) {\n        vaoManager.deleteVAO(geometry);\n        vaoUnbindCallback = vaoManager.createVAO(geometry);\n      } else {\n        vaoManager.useVAO(webglVAO)\n        return;\n      }\n    }\n\n    // no vao procedure\n    program.forAttributes(att => {\n      // TODO should not by name but by attributeUsage\n      const bufferData = geometry.bufferDatum[att.name];\n      if (bufferData === undefined) {\n        throw `program ${program.name} needs an attribute named ${att.name}, but cant find in geometry data`;\n      }\n      let glBuffer = this.getGLAttributeBuffer(bufferData);\n      if (glBuffer === undefined && bufferData.shouldUpdate) {\n        glBuffer = this.createOrUpdateAttributeBuffer(bufferData, false);\n        bufferData.shouldUpdate = false;\n      }\n      att.useBuffer(glBuffer);\n    })\n\n    if (program.useIndexDraw) {\n      const geometryIndexBuffer = geometry.indexBuffer;\n      let glBuffer = this.getGLAttributeBuffer(geometryIndexBuffer);\n      if (glBuffer === undefined) {\n        glBuffer = this.createOrUpdateAttributeBuffer(geometryIndexBuffer, true);\n      }\n      program.useIndexBuffer(glBuffer);\n    }\n\n\n    // create vao\n    if (this._vaoEnabled) {\n      if (vaoUnbindCallback) {\n        vaoUnbindCallback.unbind();\n        this.renderer.vaoManager.useVAO(vaoUnbindCallback.vao)\n      }\n    }\n  }\n\n  private connectRange(range: RenderRange, program: GLProgram, geometry: Geometry) {\n    let start = 0;\n    let count = 0;\n    if (range === undefined) {\n      if (geometry.indexBuffer !== null) {\n        count = geometry.indexBuffer.data.length;\n      } else {\n        throw 'range should be set if use none index geometry'\n      }\n    }\n    program.drawFrom = start;\n    program.drawCount = count;\n  }\n\n\n\n  //  GL resource acquisition\n  private programShadingMap: Map<Shading, GLProgram> = new Map();\n  getProgram(shading: Shading): GLProgram {\n    return this.programShadingMap.get(shading);\n  }\n\n  createProgram(shading: Shading): GLProgram  {\n    const program = this.renderer.createProgram(shading.getProgramConfig());\n    this.programShadingMap.set(shading, program);\n    return program;\n  }\n\n  deleteProgram(shading: Shading) {\n    const program = this.programShadingMap.get(shading);\n    if (program !== undefined) {\n      program.dispose();\n      this.programShadingMap.delete(shading);\n    }\n  }\n\n  getGLAttributeBuffer(bufferData: BufferData): WebGLBuffer {\n    return this.renderer.attributeBufferManager.getGLBuffer(bufferData.data.buffer as ArrayBuffer);\n  }\n\n  createOrUpdateAttributeBuffer(bufferData: BufferData, useForIndex: boolean): WebGLBuffer {\n    return this.renderer.attributeBufferManager.updateOrCreateBuffer(bufferData.data.buffer as ArrayBuffer, useForIndex);\n  }\n\n\n\n  downloadCurrentRender() {\n    downloadCanvasPNGImage(this.renderer.el, 'artgl-renderscreenshot');\n  }\n\n  releaseGL() {\n    this.renderer.releaseGL();\n  }\n\n  dispose() {\n    this.resizeObservable.clear();\n    this.releaseGL();\n    this.interactor.dispose();\n  }\n\n\n}","export class Accumulator {\n  constructor(size?: number) {\n    this.size = size === undefined ? 10: size;\n    this.reset();\n  }\n  private size = 10;\n  private count = 0;\n  private records: number[] = [];\n\n  private all = 0;\n\n  get average() {\n    if (this.count >= this.size) {\n      return this.all / this.size;\n    } else {\n      return this.all / this.count;\n    }\n  }\n\n  get last() {\n    return  Math.max(0, this.count - this.size) % this.size;\n  }\n\n  push(record: number) {\n    this.count++;\n\n    const current = this.count % this.size;\n\n    this.all -= this.records[this.last];\n    this.all += record;\n    this.records[current] = record;\n\n  }\n\n  reset() {\n    this.count = 0;\n    this.all = 0;\n    this.records = [];\n    for (let i = 0; i < this.size; i++) {\n      this.records.push(0);\n    }\n  }\n\n  resetWithNewSize(size: number) {\n    this.size = size;\n    this.reset();\n  }\n\n}\n","import { Nullable } from \"../type\";\nimport { Accumulator } from \"../util/accumulator\";\n\n\n/**\n * Framer is for render schedules\n *\n * @export\n * @class Framer\n */\nexport class Framer{\n\n  avgRenderFrameTimeLast120Frame: Accumulator = new Accumulator(120)\n\n  private userRenderFrame: Nullable<FrameRequestCallback> = null;\n  setFrame(frame: FrameRequestCallback) {\n    this.userRenderFrame = frame;\n  }\n\n  private renderFrame: FrameRequestCallback = (time) => {\n    this.frameStart(time);\n    if (this.userRenderFrame !== null) {\n      this.userRenderFrame(time);\n    }\n    this.frameEnd(performance.now());\n    if (this.active) {\n      this.tickId = window.requestAnimationFrame(this.renderFrame);\n    }\n  }\n  \n  active = false;\n  private tickId?: number;\n\n  run() {\n    this.active = true;\n    this.tickId = window.requestAnimationFrame(this.renderFrame);\n  }\n\n  step() {\n    if (!this.active) {\n      this.renderFrame(performance.now());\n    }\n  }\n\n  stop() {\n    this.active = false;\n    if (this.tickId !== undefined) {\n      window.cancelAnimationFrame(this.tickId);\n    }\n  }\n\n  frameStartTime = 0;\n  private frameStart(frameStartTime: number) {\n    this.frameStartTime = frameStartTime;\n  }\n\n  private frameEnd(frameEndTime: number) {\n    this.avgRenderFrameTimeLast120Frame.push(frameEndTime - this.frameStartTime)\n  }\n  \n}","import { RenderObject } from \"../core/render-object\";\nimport { DrawMode } from \"../webgl/const\";\n\nexport class Line extends RenderObject{\n  constructor() {\n    super();\n    this.drawMode = DrawMode.LINES;\n  }\n\n}","import { RenderObject } from \"../core/render-object\";\nimport { DrawMode } from \"../webgl/const\";\n\nexport class Points extends RenderObject{\n  constructor() {\n    super();\n    this.drawMode = DrawMode.POINTS\n  }\n\n}","import { Texture, DataTexture } from \"./texture\";\nimport { generateUUID } from \"../math/uuid\";\nimport { Vector3 } from \"../math/index\";\n\nexport const enum ChannelType{\n  diffuse = 'diffuse',\n  roughness = 'roughness',\n  metallic = 'metallic',\n  ao = 'ao'\n}\n\n\n/**\n * Material is collection of textures\n * contains bitmap render data\n * @export\n * @class Material\n */\nexport class Material{\n\n  uuid = generateUUID();\n  private channels: Map<ChannelType, Texture> = new Map();\n\n  setChannelColor(channel: ChannelType, color: Vector3) {\n    let channelTexture = this.channels.get(channel);\n    if (channelTexture === undefined) {\n      channelTexture = generateTextureToPureColor(color);\n    } else {\n      updateTextureToPureColor(channelTexture, color);\n    }\n  }\n\n  setChannelTexture(channel: ChannelType, texture: Texture) {\n    this.channels.set(channel, texture);\n  }\n\n  getChannelTexture(type: ChannelType): Texture {\n    const texture = this.channels.get(type);\n    if (texture === undefined) {\n      throw 'cant get channel texture'\n    }\n    return texture;\n  }\n\n}\n\nfunction generateTextureToPureColor(color: Vector3): Texture {\n  const texture = new DataTexture(); \n  const R = Math.floor(color.x * 256);\n  const G = Math.floor(color.y * 256);\n  const B = Math.floor(color.z * 256);\n  texture.data = new Uint8ClampedArray([\n    R, G, B, R, G, B, R, G, B, R, G, B, \n  ]);\n  return texture;\n}\n\nfunction updateTextureToPureColor(texture: Texture, color: Vector3): Texture {\n  return texture;\n}","import { Vector4 } from \"../math/vector4\";\nimport { Nullable } from \"../type\";\nimport { RenderSource } from \"../engine/render-engine\";\nimport { PixelFormat } from \"../webgl/const\";\nimport { Shading } from \"../core/shading\";\nexport interface GraphDefine {\n  passes: PassDefine[],\n  renderTargets: RenderTargetDefine[];\n}\n\nexport interface PassInputMapInfo{\n  [index:string]: string\n}\n\nexport interface PassDefine {\n  name: string,\n  inputs?: () => PassInputMapInfo,\n  source: RenderSource[],\n  filter?: () => boolean,\n  sorter?: () => number,\n  states?: stateType[],\n  shading?: Shading,\n  enableColorClear?:boolean,\n  enableDepthClear?:boolean,\n  clearColor?: Vector4,\n  afterPassExecute?: () => any,\n  beforePassExecute?: () => any,\n}\n\nexport enum DimensionType {\n  bindRenderSize,\n  fixed\n}\n\nexport interface RenderTargetDefine {\n  name: string,\n  from: () => Nullable<string>\n  format?: {\n    pixelFormat: PixelFormat,\n    dimensionType: DimensionType,\n    width?: number,\n    height?: number,\n    disableDepthBuffer?: boolean\n  }\n}\n\nexport interface SourceDefine {\n  name: string,\n  from: string,\n  filter?: () => boolean,\n  transformer?: () => void,\n  sorter?: () => number,\n}\n\nenum stateType {\n  DisableColorWrite,\n  DisableAlphaWrite\n}\n","import { RenderObject } from \"../core/render-object\";\nimport { Nullable } from \"../type\";\n\nexport class RenderList {\n\n  private list: Nullable<RenderObject>[] = [];\n  private realLength: number = 0;\n\n  public addRenderItem(object: RenderObject) {\n    if (this.realLength < this.list.length) {\n      this.list[this.realLength] = object;\n    } else {\n      this.list.push(object);\n    }\n    this.realLength++;\n  }\n\n  forEach(visitor: (object: RenderObject) => any) {\n    for (let i = 0; i < this.realLength; i++) {\n      visitor(this.list[i] as RenderObject);\n    }\n  }\n\n  renderListCursor: number = 0;\n  next() {\n    if (this.renderListCursor >= this.list.length) {\n      return null;\n    }\n    const item = this.list[this.renderListCursor];\n    this.renderListCursor++;\n    return item\n  }\n\n  reset() {\n    this.realLength = 0;\n  }\n\n  resetCursor() {\n    this.renderListCursor = 0;\n  }\n\n  clear() {\n    this.list = [];\n  }\n\n  sort(){\n    \n  }\n\n\n}","import { SceneNode } from \"./scene-node\";\nimport { RenderObject } from \"../core/render-object\";\nimport { RenderSource } from \"../engine/render-engine\";\nimport { RenderList } from \"../engine/render-list\";\nimport { GeometryLoader } from \"../core/loader\";\n\n/**\n * scene data management\n * contains full scene tree, and other scene data\n * also responsible for list structure cache for performance\n * @export\n * @class Scene\n */\nexport class Scene implements RenderSource {\n  root: SceneNode = new SceneNode();\n  \n\n  objectList: RenderList = new RenderList();\n  // mark scene structure changed between frame render\n  isFrameStructureChange: boolean = true;\n  isFrameTransformChange: boolean = true;\n  isFrameVisibleChange: boolean = true;\n  get isFrameChange(){\n    return this.isFrameStructureChange || this.isFrameTransformChange || this.isFrameVisibleChange\n  }\n  onRemoveList: Set<SceneNode> = new Set();\n  onAddList: Set<SceneNode> = new Set();\n\n  addNode(object: SceneNode) {\n    this.onRemoveList.delete(object);\n    this.onAddList.add(object);\n    this.isFrameStructureChange = true;\n  }\n\n  removeNode(object: SceneNode) {\n    this.onAddList.delete(object);\n    this.onRemoveList.add(object);\n    this.isFrameStructureChange = true;\n  }\n\n  updateSource() {\n    if (this.isFrameStructureChange) {\n      this.updateObjectList();\n    }\n  }\n\n  resetSource() {\n    this.objectList.resetCursor();\n  }\n\n  nextRenderable() {\n    return this.objectList.next();\n  }\n\n  updateObjectList() { \n    // TODO optimize\n    this.objectList.reset();\n    this.onRemoveList.clear();\n    this.onAddList.clear();\n    this.root.traverse((node) => {\n      node.scene = this;\n      if (this.isFrameStructureChange || this.isFrameTransformChange) {\n        if (node.parent !== null) {\n          node._worldMatrix.multiplyMatrices(node.parent._worldMatrix, node.transform.matrix);\n        } else {\n          node._worldMatrix.copy(node.transform.matrix);\n        }\n      }\n      if (node instanceof RenderObject) {\n        this.objectList.addRenderItem(node);\n      }\n    });\n    this.isFrameStructureChange = false;\n    this.isFrameTransformChange = false;\n    this.isFrameVisibleChange = false;\n\n  }\n\n  updateWorldMatrix() {\n    this.root.updateWorldMatrix(true);\n  }\n\n  setRootNode(node: SceneNode) {\n    if (node.scene) {\n      throw 'node has set to scene, abort';\n    }\n    this.root = node;\n    this.isFrameStructureChange = true;\n  }\n\n  disposeRootNode() {\n    if (!this.root) {\n      throw 'scene hasn\\'t root';\n    }\n    this.root.traverse((node) => {\n      node.scene = null;\n    });\n    this.root = null;\n  }\n\n  registGeometryLoader(loader: GeometryLoader) {\n    \n  }\n\n}","import { GLFramebuffer } from \"../webgl/gl-framebuffer\";\nimport { RenderEngine } from \"../engine/render-engine\";\nimport { RenderGraph } from \"./render-graph\";\nimport { PassDefine, PassInputMapInfo } from \"./interface\";\nimport { RenderTargetNode } from \"./node/render-target-node\";\nimport { Vector4 } from \"../math/vector4\";\nimport { Nullable } from \"../type\";\nimport { Shading } from \"../core/shading\";\n\nexport class RenderPass{\n  constructor(define: PassDefine) {\n    this.define = define;\n    this.name = define.name;\n    if (define.shading !== undefined) {\n      const overrideShading = define.shading;\n      if (overrideShading === undefined) {\n        throw `technique '${define.shading}' not defined`\n      }\n      this.overrideShading = overrideShading;\n    }\n\n    this.clearColor = define.clearColor;\n    this.enableColorClear = define.enableColorClear === undefined ? true : define.enableColorClear\n    this.enableDepthClear = define.enableDepthClear === undefined ? true : define.enableDepthClear\n\n    this.beforePassExecute = define.beforePassExecute;\n    this.afterPassExecute = define.afterPassExecute;\n\n  }\n\n  updateInputTargets(inputs: PassInputMapInfo) {\n    this.inputTarget.clear();\n    Object.keys(inputs).forEach(inputKey => {\n      const mapTo = inputs[inputKey];\n      this.inputTarget.set(inputKey, mapTo)\n    })\n  }\n\n  readonly define: PassDefine;\n  public name: string;\n\n  private clearColor: Vector4;\n  private enableDepthClear: boolean = true;\n  private enableColorClear: boolean = true;\n\n  private afterPassExecute?: () => any;\n  private beforePassExecute?: () => any;\n  \n  private overrideShading: Nullable<Shading> = null;\n\n  // key: uniformName ;   value: inputFramebufferName\n  private inputTarget: Map<string, string> = new Map();\n  private outputTarget: GLFramebuffer\n\n\n  setOutPutTarget(engine: RenderEngine, renderTargetNode: RenderTargetNode) {\n    if (renderTargetNode.name === RenderGraph.screenRoot) {\n      this.outputTarget = undefined;\n      this.isOutputScreen = true;\n    } else {\n      this.outputTarget = renderTargetNode.getOrCreateFrameBuffer(engine);\n      this.isOutputScreen = false;\n    }\n  }\n  private isOutputScreen: boolean = true;\n\n  renderDebugResult(engine: RenderEngine, graph: RenderGraph) {\n    const debugOutputViewport = graph.renderTargetNodes.get(this.outputTarget.name).debugViewPort;\n    engine.renderFrameBuffer(this.outputTarget, debugOutputViewport)\n    // this will cause no use draw TODO optimize\n    this.inputTarget.forEach((inputFramebufferName, _uniformName) => {\n      const framebuffer = engine.renderer.framebufferManager.getFramebuffer(inputFramebufferName);\n      const debugInputViewport = graph.renderTargetNodes.get(framebuffer.name).debugViewPort;\n      engine.renderFrameBuffer(framebuffer, debugInputViewport)\n    })\n  } \n\n  execute(engine: RenderEngine, graph: RenderGraph) {\n\n    // setup viewport and render target\n    if (this.isOutputScreen) {\n      engine.renderer.setRenderTargetScreen();\n      if (graph.enableDebuggingView) {\n        const debugViewPort = graph.screenNode.debugViewPort;\n        engine.renderer.state.setViewport(\n          debugViewPort.x, debugViewPort.y,\n          debugViewPort.z, debugViewPort.w\n        );\n\n      } else {\n        engine.renderer.state.setFullScreenViewPort();\n      }\n    } else {\n      engine.renderer.setRenderTarget(this.outputTarget);\n      engine.renderer.state.setViewport(0, 0, this.outputTarget.width, this.outputTarget.height);\n    }\n  \n    // input binding \n    if (this.overrideShading !== null) {\n      engine.overrideShading = this.overrideShading;\n      this.inputTarget.forEach((inputFramebufferName, uniformName) => {\n        (engine.overrideShading as Shading).getProgram(engine).defineFrameBufferTextureDep(\n          inputFramebufferName, uniformName\n        );\n      })\n    }\n\n    // clear setting\n    if (this.enableColorClear) {\n      if (this.clearColor !== undefined) {\n        engine.renderer.state.colorbuffer.setClearColor(this.clearColor);\n      }\n      engine.renderer.state.colorbuffer.clear();\n    }\n    if (this.enableDepthClear) {\n      if (!this.isOutputScreen && this.outputTarget.enableDepth) {\n        engine.renderer.state.depthbuffer.clear();\n      }\n    }\n\n    if (this.beforePassExecute !== undefined) {\n      this.beforePassExecute();\n    }\n\n    //////  render //////\n    this.define.source.forEach(source => {\n      engine.render(source);\n    })\n    /////////////////////\n\n    if (this.afterPassExecute !== undefined) {\n      this.afterPassExecute();\n    }\n\n    engine.overrideShading = null;\n    engine.renderer.state.colorbuffer.resetDefaultClearColor();\n\n\n    if (graph.enableDebuggingView && !this.isOutputScreen) {\n      this.renderDebugResult(engine, graph);\n    }\n\n  }\n\n  checkIsValid() {\n    if (this.isOutputScreen) {\n      return\n    }\n    const target = this.outputTarget.name;\n    this.inputTarget.forEach(input => {\n      if (input === target) {\n        throw `you cant output to the render target which is depend on: \nDuplicate target: ${this.outputTarget.name};`\n      }\n    })\n  }\n}","import { PassDefine, GraphDefine, RenderTargetDefine } from \"./interface\";\nimport { PassGraphNode } from \"./node/pass-graph-node\";\nimport { RenderTargetNode } from \"./node/render-target-node\";\nimport { RenderEngine } from \"../engine/render-engine\";\nimport { QuadSource } from './quad-source';\nimport { RenderPass } from \"./pass\";\n\n\nexport type RenderGraphNode = PassGraphNode | RenderTargetNode;\n\nexport class EffectComposer {\n\n  private passes: RenderPass[] = [];\n  private nodeMap: Map<PassGraphNode, RenderPass> = new Map();\n\n  render(engine: RenderEngine, graph: RenderGraph) {\n    this.passes.forEach(pass => {\n      pass.execute(engine, graph);\n    });\n  }\n\n  reset() {\n    this.passes = [];\n  }\n\n  addPass(pass: RenderPass) {\n    this.passes.push(pass);\n  }\n\n  registerNode(node: PassGraphNode, define: PassDefine ) {\n    const pass = new RenderPass(define)\n    this.nodeMap.set(node, pass);\n  }\n\n  clear() {\n    this.passes = [];\n    this.nodeMap.clear();\n  }\n\n  getPass(node: PassGraphNode): RenderPass {\n    return this.nodeMap.get(node);\n  }\n\n}\n\n\n\nexport class RenderGraph {\n\n  static screenRoot: string = 'artgl-rendergraph-screen-rt';\n  static quadSource = new QuadSource();\n\n  enableDebuggingView: boolean = false;\n\n  screenNode: RenderTargetNode;\n  renderTargetNodes: Map<string, RenderTargetNode> = new Map();\n  passNodes: Map<string, PassGraphNode> = new Map();\n\n  get nodes() {\n    const nodes = [];\n    this.passNodes.forEach(node => {\n      nodes.push(node);\n    })\n    this.renderTargetNodes.forEach(node => {\n      nodes.push(node);\n    })\n    return nodes;\n  }\n\n  /**\n   * Clear the graph pass info as needed\n   *\n   * @memberof RenderGraph\n   */\n  reset() {\n    this.renderTargetNodes.clear();\n    this.passNodes.clear();\n  }\n\n  /**\n   * Setup a new Graph configuration\n   *\n   * @param {GraphDefine} graphDefine\n   * @memberof RenderGraph\n   */\n  defineGraph(composer: EffectComposer, graphDefine: GraphDefine): void {\n    this.reset();\n    this.allocateRenderTargetNodes(graphDefine.renderTargets);\n    this.constructPassGraph(graphDefine.passes, composer);\n  }\n\n  /**\n   * Update the pass queue from current graph configure\n   *\n   * @memberof RenderGraph\n   */\n  update(engine: RenderEngine, composer: EffectComposer) {\n    \n    //updateNodesConnection\n    this.passNodes.forEach(node => {\n      node.updateDependNode(this);\n    });\n    this.renderTargetNodes.forEach(node => {\n      node.updateDependNode(this);\n    });\n\n    // update pass queue\n    const nodeQueue = this.screenNode.generateDependencyOrderList() as RenderGraphNode[];\n    composer.reset();\n    nodeQueue.forEach(node => {\n      if (node instanceof RenderTargetNode) {\n        node.updateSize(engine);\n      }\n    })\n    nodeQueue.forEach(node => {\n      if (node instanceof PassGraphNode) {\n        const pass = composer.getPass(node);\n        if (pass === undefined) {\n          throw \"err\" // TODO\n        }\n        node.updatePass(engine, pass, nodeQueue);\n        composer.addPass(pass);\n      }\n    })\n  }\n\n  private constructPassGraph(passesDefine: PassDefine[], composer: EffectComposer) {\n    passesDefine.forEach(define => {\n      if (!this.passNodes.has(define.name)) {\n        const node = new PassGraphNode(this, define);\n        this.passNodes.set(define.name, node);\n        composer.registerNode(node, define);\n      } else {\n        throw 'duplicate pass define found'\n      }\n    })\n  }\n\n  getRenderTargetDependence(name: string): RenderTargetNode {\n    return this.renderTargetNodes.get(name);\n  }\n\n  getRenderPassDependence(name: string): PassGraphNode {\n    return this.passNodes.get(name);\n  }\n\n  getRootScreenTargetNode() {\n    let screenNode;\n    this.renderTargetNodes.forEach(node => {\n      if (node.isScreenNode) {\n        screenNode = node;\n      }\n    })\n    return screenNode;\n  }\n\n  private allocateRenderTargetNodes(textsDefine: RenderTargetDefine[]) {\n    textsDefine.forEach(define => {\n      if (this.renderTargetNodes.has(define.name)) {\n        throw 'render graph build error, duplicate texture key name found '\n      }\n      const renderTargetNode = new RenderTargetNode(define);\n      if (define.name === RenderGraph.screenRoot) {\n        if (this.screenNode !== undefined) {\n          throw \"duplicate screen root node\"\n        }\n        this.screenNode = renderTargetNode\n      }\n      this.renderTargetNodes.set(define.name, renderTargetNode);\n    })\n\n    if (this.screenNode === undefined) {\n      throw \"screen root not found\"\n    }\n  }\n\n}","import { DAGNode } from \"../../core/dag-node\";\nimport { RenderTargetDefine, DimensionType } from \"../interface\";\nimport { RenderGraph } from \"../render-graph\";\nimport { GLFramebuffer } from \"../../webgl/gl-framebuffer\";\nimport { MathUtil } from '../../math/util'\nimport { RenderEngine } from \"../../engine/render-engine\";\nimport { Nullable } from \"../../type\";\nimport { Vector4 } from '../../math/vector4';\nimport { PixelFormat } from \"../../webgl/const\";\n\nexport class RenderTargetNode extends DAGNode{\n  constructor(define: RenderTargetDefine) {\n    super();\n    this.name = define.name;\n    this.define = define;\n\n    this.fromGetter = define.from;\n\n    this.isScreenNode = define.name === RenderGraph.screenRoot;\n    if (this.isScreenNode) {\n      return\n    }\n\n    // set a default format config\n    if (define.format === undefined) {\n      define.format = {\n        pixelFormat: PixelFormat.RGBA,\n        dimensionType: DimensionType.bindRenderSize,\n      }\n    }\n\n    if (define.format.dimensionType === DimensionType.bindRenderSize) {\n      this.autoWidthRatio = define.format.width !== undefined ? MathUtil.clamp(define.format.width, 0, 1) : 1;\n      this.autoHeightRatio = define.format.height !== undefined ? MathUtil.clamp(define.format.height, 0, 1) : 1;\n    }\n    this.enableDepth = define.format.disableDepthBuffer !== undefined ? define.format.disableDepthBuffer : true;\n    \n  }\n  readonly isScreenNode: boolean;\n  readonly name: string;\n  readonly define: RenderTargetDefine;\n\n  debugViewPort: Vector4 = new Vector4(0, 0, 200, 200);\n\n  autoWidthRatio: number = 0;\n  autoHeightRatio: number = 0;\n  enableDepth: boolean = true;\n\n  widthAbs: number = 0;\n  heightAbs: number = 0;\n\n  private fromGetter: () => Nullable<string>\n  private from: string = null;\n\n  getOrCreateFrameBuffer(engine: RenderEngine): GLFramebuffer {\n    const f = engine.renderer.framebufferManager.getFramebuffer(this.name);\n    if (f) {\n      return f\n    } else {\n      return engine.renderer.framebufferManager.createFrameBuffer(\n        engine, this.name, this.widthAbs, this.heightAbs, this.enableDepth);\n    }\n  }\n\n  updateSize(engine: RenderEngine) {\n    if (this.isScreenNode) {\n      return;\n    }\n    const define = this.define;\n    let width: number;\n    let height: number;\n    // decide initial size and create resize observer\n    if (define.format.dimensionType === DimensionType.fixed) {\n      width = define.format.width !== undefined ? define.format.width : engine.renderer.width;\n      height = define.format.height !== undefined ? define.format.height : engine.renderer.height;\n    } else { //  === DimensionType.bindRenderSize\n      width = Math.max(5, engine.renderer.width * this.autoWidthRatio);\n      height = Math.max(5, engine.renderer.height * this.autoHeightRatio);\n    }\n    this.widthAbs = Math.max(5, width);\n    this.heightAbs = Math.max(5, height);\n    \n    this.getOrCreateFrameBuffer(engine).resize(engine, width, height);\n  }\n\n  updateDependNode(graph: RenderGraph) {\n    \n    // disconnect depends pass node\n    this.clearAllFrom();\n\n    this.from = this.fromGetter();\n\n    if (this.from !== null) {\n      const passNode = graph.getRenderPassDependence(this.from);\n      passNode.connectTo(this);\n    }\n    \n  }\n\n}","import { DAGNode } from \"../../core/dag-node\";\nimport { PassDefine, PassInputMapInfo } from \"../interface\";\nimport { RenderGraph, RenderGraphNode } from \"../render-graph\";\nimport { RenderPass } from \"../pass\";\nimport { RenderTargetNode } from './render-target-node';\nimport { Nullable } from \"../../type\";\nimport { RenderEngine } from \"../../engine/render-engine\";\n\nexport class PassGraphNode extends DAGNode {\n  constructor(graph: RenderGraph, define: PassDefine) {\n    super();\n    this.name = define.name;\n\n    if (define.inputs !== undefined) {\n      this.inputsGetter = define.inputs;\n    }\n\n  }\n  private inputsGetter: Nullable<() => PassInputMapInfo> = null\n  inputs: PassInputMapInfo = {}\n  readonly name: string;\n\n  updateDependNode(graph: RenderGraph) {\n    // disconnect all depends node \n    this.clearAllFrom();\n\n    // reval getter\n    if (this.inputsGetter !== null) {\n      this.inputs = this.inputsGetter();\n    }\n    const inputs = this.inputs;\n    // connect new depends node\n    Object.keys(inputs).forEach(inputUniformKey => {\n      const framebufferName = inputs[inputUniformKey]\n      const renderTargetNode = graph.getRenderTargetDependence(framebufferName);\n      if (renderTargetNode === undefined) {\n        throw `render graph updating error, renderTarget depend node ${framebufferName} cant found`;\n      }\n      renderTargetNode.connectTo(this);\n    })\n  }\n\n  updatePass(engine: RenderEngine, pass: RenderPass, activeNodes: RenderGraphNode[]) {\n    pass.updateInputTargets(this.inputs);\n    let foundedNode = null;\n    if (this.toNodes.size === 0) {\n      throw \"cant found render target node for a render pass\"\n    }\n    this.toNodes.forEach(node => {\n      if (node instanceof RenderTargetNode) {\n        for (let i = 0; i < activeNodes.length; i++) {\n          if (activeNodes[i] === node) {\n            if (foundedNode !== null) {\n              throw `RenderGraph update error: one target node should only has one pass targeted;\nprevious found target pass: ${foundedNode.name};\nnew found target pass: ${activeNodes[i].name};\n              `\n            }\n            foundedNode = node\n            pass.setOutPutTarget(engine, node);\n          }\n        }\n      }\n    })\n    pass.checkIsValid();\n  }\n\n}","import { BaseEffectShading } from \"../../core/shading\";\nimport { MVPWorld } from \"../../shader-graph/node-maker\";\nimport { ShaderFunction } from \"../../shader-graph/shader-function\";\nimport { NormalFragVary, ShaderGraph } from \"../../shader-graph/shader-graph\";\nimport { DepthShading } from './depth';\n\n\nconst normalShading = new ShaderFunction({\n  source:\n    `vec4 normalShading(vec3 normal){\n      return vec4(normal * 0.5 + 0.5, 1.0);\n    }`\n})\n\nexport class NormalShading extends BaseEffectShading<DepthShading> {\n\n  decorate(graph: ShaderGraph): void {\n    graph\n      .setVertexRoot(MVPWorld())\n      .declareFragNormal()\n      .setFragmentRoot(\n        normalShading.make().input(\"normal\", graph.getVary(NormalFragVary))\n      )\n  }\n\n}","import { ShaderFunction } from \"../shader-function\";\n\nexport const depthPack = new ShaderFunction({\n  description: 'pack depth to RGBA output',\n  source: `\n    vec4 depthPack(float frag_depth){\n      vec4 bitSh = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n      vec4 bitMsk = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n      vec4 enc = fract(frag_depth * bitSh);\n      enc -= enc.xxyz * bitMsk;\n      return enc;\n    }\n  `,\n})\n\nexport const unPackDepth = new ShaderFunction({\n  description: 'unpack depth from RGBA channel',\n  source: `\n  float UnpackDepth( vec4 enc ) {\n    const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n    return dot( enc, bit_shift );\n}`\n})","import { ShaderFunction } from \"../shader-function\";\n\nexport const rand = new ShaderFunction({\n  source: `float rand(float n) {return fract(sin(n) * 43758.5453123);}`\n})\n\nexport const rand2D = new ShaderFunction({\n  source: `\n  float rand(vec2 cood){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n  `\n})\n\nexport const rand2DT = new ShaderFunction({\n  source: `\n  float rand(vec2 cood, float t){\n    vec2 co = cood;\n    co.x = sin(t) + co.x;\n    co.y = cos(t) + co.y;\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n  `\n})\n","import { MapUniform, BaseEffectShading } from \"../../core/shading\";\nimport { InnerSupportUniform } from \"../../webgl/uniform/uniform\";\nimport { texture, innerUniform, screenQuad } from \"../../shader-graph/node-maker\";\nimport { ShaderFunction } from \"../../shader-graph/shader-function\";\nimport { unPackDepth } from \"../../shader-graph/built-in/depth-pack\";\nimport { dir3D } from \"../../shader-graph/built-in/transform\";\nimport { getWorldPosition, NDCxyToUV } from \"../../shader-graph/built-in/transform\";\nimport { Matrix4 } from \"../../math/index\";\nimport { rand2DT, rand } from \"../../shader-graph/built-in/rand\";\nimport { UvFragVary, ShaderGraph } from '../../shader-graph/shader-graph';\n\nconst newSamplePosition = new ShaderFunction({\n  source: `\n  vec3 newPosition(vec3 positionOld, float distance, vec3 dir){\n    return distance * dir + positionOld;\n  }\n  `\n})\n\nconst NDCFromWorldPositionAndVPMatrix = new ShaderFunction({\n  source: `\n  vec3 depthFromWorldPositionAndVPMatrix(vec3 position, mat4 matrix){\n    vec4 ndc = matrix * vec4(position, 1.0);\n    ndc = ndc / ndc.w;\n    return ndc.xyz;\n  }\n  `\n})\n\nconst sampleAO = new ShaderFunction({\n  source: `\n  vec3 sampleAO(float depth, float newDepth){\n    if (depth >0.999){\n      return vec3(0.5);\n    }\n    float rate =  depth > newDepth ? 0.0 : 1.0;\n    return vec3(rate);\n  }\n  `\n})\n\nconst tssaoMix = new ShaderFunction({\n  source: `\n  vec4 tssaoMix(vec3 oldColor, vec3 newColor, float sampleCount){\n    return vec4((oldColor * sampleCount + newColor) / (sampleCount + 1.0), 1.0);\n  }\n  `\n})\n\nexport class TSSAOShading extends BaseEffectShading<TSSAOShading> {\n  \n  @MapUniform(\"u_sampleCount\")\n  sampleCount: number = 0;\n\n  @MapUniform(\"VPMatrixInverse\")\n  VPMatrixInverse: Matrix4 = new Matrix4()\n\n  @MapUniform(\"u_aoRadius\")\n  aoRadius: number = 1\n\n  decorate(graph: ShaderGraph) {\n    const VPMatrix = innerUniform(InnerSupportUniform.VPMatrix);\n    const sampleCount = this.getPropertyUniform(\"sampleCount\");\n    const depthTex = texture(\"depthResult\");\n    graph\n      .setVertexRoot(screenQuad())\n      .declareFragUV()\n\n    const vUV = graph.getVary(UvFragVary);\n    const depth = unPackDepth.make().input(\"enc\", depthTex.fetch(vUV))\n\n    const worldPosition = getWorldPosition.make()\n      .input(\"uv\", vUV)\n      .input(\"depth\", depth)\n      .input(\"VPMatrix\", VPMatrix)\n      .input(\"VPMatrixInverse\", this.getPropertyUniform(\"VPMatrixInverse\"))\n\n    const Random2D1 = rand2DT.make()\n      .input(\"cood\", vUV)\n      .input(\"t\", sampleCount)\n    \n    const Random2D2 = rand.make()\n    .input(\"n\", Random2D1)\n    \n    const randDir = dir3D.make()\n      .input(\"x\", Random2D1)\n      .input(\"y\", Random2D2)\n\n    const newPositionRand = newSamplePosition.make()\n      .input(\"positionOld\", worldPosition.swizzling(\"xyz\"))\n      .input(\"distance\", this.getPropertyUniform(\"aoRadius\"))\n      .input(\"dir\", randDir)\n\n    const newDepth = unPackDepth.make()\n      .input(\"enc\",\n        depthTex.fetch(\n          NDCxyToUV.make()\n            .input(\n              \"ndc\", NDCFromWorldPositionAndVPMatrix.make()\n                .input(\n                  \"position\", newPositionRand\n                ).input(\n                  \"matrix\", VPMatrix\n                )\n            )\n        )\n      )\n\n    graph.setFragmentRoot(\n      tssaoMix.make()\n        .input(\"oldColor\", texture(\"AOAcc\").fetch(vUV).swizzling(\"xyz\"))\n        .input(\"newColor\",\n          sampleAO.make()\n            .input(\"depth\", depth)\n            .input(\"newDepth\", newDepth)\n        )\n        .input(\"sampleCount\", sampleCount)\n    )\n  }\n}","import { BaseEffectShading, MapUniform } from \"../../core/shading\";\nimport { ShaderFunction } from \"../../shader-graph/shader-function\";\nimport { texture, screenQuad } from \"../../shader-graph/node-maker\";\nimport { UvFragVary, ShaderGraph } from '../../shader-graph/shader-graph';\n\nconst tssaoBlend = new ShaderFunction({\n  source: `\n  vec4 tssaoBlend(\n    vec3 color, \n    vec3 aoColor, \n    float sampleCount, \n    float tssaoComposeRate,\n    float tssaoShowThreshold,\n    float tssaoComposeThreshold\n    ) {\n    vec3 aoModify = vec3(1.0) - tssaoComposeRate * (vec3(1.0) - aoColor) * vec3(min(sampleCount / tssaoShowThreshold, 1.0));\n    aoModify = clamp(aoModify + vec3(tssaoComposeThreshold), vec3(0.0), vec3(1.0));\n    return vec4(color * aoModify, 1.0);\n  }\n  `\n})\n\nexport class TSSAOBlendShading extends BaseEffectShading<TSSAOBlendShading> {\n\n  @MapUniform(\"u_sampleCount\")\n  sampleCount: number = 0;\n\n  @MapUniform(\"u_tssaoComposeRate\")\n  tssaoComposeRate: number = 1;\n\n  @MapUniform(\"u_tssaoShowThreshold\")\n  tssaoShowThreshold: number = 200;\n\n  @MapUniform(\"u_tssaoComposeThreshold\")\n  tssaoComposeThreshold: number = 0.5;\n\n  decorate(graph: ShaderGraph) {\n    graph\n      .setVertexRoot(screenQuad())\n      .declareFragUV()\n      .setFragmentRoot(\n        tssaoBlend.make()\n          .input(\"color\", texture(\"basic\").fetch(graph.getVary(UvFragVary)).swizzling(\"xyz\"))\n          .input(\"aoColor\", texture(\"tssao\").fetch(graph.getVary(UvFragVary)).swizzling(\"xyz\"))\n          .input('sampleCount', this.getPropertyUniform('sampleCount'))\n          .input('tssaoComposeRate', this.getPropertyUniform('tssaoComposeRate'))\n          .input('tssaoShowThreshold', this.getPropertyUniform('tssaoShowThreshold'))\n          .input('tssaoComposeThreshold', this.getPropertyUniform('tssaoComposeThreshold'))\n      )\n  }\n\n}","import { BaseEffectShading } from \"../../core/shading\";\nimport { MVPWorld } from \"../../shader-graph/node-maker\";\nimport { ShaderFunction } from \"../../shader-graph/shader-function\";\nimport { depthPack } from \"../../shader-graph/built-in/depth-pack\";\nimport { ShaderGraph } from \"../../shader-graph/shader-graph\";\n\n\nconst depthV = new ShaderFunction(\n  {\n    source: `\n    float depthVary(vec4 worldPosition){\n      return worldPosition.z / worldPosition.w;\n    }\n    `}\n)\n\nexport class DepthShading extends BaseEffectShading<DepthShading> {\n\n  decorate(graph: ShaderGraph): void {\n    const worldPosition = MVPWorld()\n    graph.setVertexRoot(worldPosition)\n      .setVary(\"depth\", depthV.make().input(\"worldPosition\", worldPosition))\n      .setFragmentRoot(\n        depthPack.make().input(\"frag_depth\", graph.getVary(\"depth\"))\n      )\n  }\n\n}","import { BaseEffectShading, MapUniform } from \"../../core/shading\";\nimport { Matrix4 } from \"../../math/matrix4\";\nimport { InnerSupportUniform } from \"../../webgl/uniform/uniform\";\nimport { ShaderFunction } from \"../../shader-graph/shader-function\";\nimport { texture, innerUniform, screenQuad } from \"../../shader-graph/node-maker\";\nimport { NDCxyToUV, getLastPixelNDC, UVDepthToNDC } from \"../../shader-graph/built-in/transform\";\nimport { unPackDepth } from \"../../shader-graph/built-in/depth-pack\";\nimport { UvFragVary, ShaderGraph } from '../../shader-graph/shader-graph';\n\nconst TAAMix = new ShaderFunction({\n  source:\n    `\n  vec4 TAAMix (vec3 oldColor, vec3 newColor, float sampleCount){\n    float rate = 0.05;\n    // return vec4(newColor * rate + (1.0 - rate) * oldColor, 1.0);\n    \n    return vec4((oldColor * sampleCount + newColor) / (sampleCount + 1.0), 1.0);\n\n    // need figure out how to clamp color\n    // if(sampleCount < 0.1){\n    //   // vec3 clampedOldColor = getClampColor(v_uv, oldColor);\n    //   // return vec4(newColor * rate + (1.0 - rate) * clampedOldColor, 1.0);\n    //   return vec4(newColor * rate + (1.0 - rate) * oldColor, 1.0);\n    // } else{\n    //   return vec4((oldColor * sampleCount + newColor) / (sampleCount + 1.0), 1.0);\n    // }\n\n  }\n    `\n})\n\nexport class TAAShading extends BaseEffectShading<TAAShading> {\n\n  @MapUniform(\"VPMatrixInverse\")\n  VPMatrixInverse: Matrix4 = new Matrix4()\n\n  @MapUniform(\"u_sampleCount\")\n  sampleCount: number = 0;\n\n  decorate(graph: ShaderGraph) {\n    graph\n      .setVertexRoot(screenQuad())\n      .declareFragUV()\n\n    const vUV = graph.getVary(UvFragVary);\n    const depth = unPackDepth.make().input(\"enc\", texture(\"depthResult\").fetch(vUV))\n\n    const colorOld = texture(\"TAAHistoryOld\").fetch(\n      NDCxyToUV.make().input(\"ndc\",\n        getLastPixelNDC.make()\n          .input(\"ndc\",\n            UVDepthToNDC.make()\n              .input(\"depth\", depth)\n              .input(\"uv\", graph.getVary(UvFragVary))\n          )\n          .input(\"VPMatrixInverse\", this.getPropertyUniform(\"VPMatrixInverse\"))\n          .input(\"LastVPMatrix\", innerUniform(InnerSupportUniform.LastVPMatrix))\n      )\n    )\n\n    graph.setFragmentRoot(\n      TAAMix.make()\n        .input(\"oldColor\", colorOld.swizzling(\"xyz\"))\n        .input(\"newColor\", texture(\"sceneResult\").fetch(vUV).swizzling(\"xyz\"))\n        .input(\"sampleCount\", this.getPropertyUniform(\"sampleCount\"))\n    )\n\n  }\n\n}","\nimport { Vector3 } from '../../math/index';\nimport { StandardGeometry } from '../standard-geometry';\n\n\nexport class SphereGeometry extends StandardGeometry {\n  constructor(radius?: number, widthSegments?: number, heightSegments?: number,\n    phiStart?: number, phiLength?: number, thetaStart?: number, thetaLength?: number) {\n    super();\n    this.radius = radius !== undefined ? radius : 1;\n    this.widthSegments = Math.max(3, Math.floor(widthSegments) || 8);\n    this.heightSegments = Math.max(2, Math.floor(heightSegments) || 6);\n    this.phiStart = phiStart !== undefined ? phiStart : 0;\n    this.phiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n    this.thetaStart = thetaStart !== undefined ? thetaStart : 0;\n    this.thetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n    this.thetaEnd = this.thetaStart + this.thetaLength;\n\n    this.populate();\n  }\n  name = 'SphereGeometry'\n  radius = 1;\n  widthSegments = 10;\n  heightSegments = 10;\n  phiStart = 0;\n  phiLength = Math.PI * 2;\n  thetaStart = 0;\n  thetaLength = Math.PI * 2;\n  thetaEnd: number;\n\n  populate() {\n\n    let ix: number, iy: number;\n    let index = 0;\n    let grid = [];\n    let vertex = new Vector3(0, 0, 0);\n    let normal = new Vector3(0, 0, 0);\n\n    // buffers\n\n    let indices = [];\n    let vertices = [];\n    let normals = [];\n    let uvs = [];\n\n    for (iy = 0; iy <= this.heightSegments; iy++) {\n      let verticesRow = [];\n      let v = iy / this.heightSegments;\n      for (ix = 0; ix <= this.widthSegments; ix++) {\n        let u = ix / this.widthSegments;\n        // vertex\n        vertex.x = - this.radius * Math.cos(this.phiStart + u * this.phiLength) * Math.sin(this.thetaStart + v * this.thetaLength);\n        vertex.y = this.radius * Math.cos(this.thetaStart + v * this.thetaLength);\n        vertex.z = this.radius * Math.sin(this.phiStart + u * this.phiLength) * Math.sin(this.thetaStart + v * this.thetaLength);\n        vertices.push(vertex.x, vertex.y, vertex.z);\n        // normal\n        normal.set(vertex.x, vertex.y, vertex.z).normalize();\n        normals.push(normal.x, normal.y, normal.z);\n        // uv\n        uvs.push(u, 1 - v);\n        verticesRow.push(index++);\n      }\n      grid.push(verticesRow);\n    }\n\n    // indices\n    for (iy = 0; iy < this.heightSegments; iy++) {\n      for (ix = 0; ix < this.widthSegments; ix++) {\n        let a = grid[iy][ix + 1];\n        let b = grid[iy][ix];\n        let c = grid[iy + 1][ix];\n        let d = grid[iy + 1][ix + 1];\n        if (iy !== 0 || this.thetaStart > 0) indices.push(a, b, d);\n        if (iy !== this.heightSegments - 1 || this.thetaEnd < Math.PI) indices.push(b, c, d);\n      }\n    }\n\n    this.create(indices, vertices, normals, uvs);\n\n  }\n\n}\n","import { StandardGeometry } from \"../standard-geometry\";\nimport { Vector3 } from \"../../math\";\n\n// https://github.com/mrdoob/three.js/blob/dev/src/geometries/BoxGeometry.js\n\nexport class CubeGeometry extends StandardGeometry {\n  constructor(width?: number, height?: number, depth?: number,\n    widthSegments?: number, heightSegments?: number, depthSegments?: number) {\n    super();\n    if (width !== undefined) { this.width = width; }\n    if (height !== undefined) { this.height = height; }\n    if (depth !== undefined) { this.depth = depth; }\n    if (widthSegments !== undefined) { this.widthSegments = widthSegments; }\n    if (heightSegments !== undefined) { this.heightSegments = heightSegments; }\n    if (depthSegments !== undefined) { this.depthSegments = depthSegments; }\n\n    this.populate();\n  }\n\n  width: number = 1;\n  height: number = 1;\n  depth: number = 1;\n  widthSegments: number = 1;\n  heightSegments: number = 1;\n  depthSegments: number = 1;\n\n  populate() {\n\n    const indices = [];\n    const vertices = [];\n    const normals = [];\n    const uvs = [];\n\n    let numberOfVertices = 0;\n\n    function buildPlane(\n      u: string,\n      v: string,\n      w: string,\n      udir: number,\n      vdir: number,\n      width: number,\n      height: number,\n      depth: number,\n      gridX: number,\n      gridY: number,\n    ) {\n      const segmentWidth = width / gridX;\n      const segmentHeight = height / gridY;\n\n      const widthHalf = width / 2;\n      const heightHalf = height / 2;\n      const depthHalf = depth / 2;\n\n      const gridX1 = gridX + 1;\n      const gridY1 = gridY + 1;\n\n      let ix: number, iy: number;\n\n      const vector = new Vector3();\n      let vertexCounter = 0;\n\n      // generate vertices, normals and uvs\n\n      for (iy = 0; iy < gridY1; iy++) {\n        var y = iy * segmentHeight - heightHalf;\n        for (ix = 0; ix < gridX1; ix++) {\n          var x = ix * segmentWidth - widthHalf;\n\n          // set values to correct vector component\n          vector[u] = x * udir;\n          vector[v] = y * vdir;\n          vector[w] = depthHalf;\n\n          // now apply vector to vertex buffer\n          vertices.push(vector.x, vector.y, vector.z);\n\n          // set values to correct vector component\n          vector[u] = 0;\n          vector[v] = 0;\n          vector[w] = depth > 0 ? 1 : - 1;\n\n          // now apply vector to normal buffer\n          normals.push(vector.x, vector.y, vector.z);\n\n          // uvs\n          uvs.push(ix / gridX);\n          uvs.push(1 - (iy / gridY));\n\n          vertexCounter += 1;\n        }\n      }\n\n      // indices\n      // 1. you need three indices to draw a single face\n      // 2. a single segment consists of two faces\n      // 3. so we need to generate six (2*3) indices per segment\n      for (iy = 0; iy < gridY; iy++) {\n        for (ix = 0; ix < gridX; ix++) {\n          var a = numberOfVertices + ix + gridX1 * iy;\n          var b = numberOfVertices + ix + gridX1 * (iy + 1);\n          var c = numberOfVertices + (ix + 1) + gridX1 * (iy + 1);\n          var d = numberOfVertices + (ix + 1) + gridX1 * iy;\n\n          // faces\n          indices.push(a, b, d);\n          indices.push(b, c, d);\n        }\n      }\n\n      numberOfVertices += vertexCounter;\n    }\n\n    // build each side of the box geometry\n\n    buildPlane('z', 'y', 'x', - 1, - 1, this.depth, this.height, this.width, this.depthSegments, this.heightSegments); // px\n    buildPlane('z', 'y', 'x', 1, - 1, this.depth, this.height, -  this.width, this.depthSegments, this.heightSegments); // nx\n    buildPlane('x', 'z', 'y', 1, 1, this.width, this.depth, this.height, this.widthSegments, this.depthSegments); // py\n    buildPlane('x', 'z', 'y', 1, - 1, this.width, this.depth, -  this.height, this.widthSegments, this.depthSegments); // ny\n    buildPlane('x', 'y', 'z', 1, - 1, this.width, this.height, this.depth, this.widthSegments, this.heightSegments); // pz\n    buildPlane('x', 'y', 'z', - 1, - 1, this.width, this.height, -  this.depth, this.widthSegments, this.heightSegments); // nz\n\n    this.create(indices, vertices, normals, uvs);\n  }\n\n\n}","\nimport { Interactor } from \"./interactor\";\n\n// controller is about how to manipulate camera easily\nexport class Controller{\n  constructor() {\n  }\n\n  public interactor: Interactor;\n\n}","import { Vector3 } from './vector3';\nimport { MathUtil } from './util';\n\nexport class Spherical {\n\n  public center = new Vector3();\n  public radius: number;\n  public polar: number;\n  public azim: number;\n\n  constructor(radius?: number, polar?: number, azim?: number) {\n    this.radius = radius !== undefined ? radius : 1;\n    this.polar = polar !== undefined ? polar : 0;\n    this.azim = azim !== undefined ? azim : 0;\n  }\n\n  public set(radius: number, polar: number, azim: number): Spherical {\n    this.radius = radius;\n    this.polar = polar;\n    this.azim = azim;\n    return this;\n  }\n\n  public copy(s: Spherical): Spherical {\n    return this.set(s.radius, s.polar, s.azim);\n  }\n\n  public clone(): Spherical {\n    return new Spherical(this.radius, this.polar, this.azim);\n  }\n\n  public setFromVector(v: Vector3): Spherical {\n    this.radius = v.length();\n    if (this.radius === 0) {\n      this.polar = 0;\n      this.azim = 0;\n    } else {\n      this.polar = Math.acos(MathUtil.clamp((v.y / this.radius), -1, 1));\n      this.azim = Math.atan2(v.x, v.z);\n    }\n    return this;\n  }\n}","import { Controller } from \"./controller\";\nimport { Spherical } from \"../math/spherical\";\nimport { Interactor } from \"./interactor\";\nimport { Vector2 } from \"../math/vector2\";\nimport { Vector3, MathUtil } from \"../math/index\";\nimport { PerspectiveCamera } from \"../camera/perspective-camera\";\n\n\nconst tempVec = new Vector3();\n\nexport class OrbitController extends Controller {\n\n  constructor(public camera: PerspectiveCamera) {\n    super();\n    this.camera = camera;\n\n    const v = new Vector3();\n    v.copy(camera.transform.position).sub(this.spherical.center);\n    this.spherical.setFromVector(v);\n  }\n\n  spherical: Spherical = new Spherical();\n  rotateAngleFactor = 0.5\n  panFactor = 0.002\n\n  // restriction\n  maxPolarAngle = 179 / 180 * Math.PI;\n  minPolarAngle = 0.1;\n\n  // damping\n  sphericalDelta: Spherical = new Spherical(0, 0, 0);\n  zoomingFactor: number = 1;\n  panOffset: Vector3 = new Vector3();\n\n  enableDamping = true;\n  dampingFactor = 0.25;\n  panDampingFactor = 0.5;\n\n\n  public registerInteractor(interactor: Interactor) {\n    if (this.interactor !== undefined) {\n      this.interactor.unbindControllerAllListener(this);\n    }\n    this.interactor = interactor;\n    this.interactor.bindLeftMouseMove(this, this.rotate);\n    this.interactor.bindRightMouseMove(this, this.move);\n    this.interactor.bindMouseWheel(this, this.zoom);\n  }\n\n\n  // operate methods\n  rotate = (offset: Vector2) => {\n    const viewWidth = this.camera.width * 5000;\n    const viewHeight = this.camera.height * 5000;\n\n    this.sphericalDelta.polar += offset.y / viewHeight * Math.PI * this.rotateAngleFactor\n    this.sphericalDelta.azim += offset.x / viewWidth * Math.PI * this.rotateAngleFactor\n\n    this.needUpdate = true;\n  }\n  zoom = (factor: number) => {\n    this.zoomingFactor = factor;\n    this.needUpdate = true;\n  }\n  move = (offset: Vector2) => {\n    offset.rotate(-this.spherical.azim).multiplyScalar(this.spherical.radius * this.panFactor);\n\n\n    this.panOffset.x += offset.x;\n    this.panOffset.z += offset.y;\n    this.needUpdate = true;\n  }\n\n  public needUpdate: boolean = true;\n\n\n  public update() {\n\n    if (Math.abs(this.sphericalDelta.azim) > 0.0001 ||\n      Math.abs(this.sphericalDelta.polar) > 0.0001 ||\n      Math.abs(this.sphericalDelta.radius) > 0.0001 ||\n      Math.abs(this.zoomingFactor - 1) > 0.0001 ||\n      this.panOffset.mag() > 0.01\n    ) {\n      this.needUpdate = true;\n    }\n\n\n    if (this.needUpdate) {\n      this.spherical.radius *= this.zoomingFactor;\n\n      this.spherical.azim += this.sphericalDelta.azim;\n\n      this.spherical.polar = MathUtil.clamp(\n        this.spherical.polar + this.sphericalDelta.polar,\n        this.minPolarAngle, this.maxPolarAngle);\n\n      this.spherical.center.add(this.panOffset);\n\n      tempVec.setFromSpherical(this.spherical).add(this.spherical.center);\n      this.camera.transform.position.copy(tempVec);\n      this.camera.lookAt(this.spherical.center);\n    }\n    this.needUpdate = false;\n\n    // update damping effect\n    if (this.enableDamping === true) {\n      this.sphericalDelta.azim *= (1 - this.dampingFactor);\n      this.sphericalDelta.polar *= (1 - this.dampingFactor);\n      this.zoomingFactor = this.zoomingFactor + (1 - this.zoomingFactor) * this.dampingFactor;\n      this.panOffset.multiplyScalar(1 - this.panDampingFactor);\n    } else {\n      this.sphericalDelta.set(0, 0, 0);\n      this.zoomingFactor = 1;\n      this.panOffset.set(0, 0, 0);\n    }\n  }\n\n}","import { Vector3 } from \"../math/index\";\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\nconst v12 = new Vector3();\nconst v13 = new Vector3();\nconst n = new Vector3();\n\nexport function generateNormalFromPosition(vertices: Float32Array): Float32Array {\n  const vertices_length = vertices.length;\n  const step = 9;\n  const normals = new Float32Array(vertices_length);\n\n  for (let i = 0; i < vertices_length; i += step) {\n      v1.set(vertices[i + 0], vertices[i + 1], vertices[i + 2]);\n      v2.set(vertices[i + 3], vertices[i + 4], vertices[i + 5]);\n      v3.set(vertices[i + 6], vertices[i + 7], vertices[i + 8]);\n      v12.copy(v2).sub(v1);\n      v13.copy(v3).sub(v1);\n      n.crossVectors(v12, v13);\n      n.normalize();\n      normals[i + 0] = n.x;\n      normals[i + 1] = n.y;\n      normals[i + 2] = n.z;\n      normals[i + 3] = n.x;\n      normals[i + 4] = n.y;\n      normals[i + 5] = n.z;\n      normals[i + 6] = n.x;\n      normals[i + 7] = n.y;\n      normals[i + 8] = n.z;\n  }\n\n  return normals;\n}","import { Geometry } from \"./geometry\";\n\n/**\n * Base class for resource loader \n * Any loader should extends this for comprehensive usage\n *\n * @export\n * @abstract\n * @class Loader\n */\nexport abstract class Loader {\n  name: string = \"unnamed loader\";\n\n  /**\n   * This regExp is for matching giving file extension name\n   * whether should be use with this loader\n   *\n   * @type {RegExp}\n   * @memberof Loader\n   */\n  fileSuffixReg?: RegExp;\n  abstract parse(input: string | ArrayBuffer): any;\n}\n\nexport abstract class GeometryLoader extends Loader{\n  abstract parse(input: string | ArrayBuffer): Geometry;\n}","import { Geometry } from \"../core/geometry\";\nimport { Vector3 } from \"../math/vector3\";\nimport { Vector2 } from \"../math/vector2\";\nimport { loadStringFromFile } from \"../util/file-io\";\nimport { BufferData } from \"../core/buffer-data\";\nimport { generateNormalFromPosition } from \"../util/normal-generation\";\nimport { StandardGeometry } from \"../geometry/standard-geometry\";\nimport { GeometryLoader } from \"../core/loader\";\n\nexport async function loadObjFile(): Promise<Geometry> {\n  const loader = new OBJLoader();\n  const str = await loadStringFromFile();\n  return loader.parse(str);\n}\n\nexport class OBJLoader extends GeometryLoader{\n  private vertexPattern = /v( +[\\d|\\.|\\+|\\-|e|E]+)( +[\\d|\\.|\\+|\\-|e|E]+)( +[\\d|\\.|\\+|\\-|e|E]+)/;\n  // vn float float float\n\n  private normalPattern = /vn( +[\\d|\\.|\\+|\\-|e|E]+)( +[\\d|\\.|\\+|\\-|e|E]+)( +[\\d|\\.|\\+|\\-|e|E]+)/;\n  // vt float float\n\n  private uvPattern = /vt( +[\\d|\\.|\\+|\\-|e|E]+)( +[\\d|\\.|\\+|\\-|e|E]+)/;\n  // f vertex vertex vertex ...\n\n  private facePattern1 = /f\\s+(([\\d]{1,}[\\s]?){3,})+/;\n  // f vertex/uvs vertex/uvs vertex/uvs ...\n\n  private facePattern2 = /f\\s+((([\\d]{1,}\\/[\\d]{1,}[\\s]?){3,})+)/;\n  // f vertex/uvs/normal vertex/uvs/normal vertex/uvs/normal ...\n\n  private facePattern3 = /f\\s+((([\\d]{1,}\\/[\\d]{1,}\\/[\\d]{1,}[\\s]?){3,})+)/;\n  // f vertex//normal vertex//normal vertex//normal ...\n\n  private facePattern4 = /f\\s+((([\\d]{1,}\\/\\/[\\d]{1,}[\\s]?){3,})+)/;\n\n  private collectTriangle(faces: string[]): string[] {\n    const triangles: string[] = [];\n    this.getTriangles(faces, 1, triangles);\n    return triangles;\n  }\n\n  private getTriangles(face: string[], v: number, triangleList: string[]) {\n    //Work for each element of the array\n    //Result obtained after 2 iterations:\n    //Pattern1 => triangle = [\"1\",\"2\",\"3\",\"1\",\"3\",\"4\"];\n    //Pattern2 => triangle = [\"1/1\",\"2/2\",\"3/3\",\"1/1\",\"3/3\",\"4/4\"];\n    //Pattern3 => triangle = [\"1/1/1\",\"2/2/2\",\"3/3/3\",\"1/1/1\",\"3/3/3\",\"4/4/4\"];\n    //Pattern4 => triangle = [\"1//1\",\"2//2\",\"3//3\",\"1//1\",\"3//3\",\"4//4\"];\n    if (v + 1 < face.length) {\n      //Add on the triangle variable the indexes to obtain triangles\n      triangleList.push(face[0], face[v], face[v + 1]);\n      //Incrementation for recursion\n      v += 1;\n      //Recursion\n      this.getTriangles(face, v, triangleList);\n    }\n  }\n\n  reset() {\n    this.positions = [];\n    this.normals = [];\n    this.uvs = [];\n    this.indicesForArtgl = [];\n    this.wrappedPositionForArtgl = [];\n    this.wrappedUvsForArtgl = [];\n    this.wrappedNormalsForArtgl = [];\n    this.tuplePosNorm = [];\n    this.curPositionInIndices = 0;\n  }\n\n  private positions: Vector3[] = [];\n  private normals: Vector3[] = [];\n  private uvs: Vector2[] = [];\n\n  private indicesForArtgl: number[] = [];         //The list of indices for VertexData\n  private wrappedPositionForArtgl: Vector3[] = [];//The list of position in vectors\n  private wrappedUvsForArtgl: Vector2[] = [];     //Array with all value of uvs to match with the indices\n  private wrappedNormalsForArtgl: Vector3[] = []; //Array with all value of normals to match with the indices\n  //Create a tuple with indices of Position, Normal, UV  [pos, norm, uvs]\n  private tuplePosNorm: Array<{ normals: Array<number>; idx: Array<number> }> = [];\n  private curPositionInIndices: number = 0;\n\n  private isInArray(position: number, normal: number) {\n    if (!this.tuplePosNorm[position]) {\n      this.tuplePosNorm[position] = { normals: [], idx: [] };\n    }\n    const idx = this.tuplePosNorm[position].normals.indexOf(normal);\n    return idx === -1 ? -1 : this.tuplePosNorm[position].idx[idx];\n    ``\n  };\n\n  private setData(\n    indicePositionFromObj: number,\n    indiceUvsFromObj: number,\n    indiceNormalFromObj: number,\n    positionVectorFromOBJ: Vector3,\n    textureVectorFromOBJ: Vector2,\n    normalsVectorFromOBJ: Vector3\n  ) {\n    //Check if this tuple already exists in the list of tuples\n    // const index = this.isInArray(indicePositionFromObj, indiceNormalFromObj);\n    const index = -1\n    \n    //If it not exists\n    if (index === -1) {\n      //Add an new indice.\n      //The array of indices is only an array with his length equal to the number of triangles - 1.\n      //We add vertices data in this order\n      this.indicesForArtgl.push(this.wrappedPositionForArtgl.length);\n      this.wrappedPositionForArtgl.push(positionVectorFromOBJ);\n      this.wrappedUvsForArtgl.push(textureVectorFromOBJ);\n      this.wrappedNormalsForArtgl.push(normalsVectorFromOBJ);\n      //Add the tuple in the comparison list\n      // this.tuplePosNorm[indicePositionFromObj].normals.push(indiceNormalFromObj);\n      // this.tuplePosNorm[indicePositionFromObj].idx.push(this.curPositionInIndices);\n      this.curPositionInIndices++\n    } else {\n      //The tuple already exists\n      //Add the index of the already existing tuple\n      //At this index we can get the value of position, normal and uvs of vertex\n      this.indicesForArtgl.push(index);\n    }\n  };\n\n  private setDataForCurrentFaceWithPattern1(face: string[]) {\n    const triangleStrs = this.collectTriangle(face);\n    //For each element in the triangles array.\n    //This var could contains 1 to an infinity of triangles\n    for (var k = 0; k < triangleStrs.length; k++) {\n      // Set position indice\n      var indicePositionFromObj = parseInt(triangleStrs[k]) - 1;\n      this.setData(\n        indicePositionFromObj,\n        0, 0,                                  //In the pattern 1, normals and uvs are not defined\n        this.positions[indicePositionFromObj], //Get the vectors data\n        new Vector2(), new Vector3(0, 1, 0)      //Create default vectors\n      );\n    }\n  };\n\n  private setDataForCurrentFaceWithPattern2(face: string[]) {\n    const triangleStrs = this.collectTriangle(face);\n    for (var k = 0; k < triangleStrs.length; k++) {\n      //triangle[k] = \"1/1\"\n      //Split the data for getting position and uv\n      var point = triangleStrs[k].split(\"/\"); // [\"1\", \"1\"]\n      //Set position indice\n      var indicePositionFromObj = parseInt(point[0]) - 1;\n      //Set uv indice\n      var indiceUvsFromObj = parseInt(point[1]) - 1;\n\n      this.setData(\n        indicePositionFromObj,\n        indiceUvsFromObj,\n        0,                                  //Default value for normals\n        this.positions[indicePositionFromObj],   //Get the values for each element\n        this.uvs[indiceUvsFromObj],\n        new Vector3(0, 1, 0)                //Default value for normals\n      );\n    }\n  }\n\n  private setDataForCurrentFaceWithPattern3(face: string[]) {\n    const triangleStrs = this.collectTriangle(face);\n    for (var k = 0; k < triangleStrs.length; k++) {\n      //triangle[k] = \"1/1/1\"\n      //Split the data for getting position, uv, and normals\n      var point = triangleStrs[k].split(\"/\"); // [\"1\", \"1\", \"1\"]\n      // Set position indice\n      var indicePositionFromObj = parseInt(point[0]) - 1;\n      // Set uv indice\n      var indiceUvsFromObj = parseInt(point[1]) - 1;\n      // Set normal indice\n      var indiceNormalFromObj = parseInt(point[2]) - 1;\n\n      this.setData(\n        indicePositionFromObj, indiceUvsFromObj, indiceNormalFromObj,\n        this.positions[indicePositionFromObj],\n        this.uvs[indiceUvsFromObj],\n        this.normals[indiceNormalFromObj] //Set the vector for each component\n      );\n\n    }\n  };\n\n  private setDataForCurrentFaceWithPattern4 = (face: string[]) => {\n    const triangleStrs = this.collectTriangle(face);\n    for (var k = 0; k < triangleStrs.length; k++) {\n      //triangle[k] = \"1//1\"\n      //Split the data for getting position and normals\n      var point = triangleStrs[k].split(\"//\"); // [\"1\", \"1\"]\n      // We check indices, and normals\n      var indicePositionFromObj = parseInt(point[0]) - 1;\n      var indiceNormalFromObj = parseInt(point[1]) - 1;\n\n      this.setData(\n        indicePositionFromObj,\n        1, //Default value for uv\n        indiceNormalFromObj,\n        this.positions[indicePositionFromObj], //Get each vector of data\n        new Vector2(0, 0),\n        this.normals[indiceNormalFromObj]\n      );\n    }\n  };\n\n  parse(objStr: string, fileName?: string): StandardGeometry {\n    this.reset();\n\n    //Split the file into lines\n    const lines = objStr.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i].trim();\n      let result: string[] | null;\n\n      //Comment or newLine\n      if (line.length === 0 || line.charAt(0) === '#') {\n        continue;\n\n      } else if ((result = this.vertexPattern.exec(line)) !== null) {\n        this.positions.push(new Vector3(\n          parseFloat(result[1]),\n          parseFloat(result[2]),\n          parseFloat(result[3])\n        ));\n      } else if ((result = this.normalPattern.exec(line)) !== null) {\n        this.normals.push(new Vector3(\n          parseFloat(result[1]),\n          parseFloat(result[2]),\n          parseFloat(result[3])\n        ));\n\n      } else if ((result = this.uvPattern.exec(line)) !== null) {\n        this.uvs.push(new Vector2(\n          parseFloat(result[1]),\n          parseFloat(result[2])\n        ));\n      } else if ((result = this.facePattern3.exec(line)) !== null) {\n        //Value of result:\n        //[\"f 1/1/1 2/2/2 3/3/3\", \"1/1/1 2/2/2 3/3/3\"...]\n\n        //Set the data for this face\n        this.setDataForCurrentFaceWithPattern3(\n          result[1].trim().split(\" \"), // [\"1/1/1\", \"2/2/2\", \"3/3/3\"]\n        );\n\n      } else if ((result = this.facePattern4.exec(line)) !== null) {\n        //Value of result:\n        //[\"f 1//1 2//2 3//3\", \"1//1 2//2 3//3\"...]\n\n        //Set the data for this face\n        this.setDataForCurrentFaceWithPattern4(\n          result[1].trim().split(\" \"), // [\"1//1\", \"2//2\", \"3//3\"]\n        );\n\n      } else if ((result = this.facePattern2.exec(line)) !== null) {\n        //Value of result:\n        //[\"f 1/1 2/2 3/3\", \"1/1 2/2 3/3\"...]\n\n        //Set the data for this face\n        this.setDataForCurrentFaceWithPattern2(\n          result[1].trim().split(\" \"), // [\"1/1\", \"2/2\", \"3/3\"]\n        );\n\n      } else if ((result = this.facePattern1.exec(line)) !== null) {\n        //Value of result\n        //[\"f 1 2 3\", \"1 2 3\"...]\n\n        //Set the data for this face\n        this.setDataForCurrentFaceWithPattern1(\n          result[1].trim().split(\" \"), // [\"1\", \"2\", \"3\"]\n        );\n\n        //Define a mesh or an object\n        //Each time this keyword is analysed, create a new Object with all data for creating a ArtglMesh\n      } else {\n        //If there is another possibility\n        console.log(\"Unhandled expression at line : \" + line);\n      }\n\n    }\n    const geometry = new StandardGeometry();\n    const position: number[] = [];\n    this.wrappedPositionForArtgl.forEach(po => {\n      position.push(po.x);\n      position.push(po.y);\n      position.push(po.z);\n    })\n\n    const normal: number[] = [];\n    this.wrappedNormalsForArtgl.forEach(po => {\n      normal.push(po.x);\n      normal.push(po.y);\n      normal.push(po.z);\n    })\n    const positionBuffer = new Float32Array(position);\n    const normalBuffer = new Float32Array(normal);\n    let indexBuffer;\n    if (this.indicesForArtgl.length > 65535) {\n      indexBuffer = new Uint32Array(this.indicesForArtgl);\n      geometry.indexBuffer = new BufferData(indexBuffer, 1);\n    } else {\n      indexBuffer = new Uint16Array(this.indicesForArtgl);\n      geometry.indexBuffer = new BufferData(indexBuffer, 1);\n    }\n    geometry.bufferDatum.position = new BufferData(positionBuffer, 3);\n    const useGeneratedNormal = false;\n    if (useGeneratedNormal) {\n      geometry.bufferDatum.normal = new BufferData(generateNormalFromPosition(positionBuffer), 3);\n    } else {\n      geometry.bufferDatum.normal = new BufferData(normalBuffer, 3);\n    }\n    console.log('indexlength:' + indexBuffer.length);\n    console.log('positionBuffer:' + positionBuffer.length);\n\n    if (fileName) {\n      geometry.name = \"Objfile-\" + fileName;\n    } else {\n      geometry.name = \"Objfile-unnamed\";\n    }\n    return geometry;\n  }\n}","import { SceneNode } from \"../scene/scene-node\";\nimport { Vector3 } from '../math/vector3';\nimport { ShaderGraph, NormalFragVary, WorldPositionFragVary } from \"../shader-graph/shader-graph\";\nimport { ShaderFunction } from \"../shader-graph/shader-function\";\nimport { uniformFromValue } from \"../shader-graph/node-maker\";\nimport { ShaderUniformProvider, MapUniform } from \"./shading\";\nimport { ShaderCommonUniformInputNode } from \"../shader-graph/shader-node\";\n\n// TODO I cant figure out right multi inheritance impl with strong type, code duplicate \n\nexport class Light<T> extends SceneNode implements ShaderUniformProvider {\n  constructor() {\n    super();\n    // need check if has initialized by decorator\n    if (this.uniforms === undefined) {\n      this.uniforms = new Map();\n    }\n    if (this.propertyUniformNameMap === undefined) {\n      this.propertyUniformNameMap = new Map();\n    }\n  }\n\n  decorate(_graph: ShaderGraph): void {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  hasAnyUniformChanged: boolean;\n\n  uniforms: Map<string, any>;\n\n  propertyUniformNameMap: Map<string, string>;\n\n  getPropertyUniform(name: keyof T): ShaderCommonUniformInputNode {\n    const uniformName = this.propertyUniformNameMap.get(name as string);\n    const value = this[name as string];\n    if (value === undefined) {\n      throw \"uniform value not given\"\n    }\n    return uniformFromValue(uniformName, value);\n  }\n}\n\nconst pointLightShading = new ShaderFunction({\n  source:\n    `\n    vec4 pointLight(\n      vec3 fragPosition,\n      vec3 FragNormal,\n      vec3 lightPosition, \n      vec3 color,\n      float radius ){\n        float distance = length(fragPosition - lightPosition);\n        if( distance < radius){\n          return vec4(color * (1.0 - distance / radius), 0.0);\n        }\n        return vec4(0.0);\n    }\n  `\n})\n\nconst AddCompose = new ShaderFunction({\n  source: `\n  vec4 add(\n    vec4 base,\n    vec4 light){\n      return base + light;\n  }\n  `\n});\n\nexport class PointLight extends Light<PointLight> {\n\n  decorate(decorated: ShaderGraph) {\n    decorated\n      .setFragmentRoot(\n        AddCompose.make()\n          .input(\"base\", decorated.getFragRoot())\n          .input(\"light\", pointLightShading.make()\n            .input(\"fragPosition\", decorated.getVary(WorldPositionFragVary))\n            .input(\"FragNormal\", decorated.getVary(NormalFragVary))\n            .input(\"lightPosition\", this.getPropertyUniform('position'))\n            .input(\"color\", this.getPropertyUniform('color'))\n            .input(\"radius\", this.getPropertyUniform('radius'))\n          )\n      )\n  }\n\n  @MapUniform(\"lightColor\")\n  color: Vector3 = new Vector3(1, 1, 1)\n\n  @MapUniform(\"lightPosition\")\n  position: Vector3 = new Vector3(0, 0, 0)\n\n  @MapUniform(\"lightRadius\")\n  radius: number = 3\n}\n","import {\n  SphereGeometry, PlaneGeometry,\n  NormalShading, Mesh, SceneNode, Shading, CubeGeometry\n} from '../../../src/artgl';\nimport { PointLight } from '../../../src/core/light';\n\nexport default function (root:SceneNode) {\n  const sphereGeo = new SphereGeometry(1, 40, 40);\n  const planeGeo = new PlaneGeometry(10, 10, 10, 10);\n  const cubeGeo = new CubeGeometry(5, 3, 4)\n  const light = new PointLight();\n  \n  let shading = new Shading()\n    .decorate(new NormalShading())\n    .decorate(light);\n\n  shading.afterShaderCompiled.add((config) => {\n    console.log(config);\n  })\n\n  const planeMesh = new Mesh().g(planeGeo).s(shading)\n  root.addChild(planeMesh);\n\n\n  const boxMesh = new Mesh().g(cubeGeo).s(shading)\n  boxMesh.transform.position.y = -2;\n  root.addChild(boxMesh);\n\n\n  for (let i = 0; i < 5; i++) {\n    const node = new SceneNode();\n    node.transform.position.x = i;\n    root.addChild(node);\n    for (let j = 0; j < 5; j++) {\n      const node2 = new SceneNode();\n      node2.transform.position.y = j;\n      node.addChild(node2);\n      for (let k = 0; k < 5; k++) {\n\n        const testMesh = new Mesh().g(sphereGeo).s(shading)\n        testMesh.transform.position.z = k;\n        testMesh.transform.scale.set(0.3, 0.3, 0.3);\n        node2.addChild(testMesh);\n      }\n    }\n  }\n  return root;\n}\n","import { RenderConfig } from './components/conf/interface'\nimport { RenderEngine } from '../../src/artgl';\nimport { RenderPipeline } from './RenderPipeline';\n\nexport function createConf(engine: RenderEngine, pipeline: RenderPipeline): RenderConfig {\n  return {\n    name: 'root',\n    type: 'folder',\n    value: [\n      {\n        name: 'canvas',\n        value: [\n          {\n            name: 'renderSize',\n            value: [\n              {\n                name: 'width',\n                value: engine.renderer.width,\n                onChange: (value: number) => {\n                  pipeline.sampleCount = 0;\n                  engine.setActualSize(value, engine.renderer.height);\n                },\n                editors: [\n                  {\n                    type: 'slider',\n                    min: 10,\n                    max: 500,\n                    step: 1\n                  },\n                ]\n              },\n              {\n                name: 'height',\n                value: engine.renderer.height,\n                onChange: (value: number) => {\n                  pipeline.sampleCount = 0;\n                  engine.setActualSize(engine.renderer.width, value);\n                },\n                editors: [\n                  {\n                    type: 'slider',\n                    min: 10,\n                    max: 500,\n                    step: 1\n                  },\n                ]\n              },\n            ]\n          },\n        ]\n      },\n      {\n        name: 'engine',\n        value: [\n          {\n            name: 'preferUseVAO',\n            value: engine.preferVAO,\n            onChange: (value: boolean) => {\n              engine.preferVAO = value\n            },\n          },\n          {\n            name: 'enableUniformDiffUpload',\n            value: engine.renderer.enableUniformDiff,\n            onChange: (value: boolean) => {\n              engine.renderer.enableUniformDiff = value\n            },\n            description: 'this is a demo description'\n          },\n          {\n            name: 'TAA',\n            value: [\n              {\n                name: 'enable',\n                value: pipeline.enableTAA,\n                onChange: (value: boolean) => {\n                  pipeline.enableTAA = value;\n                  if (!value) {\n                    pipeline.sampleCount = 0;\n                  }\n                },\n              },\n            ]\n          },\n          {\n            name: 'TSSAO',\n            value: [\n              {\n                name: 'enable',\n                value: pipeline.enableTSSAO,\n                onChange: (value: boolean) => {\n                  pipeline.enableTSSAO = value;\n                  if (value) {\n                    pipeline.composeShading.tssaoComposeRate = 1;\n                  } else {\n                    pipeline.composeShading.tssaoComposeRate = 0;\n                  }\n                },\n              },\n              {\n                name: 'composeRate',\n                value: pipeline.composeShading.tssaoComposeRate,\n                onChange: (value: number) => {\n                  pipeline.composeShading.tssaoComposeRate = value;\n                },\n                editors: [\n                  {\n                    type: 'slider',\n                    min: 0,\n                    max: 4,\n                    step: 0.1\n                  },\n                ]\n              },\n              {\n                name: 'composeThreshold',\n                value: pipeline.composeShading.tssaoComposeThreshold,\n                onChange: (value: number) => {\n                  pipeline.composeShading.tssaoComposeThreshold = value;\n                },\n                editors: [\n                  {\n                    type: 'slider',\n                    min: 0,\n                    max: 4,\n                    step: 0.1\n                  },\n                ]\n              },\n              {\n                name: 'radius',\n                value: pipeline.tssaoShading.aoRadius,\n                onChange: (value: number) => {\n                  pipeline.tssaoShading.aoRadius = value;\n                  pipeline.sampleCount = 0;\n                },\n                editors: [\n                  {\n                    type: 'slider',\n                    min: 0.1,\n                    max: 10,\n                    step: 0.1\n                  },\n                ]\n              },\n              {\n                name: 'sample_count_to_show',\n                value: pipeline.composeShading.tssaoShowThreshold,\n                onChange: (value: number) => {\n                  pipeline.composeShading.tssaoShowThreshold = value;\n                },\n                editors: [\n                  {\n                    type: 'slider',\n                    min: 1,\n                    max: 1000,\n                    step: 20\n                  },\n                ]\n              },\n            ]\n          }\n        ]\n      },\n    ]\n\n  }\n}\n","import {\n  RenderGraph, TAAShading,\n  TSSAOShading, TSSAOBlendShading, Matrix4,\n  InnerSupportUniform, DepthShading, Scene, RenderEngine, Shading\n} from \"../../src/artgl\";\nimport { EffectComposer } from '../../src/render-graph/render-graph';\nimport { RenderConfig } from './components/conf/interface';\nimport { createConf } from './conf';\n\nexport class RenderPipeline{\n  config: RenderConfig\n\n  graph: RenderGraph = new RenderGraph();\n  composer: EffectComposer = new EffectComposer();\n\n  enableTAA = true;\n  taaShading = new TAAShading()\n  taaShader: Shading = new Shading().decorate(this.taaShading);\n\n  enableTSSAO = true;\n  tssaoShading = new TSSAOShading();\n  tssaoShader: Shading = new Shading().decorate(this.tssaoShading);\n\n  composeShading = new TSSAOBlendShading()\n  composeShader: Shading = new Shading().decorate(this.composeShading);\n  depthShader = new Shading().decorate(new DepthShading());\n\n  sampleCount: number = 0;\n\n  private tickNum = 0;\n  get isEvenTick() {\n    return this.tickNum % 2 === 0;\n  }\n\n  render(engine: RenderEngine, scene: Scene) {\n    this.tickNum++;\n\n    engine.connectCamera();\n    if (engine.isCameraChanged || scene.isFrameChange) {\n      this.sampleCount = 0;\n    } else {\n      if (this.enableTAA) {\n        engine.jitterProjectionMatrix();\n      }\n    }\n\n    // if (this.sampleCount <= 100) {\n    this.graph.update(engine, this.composer);\n    this.composer.render(engine, this.graph);\n    // }\n  }\n\n  build(engine: RenderEngine, scene: Scene) {\n    this.config = createConf(engine, this);\n    this.graph.defineGraph(\n      this.composer,\n      {\n      renderTargets: [\n        {\n          name: RenderGraph.screenRoot,\n          from: () => 'CopyToScreen',\n        },\n        {\n          name: 'sceneResult',\n          from: () => 'SceneOrigin',\n        },\n        {\n          name: 'depthResult',\n          from: () => 'Depth',\n        },\n        {\n          name: 'TAAHistoryA',\n          from: () => this.isEvenTick ? null : 'TAA',\n        },\n        {\n          name: 'TAAHistoryB',\n          from: () => this.isEvenTick ? 'TAA' : null,\n        },\n        {\n          name: 'TSSAOHistoryA',\n          from: () => this.isEvenTick ? null : 'TSSAO',\n        },\n        {\n          name: 'TSSAOHistoryB',\n          from: () => this.isEvenTick ? 'TSSAO' : null,\n        },\n      ],\n      passes: [\n        { // general scene origin\n          name: \"SceneOrigin\",\n          source: [scene],\n        },\n        { // depth\n          name: \"Depth\",\n          shading: this.depthShader,\n          source: [scene],\n        },\n        { // mix new render and old samples\n          name: \"TAA\",\n          inputs: () => {\n            return {\n              sceneResult: \"sceneResult\",\n              depthResult: \"depthResult\",\n              TAAHistoryOld: this.isEvenTick ? \"TAAHistoryA\" : \"TAAHistoryB\",\n            }\n          },\n          shading: this.taaShader,\n          source: [RenderGraph.quadSource],\n          enableColorClear: false,\n          beforePassExecute: () => {\n            engine.unJit();\n            const VP: Matrix4 = engine.getGlobalUniform(InnerSupportUniform.VPMatrix).value\n            this.taaShading.VPMatrixInverse = this.taaShading.VPMatrixInverse.getInverse(VP, true); // TODO maybe add watch\n            this.taaShading.sampleCount = this.sampleCount;\n          },\n        },\n        {\n          name: \"TSSAO\",\n          inputs: () => {\n            return {\n              depthResult: \"depthResult\",\n              AOAcc: this.isEvenTick ? \"TSSAOHistoryA\" : \"TSSAOHistoryB\",\n            }\n          },\n          shading: this.tssaoShader,\n          source: [RenderGraph.quadSource],\n          enableColorClear: false,\n          beforePassExecute: () => {\n            const VP: Matrix4 = engine.getGlobalUniform(InnerSupportUniform.VPMatrix).value\n            this.tssaoShading.VPMatrixInverse = this.tssaoShading.VPMatrixInverse.getInverse(VP, true);\n            this.tssaoShading.sampleCount = this.sampleCount;\n          },\n        },\n        { // copy to screen\n          name: \"CopyToScreen\",\n          enableColorClear: false,\n          inputs: () => {\n            let basic: string;\n            let tssao: string;\n            if (this.enableTAA) {\n              basic = this.isEvenTick ? \"TAAHistoryB\" : \"TAAHistoryA\"\n            } else {\n              basic = \"sceneResult\"\n            }\n            if (this.enableTSSAO) {\n              tssao = this.isEvenTick ? \"TSSAOHistoryB\" : \"TSSAOHistoryA\"\n            } else {\n              tssao = \"sceneResult\" // TODO consider design a way to bind default empty source? or recompile shader?\n            }\n            return { basic, tssao }\n          },\n          beforePassExecute: () => {\n            this.composeShading.sampleCount = this.sampleCount;\n          },\n          afterPassExecute: () => {\n            this.sampleCount++;``\n          },\n          shading: this.composeShader,\n          source: [RenderGraph.quadSource],\n        },\n      ]\n    })\n  }\n}\n","import {\n  RenderEngine, Mesh, PerspectiveCamera, OrbitController,\n  OBJLoader, Scene, Observable, Framer\n} from '../../src/artgl';\n\nimport hierarchyBallBuilder from './scene/hierarchy-balls';\nimport { RenderPipeline } from './RenderPipeline';\n\nexport const STATIC_SERVER = \"http://localhost:3000/\"\n\nexport class Application {\n  pipeline: RenderPipeline;\n  engine: RenderEngine;\n  framer: Framer = new Framer();\n  el: HTMLCanvasElement;\n  hasInitialized: boolean = false;\n  scene: Scene = new Scene();\n  orbitController: OrbitController;\n\n  initialize(canvas: HTMLCanvasElement) {\n    this.el = canvas;\n    this.engine = new RenderEngine(canvas);\n    this.pipeline = new RenderPipeline();\n    this.pipeline.build(this.engine, this.scene);\n    this.engine.camera.transform.position.set(20, 10, 10)\n    this.orbitController = new OrbitController(this.engine.camera as PerspectiveCamera);\n    this.orbitController.registerInteractor(this.engine.interactor);\n    this.hasInitialized = true;\n    this.createScene(this.scene);\n\n    window.addEventListener('resize', this.onContainerResize);\n    this.onContainerResize();\n    this.framer.setFrame(this.render);\n  }\n\n  unintialize() {\n    window.removeEventListener('resize', this.onContainerResize);\n    this.engine = null;\n    this.pipeline = null;\n    this.framer.stop();\n    this.framer.setFrame(null);\n    this.el = null;\n  }\n\n  private onContainerResize = () => {\n    const width = this.el.offsetWidth;\n    const height = this.el.offsetHeight;\n    this.engine.setSize(width, height);\n    (this.engine.camera as PerspectiveCamera).aspect = width / height;\n\n    // this.taaTech.uniforms.get('screenPixelXStep').setValue(1 / (2 * window.devicePixelRatio * width));\n    // this.taaTech.uniforms.get('screenPixelYStep').setValue(1 / (2 * window.devicePixelRatio * height));\n  }\n  notifyResize() {\n    this.onContainerResize();\n  }\n\n  sampleCount = 0;\n  beforeRender: Observable<RenderEngine> = new Observable();\n  afterRender: Observable<RenderEngine> = new Observable();\n  render = () => {\n    this.beforeRender.notifyObservers(this.engine);\n    this.orbitController.update();\n\n    this.pipeline.render(this.engine, this.scene);\n\n    this.afterRender.notifyObservers(this.engine);\n    this.engine.renderer.stat.reset();\n\n  }\n\n  pickColor(x: number, y: number) {\n    const f = this.engine.renderer.framebufferManager.getFramebuffer(\"sceneResult\");\n    const result = new Uint8Array(10);\n    f.readPixels(\n      x * this.engine.renderer.width,\n      y * this.engine.renderer.height,\n      1, 1, result);\n    console.log(`${result[0]}`)\n  }\n\n  run() {\n    this.engine.interactor.enabled = true;\n    this.framer.run();\n  }\n\n  stop() {\n    this.engine.interactor.enabled = false;\n    this.framer.stop();\n  }\n\n  step() {\n    this.framer.step();\n  }\n\n  createScene(scene: Scene): Scene {\n    hierarchyBallBuilder(scene.root);\n    // this.loadOBJFromURL();\n    return scene;\n  }\n\n  async loadOBJFromURL() {\n    const objLoader = new OBJLoader();\n    const response = await fetch(STATIC_SERVER + 'obj/chair.obj');\n    const result = await response.text();\n    const geo = objLoader.parse(result);\n    const mesh = new Mesh();\n    mesh.geometry = geo;\n    this.scene.root.addChild(mesh);\n  }\n\n}\n\nexport let GLApp: Application = new Application();","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport Config from '../components/conf/config.vue';\nimport { GLApp } from '../application';\n@Component({\n  components:{\n    Config\n  }\n})\nexport default class ConfigPanel extends Vue {\n  @Prop() appConfig;\n  $store: any;\n\n  async hide(){\n    this.$store.state.showConfigPanel = false;\n    await this.$nextTick()\n    GLApp.notifyResize();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config-panel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config-panel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./config-panel.vue?vue&type=template&id=134ba5ce&scoped=true&\"\nimport script from \"./config-panel.vue?vue&type=script&lang=ts&\"\nexport * from \"./config-panel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./config-panel.vue?vue&type=style&index=0&id=134ba5ce&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"134ba5ce\",\n  null\n  \n)\n\ncomponent.options.__file = \"config-panel.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scene-panel\"},[(!true)?_c('ObjectPanel'):_vm._e(),_c('div',{staticClass:\"panel-title\"},[_vm._v(\"Scene explorer\\n    \"),_c('button',{on:{\"click\":_vm.sync}},[_vm._v(\"sync\")]),_c('button',{on:{\"click\":_vm.hide}},[_vm._v(\"hide\")])]),_c('nav',{staticClass:\"scene-nav\"},_vm._l((_vm.nav),function(navitem){return _c('div',{key:navitem,class:{'current-nav': navitem===_vm.currentNav},on:{\"click\":function($event){_vm.currentNav = navitem}}},[_vm._v(_vm._s(navitem))])}),0),(_vm.sceneView)?_c('div',{staticClass:\"view-wrap\"},[(_vm.currentNav === 'hierarchy')?_c('NodeView',{attrs:{\"view\":_vm.sceneView.root},on:{\"nodeChange\":_vm.catchChange}}):_vm._e(),(_vm.currentNav === 'geometry')?_c('GeometryViewPanel',{attrs:{\"view\":_vm.sceneView}}):_vm._e(),(_vm.currentNav === 'material')?_c('MaterialViewPanel',{attrs:{\"view\":_vm.sceneView}}):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"render-info\"},[_c('div',{staticClass:\"panel-title\"},[_vm._v(\"RenderInfo\")]),(_vm.renderView)?_c('div',{staticClass:\"render-info-group\"},[_c('div',[_vm._v(\"\\n        activeProgramCount: \"+_vm._s(_vm.renderView.compiledPrograms)+\"\\n      \")]),_c('div',[_vm._v(\"\\n        programswitch: \"+_vm._s(_vm.renderView.programSwitchCount)+\"\\n      \")]),_c('div',[_vm._v(\"\\n        drawcall: \"+_vm._s(_vm.renderView.drawcall)+\"\\n      \")]),_c('div',[_vm._v(\"\\n        uniformUpload: \"+_vm._s(_vm.renderView.uniformUpload)+\"\\n      \")])]):_c('div',{staticClass:\"render-info-group\"},[_vm._v(\"\\n      sync scene to get synced render info stat\\n    \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Vector3 } from '../../../src/math';\nimport { SceneNode } from '../../../src/scene/scene-node';\nimport { Scene } from '../../../src/scene/scene';\nimport { Mesh, OBJLoader, NormalShading, Geometry, Material, Shading } from '../../../src/artgl';\nimport { loadStringFromFile } from '../../../src/util/file-io';\n\n \nconst objLoader = new OBJLoader();\n\ninterface BufferView{\n  name: string\n  type: string,\n  dataByteSize: number;\n}\nexport class GeometryView{\n  uuid: string;\n  name: string;\n  buffers: BufferView[]\n  static create(geometry: Geometry): GeometryView {\n    const view = new GeometryView();\n    view.uuid = geometry.uuid;\n    view.name = geometry.name === undefined ? 'unnamed' : geometry.name;\n    view.buffers = [];\n    for (const key in geometry.bufferDatum) {\n      if (geometry.bufferDatum.hasOwnProperty(key)) {\n        const bufferdata = geometry.bufferDatum[key];\n        view.buffers.push({\n          name: key,\n          type: 'bufferdata',\n          dataByteSize: bufferdata.getDataSizeByte()\n        })\n      }\n    }\n    if (geometry.indexBuffer) {\n      view.buffers.push({\n        name: 'index',\n        type: 'indexbuffer',\n        dataByteSize: geometry.indexBuffer.getDataSizeByte()\n      })\n    }\n    return view;\n  }\n}\n\nexport class MaterialView{\n  uuid: string;\n  name: string;\n  static create(material: Material): MaterialView {\n    const view = new MaterialView();\n    view.uuid = material.uuid;\n    // view.name = geometry.name === undefined ? 'unnamed' : geometry.name;\n    // view.buffers = [];\n    // for (const key in geometry.bufferDatum) {\n    //   if (geometry.bufferDatum.hasOwnProperty(key)) {\n    //     const bufferdata = geometry.bufferDatum[key];\n    //     view.buffers.push({\n    //       name: key,\n    //       type: 'bufferdata',\n    //       dataByteSize: bufferdata.getDataSizeByte()\n    //     })\n    //   }\n    // }\n    return view;\n  }\n}\n\nexport class SceneView{\n  root: SceneNodeView\n  geometries: Map<string, GeometryView> = new Map();\n  materials: Map<string, MaterialView> = new Map();\n  \n  collectEntity(node: SceneNode) {\n    if (node instanceof Mesh) {\n      const geometry = node.geometry;\n      const material = node.material;\n      if (geometry !== undefined) {\n        if (!this.geometries.has(geometry.uuid)) {\n          this.geometries.set(geometry.uuid, GeometryView.create(geometry));\n        }\n      }\n      if (material !== undefined) {\n        if (!this.geometries.has(material.uuid)) {\n          this.materials.set(material.uuid, MaterialView.create(material));\n        }\n      }\n    }\n  }\n\n  static create(scene: Scene): SceneView {\n    const view = new SceneView();\n    view.root = scene.root.map((node: SceneNode) => {\n      view.collectEntity(node);\n      return SceneNodeView.create(node);\n    })\n    return view;\n  }\n\n  static deleteNode(id: string, scene: Scene) {\n    const result = scene.root.findSubNode(id);\n    if (result === undefined) {\n      return;\n    }\n    if (result.parent) {\n      result.parent.removeChild(result);\n    } else { // scene root\n      scene.setRootNode(new SceneNode())\n    }\n  }\n\n  static async loadObj(id: string, scene: Scene) {\n    const node = scene.root.findSubNode(id);\n    if (node === undefined) {\n      return;\n    }\n    const objstr = await loadStringFromFile();\n    if(!objstr && objstr.length === 0){\n      return ;\n    }\n    const geo = objLoader.parse(objstr);\n    const mesh = new Mesh();\n    mesh.geometry = geo;\n    mesh.shading = new Shading().decorate(new NormalShading());\n    node.addChild(mesh);\n  }\n}\n\nexport class SceneNodeView{\n  position = new Vector3();\n  uuid: string;\n  type = 'node';\n  \n  children: SceneNodeView[] = [];\n  static create(node: SceneNode): SceneNodeView{\n    const nodeview = new SceneNodeView();\n    nodeview.position.copy(node.transform.position);\n    nodeview.uuid = node.uuid;\n    if (node instanceof Mesh) {\n      nodeview.type = 'mesh'\n    }\n    return nodeview;\n  }\n\n}","import { RenderEngine } from '../../../src/artgl';\n\nexport class RenderView{\n  compiledPrograms: number;\n  programSwitchCount: number;\n  uniformUpload: number;\n  drawcall: number;\n\n  static create(engine: RenderEngine) {\n    const renderer = engine.renderer;\n    const view = new RenderView;\n    view.compiledPrograms = renderer.programManager.compiledProgramsCount;\n    view.updateFrameInfo(engine);\n    return view;\n  }\n\n  updateFrameInfo(engine: RenderEngine) {\n    this.programSwitchCount = engine.renderer.stat.programSwitch;\n    this.uniformUpload = engine.renderer.stat.uniformUpload;\n    this.drawcall = engine.renderer.stat.drawcall;\n  }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"geometry-view\"},_vm._l((_vm.geometrylist),function(geometry){return _c('div',{key:geometry.uuid},[_c('span',[_vm._v(\"\\n    \"+_vm._s(geometry.name)+\"-\"+_vm._s(geometry.uuid.slice(0, 6))+\"\\n  \")]),(_vm.expandDetail)?_c('div',{staticClass:\"buffer-detail\"},_vm._l((geometry.buffers),function(bufferinfo){return _c('div',{key:bufferinfo.name},[_vm._v(\"\\n      \"+_vm._s(bufferinfo.name)+\" - \"+_vm._s(Math.ceil(bufferinfo.dataByteSize / 1024 * 10)/ 10)+\"KB\\n      \")])}),0):_vm._e()])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { SceneView, GeometryView } from \"../../model/scene-view\";\n\n@Component({\n  components: {\n  }\n})\nexport default class GeometryViewPanel extends Vue {\n  @Prop() view: SceneView\n\n  expandDetail = true;\n\n  get geometrylist(){\n    const list = [];\n    this.view.geometries.forEach(geo =>{\n      list.push(geo);\n    })\n    return list;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./geometry-view.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./geometry-view.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./geometry-view.vue?vue&type=template&id=16a04246&scoped=true&\"\nimport script from \"./geometry-view.vue?vue&type=script&lang=ts&\"\nexport * from \"./geometry-view.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./geometry-view.vue?vue&type=style&index=0&id=16a04246&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16a04246\",\n  null\n  \n)\n\ncomponent.options.__file = \"geometry-view.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"material-view\"},[(_vm.materiallist.length===0)?_c('div',[_vm._v(\"\\n    no material found\\n  \")]):_vm._e(),_vm._l((_vm.materiallist),function(material){return _c('div',{key:material.uuid},[_c('span',[_vm._v(\"\\n      \"+_vm._s(material.name)+\"-\"+_vm._s(material.uuid.slice(0, 6))+\"\\n    \")]),(_vm.expandDetail)?_c('div',{staticClass:\"channel-detail\"}):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',[_vm._v(\"upload\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nexport default class ChannelEditor extends Vue {\n\n}\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./channel-editor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./channel-editor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./channel-editor.vue?vue&type=template&id=6398d63e&\"\nimport script from \"./channel-editor.vue?vue&type=script&lang=ts&\"\nexport * from \"./channel-editor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"channel-editor.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { SceneView, MaterialView } from \"../../model/scene-view\";\nimport ChannelEditor from \"./channel-editor.vue\";\n\n@Component({\n  components: {\n    ChannelEditor\n  }\n})\nexport default class materialViewPanel extends Vue {\n  @Prop() view: SceneView\n\n  expandDetail = true;\n\n  get materiallist(){\n    const list = [];\n    this.view.materials.forEach(mat =>{\n      list.push(mat);\n    })\n    return list;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./material-view.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./material-view.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./material-view.vue?vue&type=template&id=0becaf20&scoped=true&\"\nimport script from \"./material-view.vue?vue&type=script&lang=ts&\"\nexport * from \"./material-view.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0becaf20\",\n  null\n  \n)\n\ncomponent.options.__file = \"material-view.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"object-panel\"},[_c('button',[_vm._v(\"X\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n@Component({\n  components:{\n  }\n})\nexport default class ObjectPanel extends Vue {\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./object-panel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./object-panel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./object-panel.vue?vue&type=template&id=4a932871&scoped=true&\"\nimport script from \"./object-panel.vue?vue&type=script&lang=ts&\"\nexport * from \"./object-panel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./object-panel.vue?vue&type=style&index=0&id=4a932871&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a932871\",\n  null\n  \n)\n\ncomponent.options.__file = \"object-panel.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"node-view\"},[_c('div',{staticClass:\"title\"},[_c('div',{class:{'expandable': _vm.hasChildren},on:{\"click\":function($event){_vm.isExpand = !_vm.isExpand}}},[(_vm.hasChildren && !_vm.isExpand)?_c('span',[_vm._v(\" + \")]):_vm._e(),(_vm.hasChildren && _vm.isExpand)?_c('span',[_vm._v(\" = \")]):_vm._e(),_vm._v(\"\\n\\n      \"+_vm._s(_vm.view.type)+\" - \"+_vm._s(_vm.clampId)+\"\\n    \")]),_c('button',{on:{\"click\":function($event){_vm.showMenu = true}}},[_vm._v(\"*\")])]),(_vm.showMenu)?_c('div',{staticClass:\"menu\"},[_c('button',{on:{\"click\":_vm.emitDelete}},[_vm._v(\"delete\")]),_c('button',{on:{\"click\":_vm.emitLoadObj}},[_vm._v(\"loadobj\")])]):_vm._e(),(_vm.showMenu)?_c('div',{staticClass:\"mask\",on:{\"click\":function($event){_vm.showMenu = false}}}):_vm._e(),(_vm.isExpand)?_c('div',{staticClass:\"children\"},_vm._l((_vm.view.children),function(child){return _c('scene-node-view',{key:child.uuid,attrs:{\"view\":child},on:{\"nodeChange\":_vm.emitChange}})}),1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { SceneNodeView } from '../../model/scene-view';\n@Component({\n  name:'scene-node-view'\n})\nexport default class BooleanEditor extends Vue {\n  @Prop() view: SceneNodeView;\n\n  showMenu = false;\n\n  get clampId(){\n    return this.view.uuid.slice(0, 6);\n  }\n  isExpand:boolean = true;\n\n  get hasChildren(){\n    return this.view.children.length;\n  }\n\n  emitLoadObj(){\n    this.emitChange({\n      type: 'load',\n      id: this.view.uuid\n    })\n  }\n\n  emitDelete(){\n    this.emitChange({\n      type: 'delete',\n      id: this.view.uuid\n    })\n  }\n\n  emitChange(info){\n    this.$emit('nodeChange', info);\n    this.showMenu = false;\n  }\n}\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-node-view.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-node-view.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./scene-node-view.vue?vue&type=template&id=95da2114&scoped=true&\"\nimport script from \"./scene-node-view.vue?vue&type=script&lang=ts&\"\nexport * from \"./scene-node-view.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./scene-node-view.vue?vue&type=style&index=0&id=95da2114&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95da2114\",\n  null\n  \n)\n\ncomponent.options.__file = \"scene-node-view.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { SceneView } from \"../../model/scene-view\";\nimport { RenderView } from \"../../model/render-view\";\nimport GeometryViewPanel from './geometry-view.vue';\nimport MaterialViewPanel from './material-view.vue';\nimport ObjectPanel from \"../object-panel/object-panel.vue\";\nimport { GLApp } from \"../../application\";\nimport NodeView from \"./scene-node-view.vue\";\nimport { Observer } from \"../../../../src/core/observable\";\nimport { RenderEngine } from \"../../../../src/artgl\";\n\n@Component({\n  components: {\n    NodeView,\n    ObjectPanel,\n    GeometryViewPanel,\n    MaterialViewPanel\n  }\n})\nexport default class ScenePanel extends Vue {\n  sceneView: SceneView = null;\n  renderView: RenderView = null;\n  afterObs:Observer<RenderEngine>\n\n  nav = ['hierarchy', 'technique','geometry','material'];\n  currentNav = 'hierarchy'\n  $store: any;\n\n  sync() {\n    this.sceneView = SceneView.create(GLApp.scene);\n    this.renderView = RenderView.create(GLApp.engine);\n    if(this.afterObs){\n      GLApp.afterRender.remove(this.afterObs);\n    }\n    this.afterObs = GLApp.afterRender.add((engine:RenderEngine)=>{\n      this.renderView.updateFrameInfo(engine);\n    });\n  }\n\n  async hide(){\n    this.$store.state.showScenePanel = false;\n    await this.$nextTick()\n    GLApp.notifyResize();\n  }\n\n  beforeDestroy(){\n    if(this.afterObs){\n      GLApp.afterRender.remove(this.afterObs);\n    }\n  }\n\n  async catchChange(info) {\n    if (info.type === \"delete\") {\n      SceneView.deleteNode(info.id, GLApp.scene);\n    } else if (info.type === \"load\") {\n      await SceneView.loadObj(info.id, GLApp.scene);\n    } else {\n      console.log(\"unkown change\");\n      console.log(info);\n    }\n    this.sync();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-panel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scene-panel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./scene-panel.vue?vue&type=template&id=cd90fe88&scoped=true&\"\nimport script from \"./scene-panel.vue?vue&type=script&lang=ts&\"\nexport * from \"./scene-panel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./scene-panel.vue?vue&type=style&index=0&id=cd90fe88&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cd90fe88\",\n  null\n  \n)\n\ncomponent.options.__file = \"scene-panel.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-wrap\"},[_c('canvas',{attrs:{\"id\":\"viewer-canvas\"},on:{\"click\":_vm.pick}}),(!_vm.isRunning)?_c('div',{staticClass:\"stop-notation\"},[_vm._v(\"STOPPED\")]):_vm._e(),(_vm.showGraphViewer)?_c('div',{staticClass:\"graph-viewer-wrap\"},[_c('div',{staticStyle:{\"position\":\"absolute\",\"bottom\":\"0px\",\"pointer-events\":\"auto\"}},[_c('button',{on:{\"click\":_vm.layout}},[_vm._v(\"layout\")])]),_c('GraphView',{attrs:{\"board\":_vm.board},on:{\"updateAllViewport\":_vm.updateAllViewport}},_vm._l((_vm.nodes),function(nodeView){return _c('DAGNodeView',{key:nodeView.node.uuid,ref:\"vueNodes\",refInFor:true,attrs:{\"node\":nodeView.node,\"layout\":nodeView.layout,\"boardInfo\":_vm.board},on:{\"updateViewport\":_vm.updateViewport,\"updateLine\":_vm.updateLine}},[(_vm.isRenderTargetNode(nodeView.node))?_c('RenderTargetNodeView',{attrs:{\"node\":nodeView.node,\"layout\":nodeView.layout},on:{\"updateSize\":_vm.updateViewport}}):_vm._e()],1)}),1),_c('LineHUDCanvas',{attrs:{\"lines\":_vm.lines,\"boardInfo\":_vm.board}})],1):_vm._e(),_c('div',{staticClass:\"command-bar\"},[(!_vm.isRunning)?_c('button',{on:{\"click\":_vm.run}},[_vm._v(\"run\")]):_vm._e(),(_vm.isRunning)?_c('button',{on:{\"click\":_vm.stop}},[_vm._v(\"stop\")]):_vm._e(),(!_vm.isRunning)?_c('button',{on:{\"click\":_vm.step}},[_vm._v(\"step next frame\")]):_vm._e(),(!_vm.isRunning)?_c('button',{attrs:{\"disabled\":\"\"},on:{\"click\":_vm.screenshot}},[_vm._v(\"download screenshot\")]):_vm._e(),(!_vm.showGraphViewer)?_c('button',{on:{\"click\":_vm.inspectGraph}},[_vm._v(\"inspectGraph\")]):_vm._e(),(_vm.showGraphViewer)?_c('button',{on:{\"click\":_vm.closeGraphInspector}},[_vm._v(\"closeGraphViewer\")]):_vm._e(),_c('button',{on:{\"click\":_vm.showScenePanel}},[_vm._v(\"show scene panel\")]),_c('button',{on:{\"click\":_vm.showConfigPanel}},[_vm._v(\"show config panel\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"graph-viewer\",attrs:{\"tabindex\":\"-1\"}},[_c('div',{style:({\n        transform: _vm.transform\n      })},[_vm._t(\"default\")],2),(_vm.showMove)?_c('div',{staticClass:\"mask\",on:{\"mousedown\":_vm.startDrag}}):_vm._e(),_c('div',{staticClass:\"ops\"},[(!_vm.showMove)?_c('button',{on:{\"click\":function($event){_vm.showMove = true}}},[_vm._v(\"move\")]):_vm._e(),(_vm.showMove)?_c('button',{on:{\"click\":function($event){_vm.showMove = false}}},[_vm._v(\"unmove\")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { Vector4 } from \"../../../../src/math\";\nimport { GraphBoardInfo } from \"../../model/graph-view\";\n\n@Component({\n  components: {}\n})\nexport default class GraphViewer extends Vue {\n  @Prop({ required: true }) board: GraphBoardInfo;\n\n  get transform() {\n    return `translate(${this.board.transformX}px, ${this.board.transformY}px)`;\n  }\n\n  showMove = false;\n\n  isDragging = false;\n  originTransformX: number;\n  originTransformY: number;\n  screenOriginX: number;\n  screenOriginY: number;\n  startDrag(e) {\n    this.isDragging = true;\n    this.screenOriginX = e.screenX;\n    this.screenOriginY = e.screenY;\n    this.originTransformX = this.board.transformX;\n    this.originTransformY = this.board.transformY;\n    window.addEventListener(\"mousemove\", this.dragging);\n    window.addEventListener(\"mouseup\", e => {\n      this.isDragging = false;\n      window.removeEventListener(\"mousemove\", this.dragging);\n    });\n  }\n\n  dragging(e) {\n    this.board.transformX =\n      this.originTransformX + e.screenX - this.screenOriginX;\n    this.board.transformY =\n      this.originTransformY + e.screenY - this.screenOriginY;\n    this.$emit(\"updateAllViewport\");\n  }\n\n  mounted() {\n    this.updateBoard();\n    window.addEventListener(\"resize\", this.updateBoard)\n  }\n\n  beforeDestroy(){\n    window.removeEventListener(\"resize\", this.updateBoard)\n  }\n\n  updateBoard() {\n    this.board.width = this.$el.clientWidth;\n    this.board.height = this.$el.clientHeight;\n    this.$emit(\"updateAllViewport\");\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./graph-viewer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./graph-viewer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./graph-viewer.vue?vue&type=template&id=4b63007a&scoped=true&\"\nimport script from \"./graph-viewer.vue?vue&type=script&lang=ts&\"\nexport * from \"./graph-viewer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./graph-viewer.vue?vue&type=style&index=0&id=4b63007a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b63007a\",\n  null\n  \n)\n\ncomponent.options.__file = \"graph-viewer.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dag-node\",style:({\n  left: _vm.viewPositionX,\n  top: _vm.viewPositionY,\n  width: _vm.viewWidth,\n })},[_c('div',{staticClass:\"node-title\",style:({cursor: this.isDragging? 'grabbing': ''}),on:{\"mousedown\":_vm.startDrag}},[_c('span',[_vm._v(_vm._s(_vm.node.constructor.name)+\": \"+_vm._s(_vm.node.uuid.slice(0,4)))])]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { DAGNode } from '../../../src/core/dag-node';\n\nexport interface GraphBoardInfo {\n  width: number,\n  height: number,\n  transformX: number,\n  transformY: number,\n}\n\nexport interface NodeLayout {\n  absX: number,\n  absY: number,\n  width: number,\n  height: number,\n}\n\nexport function getRightEnd(layout: NodeLayout) {\n  return {\n    x: layout.absX + layout.width,\n    y: layout.absY + 10,\n  }\n}\n\nexport interface ViewNode {\n  node: DAGNode;\n  layout: NodeLayout;\n}\n\n\nexport function layoutGraph(\n  rootNode: DAGNode,\n  layoutNodeMap: { [index: string]: NodeLayout },\n  gridSize = 300\n) {\n\n  const horizonArray: Array<Array<DAGNode>> = [];\n  function removeItem(node: DAGNode) {\n    horizonArray.forEach((row: DAGNode[]) => {\n      const index = row.indexOf(node);\n      if (index !== -1) {\n        row.splice(index, 1)\n      }\n    })\n  }\n  function addNode(node: DAGNode, horizonPosition: number) {\n    let arr = horizonArray[horizonPosition];\n    if (arr === undefined) {\n      horizonArray[horizonPosition] = [];\n      arr = horizonArray[horizonPosition];\n    }\n    removeItem(node);\n    arr.push(node)\n\n    node.fromNodes.forEach(input => {\n      addNode(input, horizonPosition + 1);\n    })\n  }\n  addNode(rootNode, 0);\n  horizonArray.reverse().forEach((row, indexRow) => {\n    row.forEach((item, indexY) => {\n\n      const layout = layoutNodeMap[item.uuid]\n      if (layout === undefined) {\n        throw 'cant find nodes layout'\n      }\n\n      layout.absX = indexRow * gridSize;\n      layout.absY = indexY * gridSize\n    })\n  })\n}\n\n\nexport class ConnectionLine {\n  startX: number = 0;\n  startY: number = 0;\n  endX: number = 0;\n  endY: number = 0;\n\n  draw(hud: LinesHUD, boardInfo: GraphBoardInfo) {\n    const ctx = hud.ctx;\n    ctx.beginPath();\n    ctx.moveTo(this.startX + boardInfo.transformX, this.startY + boardInfo.transformY);\n    ctx.lineTo(this.endX + boardInfo.transformX, this.endY + boardInfo.transformY);\n    ctx.stroke();\n  }\n}\n\nexport class LinesHUD {\n  constructor(el: HTMLCanvasElement) {\n    this.el = el;\n    this.ctx = el.getContext('2d');\n  }\n  el: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n  width: number = 0;\n  height: number = 0;\n\n  clear() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n\n  draw(lines: ConnectionLine[], boardInfo: GraphBoardInfo) {\n    this.clear();\n    lines.forEach(line => line.draw(this, boardInfo));\n  }\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, InjectReactive } from \"vue-property-decorator\";\nimport { ShaderGraph, ShaderNode, DAGNode } from \"../../../../src/artgl\";\nimport {\n  NodeLayout,\n  GraphBoardInfo,\n  ViewNode,\n  ConnectionLine,\n  getRightEnd\n} from \"../../model/graph-view\";\nimport { findFirst } from \"../../../../src/util/array\";\n\n@Component({\n  components: {}\n})\nexport default class DAGNodeView extends Vue {\n  @InjectReactive() nodes: ViewNode[];\n  @InjectReactive() lines: ConnectionLine[];\n\n  @Prop({\n    required: true\n  })\n  node: DAGNode;\n\n  @Prop({\n    required: true\n  })\n  layout: NodeLayout;\n\n  @Prop({\n    required: true\n  })\n  boardInfo: GraphBoardInfo;\n\n  @Prop({\n    required: false,\n    default: true\n  })\n  editable: boolean;\n\n  getNodesLayout(node: DAGNode) {\n    return findFirst(this.nodes, vn => {\n      return vn.node === node;\n    }).layout;\n  }\n\n  getLines(): ConnectionLine[] {\n    return this.inputs.map(inputNode => {\n      const rightCenter = getRightEnd(this.getNodesLayout(inputNode));\n      const line = new ConnectionLine();\n      line.startX = rightCenter.x;\n      line.startY = rightCenter.y;\n      line.endX = this.layout.absX;\n      line.endY = this.layout.absY;\n      return line;\n    });\n  }\n\n  selfLines: ConnectionLine[] = [];\n  updateLine() {\n    this.selfLines.forEach(line => {\n      const position = this.lines.indexOf(line);\n      if (position !== -1) {\n        this.lines.splice(position, 1);\n      }\n    });\n    this.selfLines = this.getLines();\n    this.selfLines.forEach(line => {\n      this.lines.push(line);\n    });\n  }\n\n  mounted() {\n    this.updateLine();\n  }\n\n  get inputs(): DAGNode[] {\n    const results = [];\n    this.node.fromNodes.forEach(value => {\n      results.push(value);\n    });\n    return results;\n  }\n\n  get viewPositionX() {\n    return this.layout.absX + \"px\";\n  }\n  get viewPositionY() {\n    return this.layout.absY + \"px\";\n  }\n\n  get viewWidth() {\n    return this.layout.width + \"px\";\n  }\n  get viewHeight() {\n    return this.layout.height + \"px\";\n  }\n\n  isDragging: boolean = false;\n  originX = 0;\n  originY = 0;\n  screenOriginX = 0;\n  screenOriginY = 0;\n  startDrag(e: MouseEvent) {\n    this.isDragging = true;\n    this.originX = this.layout.absX;\n    this.originY = this.layout.absY;\n    this.screenOriginX = e.screenX;\n    this.screenOriginY = e.screenY;\n    window.addEventListener(\"mousemove\", this.dragging);\n    window.addEventListener(\"mouseup\", e => {\n      this.isDragging = false;\n      window.removeEventListener(\"mousemove\", this.dragging);\n    });\n  }\n\n  dragging(e: MouseEvent) {\n    this.layout.absX = this.originX + e.screenX - this.screenOriginX;\n    this.layout.absY = this.originY + e.screenY - this.screenOriginY;\n    this.$emit(\"updateViewport\", { node: this.node, layout: this.layout });\n    this.$emit(\"updateLine\", this.node)\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dag-node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dag-node.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./dag-node.vue?vue&type=template&id=186cb780&scoped=true&\"\nimport script from \"./dag-node.vue?vue&type=script&lang=ts&\"\nexport * from \"./dag-node.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./dag-node.vue?vue&type=style&index=0&id=186cb780&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"186cb780\",\n  null\n  \n)\n\ncomponent.options.__file = \"dag-node.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{staticClass:\"lines-hud\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { LinesHUD, ConnectionLine, GraphBoardInfo } from \"../model/graph-view\";\n\n@Component({\n  components: {}\n})\nexport default class LineHUDCanvas extends Vue {\n  HUD: LinesHUD;\n  isRunning: boolean = true;\n\n  @Prop({\n    required: true\n  })\n  lines: ConnectionLine[];\n\n  @Prop({\n    required: true\n  })\n  boardInfo: GraphBoardInfo;\n\n  mounted() {\n    this.HUD = new LinesHUD(this.$el as HTMLCanvasElement);\n    window.addEventListener(\"resize\", this.updateSize);\n    window.requestAnimationFrame(this.draw);\n    this.updateSize();\n  }\n\n  beforeDestroy() {\n    this.isRunning = false;\n  }\n\n  updateSize() {\n    const el = this.$el as HTMLCanvasElement;\n    this.HUD.width = el.clientWidth;\n    this.HUD.height = el.clientHeight;\n    el.width = el.clientWidth;\n    el.height = el.clientHeight;\n  }\n\n  draw() {\n    this.HUD.draw(this.lines, this.boardInfo);\n    if (this.isRunning) {\n      window.requestAnimationFrame(this.draw);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./line-hud-canvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./line-hud-canvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./line-hud-canvas.vue?vue&type=template&id=3fa939d0&scoped=true&\"\nimport script from \"./line-hud-canvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./line-hud-canvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./line-hud-canvas.vue?vue&type=style&index=0&id=3fa939d0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3fa939d0\",\n  null\n  \n)\n\ncomponent.options.__file = \"line-hud-canvas.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"\\n  \"+_vm._s(_vm.node.name)+\"\\n  \"),_c('button',{on:{\"click\":_vm.actualSize}},[_vm._v(\"actual size\")]),_c('button',{on:{\"click\":_vm.defaultSize}},[_vm._v(\"default size\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { DAGNode, RenderTargetNode } from \"../../../../../src/artgl\";\nimport { NodeLayout, GraphBoardInfo } from \"../../../model/graph-view\";\n\n@Component({\n  components: {}\n})\nexport default class RenderTargetNodeView extends Vue {\n  @Prop({\n    required: true\n  })\n  node: RenderTargetNode;\n\n  @Prop({\n    required: true\n  })\n  layout: NodeLayout;\n  \n  actualSize() {\n    this.layout.width = this.node.widthAbs / 2 / window.devicePixelRatio;\n    this.layout.height = this.node.heightAbs / 2 / window.devicePixelRatio;\n    this.$emit(\"updateSize\", {\n      node: this.node,\n      layout: this.layout,\n    });\n  }\n\n  defaultSize() {\n    this.layout.width = 200;\n    this.layout.height = 200;\n    this.$emit(\"updateSize\", {\n      node: this.node,\n      layout: this.layout,\n    });\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render-target-node.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/ts-loader/index.js??ref--12-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render-target-node.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./render-target-node.vue?vue&type=template&id=3e54fb51&scoped=true&\"\nimport script from \"./render-target-node.vue?vue&type=script&lang=ts&\"\nexport * from \"./render-target-node.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e54fb51\",\n  null\n  \n)\n\ncomponent.options.__file = \"render-target-node.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, ProvideReactive } from \"vue-property-decorator\";\nimport { GLApp } from \"../application\";\nimport GraphView from \"../components/graph/graph-viewer.vue\";\nimport DAGNodeView from \"../components/graph/dag-node.vue\";\nimport LineHUDCanvas from \"./line-hud-canvas.vue\";\nimport RenderTargetNodeView from \"../components/graph/nodes/render-target-node.vue\";\nimport {\n  GraphBoardInfo,\n  ViewNode,\n  layoutGraph,\n  NodeLayout,\n  ConnectionLine\n} from \"../model/graph-view\";\nimport { RenderTargetNode } from \"../../../src/render-graph/node/render-target-node\";\nimport { Vector4, DAGNode } from \"../../../src/artgl\";\n\n@Component({\n  components: {\n    GraphView,\n    DAGNodeView,\n    RenderTargetNodeView,\n    LineHUDCanvas\n  }\n})\nexport default class ViewerCanvas extends Vue {\n  isRunning: boolean = GLApp.framer.active;\n  $store: any;\n\n  async showScenePanel() {\n    this.$store.state.showScenePanel = true;\n    await this.$nextTick();\n    GLApp.notifyResize();\n  }\n\n  async showConfigPanel() {\n    this.$store.state.showConfigPanel = true;\n    await this.$nextTick();\n    GLApp.notifyResize();\n  }\n\n  pick(e: MouseEvent) {\n    const canvas = this.$el.querySelector(\"canvas\");\n    GLApp.pickColor(\n      e.offsetX / canvas.clientWidth, \n      (canvas.clientHeight - e.offsetY) / canvas.clientHeight\n    );\n  }\n\n  showGraphViewer: boolean = false;\n  board: GraphBoardInfo = {\n    width: 0,\n    height: 0,\n    transformX: 0,\n    transformY: 0\n  };\n\n  @ProvideReactive() nodes: ViewNode[] = [];\n  @ProvideReactive() lines: ConnectionLine[] = [];\n\n  updateViewport({ node, layout }) {\n    if (node instanceof RenderTargetNode) {\n      const viewport = new Vector4();\n      const l = layout as NodeLayout;\n      const n = node as RenderTargetNode;\n      viewport.set(\n        l.absX + this.board.transformX,\n        this.board.height - l.absY - l.height - this.board.transformY,\n        l.width,\n        l.height\n      );\n      viewport.multiplyScalar(window.devicePixelRatio);\n      n.debugViewPort.copy(viewport);\n    }\n  }\n\n  updateLine(node: DAGNode){\n    this.notifyNodeNeedUpdateLine(node)\n    node.toNodes.forEach(no =>{\n      this.notifyNodeNeedUpdateLine(no);\n    })\n  }\n\n  notifyNodeNeedUpdateLine(n: DAGNode){\n    if(this.$refs.vueNodes){\n      for (let i = 0; i < (this.$refs.vueNodes as Array<DAGNodeView>).length; i++) {\n        const v = this.$refs.vueNodes[i];\n        if(v.node === n){\n          v.updateLine();\n        }\n      }\n    }\n  }\n\n  updateAllViewport() {\n    this.nodes.forEach(node => {\n      this.updateViewport(node);\n    });\n  }\n\n  layout() {\n    const map = {};\n    this.nodes.forEach(node => {\n      map[node.node.uuid] = node.layout;\n    });\n    layoutGraph(GLApp.pipeline.graph.screenNode, map);\n    this.updateAllViewport();\n    \n    this.nodes.forEach(node => this.updateLine(node.node))\n  }\n\n  isRenderTargetNode(node) {\n    return node instanceof RenderTargetNode;\n  }\n\n  inspectGraph() {\n    GLApp.pipeline.graph.enableDebuggingView = true;\n    const nodes = GLApp.pipeline.graph.nodes;\n    this.nodes = nodes.map(node => {\n      return {\n        node,\n        layout: {\n          absX: 0,\n          absY: 0,\n          width: 200,\n          height: 200\n        }\n      };\n    });\n    this.showGraphViewer = true;\n    this.layout();\n  }\n\n  closeGraphInspector() {\n    GLApp.pipeline.graph.enableDebuggingView = false;\n    this.showGraphViewer = false;\n  }\n\n  run() {\n    GLApp.run();\n    this.isRunning = true;\n  }\n\n  stop() {\n    GLApp.stop();\n    this.isRunning = false;\n  }\n\n  step() {\n    GLApp.step();\n  }\n\n  screenshot() {\n    GLApp.engine.downloadCurrentRender();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer-canvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer-canvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./viewer-canvas.vue?vue&type=template&id=5da8d6ca&scoped=true&\"\nimport script from \"./viewer-canvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./viewer-canvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./viewer-canvas.vue?vue&type=style&index=0&id=5da8d6ca&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5da8d6ca\",\n  null\n  \n)\n\ncomponent.options.__file = \"viewer-canvas.vue\"\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport ConfigPanel from './config-panel.vue'\nimport ScenePanel from './scene-panel/scene-panel.vue'\nimport ObjectPanel from './object-panel/object-panel.vue'\nimport ViewerCanvas from './viewer-canvas.vue'\nimport {GLApp} from '../application';\n\n@Component({\n  components:{\n    ConfigPanel, ScenePanel, ViewerCanvas, ObjectPanel\n  }\n})\nexport default class Viewer extends Vue {\n  mounted(){\n    const canvas = this.$el.querySelector('#viewer-canvas') as HTMLCanvasElement;\n    GLApp.initialize(canvas);\n    this.appConf = GLApp.pipeline.config;\n  }\n\n  appConf = {\n    name: 'root',\n    type: 'folder',\n    value: []\n  };\n\n  \n  beforeDestroy(){\n    GLApp.unintialize();\n  }\n\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./viewer.vue?vue&type=template&id=36c0e409&scoped=true&\"\nimport script from \"./viewer.vue?vue&type=script&lang=ts&\"\nexport * from \"./viewer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./viewer.vue?vue&type=style&index=0&id=36c0e409&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36c0e409\",\n  null\n  \n)\n\ncomponent.options.__file = \"viewer.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shader-graph\"},[_c('div',{staticClass:\"editor\"},[_c('button',{on:{\"click\":_vm.layout}},[_vm._v(\"relayout\")]),_c('div',[_c('button',{on:{\"click\":_vm.addUniform}},[_vm._v(\"uniform\")]),_c('button',[_vm._v(\"attribute\")])]),_c('GraphView',{attrs:{\"board\":_vm.board}},_vm._l((_vm.nodes),function(nodeView){return _c('DAGNodeView',{key:nodeView.node.uuid,attrs:{\"node\":nodeView.node,\"layout\":nodeView.layout,\"boardInfo\":_vm.board},on:{\"updateViewport\":function($event){return _vm.updateViewport(nodeView)}}})}),1)],1),_c('div',{staticClass:\"viewer\"},[_c('h1',[_vm._v(\"viewer\")]),(_vm.showCode)?_c('button',{on:{\"click\":function($event){_vm.showCode = false}}},[_vm._v(\"canvas\")]):_c('button',{on:{\"click\":_vm.codeGen}},[_vm._v(\"view generated code\")]),_c('button',{on:{\"click\":_vm.updateTechnique}},[_vm._v(\"updateTechnique\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showCode),expression:\"showCode\"}],staticClass:\"code-result\"},[_c('pre',[_vm._v(_vm._s(_vm.codeGenResult))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showCode),expression:\"!showCode\"}],staticClass:\"canvas-wrap\",on:{\"mouseenter\":_vm.start,\"mouseleave\":_vm.end}},[_c('canvas',{attrs:{\"id\":\"shader-editor-canvas\"}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport {\n  RenderEngine, Mesh, Interactor, OrbitController, Shading,\n  ShaderGraph, PerspectiveCamera, Scene, NormalShading, SphereGeometry\n} from '../../src/artgl';\n\nexport class ShaderApplication {\n\n  canvas: HTMLCanvasElement;\n  graph: ShaderGraph = new ShaderGraph();\n  scene: Scene = new Scene();\n\n  shader: Shading;\n  mesh: Mesh;\n  orbitController: OrbitController;\n\n  engine: RenderEngine;\n\n\n  init(canvas: HTMLCanvasElement) {\n    this.canvas = canvas;\n    this.engine = new RenderEngine(canvas);\n    this.engine.camera.transform.position.set(20, 10, 10)\n    this.orbitController = new OrbitController(this.engine.camera as PerspectiveCamera);\n    this.orbitController.registerInteractor(this.engine.interactor);\n    this.shader = new Shading().decorate(new NormalShading());\n    this.loadScene();\n    this.tick();\n    this.start();\n\n    window.addEventListener('resize', this.onContainerResize);\n    this.onContainerResize();\n  }\n\n  updateShader() {\n    // const newConf = this.graph.compile();\n    // console.log(newConf)\n    // this.technique = new Technique({\n    //   programConfig: newConf\n    // });\n    // this.mesh.technique = this.technique;\n  }\n\n  loadScene() {\n    let testGeo = new SphereGeometry(1, 40, 40);\n    const mesh = new Mesh();\n    mesh.geometry = testGeo;\n    mesh.shading = this.shader;\n    this.mesh = mesh;\n    this.scene.root.addChild(mesh);\n  }\n\n  canvasRun: boolean = false;\n  start() {\n    this.canvasRun = true;\n  }\n\n  tick = () => {\n    if (this.canvasRun) {\n      this.render();\n    }\n    window.requestAnimationFrame(this.tick);\n  }\n\n  render() {\n    this.orbitController.update();\n    this.engine.connectCamera();\n    this.engine.render(this.scene);\n  }\n\n  uninit() {\n    this.canvas = null;\n    this.engine = null;\n  }\n\n  private onContainerResize = () => {\n    const width = this.canvas.offsetWidth;\n    const height = this.canvas.offsetHeight;\n    this.engine.setSize(width, height);\n    (this.engine.camera as PerspectiveCamera).aspect = width / height;\n  }\n\n\n}\n\n\nexport let ShaderApp: ShaderApplication = new ShaderApplication();","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { ShaderApp } from \"../shader-application\";\nimport {\n  injectFragmentShaderHeaders,\n  GLDataType\n} from \"../../../src/webgl/shader-util\";\nimport { ShaderGraph, uniform, DAGNode } from \"../../../src/artgl\";\nimport DAGNodeView from \"../components/graph/dag-node.vue\";\nimport GraphView from \"../components/graph/graph-viewer.vue\";\nimport { ShaderNode } from \"../../../src/shader-graph/shader-node\";\nimport { GraphBoardInfo, NodeLayout, ViewNode } from \"../model/graph-view\";\n\n@Component({\n  components: {\n    DAGNodeView,\n    GraphView\n  }\n})\nexport default class ShaderEditor extends Vue {\n  showCode: boolean = false;\n  graph: ShaderGraph = null;\n  codeGenResult: string = \"\";\n\n  board: GraphBoardInfo = {\n    width: 0,\n    height: 0,\n    transformX: 0,\n    transformY: 0\n  };\n\n  nodes: ViewNode[] = [];\n\n  mounted() {\n    const canvas = this.$el.querySelector(\"#shader-editor-canvas\");\n    ShaderApp.init(canvas as HTMLCanvasElement);\n    this.graph = ShaderApp.shader.graph;\n\n    this.board.width = canvas.clientWidth;\n    this.board.height = canvas.clientHeight;\n\n    // this.graphView = GraphView.createFromShaderGraph(ShaderApp.graph);\n    console.log(this.graph);\n  }\n\n  layout() {}\n\n  updateViewport(view: ViewNode) {\n    console.log(\"upd\");\n  }\n\n  codeGen() {\n    this.showCode = true;\n    // const result = ShaderApp.graph.compile();\n    // this.codeGenResult = injectFragmentShaderHeaders(result, result.fragmentShaderString);\n  }\n\n  addUniform() {\n    this.nodes.push({\n      node: uniform(\"unnamed\", GLDataType.float),\n      layout: {\n        absX: 0,\n        absY: 0,\n        width: 100,\n        height: 100\n      }\n    });\n  }\n\n  updateTechnique() {\n    ShaderApp.updateShader();\n  }\n\n  start() {\n    ShaderApp.start();\n  }\n\n  end() {\n    ShaderApp.canvasRun = false;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shader-editor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shader-editor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./shader-editor.vue?vue&type=template&id=31be39e7&scoped=true&\"\nimport script from \"./shader-editor.vue?vue&type=script&lang=ts&\"\nexport * from \"./shader-editor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./shader-editor.vue?vue&type=style&index=0&id=31be39e7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31be39e7\",\n  null\n  \n)\n\ncomponent.options.__file = \"shader-editor.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { NormalShading, DepthShading } from '../../../src/artgl';\n@Component({\n})\nexport default class Debug extends Vue {\n  mounted(){\n    console.log(\"debug\")\n    const test = new DepthShading();\n    // console.log(test.getProgramConfig());\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./debug.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./debug.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./debug.vue?vue&type=template&id=97a004c4&\"\nimport script from \"./debug.vue?vue&type=script&lang=ts&\"\nexport * from \"./debug.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"debug.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Examples\")]),_vm._l((_vm.examples),function(example){return _c('div',{key:example.name,staticClass:\"example-entry\",on:{\"click\":function($event){return _vm.gotoExample(example.name)}}},[_vm._v(_vm._s(example.name))])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\n@Component({\n  components: {}\n})\nexport default class ConfigPanel extends Vue {\n  $store: any;\n  $router: any;\n\n  get examples(){\n    return this.$store.state.examples;\n  }\n\n  mounted() {\n  }\n\n  gotoExample(name) {\n    console.log(\"goto\");\n    this.$store.state.viewExample = name;\n    this.$router.push({\n      name: \"example\",\n      params: {\n        name\n      }\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-page.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-page.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./example-page.vue?vue&type=template&id=063d4f2b&scoped=true&\"\nimport script from \"./example-page.vue?vue&type=script&lang=ts&\"\nexport * from \"./example-page.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./example-page.vue?vue&type=style&index=0&id=063d4f2b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"063d4f2b\",\n  null\n  \n)\n\ncomponent.options.__file = \"example-page.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(_vm._s(_vm.example.name))]),_c('div'),_vm._m(0),(_vm.exampleHasBuild)?_c('div',[(!_vm.isRunning)?_c('button',{on:{\"click\":_vm.start}},[_vm._v(\"start\")]):_vm._e(),(!_vm.isRunning)?_c('button',{on:{\"click\":_vm.step}},[_vm._v(\"step\")]):_vm._e(),(_vm.isRunning)?_c('button',{on:{\"click\":_vm.stop}},[_vm._v(\"stop\")]):_vm._e()]):_c('div',[_vm._v(\"\\n    example is in building\\n  \")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas')])}]\n\nexport { render, staticRenderFns }","import { Framer } from \"../../src/artgl\";\n\nexport interface TestBridge{\n  screenShotCompareElement(element: HTMLElement, goldenPath: string);\n\n  framer: Framer\n}\n\n\nexport class ViewerTestBridge implements TestBridge {\n  async screenShotCompareElement(element: HTMLElement, goldenPath: string) { }\n\n  framer: Framer = new Framer(); \n\n}\n\nexport class HeadlessTestBridge implements TestBridge {\n\n  async screenShotCompareElement(element: HTMLElement, goldenPath: string) {\n    await window.screenShotCompareElement(element, goldenPath);\n   }\n\n  framer: Framer = new Framer(); \n\n}\n\nwindow.HeadlessTestBridge = HeadlessTestBridge\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { ViewerTestBridge } from \"../../../../example/contents/test-bridge\";\n\nconst bridge = new ViewerTestBridge();\n\n@Component({\n  components: {}\n})\nexport default class ConfigPanel extends Vue {\n  $store: any;\n  $router: any;\n  $route: any;\n\n  get example() {\n    this.$store.state.viewExample = this.$route.params.name;\n    for (let i = 0; i < this.$store.state.examples.length; i++) {\n      const example = this.$store.state.examples[i];\n      if (example.name === this.$store.state.viewExample) {\n        return example;\n      }\n    }\n    throw \"cant find example\";\n  }\n\n  exampleHasBuild: boolean = false;\n  isRunning: boolean = false;\n\n  start(){\n    bridge.framer.run();\n    this.isRunning = true;\n  }\n\n  stop(){\n    bridge.framer.stop();\n    this.isRunning = false;\n  }\n\n  step(){\n    bridge.framer.step();\n  }\n\n  async mounted() {\n    console.log(this.example);\n    await this.example.build(bridge);\n    this.exampleHasBuild = true;\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-item-page.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-item-page.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./example-item-page.vue?vue&type=template&id=7335b2bb&scoped=true&\"\nimport script from \"./example-item-page.vue?vue&type=script&lang=ts&\"\nexport * from \"./example-item-page.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./example-item-page.vue?vue&type=style&index=0&id=7335b2bb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7335b2bb\",\n  null\n  \n)\n\ncomponent.options.__file = \"example-item-page.vue\"\nexport default component.exports","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from './views/home.vue'\nimport Viewer from './views/viewer.vue'\nimport ShaderEditor from './views/shader-editor.vue'\nimport Debug from './views/debug.vue'\nimport ExampleView from './views/example/example-page.vue'\nimport ExampleItemView from './views/example/example-item-page.vue'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: Home\n    },\n    {\n      path: '/debug',\n      name: 'debug',\n      component: Debug\n    },\n    {\n      path: '/viewer',\n      name: 'viewer',\n      component: Viewer\n    },\n    {\n      path: '/shader',\n      name: 'shader-editor',\n      component: ShaderEditor\n    },\n    {\n      path: '/examples',\n      name: 'examples',\n      component: ExampleView\n    },\n    {\n      path: '/example/:name',\n      name: 'example',\n      component: ExampleItemView\n    },\n    {\n      path: '/about',\n      name: 'about',\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () => import(/* webpackChunkName: \"about\" */ './views/About.vue')\n    }\n  ]\n})\n","import * as ARTGL from '../../src/artgl'\n\nexport default async function () {\n\n\n  //==\n  // # 基本使用\n  // \n  // 在一个3d场景中，绘制一个简单的立方体\n  //==\n\n\n  //==>\n\n  let canvas = document.querySelector('canvas');\n\n  const engine = new ARTGL.RenderEngine(canvas);\n\n  const scene = new ARTGL.Scene();\n\n  let testMesh = new ARTGL.Mesh();\n\n  scene.root.addChild(testMesh);\n\n  engine.render(scene);\n\n  //==<\n\n\n}","import * as ARTGL from '../../src/artgl'\nimport { TestBridge } from './test-bridge';\nimport { Vector3 } from '../../src/artgl';\n\nexport default async function test(testBridge: TestBridge) {\n\n  //==>\n\n  let canvas = document.querySelector('canvas');\n  const engine = new ARTGL.RenderEngine(canvas);\n\n  const scene = new ARTGL.Scene();\n\n  const geometry = new ARTGL.SphereGeometry();\n\n  const mesh = new ARTGL.Mesh();\n  const line = new ARTGL.Line();\n  const points = new ARTGL.Points();\n\n  mesh.geometry = geometry;\n  line.geometry = geometry;\n  points.geometry = geometry;\n\n  line.transform.position.x = -5;\n  points.transform.position.x = 5;\n\n  scene.root.addChild(mesh);\n  scene.root.addChild(line);\n  scene.root.addChild(points);\n\n  const camera = engine.camera as ARTGL.PerspectiveCamera;\n  camera.transform.position.set(0, 0, 15);\n  camera.lookAt(new Vector3(0,0,0))\n\n  function draw() {\n    engine.connectCamera();\n    engine.renderer.state.colorbuffer.setClearColor(new ARTGL.Vector4(0.9, 0.9, 0.9, 1.0))\n    engine.renderer.state.colorbuffer.clear()\n    engine.render(scene);\n  }\n\n  draw();\n\n\n  //==<\n\n  await testBridge.screenShotCompareElement(canvas, \"test\");\n\n\n  const interactor = new ARTGL.Interactor(canvas);\n  const orbitController = new ARTGL.OrbitController(camera as ARTGL.PerspectiveCamera);\n  orbitController.registerInteractor(interactor);\n\n  testBridge.framer.setFrame(() => {\n    orbitController.update();\n    draw();\n  })\n}\n","import testScene from './scene'\nimport testDrawPrimitive from './draw-primitives'\nimport { HeadlessTestBridge } from './test-bridge'\n\ntype ConstructorTypeOf<T> = new (...args: any[]) => T;\n\n// This should impl by node puppeteer, and exposed on headless window\n// declare function screenShotCompareElement(element: HTMLElement, goldenPath: string);\ndeclare global {\n  interface Window {\n    artglExamples: Example[],\n    HeadlessTestBridge: ConstructorTypeOf<HeadlessTestBridge>;\n    screenShotCompareElement(element: HTMLElement, goldenPath: string);\n  }\n}\n\ninterface Example{\n  name: string, \n  build: Function\n}\n\nexport const examples: Example[] = [\n  {\n    name: \"basic scene\",\n    build: testScene\n  },\n  {\n    name: \"primitive\",\n    build: testDrawPrimitive\n  },\n];\n\n\nwindow.artglExamples = examples;\nwindow.HeadlessTestBridge = HeadlessTestBridge\n\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport { examples } from \"../../example/contents/exports\";\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    showConfigPanel: false,\n    showScenePanel: false,\n    examples,\n    viewExample: \"\",\n  },\n  mutations: {\n\n  },\n  actions: {\n\n  }\n})\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-item-page.vue?vue&type=style&index=0&id=7335b2bb&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./example-item-page.vue?vue&type=style&index=0&id=7335b2bb&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-nav.vue?vue&type=style&index=0&id=f17af42a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-nav.vue?vue&type=style&index=0&id=f17af42a&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./line-hud-canvas.vue?vue&type=style&index=0&id=3fa939d0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./line-hud-canvas.vue?vue&type=style&index=0&id=3fa939d0&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./item.vue?vue&type=style&index=0&id=1e529480&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./item.vue?vue&type=style&index=0&id=1e529480&lang=scss&scoped=true&\""],"sourceRoot":""}